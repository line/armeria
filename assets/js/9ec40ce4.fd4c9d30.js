"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[9140],{28453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>s});var a=n(96540);const i={},t=a.createContext(i);function o(e){const r=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(t.Provider,{value:r},e.children)}},37773:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"1.20.0","title":"v1.20.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/1.20.0.mdx","sourceDirName":".","slug":"/1.20.0","permalink":"/release-notes/1.20.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/release-notes/1.20.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2022-10-05T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v1.20.1","permalink":"/release-notes/1.20.1"},"next":{"title":"v1.19.0","permalink":"/release-notes/1.19.0"}}');var i=n(74848),t=n(28453);const o={date:new Date("2022-10-05T00:00:00.000Z")},s="v1.20.0",c={},l=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83d\udcc3 Documentation",id:"-documentation",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function d(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.header,{children:[(0,i.jsx)(r.h1,{id:"v1200",children:"v1.20.0"}),(0,i.jsx)(r.p,{children:(0,i.jsx)(r.em,{children:"October 5, 2022"})})]}),"\n",(0,i.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["You can now handle a GraphQL error using ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/graphql/GraphqlErrorHandler.html",children:"GraphqlErrorHandler"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4435",children:"#4435"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:'GraphqlErrorHandler errorHandler = new GraphqlErrorHandler() {\n  @Override\n  public HttpResponse handle(ServiceRequestContext ctx, ExecutionInput input,\n                             ExecutionResult result, @Nullable Throwable cause) {\n    final List<GraphQLError> errors = result.getErrors();\n    if (errors.stream().map(GraphQLError::getMessage)\n              .anyMatch(m -> m.startsWith("Unauthorized"))) {\n      return HttpResponse.of(HttpStatus.UNAUTHORIZED);\n    }\n    ...\n  }\n};\nGraphqlService\n  .builder()\n  .schemaFile(...)\n  .runtimeWiring(...)\n  .errorHandler(errorHandler) // \ud83d\udc48\ud83d\udc48\ud83d\udc48\n  .build();\n'})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["You can now easily configure client-side TLS key and certificates to support mTLS via\n",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactoryBuilder.html#tls(java.io.File,java.io.File)",children:"ClientFactoryBuilder#tls(File,File)"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4410",children:"#4410"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"File keyCertChainFile = ...;\nFile keyFile = ...;\nClientFactory factory =\n  ClientFactory\n    .builder()\n    .tls(keyCertChainFile, keyFile)\n    .build();\nWebClient\n  .builder()\n  .factory(factory)\n  .build();\n"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["gRPC HTTP/JSON transcoding endpoint can now handle both the snake case and camel case query parameters\nusing ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/HttpJsonTranscodingOptions.html",children:"HttpJsonTranscodingOptions"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4428",children:"#4428"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"HttpJsonTranscodingOptions options =\n  HttpJsonTranscodingOptions\n    .builder()\n    // Try the original field name and camel case\n    // if it's not found via the original name.\n    .queryParamMatchRules(LOWER_CAMEL_CASE,\n                          ORIGINAL_FIELD)\n                          ...\n                          .build();\nGrpcService\n  .builder()\n  .enableHttpJsonTranscoding(options)\n  .build();\n"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["You can now use ",(0,i.jsx)(r.code,{children:"OutputStream"})," to write data to a ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," using\n",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#fromOutputStream(java.util.function.Consumer)",children:"StreamMessage#fromOutputStream(Consumer)"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4402",children:"#4402"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"StreamMessage.fromOutputStream(os -> {\n  // perform blocking operation\n  HttpData data0 = readDataFromBlockingDB(0);\n  os.write(data0);\n  HttpData data1 = readDataFromBlockingDB(1);\n  os.write(data1);\n  os.close();\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:["You can now convert an ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/AggregatedHttpRequest.html",children:"AggregatedHttpRequest"})," to an ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html",children:"HttpRequest"})," with new headers. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4441",children:"#4441"})]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:"AggregatedHttpRequest req = ...\nHttpRequest httpRequest = req.toHttpRequest(newHeaders);\n"})}),"\n"]}),"\n"]}),"\n","\n",(0,i.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"N/A"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"type://#",children:"GraphQlService"})," now respects the accept header correctly. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4451",children:"#4451"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," and ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/thrift/THttpService.html",children:"THttpService"})," no longer throw double subscription exceptions when\nthe request is aggregated in a decorator. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4449",children:"#4449"})]}),"\n",(0,i.jsxs)(r.li,{children:["The content-length header is automatically removed from ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseHeaders.html",children:"ResponseHeaders"})," for a server\nstreaming response in ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4460",children:"#4460"})]}),"\n",(0,i.jsxs)(r.li,{children:["You no longer see a ",(0,i.jsx)(r.code,{children:"NullPointerException"})," when using ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelectionStrategy.html#rampingUp()",children:"EndpointSelectionStrategy#rampingUp()"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4448",children:"#4448"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"})," no longer throw an exception when a protobuf message doesn't have any fields. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4436",children:"#4436"})]}),"\n",(0,i.jsxs)(r.li,{children:["You no longer see a 500 response when an empty multipart request is sent. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4432",children:"#4432"})]}),"\n",(0,i.jsxs)(r.li,{children:["The service name generated from a CGLIB-enhanced class no longer has a synthetic suffix in\n",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4430",children:"#4430"})]}),"\n",(0,i.jsxs)(r.li,{children:["Users can now use ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/protobuf/ProtobufRequestConverterFunctionProvider.html",children:"ProtobufRequestConverterFunctionProvider"})," without encountering a potential\n",(0,i.jsx)(r.code,{children:"ClassCastException"}),". ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4429",children:"#4429"})]}),"\n",(0,i.jsxs)(r.li,{children:["Fixed a regression where ",(0,i.jsx)(r.code,{children:"thrift0.9"})," is incompatible with Thrift 0.9.1 since Armeria 1.17.0. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4427",children:"#4427"})]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"enable-auto-injection"})," property is correctly added to the generated ",(0,i.jsx)(r.code,{children:"spring-configuration-metadata.json"}),"\nfile. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4425",children:"#4425"})]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-documentation",children:"\ud83d\udcc3 Documentation"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"N/A"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html#aggregateWithPooledObjects(io.netty.buffer.ByteBufAllocator)",children:"HttpRequest#aggregateWithPooledObjects(ByteBufAllocator)"})," and\n",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html#aggregateWithPooledObjects(io.netty.buffer.ByteBufAllocator)",children:"HttpResponse#aggregateWithPooledObjects(ByteBufAllocator)"})," are deprecated. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4449",children:"#4449"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Use ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html#aggregate(com.linecorp.armeria.common.AggregationOptions)",children:"HttpRequest#aggregate(AggregationOptions)"})," with\n",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/AggregationOptions.html#usePooledObjects(io.netty.buffer.ByteBufAllocator)",children:"AggregationOptions#usePooledObjects(ByteBufAllocator)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#httpJsonTranscodingErrorHandler(com.linecorp.armeria.server.grpc.UnframedGrpcErrorHandler)",children:"GrpcServiceBuilder#httpJsonTranscodingErrorHandler(UnframedGrpcErrorHandler)"})," is deprecated. ",(0,i.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4428",children:"#4428"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Use ",(0,i.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/HttpJsonTranscodingOptionsBuilder.html#errorHandler(com.linecorp.armeria.server.grpc.UnframedGrpcErrorHandler)",children:"HttpJsonTranscodingOptionsBuilder#errorHandler(UnframedGrpcErrorHandler)"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"N/A"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,i.jsx)(r.p,{children:"You can use Thrift 0.17 with Armeria."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Brave 5.13.11 \u2192 5.14.0"}),"\n",(0,i.jsx)(r.li,{children:"Dropwizard2 2.1.1 \u2192 2.1.2"}),"\n",(0,i.jsx)(r.li,{children:"GraphQL Java 19.0 \u2192 19.2"}),"\n",(0,i.jsx)(r.li,{children:"GraphQL Kotlin 6.2.2 \u2192 6.2.5"}),"\n",(0,i.jsx)(r.li,{children:"gRPC Java 1.49.0 \u2192 1.49.1"}),"\n",(0,i.jsx)(r.li,{children:"Kafka 3.2.1 \u2192 3.3.0"}),"\n",(0,i.jsx)(r.li,{children:"Kotlin 1.7.10 \u2192 1.7.20"}),"\n",(0,i.jsx)(r.li,{children:"Micrometer 1.9.3 \u2192 1.9.4"}),"\n",(0,i.jsxs)(r.li,{children:["Netty 4.1.79.Final \u2192 4.1.82.Final","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"io_uring 0.0.14.Final \u2192 0.0.15.Final"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:"Reactor 3.4.22 \u2192 3.4.23"}),"\n",(0,i.jsx)(r.li,{children:"Sangria GraphQL 3.2.0 \u2192 3.3.0"}),"\n",(0,i.jsx)(r.li,{children:"Scala 2.12.16 \u2192 2.12.17, 2.13.8 \u2192 2.13.9"}),"\n",(0,i.jsx)(r.li,{children:"Spring Boot 2.7.3 \u2192 2.7.4"}),"\n",(0,i.jsx)(r.li,{children:"Thrift 0.17.0 is added"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,i.jsx)(n,{usernames:["Bogyie","chungonn","heowc","ikhoon","injae-kim","jrhee17","ks-yim","minwoox","mscheong01","takezoe","tobias-","trustin"]})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);