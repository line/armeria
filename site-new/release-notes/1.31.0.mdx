---
date: 2024-11-13
---

# v1.31.0

## ğŸŒŸ New features

- **Dynamic TLS Configuration**: You can now update TLS configurations dynamically using [TlsProvider](type) #5033 #5228
  - You can create a [TlsProvider](type) which specifies [TlsKeyPair](type) dynamically.
    ```java
    // return a TlsKeyPair for host patterns
    TlsProvider tlsProvider = TlsProvider
      .builder()
      .keyPair("*.a.com", TlsKeyPair.of(...))
      .keyPair("*.b.com", TlsKeyPair.of(...))
      .build();

    // return a TlsKeyPair dynamically
    TlsProvider tlsProvider = hostname -> TlsKeyPair.of(...);
    ```
  - The [TlsProvider](type) can be used for both servers and clients.
    ```java
    // client-side
    ClientFactory
      .builder()
      .tlsProvider(tlsProvider);

    // server-side
    Server
      .builder()
      .tlsProvider(tlsProvider);
    ```
- **Access to Raw Request Path**: You can access the raw request path via [ServiceRequestContext#rawPath()](type). #5931 #5932
  - This can be useful when you need to get the original request path sent from the client, even if it's potentially insecure.
    ```java
    ServiceRequestContext ctx = ...;
    String rawPath = ctx.rawPath();
    // rawPath may contain unencoded, invalid or insecure characters.
    ```
- **Additional Static Factory Methods for ResponseEntity**: More static factory methods are added for [ResponseEntity](type). #5954
  ```java
  ResponseEntity<Object> response = ResponseEntity.of(200);
  ResponseEntity<String> response = ResponseEntity.of("Hello!");
  ```
- **Timeout Support for HttpRequest and HttpResponse**: You can specify [HttpRequest#timeout(Duration)](type) or [HttpResponse#timeout(Duration)](type) to set a timeout
  for an [HttpRequest](type) or [HttpResponse](type). #5744 #5761
  ```java
  HttpRequest
    .streaming(HttpMethod.GET, "/")
    .timeout(Duration.ofSeconds(1)) // timeout if there is a delay exceeding 1 second between each data chunk
  ```
- **Nacos Integration for Server Registration and Endpoint Retrieval**: You can now register your server to or retrieve [Endpoint](typeplural) from
a [Nacos](https://nacos.io/) registry server. #5365 #5409
  - Use [NacosUpdatingListener](type) to register the [Server](typeplural) to [Nacos](https://nacos.io/):
  ```java
  Server server = ...;
  server.addListener(
    NacosUpdatingListener
      .builder(nacosUri, "my-service")
      ...
      .build());
  ```
  - Use [NacosEndpointGroup](type) for clients:
  ```java
  EndpointGroup group = NacosEndpointGroup.of(nacosUri, "my-service");
  WebClient client = WebClient.of(SessionProtocol.HTTP, group);
  ```

{/* truncate */}

## ğŸ“ˆ Improvements

- [XdsEndpointGroup](type) now supports `disable_active_health_check`. #5879

## ğŸ› ï¸ Bug fixes

- DNS resolver now correctly adds search domains for hostnames with trailing dots. #5963
- CORS headers for failed requests are now correctly set even when a custom [ServerErrorHandler](type) is configured. #5493 #5939
- Fixed a bug where [AsyncServerInterceptor](type) is incompatible with the OpenTelemetry gRPC agent. #5937 #5938
- The GraalVM native image metadata has been updated to reflect recent code changes. #5946
- Spring Actuator correctly collects metrics when using Spring WebFlux integration. #5882 #5884

## â˜¢ï¸ Breaking changes

- ABI compatibility of [ResponseEntity#of(ResponseHeaders)](type) has been broken. #5954

## â›“ Dependencies

- Brotli4j 1.16.0 â†’ 1.17.0
- java-control-plane 1.0.45 â†’ 1.0.46
- Eureka 2.0.3 â†’ 2.0.4
- GraphQL Kotlin 7.1.4 â†’ 8.2.1
- Java gRPC 1.65.1 â†’ 1.68.1
- Jackson 2.17.2 â†’ 2.18.1
- Jetty
  - 11.0.22 â†’ 11.0.24
  - 12.0.12 â†’ 12.0.14
- Kotlin 3.8.0 â†’ 3.8.1
- Kotlin coroutines 1.8.1 â†’ 1.9.0
- Fabric8 Kubernetes Client 6.13.1 â†’ 6.13.4
- Micrometer 1.13.2 â†’ 1.13.6
- Micrometer Tracing 1.3.2 â†’ 1.3.5
- Netty 4.1.112.Final â†’ 4.1.115.Final
- prometheus 1.3.1 â†’ 1.3.2
- Protobuf 3.25.1 â†’ 3.25.5
- protobuf-jackson 2.5.0 â†’ 2.6.0
- Reactor 3.6.8 â†’ 3.6.11
- RXJava 3.1.8 â†’ 3.1.9
- Sangria 4.1.1 â†’ 4.2.2
- Scala
  - 2.12.19 â†’ 2.12.20
  - 2.13.14 â†’ 2.13.15
  - 3.4.2 â†’ 3.6.1
- Spring 6.1.11 â†’ 6.1.14
- Spring Boot 3.3.2 â†’ 3.3.5
- Tomcat
  - 9.0.91 â†’ 9.0.96
  - 10.1.26 â†’ 10.1.31

## ğŸ™‡ Thank you

<ThankYou usernames={[
  'Bue-von-hon',
  'JiwonKKang',
  'KarboniteKream',
  'KonaEspresso94',
  'Mina-1316',
  'be-hase',
  'blue-hope',
  'chickenchickenlove',
  'friscoMad',
  'ikhoon',
  'jrhee17',
  'kabigon-sung',
  'minwoox',
  'my4-dev',
  'roderick675',
  'sjy982',
  'trustin',
  'yzfeng2020'
]} />