"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[9818],{10765:(e,r,t)=>{t.d(r,{A:()=>s});const s=t.p+"assets/images/tutorial_test_run-080bde32521ba562520982e01c554d36.png"},28076:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tutorials/rest/create-server","title":"Creating a server","description":"As the first step of the tutorial, we create a server instance and run a dummy service to check that the server and service are launched.","source":"@site/src/content/docs/tutorials/rest/01-create-server.mdx","sourceDirName":"tutorials/rest","slug":"/tutorials/rest/create-server","permalink":"/docs/tutorials/rest/create-server","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/docs/tutorials/rest/01-create-server.mdx","tags":[{"inline":true,"label":"server","permalink":"/docs/tags/server"}],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"1. Create a server","type":"step","tags":["server"],"level":"basic"},"sidebar":"docsSidebar","previous":{"title":"REST tutorial introduction","permalink":"/docs/tutorials/rest/"},"next":{"title":"2. Prepare a data object","permalink":"/docs/tutorials/rest/prepare-data-object"}}');var a=t(74848),n=t(28453);const i={sidebar_label:"1. Create a server",type:"step",tags:["server"],level:"basic"},c="Creating a server",o={},l=[{value:"What you need",id:"what-you-need",level:2},{value:"1. Create a server instance",id:"1-create-a-server-instance",level:2},{value:"2. Start the server",id:"2-start-the-server",level:2},{value:"3. Run the server and service",id:"3-run-the-server-and-service",level:2},{value:"What&#39;s next",id:"whats-next",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components},{TutorialSteps:s}=r;return s||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("TutorialSteps",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"creating-a-server",children:"Creating a server"})}),"\n",(0,a.jsxs)(r.p,{children:["As the first step of the tutorial, we create a server instance and run a dummy service to check that the server and service are launched.\nWe'll use Armeria's ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html",children:"ServerBuilder"})," for this task."]}),"\n",(0,a.jsx)(s,{current:1}),"\n",(0,a.jsx)(r.h2,{id:"what-you-need",children:"What you need"}),"\n",(0,a.jsxs)(r.p,{children:["No preparation is required for this step. Do check that you've prepared the ",(0,a.jsx)(r.a,{href:"/docs/tutorials/rest#prerequisites",children:"prerequisites"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"1-create-a-server-instance",children:"1. Create a server instance"}),"\n",(0,a.jsxs)(r.p,{children:["Let's create a server instance using Armeria's ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html",children:"ServerBuilder"}),":"]}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsxs)(r.li,{children:["Create a ",(0,a.jsx)(r.code,{children:"Main"})," class. You can see the full version of the file ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria-examples/blob/main/tutorials/rest-api-annotated-service/src/main/java/example/armeria/server/blog/Main.java",children:"here"}),"."]}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",metastring:'title="Main.java"',children:"package example.armeria.server.blog;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic final class Main {\n  private static final Logger logger = LoggerFactory.getLogger(Main.class);\n}\n"})}),"\n",(0,a.jsxs)(r.ol,{start:"2",children:["\n",(0,a.jsxs)(r.li,{children:["In the ",(0,a.jsx)(r.code,{children:"Main"})," class, add the method, ",(0,a.jsx)(r.code,{children:"newServer()"}),". Since a server instance requires at least one service to run with, let's add a dummy service returning ",(0,a.jsx)(r.code,{children:'"Hello, Armeria!"'})," for now."]}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",metastring:'title="Main.java" {10}',children:'import com.linecorp.armeria.common.HttpResponse;\nimport com.linecorp.armeria.server.Server;\nimport com.linecorp.armeria.server.ServerBuilder;\n\npublic final class Main {\n  ...\n  static Server newServer(int port) {\n    ServerBuilder sb = Server.builder();\n    return sb.http(port)\n             .service("/", (ctx, req) -> HttpResponse.of("Hello, Armeria!"))\n             .build();\n  }\n  ...\n'})}),"\n",(0,a.jsxs)(r.p,{children:["To learn how to add the actual blog service, see ",(0,a.jsx)(r.a,{href:"/docs/tutorials/rest/add-services-to-server",children:"Step 3. Add services to a server"}),"."]}),"\n",(0,a.jsx)(r.h2,{id:"2-start-the-server",children:"2. Start the server"}),"\n",(0,a.jsx)(r.p,{children:"Now that we have a server, have a go at starting the server with the dummy service."}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsxs)(r.li,{children:["In the ",(0,a.jsx)(r.code,{children:"Main"})," class, add the ",(0,a.jsx)(r.code,{children:"main()"})," method."]}),"\n",(0,a.jsxs)(r.li,{children:["Call the ",(0,a.jsx)(r.code,{children:"newServer()"})," method we implemented in step 2. Let's set the port to ",(0,a.jsx)(r.code,{children:"8080"})," as in line 2."]}),"\n",(0,a.jsx)(r.li,{children:"Start the server as in line 9."}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",metastring:'title="Main.java" {2,9} showLineNumbers',children:'public static void main(String[] args) throws Exception {\n  Server server = newServer(8080);\n\n  server.closeOnJvmShutdown();\n\n  server.start().join();\n\n  logger.info("Server has been started. Serving dummy service at http://127.0.0.1:{}",\n              server.activeLocalPort());\n}\n'})}),"\n",(0,a.jsx)(r.h2,{id:"3-run-the-server-and-service",children:"3. Run the server and service"}),"\n",(0,a.jsxs)(r.p,{children:["As the last step, launch the server and run the service to check if you're all set to go. To run the server, run the ",(0,a.jsx)(r.code,{children:"main()"})," method in your IDE. The server and service are launched successfully if you see the following message."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:" Server has been started. Serving dummy service at http://127.0.0.1:8080\n"})}),"\n",(0,a.jsxs)(r.p,{children:["Open the URL ",(0,a.jsx)(r.code,{children:"http://127.0.0.1:8080"})," on a web browser and check the message ",(0,a.jsx)(r.code,{children:"Hello, Armeria!"})," is displayed in the page."]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.img,{src:t(10765).A+"",width:"795",height:"162"})}),"\n",(0,a.jsx)(r.h2,{id:"whats-next",children:"What's next"}),"\n",(0,a.jsx)(r.p,{children:"In this step, you've built a server, added a dummy service and launched a server."}),"\n",(0,a.jsxs)(r.p,{children:["Next, at ",(0,a.jsx)(r.a,{href:"/docs/tutorials/rest/prepare-data-object",children:"Step 2. Prepare a data object"}),", you'll write a data object to specify and contain blog post information."]}),"\n",(0,a.jsx)(s,{current:1})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>c});var s=t(96540);const a={},n=s.createContext(a);function i(e){const r=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(n.Provider,{value:r},e.children)}}}]);