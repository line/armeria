"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[4472],{28453:(e,r,i)=>{i.d(r,{R:()=>s,x:()=>c});var n=i(96540);const t={},a=n.createContext(t);function s(e){const r=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),n.createElement(a.Provider,{value:r},e.children)}},54606:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"0.99.8","title":"v0.99.8","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/0.99.8.mdx","sourceDirName":".","slug":"/0.99.8","permalink":"/release-notes/0.99.8","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/release-notes/0.99.8.mdx","tags":[],"version":"current","frontMatter":{"date":"2020-07-07T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.99.9","permalink":"/release-notes/0.99.9"},"next":{"title":"v0.99.7","permalink":"/release-notes/0.99.7"}}');var t=i(74848),a=i(28453);const s={date:new Date("2020-07-07T00:00:00.000Z")},c="v0.99.8",o={},l=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function d(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{ThankYou:i}=r;return i||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.header,{children:[(0,t.jsx)(r.h1,{id:"v0998",children:"v0.99.8"}),(0,t.jsx)(r.p,{children:(0,t.jsx)(r.em,{children:"July 7, 2020"})})]}),"\n",(0,t.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["You can now use ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html",children:"ClientRequestContext"})," to build a complex ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRule.html",children:"RetryRule"})," and\n",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRule.html",children:"CircuitBreakerRule"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2851",children:"#2851"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"RetryRuleWithContent.<RpcResponse>builder()\n                    .onServerErrorStatus()\n                     // Now it's the BiPredicate that takes ctx as well.\n                    .onException((ctx, ex) -> {\n                        RpcRequest request = ctx.rpcRequest();\n                        if (request != null &&\n                            !safeMethods.contains(request.method())) {\n                            return isRetryableException(throwable);\n                        } else {\n                            return false;\n                        }\n                    })\n                    .thenBackoff(backoff);\n"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["You can now run the gRPC server/client stubs generated by ScalaPB with Armeria. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2719",children:"#2719"})]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Please refer to the fully working ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/tree/main/examples/grpc-scala",children:"example"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["You can now parse a response trailers from a response body for gRPC-Web using\n",(0,t.jsx)(r.a,{href:"type://#",children:"GrpcWebUtil#parseTrailers(HttpData)"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2848",children:"#2848"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"Clients.builder(...)\n       .decorator(RetryingClient.newDecorator(\n               RetryRuleWithContent.onResponse(response -> {\n                   return response.aggregate().thenApply(aggregated -> {\n                      HttpHeaders trailers =\n                              GrpcWebUtil.parseTrailers(aggregated.content());\n                      // Retry if the 'grpc-status' is not equal to 0.\n                      return trailers != null &&\n                             trailers.getInt(GrpcHeaderNames.GRPC_STATUS) != 0;\n                  });\n              })))\n      .build(MyGrpcStub.class);\n"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["You can now access the metadata of ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html",children:"HttpFile"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html",children:"FileService"})," asynchronously. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/1668",children:"#1668"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2845",children:"#2845"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"HttpFile httpFile = HttpFile.of(...);\nCompletableFuture<HttpFileAttributes> attrs =\n        httpFile.readAttributes(CommonPools.blockingTaskExecutor());\nCompletableFuture<ResponseHeaders> headers =\n        httpFile.readHeaders(CommonPools.blockingTaskExecutor());\n"})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["You can now easily customize ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html",children:"MeterIdPrefixFunction"})," using\n",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html#andThen(com.linecorp.armeria.common.metric.MeterIdPrefixFunctionCustomizer)",children:"MeterIdPrefixFunction#andThen(MeterIdPrefixFunctionCustomizer)"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2839",children:"#2839"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'MeterIdPrefixFunction\n        .ofDefault("hoge")\n        .andThen((registry, log, id) -> id.withTags(\n                "grpc-status", log.responseTrailers().get("grpc-status")));\n'})}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["Both synchronous and asynchronous APIs to select an ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"})," are added to\n",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelector.html",children:"EndpointSelector"})," and thus ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointGroup.html",children:"EndpointGroup"})," which is a sub-interface. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/1910",children:"#1910"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2837",children:"#2837"})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"ClientRequestContext ctx = ...\nEndpointGroup group = ...\n// synchronous selection!\nEndpoint endpoint = group.selectNow(ctx);\n// asynchronous selection!\nCompletableFuture<Endpoint> future =\n        group.select(ctx, ctx.eventLoop(), 1000 /* timeout */ );\n"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Thanks to this change, you can now avoid the ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EmptyEndpointGroupException.html",children:"EmptyEndpointGroupException"})," at least\nfor the case where the ",(0,t.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"})," disappear temporarily."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["You can now get the snapshot status of circuit breakers from monitoring system. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2841",children:"#2841"})]}),"\n"]}),"\n"]}),"\n","\n",(0,t.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["You can now schedule a request timeout in nanoseconds. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2864",children:"#2864"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#setRequestTimeout(com.linecorp.armeria.common.util.TimeoutMode,java.time.Duration)",children:"ServiceRequestContext#setRequestTimeout(TimeoutMode,Duration)"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#setResponseTimeout(com.linecorp.armeria.common.util.TimeoutMode,java.time.Duration)",children:"ClientRequestContext#setResponseTimeout(TimeoutMode,Duration)"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["You can now see the error message by ",(0,t.jsx)(r.code,{children:"ResourceLeakDetector"})," if the ",(0,t.jsx)(r.code,{children:"DefaultClientFactory"})," is not closed\nproperly. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2847",children:"#2847"})]}),"\n",(0,t.jsxs)(r.li,{children:["The initial connection latency is lowered by giving up hopeless HTTP/1.1 connection early when\nHTTP/2 upgrade request fails. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2852",children:"#2852"})]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Armeria server does not convert the ",(0,t.jsx)(r.code,{children:"Host"})," header to ",(0,t.jsx)(r.code,{children:":authority"})," header anymore. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2846",children:"#2846"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2850",children:"#2850"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestHeaders.html#authority()",children:"RequestHeaders#authority()"})," looks into ",(0,t.jsx)(r.code,{children:"Host"})," header if ",(0,t.jsx)(r.code,{children:":authority"})," header is missing."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html",children:"FileService"})," is not blocked by ",(0,t.jsx)(r.code,{children:"ClassLoader"})," lock anymore. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/1668",children:"#1668"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2845",children:"#2845"})]}),"\n",(0,t.jsxs)(r.li,{children:["You can retry when ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/DnsTimeoutException.html",children:"DnsTimeoutException"})," is raised using ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRule.html#onUnprocessed()",children:"RetryRule#onUnprocessed()"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2836",children:"#2836"})]}),"\n",(0,t.jsxs)(r.li,{children:["You no longer see ",(0,t.jsx)(r.code,{children:"Http2Exception: failed to consume a HEADERS frame"})," error. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2832",children:"#2832"})]}),"\n",(0,t.jsxs)(r.li,{children:["You no longer see ",(0,t.jsx)(r.code,{children:"You tried to set the content preview twice"})," warning unless\nyou really did apply content previewing decorator twice. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2830",children:"#2830"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2832",children:"#2832"})]}),"\n",(0,t.jsxs)(r.li,{children:["A non-base ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html",children:"WebClient"})," respects the user defined scheme correctly. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2835",children:"#2835"})]}),"\n",(0,t.jsxs)(r.li,{children:["The specified port when building ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/eureka/EurekaUpdatingListener.html",children:"EurekaUpdatingListener"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/zookeeper/ZooKeeperUpdatingListener.html",children:"ZooKeeperUpdatingListener"}),"\nis used in the registration information of an Armeria server. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2826",children:"#2826"})]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["All Spring registration beans are deprecated. Use ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/spring/ArmeriaServerConfigurator.html",children:"ArmeriaServerConfigurator"})," and\n",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/spring/DocServiceConfigurator.html",children:"DocServiceConfigurator"})," instead. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2787",children:"#2787"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2838",children:"#2838"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Deprecated beans: ",(0,t.jsx)(r.code,{children:"HttpServiceRegistrationBean"}),", ",(0,t.jsx)(r.code,{children:"AnnotatedServiceRegistrationBean"}),",\n",(0,t.jsx)(r.code,{children:"GrpcServiceRegistrationBean"})," and ",(0,t.jsx)(r.code,{children:"ThriftServiceRegistrationBean"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"MeterIdPrefixFunctionFactory"})," has been deprecated in favor of ",(0,t.jsx)(r.a,{href:"type://#",children:"RequestLog#serviceName()"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2780",children:"#2780"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2820",children:"#2820"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"executor()"}),", ",(0,t.jsx)(r.code,{children:"contextAwareExecutor()"})," and ",(0,t.jsx)(r.code,{children:"contextAwareEventLoop()"})," methods in\n",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html",children:"RequestContext"})," are deprecated. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2834",children:"#2834"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"on*(Predicate)"})," methods in the followings classes are deprecated. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2851",children:"#2851"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRule.html",children:"RetryRule"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRuleBuilder.html",children:"RetryRuleBuilder"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRuleWithContent.html",children:"RetryRuleWithContent"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRuleWithContentBuilder.html",children:"RetryRuleWithContentBuilder"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRule.html",children:"CircuitBreakerRule"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRuleBuilder.html",children:"CircuitBreakerRuleBuilder"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRuleWithContent.html",children:"CircuitBreakerRuleWithContent"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRuleWithContentBuilder.html",children:"CircuitBreakerRuleWithContentBuilder"})]}),"\n",(0,t.jsxs)(r.li,{children:["Use ",(0,t.jsx)(r.code,{children:"on*(BiPredicate)"})," methods instead."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"RequestLogBuilder.defer*Content*()"})," and ",(0,t.jsx)(r.code,{children:"isDefer*Content*Set()"})," have been deprecated in favor of\n",(0,t.jsx)(r.code,{children:"defer(RequestLogProperty)"})," and ",(0,t.jsx)(r.code,{children:"isDeferred(RequestLogProperty)"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2832",children:"#2832"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"MeterIdPrefixFunction.andThen(BiFunction<MeterRegistry, MeterIdPrefix, MeterIdPrefix>"})," is deprecated. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2839",children:"#2839"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"UnprocessedRequestException(Throwable)"})," constructor is deprecated.\nUse ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/UnprocessedRequestException.html#of(java.lang.Throwable)",children:"UnprocessedRequestException#of(Throwable)"})," instead. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2836",children:"#2836"})]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The names of various artifacts are changed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2676",children:"#2676"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2677",children:"#2677"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2829",children:"#2829"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2843",children:"#2843"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-dropwizard"})," is now ",(0,t.jsx)(r.code,{children:"armeria-dropwizard2"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-jetty"})," is now ",(0,t.jsx)(r.code,{children:"armeria-jetty9"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-rxjava"})," is now ",(0,t.jsx)(r.code,{children:"armeria-rxjava3"}),".","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"rxjava"})," package is renamed to ",(0,t.jsx)(r.code,{children:"rxjava3"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-spring-boot-actuator-autoconfigure"})," is now ",(0,t.jsx)(r.code,{children:"armeria-spring-boot2-actuator-autoconfigure"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-spring-boot-actuator-starter"})," is now ",(0,t.jsx)(r.code,{children:"armeria-spring-boot2-actuator-starter"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-spring-boot-autoconfigure"})," is now ",(0,t.jsx)(r.code,{children:"armeria-spring-boot2-autoconfigure"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-spring-boot-starter"})," is now ",(0,t.jsx)(r.code,{children:"armeria-spring-boot2-starter"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-spring-boot-webflux-autoconfigure"})," is now ",(0,t.jsx)(r.code,{children:"armeria-spring-boot2-webflux-autoconfigure"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-spring-boot-webflux-starter"})," is now ",(0,t.jsx)(r.code,{children:"armeria-spring-boot2-webflux-starter"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-testing-common"})," has been removed."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-testing-junit4"})," is now ",(0,t.jsx)(r.code,{children:"armeria-junit4"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-testing-junit"})," is now ",(0,t.jsx)(r.code,{children:"armeria-junit5"}),".","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"junit"})," package is renamed to ",(0,t.jsx)(r.code,{children:"junit5"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-thrift"})," is now ",(0,t.jsx)(r.code,{children:"armeria-thrift0.13"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-tomcat"})," is now ",(0,t.jsx)(r.code,{children:"armeria-tomcat9"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"armeria-zookeeper"})," is now ",(0,t.jsx)(r.code,{children:"armeria-zookeeper3"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html#eventLoop()",children:"RequestContext#eventLoop()"})," now returns ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ContextAwareEventLoop.html",children:"ContextAwareEventLoop"})," which always set the\n",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html",children:"RequestContext"})," before executing any submitted tasks. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2629",children:"#2629"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2834",children:"#2834"})]}),"\n",(0,t.jsxs)(r.li,{children:["The default logging level for successful requests and response has been changed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2696",children:"#2696"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2855",children:"#2855"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"INFO"})," to ",(0,t.jsx)(r.code,{children:"DEBUG"})," for ",(0,t.jsx)(r.code,{children:"Logging{Client,Service}.newDecorator()"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"TRACE"})," to ",(0,t.jsx)(r.code,{children:"DEBUG"})," for ",(0,t.jsx)(r.code,{children:"Logging{Client,Service}Builder"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["The APIs of ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html",children:"HttpFile"})," and ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpVfs.html",children:"HttpVfs"})," have been changed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/1668",children:"#1668"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2845",children:"#2845"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2861",children:"#2861"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/AggregatedHttpFile.html",children:"AggregatedHttpFile"})," does not extend ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html",children:"HttpFile"})," anymore. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2861",children:"#2861"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://#",children:"AbstractHttpFile#headers()"})," is now ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/AbstractHttpFile.html#additionalHeaders()",children:"AbstractHttpFile#additionalHeaders()"}),". ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2861",children:"#2861"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelector.html",children:"EndpointSelector"})," API has been changed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2837",children:"#2837"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/1910",children:"#1910"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"It is not a functional interface anymore."}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"select()"})," has been renamed to ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelector.html#selectNow(com.linecorp.armeria.client.ClientRequestContext)",children:"EndpointSelector#selectNow(ClientRequestContext)"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:["An asynchronous ",(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelector.html#select(com.linecorp.armeria.client.ClientRequestContext,java.util.concurrent.ScheduledExecutorService,long)",children:"EndpointSelector#select(ClientRequestContext,ScheduledExecutorService,long)"}),"\nhas been added."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/UserClient.html",children:"UserClient"})," API has been changed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2837",children:"#2837"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Its constructor requires more parameters."}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"execute()"})," requires less parameters."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"StreamMessage.drainAll()"})," and its variants have been removed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2782",children:"#2782"})," ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2827",children:"#2827"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["They are only used for unit tests and you can use ",(0,t.jsx)(r.code,{children:"reactor.test.StepVerifier"})," instead."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"UnprocessedRequestException(String, Throwable)"})," constructor has been removed without replacement. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2836",children:"#2836"})]}),"\n",(0,t.jsxs)(r.li,{children:["Deprecated timeout APIs in ",(0,t.jsx)(r.code,{children:"{Service,Client}RequestContext"})," have been removed. ",(0,t.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2864",children:"#2864"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"extend{Request,Response}TimeoutMillis(long)"})," and ",(0,t.jsx)(r.code,{children:"extend{Request,Response}Timeout(Duration)"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"set{Request,Response}TimeoutAfterMillis(long)"})," and ",(0,t.jsx)(r.code,{children:"set{Request,Response}TimeoutAfter(Duration)"})]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"set{Request,Response}TimeoutAtMillis(long)"})," and ",(0,t.jsx)(r.code,{children:"set{Request,Response}TimeoutAt(Duration)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"gRPC-Java 1.30.1 \u2192 1.30.2"}),"\n",(0,t.jsx)(r.li,{children:"Jackson 2.11.0 \u2192 2.11.1"}),"\n",(0,t.jsx)(r.li,{children:"Kafka 1.1.1 \u2192 2.5.0"}),"\n",(0,t.jsx)(r.li,{children:"Micrometer 1.5.1 \u2192 1.5.2"}),"\n",(0,t.jsx)(r.li,{children:"Reactor 3.3.6 \u2192 3.3.7"}),"\n",(0,t.jsxs)(r.li,{children:["Shaded dependencies","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Caffeine 2.8.4 \u2192 2.8.5"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["Examples:","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Dagger 2.28 \u2192 2.28.1"}),"\n",(0,t.jsx)(r.li,{children:"monix_reactive 3.2.2"}),"\n",(0,t.jsx)(r.li,{children:"ScalaPB 0.10.6"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["Build:","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Checkstyle 8.33 \u2192 8.34"}),"\n",(0,t.jsx)(r.li,{children:"Eureka 1.9.23 \u2192 1.9.25"}),"\n",(0,t.jsx)(r.li,{children:"Finagle ServerSets 20.5.0 \u2192 20.6.0"}),"\n",(0,t.jsx)(r.li,{children:"Gradle 6.5 \u2192 6.5.1"}),"\n",(0,t.jsx)(r.li,{children:"gRPC-Kotlin 0.1.3 \u2192 0.1.4"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,t.jsx)(i,{usernames:["anuraaga","gary-lo","heowc","hexoul","ikhoon","jongmin92","minwoox","okue","tobias-","trustin"]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);