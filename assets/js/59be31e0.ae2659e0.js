"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[2409],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},82078:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"0.99.0","title":"v0.99.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/0.99.0.mdx","sourceDirName":".","slug":"/0.99.0","permalink":"/release-notes/0.99.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/0.99.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2020-03-30T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.99.1","permalink":"/release-notes/0.99.1"},"next":{"title":"v0.98.7","permalink":"/release-notes/0.98.7"}}');var r=s(74848),t=s(28453);const l={date:new Date("2020-03-30T00:00:00.000Z")},a="v0.99.0",o={},c=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.header,{children:[(0,r.jsx)(n.h1,{id:"v0990",children:"v0.99.0"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"March 30, 2020"})})]}),"\n",(0,r.jsx)(n.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now make your client connect via a SOCKS 4, SOCKS 5 or HTTP CONNECT proxy server. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2321",children:"#2321"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2496",children:"#2496"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"ClientFactory.builder()\n             .proxyConfig(ProxyConfig.socks4(socksProxyServer.address()))\n             .build();\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now configure to send ",(0,r.jsx)(n.code,{children:"PING"})," on idle HTTP/2 connections. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1263",children:"#1263"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2409",children:"#2409"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"ClientFactory.builder()\n             .http2PingTimeoutMillis(3000)\n             .build();\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now make an alias for the pre-defined MDC key when using ",(0,r.jsx)(n.code,{children:"RequestContextExportingAppender"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2512",children:"#2512"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2531",children:"#2531"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<export>request_id=req.id</export> \x3c!-- request_id is an alias for the built-in property. --\x3e\n<export>my_foo_bar=attr:com.example.Foo#ATTR_BAR</export>    \x3c!-- my_foo_bar is an alias. --\x3e\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Please check out ",(0,r.jsx)(n.a,{href:"http://armeria.dev/docs/advanced-logging#customizing-mdc-keys",children:"http://armeria.dev/docs/advanced-logging#customizing-mdc-keys"})," for more information."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now set an example path and queries for ",(0,r.jsx)(n.code,{children:"DocService"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2195",children:"#2195"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2546",children:"#2546"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now customize the default log name of a service. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2626",children:"#2626"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'sb.route().addRoute(...).defaultLogName("name").build(service);\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now access a parent log from a child log using ",(0,r.jsx)(n.code,{children:"RequestLogAccess.parent()"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2599",children:"#2599"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["gRPC client now supports gRPC ",(0,r.jsx)(n.code,{children:"CallCredentials"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2619",children:"#2619"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2622",children:"#2622"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now send customized responses from ",(0,r.jsx)(n.code,{children:"ThrottlingService"})," using ",(0,r.jsx)(n.code,{children:"ThrottlingAcceptHandler"})," and ",(0,r.jsx)(n.code,{children:"ThrottlingRejectHandler"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2482",children:"#2482"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2503",children:"#2503"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now use advanced throttling algorithm based on Token-Bucket rate-limiting and Bucket4j library. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2566",children:"#2566"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now create your own storage to store ",(0,r.jsx)(n.code,{children:"RequestContext"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2514",children:"#2514"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2610",children:"#2610"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// You should implement `RequestContextStorageProvider` and use SPI to return the `RequestContextStorage`.\npublic class CustomizedStorageProvider implements RequestContextStorageProvider {\n    @Override\n    public RequestContextStorage newStorage() {\n        return new CustomizedStorage();\n    }\n}\n"})}),"\n"]}),"\n"]}),"\n","\n",(0,r.jsx)(n.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now set timeout using ",(0,r.jsx)(n.code,{children:"TimeoutMode."})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2535",children:"#2535"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2571",children:"#2571"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// Before\nctx.extendResponseTimeoutMillis(10000);\nctx.setResponseTimeoutAfterMillis(10000);\n\n// After\nctx.setResponseTimeoutMillis(TimeoutMode.EXTEND, 10000);\nctx.setResponseTimeoutMillis(TimeoutMode.SET_FROM_NOW, 10000);\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"set(Request|Response)Timeout"})," is now undeprecated."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["DNS resolution is timed out after ",(0,r.jsx)(n.code,{children:"queryTimeoutMillis"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2623",children:"#2623"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now return ",(0,r.jsx)(n.code,{children:"Single<HttpResponse>"})," or ",(0,r.jsx)(n.code,{children:"Maybe<HttpResponse>"})," in an annotated service. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2624",children:"#2624"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now register and monitor Reactor ",(0,r.jsx)(n.code,{children:"Scheduler"})," with Prometheus in Armeria Server. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2612",children:"#2612"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RequestLog.name"})," and some other properties are copied to the child log in ",(0,r.jsx)(n.code,{children:"RetyringClient"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2551",children:"#2551"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2560",children:"#2560"})]}),"\n",(0,r.jsxs)(n.li,{children:["You no longer see ",(0,r.jsx)(n.code,{children:"ClosedStreamException"})," due to the stream creation reversal. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2597",children:"#2597"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"IllegalStateException"})," is not raised anymore while building a WebFlux response. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2613",children:"#2613"})]}),"\n",(0,r.jsxs)(n.li,{children:["Annotated service's log name is always set. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2626",children:"#2626"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Deprecated ",(0,r.jsx)(n.code,{children:"ZooKeeperUpdatingListener.nodeValueCodec()"})," in favor of ",(0,r.jsx)(n.code,{children:"ZooKeeperUpdatingListener.codec()"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2552",children:"#2552"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Most of the deprecated APIs are gone. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2543",children:"#2543"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If you have trouble finding APIs to replace, please upgrade to 0.98.7 first and use your IDE's advanced feature to search deprecated APIs. Then, you can easily upgrade to 0.99.0."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"armeria-dropwizard"})," is now for Dropwizard 2. If you want to use Dropwizard ",(0,r.jsx)(n.code,{children:"1.3.x"}),", use ",(0,r.jsx)(n.code,{children:"armeria-dropwizard1"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2556",children:"#2556"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"armeria-rxjava"})," is now for RxJava 3. If you want to use RxJava 2, use ",(0,r.jsx)(n.code,{children:"armeria-rxjava2"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2378",children:"#2378"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2501",children:"#2501"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ClientBuilder.path(path)"})," is now gone. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2525",children:"#2525"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2538",children:"#2538"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you want to specify the path other than ",(0,r.jsx)(n.code,{children:"/"}),", you should specify it when creating ",(0,r.jsx)(n.code,{children:"ClientBuilder"}),".","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// before\nClients.builer(SessionProtocol.HTTP, Endpoint.of("127.0.0.1"))\n       .path("/foo");\n// after\nClients.builer(SessionProtocol.HTTP, Endpoint.of("127.0.0.1"), "/foo");\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ClosedSessionException"})," now extends ",(0,r.jsx)(n.code,{children:"ClosedStreamException"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2596",children:"#2596"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2616",children:"#2616"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"AuthSuccessHandler<HttpRequest, HttpResponse>"})," and ",(0,r.jsx)(n.code,{children:"AuthFailureHandler<HttpRequest, HttpResponse>"})," now don't have type parameters."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The meter name ",(0,r.jsx)(n.code,{children:"armeriaBlockingTaskExecutor"})," is now ",(0,r.jsx)(n.code,{children:"blockingTaskExecutor"})," with the prefix ",(0,r.jsx)(n.code,{children:"armeria.executor"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"RequestContext.set*TimeoutAfter*()"})," or ",(0,r.jsx)(n.code,{children:"extend*Timeout*()"})," methods have been removed. Call ",(0,r.jsx)(n.code,{children:"set*Timeout*()"})," with a ",(0,r.jsx)(n.code,{children:"TimeoutMode"})," specified instead."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Brave 5.9.5 -> 5.10.2"}),"\n",(0,r.jsx)(n.li,{children:"bucket4j-core 4.10.0"}),"\n",(0,r.jsx)(n.li,{children:"Curator 4.2.0 -> 4.3.0"}),"\n",(0,r.jsx)(n.li,{children:"java-jwt 3.10.0 -> 3.10.1"}),"\n",(0,r.jsx)(n.li,{children:"jetty-alpn-agent 2.0.9 -> 2.10.0"}),"\n",(0,r.jsx)(n.li,{children:"Micrometer 1.3.5 -> 1.4.0"}),"\n",(0,r.jsxs)(n.li,{children:["Netty 4.1.37.Final -> 4.1.48.Final","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"netty-tcnative-boringssl-static 2.0.29.Final -> 2.0.30.Final"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Opensaml 3.4.3 -> 3.4.5"}),"\n",(0,r.jsx)(n.li,{children:"Reactor 3.3.3.RELEASE -> 3.3.4.RELEASE"}),"\n",(0,r.jsx)(n.li,{children:"Retrofit 2.7.2 -> 2.8.0"}),"\n",(0,r.jsx)(n.li,{children:"RxJava 3.0.0 -> 3.0.1"}),"\n",(0,r.jsxs)(n.li,{children:["Spring Boot 2.2.4 -> 2.2.5","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Spring2.1 2.1.12.RELEASE -> 2.1.13.RELEASE"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Tomcat 9.0.31 -> 9.0.33","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tomcat8.5 8.5.51 -> 8.5.53"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Zookeeper 3.5.7 -> 3.6.0"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,r.jsx)(s,{usernames:["alex-lx","AmosDoan","andrewom","anuraaga","codefromthecrypt","cricket007","heowc","hexoul","ikhoon","imasahiro","jyblue","joschi","jrhee17","KarboniteKream","kojilin","mauhiz","max904-github","minwoox","rstoyanchev","sivaalli","trustin"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);