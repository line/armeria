"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[3350],{28453:(e,s,i)=>{i.d(s,{R:()=>a,x:()=>c});var n=i(96540);const r={},t=n.createContext(r);function a(e){const s=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(t.Provider,{value:s},e.children)}},81761:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"0.87.0","title":"v0.87.0","description":"New features","source":"@site/src/content/release-notes/0.87.0.mdx","sourceDirName":".","slug":"/0.87.0","permalink":"/release-notes/0.87.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/0.87.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2019-06-13T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.88.0","permalink":"/release-notes/0.88.0"},"next":{"title":"v0.86.0","permalink":"/release-notes/0.86.0"}}');var r=i(74848),t=i(28453);const a={date:new Date("2019-06-13T00:00:00.000Z")},c="v0.87.0",d={},o=[{value:"New features",id:"new-features",level:2},{value:"Improvements",id:"improvements",level:2},{value:"Bug fixes",id:"bug-fixes",level:2},{value:"Deprecations",id:"deprecations",level:2},{value:"Breaking changes",id:"breaking-changes",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Thank you",id:"thank-you",level:2}];function l(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:i}=s;return i||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.header,{children:[(0,r.jsx)(s.h1,{id:"v0870",children:"v0.87.0"}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"June 13, 2019"})})]}),"\n",(0,r.jsx)(s.h2,{id:"new-features",children:"New features"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["You can now jump to a service method quickly using a go-to form in a ",(0,r.jsx)(s.code,{children:"DocService"})," debug page. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1815",children:"#1815"})]}),"\n",(0,r.jsx)("img",{src:"https://user-images.githubusercontent.com/1866157/59041505-b6dd7100-88b3-11e9-87d5-edc826751620.gif",width:"800"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["From this release, TLSv1.3 is enabled by default. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1779",children:"#1779"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"Route"})," replaces ",(0,r.jsx)(s.code,{children:"PathMapping"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1789",children:"#1789"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'ServerBuilder sb = new ServerBuilder();\nsb.service(Route.builder()\n                .path("/greet/{name}")\n                .consumes(MediaType.JSON)\n                .produces(MediaType.JSON_UTF_8)\n                .build(),\n           (ctx, req) -> HttpResponse.of(HttpStatus.OK,\n                                         MediaType.JSON_UTF_8,\n                                         ...));\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"AggregatedHttpMessage"})," has been split into two subtypes: ",(0,r.jsx)(s.code,{children:"AggregatedHttpRequest"})," and ",(0,r.jsx)(s.code,{children:"AggregatedHttpResponse"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1702",children:"#1702"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1795",children:"#1795"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["The factory methods and some getter methods in ",(0,r.jsx)(s.code,{children:"AggregatedHttpMessage"})," have been pushed down to the two subtypes. For example, ",(0,r.jsx)(s.code,{children:"AggregatedHttpMessage.method()"})," does not exist anymore and you will find it in ",(0,r.jsx)(s.code,{children:"AggregatedHttpRequest"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["We have revised the API to use ",(0,r.jsx)(s.code,{children:"AggregatedHttpRequest"})," or ",(0,r.jsx)(s.code,{children:"AggregatedHttpResponse"})," rather than ",(0,r.jsx)(s.code,{children:"AggregatedHttpMessage"})," wherever possible for clarity."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["New static factory methods have been added to ",(0,r.jsx)(s.code,{children:"HttpData"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1797",children:"#1797"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"HttpData.of()"})," was not very clear about whether it will wrap the specified bytes or make a copy of them. ",(0,r.jsx)(s.code,{children:"HttpData.wrap()"})," and ",(0,r.jsx)(s.code,{children:"HttpData.copyOf()"})," removes such ambiguity."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"byte[] b = new byte[] { 1, 2, 3 }\nHttpData copied = HttpData.copyOf(b);\nHttpData wrapped = HttpData.wrap(b);\n\nb[0] = 0;\nassert copied.array()[0] == 1;\nassert wrapped.array()[0] == 0;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["You can now specify ",(0,r.jsx)(s.code,{children:"SubscriptionOption"}),"s when subscribing to a ",(0,r.jsx)(s.code,{children:"StreamMessage"})," to modify the contract between ",(0,r.jsx)(s.code,{children:"StreamMessage"})," and ",(0,r.jsx)(s.code,{children:"Subscriber"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1700",children:"#1700"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1808",children:"#1808"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"HttpRequest req = ...;\n// Subscriber.onError() will be invoked with a CancelledSubscriptionException\n// when the Subscription is cancelled.\nreq.subscribe(mySubscriber, SubscriptionOption.NOTIFY_CANCELLATION);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"Endpoint"}),"s loaded from a ",(0,r.jsx)(s.code,{children:".properties"})," file by ",(0,r.jsx)(s.code,{children:"PropertiesEndpointGroup"})," are now automatically updated when the ",(0,r.jsx)(s.code,{children:".properties"})," file is modified. Note that the classpath resources are not auto-reloaded and you have to specify a real file as a ",(0,r.jsx)(s.code,{children:"java.nio.Path"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1787",children:"#1787"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'PropertiesEndpointGroup endpoints = PropertiesEndpointGroup.of(\n        Paths.get("/etc/my/endpoints.properties"),\n        "endpoints.");\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["You can now create a ",(0,r.jsx)(s.code,{children:"Client"})," by specifying an ",(0,r.jsx)(s.code,{children:"Endpoint"})," rather than a ",(0,r.jsx)(s.code,{children:"URI"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1743",children:"#1743"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'Endpoint endpoint = Endpoint.of("example.com");\nHttpClient client = new HttpClientBuilder(SessionProtocol.HTTPS, endpoint)\n        ...\n        .build();\n'})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["You can now apply Armeria's default settings to an existing ",(0,r.jsx)(s.code,{children:"DropwizardMeterRegistry"})," (or ",(0,r.jsx)(s.code,{children:"PrometheusMeterRegistry"}),") using ",(0,r.jsx)(s.code,{children:"DropwizardMeterRegistries.configureRegistry()"})," (or ",(0,r.jsx)(s.code,{children:"PrometheusMeterRegistries.configureRegistry()"}),"). Previously, Armeria's default settings were applied only to the ",(0,r.jsx)(s.code,{children:"MeterRegistry"}),"s created by ",(0,r.jsx)(s.code,{children:"DropwizardMeterRegistries.newRegistry()"})," (or ",(0,r.jsx)(s.code,{children:"PrometheusMeterRegistries.newRegistry()"}),"). ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1814",children:"#1814"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1820",children:"#1820"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:"import io.micrometer.jmx.JmxMeterRegistry;\n\n// JmxMeterRegistry is a subtype of DropwizardMeterRegistry.\nJmxMeterRegistry jmxRegistry = new JmxMeterRegistry(...);\nDropwizardMeterRegistries.configureRegistry(jmxRegistry);\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["A new exception type ",(0,r.jsx)(s.code,{children:"InvalidSamlRequestException"})," has been added so that you can tell if a client sent an invalid SAML request from exception type. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1780",children:"#1780"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1783",children:"#1783"})]}),"\n"]}),"\n"]}),"\n","\n",(0,r.jsx)(s.h2,{id:"improvements",children:"Improvements"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Consolidated the logic related with TLS and improved TLS configuration validation. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1779",children:"#1779"})]}),"\n",(0,r.jsxs)(s.li,{children:["Stack trace is logged for better debuggability when ",(0,r.jsx)(s.code,{children:"RequestContextCurrentTraceContext"})," cannot find the current ",(0,r.jsx)(s.code,{children:"RequestContext"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1800",children:"#1800"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"bug-fixes",children:"Bug fixes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["The percent-encoding of the characters such as ",(0,r.jsx)(s.code,{children:"#"})," and ",(0,r.jsx)(s.code,{children:"/"})," are now preserved correctly. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1805",children:"#1805"})]}),"\n",(0,r.jsxs)(s.li,{children:["gRPC ",(0,r.jsx)(s.code,{children:"Metadata"})," is now supported. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1788",children:"#1788"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1790",children:"#1790"})]}),"\n",(0,r.jsxs)(s.li,{children:["Fixed a bug where a bad gRPC client is created when a user specified a URL that does not end with a slash (",(0,r.jsx)(s.code,{children:"/"}),"). ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1785",children:"#1785"})]}),"\n",(0,r.jsxs)(s.li,{children:["The trailers added with ",(0,r.jsx)(s.code,{children:"ServiceRequestContext.addAdditionalResponseTrailer()"})," are not ignored anymore. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1782",children:"#1782"})]}),"\n",(0,r.jsxs)(s.li,{children:["JUnit 5 extensions are now initialized and destroyed on ",(0,r.jsx)(s.code,{children:"BeforeAll"})," and ",(0,r.jsx)(s.code,{children:"AfterAll"})," rather than on ",(0,r.jsx)(s.code,{children:"Each"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1801",children:"#1801"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"spring-boot-webflux-starter"})," does not fail to start anymore even if more than one ",(0,r.jsx)(s.code,{children:"MeterRegistry"})," exist. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1791",children:"#1791"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"deprecations",children:"Deprecations"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"HttpData.offset()"})," has been deprecated. It always returns ",(0,r.jsx)(s.code,{children:"0"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1771",children:"#1771"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1797",children:"#1797"})]}),"\n",(0,r.jsxs)(s.li,{children:["Some ",(0,r.jsx)(s.code,{children:"HttpData.of()"})," methods have been deprecated in favor of ",(0,r.jsx)(s.code,{children:"HttpData.wrap()"})," and/or ",(0,r.jsx)(s.code,{children:"HttpData.copyOf()"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1797",children:"#1797"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"trailingHeaders()"})," methods in ",(0,r.jsx)(s.code,{children:"AggregatedHttpMessage"})," and ",(0,r.jsx)(s.code,{children:"HttpResult"})," have been deprecated in favor of ",(0,r.jsx)(s.code,{children:"trailers()"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1795",children:"#1795"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"StreamMessage"})," methods which accept ",(0,r.jsx)(s.code,{children:"boolean withPooledObjects"})," have been deprecated. Use the methods that accept ",(0,r.jsx)(s.code,{children:"SubscriptionOption"})," and specify ",(0,r.jsx)(s.code,{children:"SubscriptionOption.WITH_POOLED_OBJECTS"}),". ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1700",children:"#1700"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"AggregatedHttpMessage"})," has been split into two subtypes. See 'New features' for more information. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1702",children:"#1702"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1795",children:"#1795"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"PathMapping"})," and its related classes have been replaced with ",(0,r.jsx)(s.code,{children:"Route"})," and its related classes. See 'New features' for more information. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1789",children:"#1789"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ServiceWithPathMappings"})," has been replaced with ",(0,r.jsx)(s.code,{children:"ServiceWithRoutes"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"ClientCacheControl"})," and ",(0,r.jsx)(s.code,{children:"ServerCacheControl"})," have been moved to the ",(0,r.jsx)(s.code,{children:"com.linecorp.armeria.common"})," package. ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1813",children:"#1813"})," ",(0,r.jsx)(s.a,{href:"https://github.com/line/armeria/issues/1816",children:"#1816"})]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Bouncy Castle 1.61 -> 1.62"}),"\n",(0,r.jsx)(s.li,{children:"gRPC 1.20.0 -> 1.21.0"}),"\n",(0,r.jsx)(s.li,{children:"Guava 27.1 -> 28.0"}),"\n",(0,r.jsx)(s.li,{children:"java-jwt 3.8.0 -> 3.8.1"}),"\n",(0,r.jsx)(s.li,{children:"Project Reactor 3.2.9 -> 3.2.10"}),"\n",(0,r.jsx)(s.li,{children:"protobuf-jackson 0.3.1 -> 0.4.0"}),"\n",(0,r.jsx)(s.li,{children:"Retrofit 2.5.0 -> 2.6.0"}),"\n",(0,r.jsx)(s.li,{children:"RxJava 2.2.8 -> 2.2.9"}),"\n",(0,r.jsx)(s.li,{children:"Tomcat 9.0.20 -> 9.0.21, 8.5.40 -> 8.5.42"}),"\n",(0,r.jsx)(s.li,{children:"ZooKeeper 3.4.14 -> 3.5.5"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"thank-you",children:"Thank you"}),"\n",(0,r.jsx)(i,{usernames:["anuraaga","dawnbreaks","delegacy","hyangtack","ikhoon","imasahiro","jrhee17","minwoox","RyouZhang","SeungukHan","trustin"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);