"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[706],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(96540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}},28575:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"0.92.0","title":"v0.92.0","description":"New features","source":"@site/src/content/release-notes/0.92.0.mdx","sourceDirName":".","slug":"/0.92.0","permalink":"/release-notes/0.92.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/0.92.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2019-09-23T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.93.0","permalink":"/release-notes/0.93.0"},"next":{"title":"v0.91.0","permalink":"/release-notes/0.91.0"}}');var t=s(74848),r=s(28453);const a={date:new Date("2019-09-23T00:00:00.000Z")},c="v0.92.0",o={},l=[{value:"New features",id:"new-features",level:2},{value:"Improvements",id:"improvements",level:2},{value:"Bug fixes",id:"bug-fixes",level:2},{value:"Deprecation",id:"deprecation",level:2},{value:"Breaking changes",id:"breaking-changes",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Thank you",id:"thank-you",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{ThankYou:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.header,{children:[(0,t.jsx)(n.h1,{id:"v0920",children:"v0.92.0"}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"September 23, 2019"})})]}),"\n",(0,t.jsx)(n.h2,{id:"new-features",children:"New features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You can now easily get the request URI using ",(0,t.jsx)(n.code,{children:"RequestHeaders.uri()"})," and ",(0,t.jsx)(n.code,{children:"HttpRequest.uri()"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2092",children:"#2092"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'RequestHeaders headers = RequestHeaders.of(HttpMethod.GET, "/foo",\n                                           HttpHeaderNames.SCHEME, "https",\n                                           HttpHeaderNames.AUTHORITY, "example.com"));\nassert headers.uri().equals(URI.create("https://example.com/foo"));\nassert HttpRequest.of(header).uri() == headers.uri();\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You can now decorate the ",(0,t.jsx)(n.code,{children:"Runnable"})," of the ",(0,t.jsx)(n.code,{children:"Thread"})," created using ",(0,t.jsx)(n.code,{children:"ThreadFactoryBuilder"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2047",children:"#2047"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2067",children:"#2067"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"ThreadFactories.builder(...)\n               .eventLoop(true)\n               .daemon(true)\n               .priority(...)\n               .taskFunction(task -> {\n                   // Specify your logic here so it's executed before the Runnable.\n                   task.run();\n                   // Specify your logic here so it's executed after the Runnable.\n               })\n               .build();\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You can now configure ",(0,t.jsx)(n.code,{children:"Server"})," using ",(0,t.jsx)(n.code,{children:"Consumer<ServerBuilder>"})," as well as ",(0,t.jsx)(n.code,{children:"ArmeriaServerConfigurator"})," when integrating with Spring Boot. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2070",children:"#2070"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Bean\npublic Consumer<ServerBuilder> customizer() {\n    return sb -> sb.port(...)\n                   ...\n                   .service(...);\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You can now set example requests using ",(0,t.jsx)(n.code,{children:"AnnotatedServiceRegistrationBean"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1855",children:"#1855"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2026",children:"#2026"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Bean\npublic AnnotatedServiceRegistrationBean okService() {\n    return new AnnotatedServiceRegistrationBean()\n            .setServiceName("myAnnotatedService")\n            .setPathPrefix("/my_service")\n            .setService(new MyAnnotatedService())\n            .setExampleRequests(Lists.of(\n                    AnnotatedExampleRequest.of("myMethod", "{\\"foo\\":\\"bar\\"}")));\n}\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You can be aware of whether the response content is empty from an HTTP status code. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2058",children:"#2058"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"HttpStatus status = ...\nif (!status.isContentAlwaysEmpty()) {\n    // We may have a body!\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["You can use ",(0,t.jsx)(n.code,{children:"SettableHealthIndicator"})," for health check responses when using Spring boot autoconfigure. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2088",children:"#2088"})]}),"\n"]}),"\n","\n",(0,t.jsx)(n.h2,{id:"improvements",children:"Improvements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You will see the doc service automatically scrolls down to the debug form if the URL contains a request. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1682",children:"#1682"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2045",children:"#2045"})]}),"\n",(0,t.jsxs)(n.li,{children:["The performance for parsing a struct context in Thrift is improved, thanks to the ",(0,t.jsx)(n.a,{href:"https://openjdk.java.net/jeps/259",children:"Stack-Walking API"})," in Java 9. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1686",children:"#1686"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2055",children:"#2055"})]}),"\n",(0,t.jsxs)(n.li,{children:["You will see the int values of Enum members if they have in doc service. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1966",children:"#1966"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2015",children:"#2015"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RequestContext"})," instead of ",(0,t.jsx)(n.code,{children:"RequestLog"})," is used for trace parsing and sampling. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2038",children:"#2038"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"bug-fixes",children:"Bug fixes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You can now get the gRPC web trailers in the client. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2030",children:"#2030"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2076",children:"#2076"})]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.a,{href:"https://www.baeldung.com/spring-boot-actuators",children:"actuator"})," now responds with the correct Spring boot content type. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2061",children:"#2061"})]}),"\n",(0,t.jsxs)(n.li,{children:["The blocking stub in gRPC now can read messages. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2065",children:"#2065"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2066",children:"#2066"})]}),"\n",(0,t.jsxs)(n.li,{children:["The listeners for ",(0,t.jsx)(n.code,{children:"EndpointGroup"})," are notified after the first health check even when all endpoints are unhealthy. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2074",children:"#2074"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2075",children:"#2075"})]}),"\n",(0,t.jsxs)(n.li,{children:["The subscriber who subscribes to the ",(0,t.jsx)(n.code,{children:"Response"})," from a ",(0,t.jsx)(n.code,{children:"WebClient"})," gets notified when it's complete. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2080",children:"#2080"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2087",children:"#2087"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"IllegalStateException"})," that indicates the log should have at least one child is no longer raised when retrying. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2082",children:"#2082"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2083",children:"#2083"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DefaultEventLoopScheduler"})," respects ",(0,t.jsx)(n.code,{children:"maxNumEventLoopsPerHttpHttp1Endpoint"})," set from ",(0,t.jsx)(n.code,{children:"ClientFactoryBuilder"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2086",children:"#2086"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deprecation",children:"Deprecation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"EventLoopThreadFactory"})," has been deprecated in favor of ",(0,t.jsx)(n.code,{children:"ThreadFactories"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2067",children:"#2067"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'ThreadFactory factory = ThreadFactories.builder("myThread")\n                                       .eventLoop(true)\n                                       .build();\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Specifying an ",(0,t.jsx)(n.code,{children:":authority"})," header in a request has no effect anymore. The current ",(0,t.jsx)(n.code,{children:"Endpoint"})," always determines the authority. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2092",children:"#2092"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// This does NOT work anymore.\nfinal HttpClient client = HttpClient.of("https://127.0.0.1:8080/");\nclient.execute(RequestHeaders.of(HttpMethod.GET, "/",\n                                 HttpHeaderNames.AUTHORITY, "foo.com"));\n// This works.\nfinal HttpClient client =\n        HttpClient.of(SessionProtocol.HTTPS,\n                      Endpoint.of("foo.com", 8080).withIpAddr("127.0.0.1"));\nclient.get("/");\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Instead, you can now use ",(0,t.jsx)(n.code,{children:"ClientOption.HTTP_HEADERS"})," or ",(0,t.jsx)(n.code,{children:"{Client,Service}RequestContext.additional{Request,Response}{Headers,Trailers}()"})," to override the existing headers, including ",(0,t.jsx)(n.code,{children:":authority"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2092",children:"#2092"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// This works.\nfinal HttpHeaders customHeaders =\n        HttpHeaders.of(HttpHeaderNames.AUTHORITY, "foo.com");\nfinal HttpClient client =\n        HttpClient.of("http://127.0.0.1:8080/",\n                      ClientOption.HTTP_HEADERS.newValue(customHeaders));\nclient.get("/");\n\n// This also works.\nfinal HttpClient client = HttpClient.of("http://127.0.0.1:8080/");\ntry (SafeCloseable ignored = Clients.withHttpHeader(\n             HttpHeaderNames.AUTHORITY, "foo.com")) {\n    client.get("/");\n}\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ExceptionHandlerFunction.handleExeption()"})," accepts ",(0,t.jsx)(n.code,{children:"ServiceRequestContext"})," instead of ",(0,t.jsx)(n.code,{children:"RequestContext"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2060",children:"#2060"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You don't have to downcast anymore. :)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"GrpcServiceRegistrationBean.ExampleRequest"})," has been removed. Use ",(0,t.jsx)(n.code,{children:"GrpcExampleRequest"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Micrometer 1.2.0 -> 1.2.1"}),"\n",(0,t.jsx)(n.li,{children:"Netty 4.1.39.Final -> 4.1.41.Final"}),"\n",(0,t.jsxs)(n.li,{children:["Tomcat 9.0.24 -> 9.0.26","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Tomcat8 8.5.43 -> 8.5.45"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"thank-you",children:"Thank you"}),"\n",(0,t.jsx)(s,{usernames:["andrewoma","anirudhr95","anuraaga","codefromthecrypt","eugene70","heowc","hirakida","ikhoon","imasahiro","jyblue","kojilin","minwoox","moonchanyong","SooJungDev","taejs","trustin","Waynefn"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);