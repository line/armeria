"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[2478],{28453:(e,r,i)=>{i.d(r,{R:()=>a,x:()=>t});var o=i(96540);const n={},c=o.createContext(n);function a(e){const r=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(c.Provider,{value:r},e.children)}},70216:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>s,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"server/grpc","title":"Running a gRPC service","description":"Visit armeria-examples to find a fully working example.","source":"@site/src/content/docs/server/grpc.mdx","sourceDirName":"server","slug":"/server/grpc","permalink":"/docs/server/grpc","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/docs/server/grpc.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Decorating a service","permalink":"/docs/server/decorator"},"next":{"title":"Running a Thrift service","permalink":"/docs/server/thrift"}}');var n=i(74848),c=i(28453);const a={},t="Running a gRPC service",s={},l=[{value:"<code>GrpcService</code>",id:"grpcservice",level:2},{value:"Decorating a <code>GrpcService</code>",id:"decorating-a-grpcservice",level:2},{value:"<code>gRPC-Web</code>",id:"grpc-web",level:2},{value:"Unframed requests",id:"unframed-requests",level:2},{value:"Blocking service implementation",id:"blocking-service-implementation",level:2},{value:"Using @Blocking annotation",id:"using-blocking-annotation",level:3},{value:"Wrapping a service with ServiceRequestContext#blockingTaskExecutor()",id:"wrapping-a-service-with-servicerequestcontextblockingtaskexecutor",level:3},{value:"Using GrpcServiceBuilder#useBlockingTaskExecutor(boolean)",id:"using-grpcservicebuilderuseblockingtaskexecutorboolean",level:3},{value:"Exception propagation",id:"exception-propagation",level:2},{value:"Server Reflection",id:"server-reflection",level:2},{value:"See also",id:"see-also",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"running-a-grpc-service",children:"Running a gRPC service"})}),"\n",(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:["Visit ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria-examples",children:"armeria-examples"})," to find a fully working example."]})}),"\n",(0,n.jsxs)(r.p,{children:["Let's assume we have the following ",(0,n.jsx)(r.a,{href:"https://grpc.io/",children:"gRPC"})," service definition:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-protobuf",children:'syntax = "proto3";\n\npackage grpc.hello;\n\noption java_package = "com.example.grpc.hello";\n\nservice HelloService {\n  rpc Hello (HelloRequest) returns (HelloReply) {}\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string message = 1;\n}\n'})}),"\n",(0,n.jsxs)(r.p,{children:["The Protobuf compiler will produce some Java code under the ",(0,n.jsx)(r.code,{children:"com.example.grpc.hello"})," package.\nThe most noteworthy one is ",(0,n.jsx)(r.code,{children:"HelloServiceGrpc.java"})," which defines the base service class we will implement:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"public class HelloServiceGrpc {\n    ...\n    public static abstract class HelloServiceImplBase implements BindableService {\n        public void hello(HelloRequest req, StreamObserver<HelloReply> responseObserver) {\n            asyncUnimplementedUnaryCall(METHOD_HELLO, responseObserver);\n        }\n        ...\n    }\n    ...\n}\n"})}),"\n",(0,n.jsx)(r.p,{children:"Our implementation would look like the following:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"public class MyHelloService extends HelloServiceGrpc.HelloServiceImplBase {\n    @Override\n    public void hello(HelloRequest req, StreamObserver<HelloReply> responseObserver) {\n        HelloReply reply = HelloReply.newBuilder()\n                                     .setMessage(\"Hello, \" + req.getName() + '!')\n                                     .build();\n        responseObserver.onNext(reply);\n        responseObserver.onCompleted();\n    }\n}\n"})}),"\n",(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:["It is recommended to use the build plugin as explained in\n",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc-java/blob/master/README.md#download",children:"the gRPC-Java README"})," rather than\nrunning ",(0,n.jsx)(r.code,{children:"protoc"})," manually."]})}),"\n",(0,n.jsx)(r.h2,{id:"grpcservice",children:(0,n.jsx)(r.code,{children:"GrpcService"})}),"\n",(0,n.jsxs)(r.p,{children:["Once you've finished the implementation of the service, you need to build a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," using\na ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html",children:"GrpcServiceBuilder"})," and add it to the ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html",children:"ServerBuilder"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"import com.linecorp.armeria.server.Server;\nimport com.linecorp.armeria.server.ServerBuilder;\n\nServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .build());\n...\nServer server = sb.build();\nserver.start();\n"})}),"\n",(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:["We bound the ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," without specifying any path. It is because ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"}),"\nimplements ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpServiceWithRoutes.html",children:"HttpServiceWithRoutes"}),", which dynamically provides ",(0,n.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html",children:"Route"})," by itself."]})}),"\n",(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," supports ",(0,n.jsx)(r.a,{href:"https://grpc.io/",children:"gRPC"}),", ",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md",children:"gRPC-Web"})," and ",(0,n.jsx)(r.a,{href:"https://developers.google.com/protocol-buffers/docs/proto3#json",children:"Protobuf-JSON"})," by default.\nIf you don't want your ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," support all those formats, specify the formats you want\nusing ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#supportedSerializationFormats(java.lang.Iterable)",children:"GrpcServiceBuilder#supportedSerializationFormats(Iterable)"}),"."]})}),"\n",(0,n.jsxs)(r.h2,{id:"decorating-a-grpcservice",children:["Decorating a ",(0,n.jsx)(r.code,{children:"GrpcService"})]}),"\n",(0,n.jsxs)(r.p,{children:["Unlike a usual Armeria service, ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," implements a special interface called\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpServiceWithRoutes.html",children:"HttpServiceWithRoutes"}),". Therefore, it is recommended to decorate a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," by specifying\ndecorator functions as extra parameters rather than using ",(0,n.jsx)(r.code,{children:"Service.decorate()"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"import com.linecorp.armeria.server.logging.LoggingService;\n\nServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .addService(new MySecondHelloService())\n                      .build(),\n           LoggingService.newDecorator());\n...\nServer server = sb.build();\nserver.start();\n"})}),"\n",(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:["See ",(0,n.jsxs)(r.a,{href:"/docs/server/decorator#decorating-servicewithroutes",children:["Decorating ",(0,n.jsx)(r.code,{children:"ServiceWithRoutes"})]})," for more information\nabout ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpServiceWithRoutes.html",children:"HttpServiceWithRoutes"}),"."]})}),"\n",(0,n.jsxs)(r.p,{children:["The above decorator decorates all services. If you want to decorate only a specific service, you need to specify\nthe decorators when you add the service to the ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html",children:"GrpcServiceBuilder"}),",\nor use the ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Decorator.html",children:"@Decorator"}),"."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"GrpcService.builder()\n           .addService(new MyHelloService(),\n                       List.of(new FirstDecorator(), new SecondDecorator())) // \ud83d\udc48\ud83d\udc48\ud83d\udc48\n           .build()\n\n// Or, use the @Decorator directly to the service or method.\n@Decorator(ThirdDecorator.class) // \ud83d\udc48\ud83d\udc48\ud83d\udc48\nclass MyHelloService extends MyHelloServiceBase {\n\n    @Decorator(FourthDecorator.class) // \ud83d\udc48\ud83d\udc48\ud83d\udc48\n    @Override\n    public void sayHello(HelloRequest request, StreamObserver<HelloResponse> responseObserver) {\n        ...\n    }\n}\n"})}),"\n",(0,n.jsxs)(r.p,{children:["As you might have noticed already, the decorators will be applied in the order of\n",(0,n.jsx)(r.code,{children:"FirstDecorator"}),", ",(0,n.jsx)(r.code,{children:"SecondDecorator"}),", ",(0,n.jsx)(r.code,{children:"ThirdDecorator"}),", and ",(0,n.jsx)(r.code,{children:"FourthDecorator"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"grpc-web",children:(0,n.jsx)(r.code,{children:"gRPC-Web"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," supports the ",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md",children:"gRPC-Web"})," protocol,\na small modification to the ",(0,n.jsx)(r.a,{href:"https://grpc.io/",children:"gRPC"})," wire format that can be used from a browser.\nUse the ",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc-web",children:"gRPC-Web-Client"})," to access the service from a browser."]}),"\n",(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc-web",children:"gRPC-Web-Client"})," does not support client-side\n(or bi-directional) streaming yet but only server-side streaming.\nSee ",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc-web/issues/24",children:"here"})," for more information."]})}),"\n",(0,n.jsxs)(r.p,{children:["If the origin of the Javascript and API server are different, ",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc-web",children:"gRPC-Web-Client"})," first sends ",(0,n.jsx)(r.code,{children:"preflight"}),"\nrequests by the HTTP ",(0,n.jsx)(r.code,{children:"OPTIONS"})," method, in order to determine whether the actual request is safe to send\nin terms of CORS. Armeria provides ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/cors/CorsService.html",children:"CorsService"})," to handle this requests, so you need to decorate it when\nyou build a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:'import com.linecorp.armeria.common.grpc.protocol.GrpcHeaderNames;\nimport com.linecorp.armeria.server.cors.CorsService;\nimport com.linecorp.armeria.server.cors.CorsServiceBuilder;\n\nServerBuilder sb = Server.builder();\n...\nfinal CorsServiceBuilder corsBuilder =\n        CorsService.builder("http://foo.com")\n                   .allowRequestMethods(HttpMethod.POST) // Allow POST method.\n                   // Allow Content-type and X-GRPC-WEB headers.\n                   .allowRequestHeaders(HttpHeaderNames.CONTENT_TYPE,\n                                        HttpHeaderNames.of("X-GRPC-WEB"))\n                   // Expose trailers of the HTTP response to the client.\n                   .exposeHeaders(GrpcHeaderNames.GRPC_STATUS,\n                                  GrpcHeaderNames.GRPC_MESSAGE,\n                                  GrpcHeaderNames.ARMERIA_GRPC_THROWABLEPROTO_BIN);\n\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .build(),\n           corsBuilder.newDecorator(),\n           LoggingService.newDecorator());\n...\nServer server = sb.build();\nserver.start();\n'})}),"\n",(0,n.jsxs)(r.p,{children:["Please refer to ",(0,n.jsx)(r.a,{href:"/docs/server/cors",children:"Configuring CORS"})," for more information."]}),"\n",(0,n.jsx)(r.h2,{id:"unframed-requests",children:"Unframed requests"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," supports serving unary RPC methods (no streaming request or response) without ",(0,n.jsx)(r.a,{href:"https://grpc.io/",children:"gRPC"}),"\nwire format framing. This can be useful for gradually migrating an existing HTTP POST based API to ",(0,n.jsx)(r.a,{href:"https://grpc.io/",children:"gRPC"}),".\nAs ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html",children:"GrpcService"})," supports both binary protobuf and ",(0,n.jsx)(r.a,{href:"https://developers.google.com/protocol-buffers/docs/proto3#json",children:"Protobuf-JSON"}),", either legacy protobuf\nor JSON APIs can be used."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"ServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .enableUnframedRequests(true)\n                      .build());\n...\nServer server = sb.build();\nserver.start();\n"})}),"\n",(0,n.jsxs)(r.p,{children:["This service's unary methods can be accessed from any HTTP client at e.g., URL ",(0,n.jsx)(r.code,{children:"/grpc.hello.HelloService/Hello"}),"\nwith Content-Type ",(0,n.jsx)(r.code,{children:"application/protobuf"})," for binary protobuf POST body or ",(0,n.jsx)(r.code,{children:"application/json; charset=utf-8"}),"\nfor JSON POST body."]}),"\n",(0,n.jsx)(r.h2,{id:"blocking-service-implementation",children:"Blocking service implementation"}),"\n",(0,n.jsxs)(r.p,{children:["Unlike upstream gRPC-Java, Armeria does not run service logic in a separate thread pool by default. If your\nservice implementation requires blocking, run the individual blocking logic in a thread pool,\nannotate the gRPC services or methods with a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Blocking.html",children:"@Blocking"})," annotation, wrap the entire service implementation in\n",(0,n.jsx)(r.code,{children:"ServiceRequestContext.current().blockingTaskExecutor().submit()"}),", or set\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#useBlockingTaskExecutor(boolean)",children:"GrpcServiceBuilder#useBlockingTaskExecutor(boolean)"})," so the above happens automatically for\nall service methods and lifecycle callbacks."]}),"\n",(0,n.jsxs)(r.h3,{id:"using-blocking-annotation",children:["Using ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Blocking.html",children:"@Blocking"})," annotation"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"// You can apply the @Blocking annotation at the class level\n// so all methods are executed by ServiceRequestContext.current().blockingTaskExecutor().\n@Blocking // \ud83d\udc48\nclass MyBlockingGrpcServiceImpl extends MyGrpcServiceImplBase {\n\n    public void blockingCall1(...) {\n        // Perform a long-running task.\n        ...\n    }\n\n    public void blockingCall2(...) {\n        // Perform a long-running task.\n        ...\n    }\n}\n\nclass MyGrpcServiceImpl extends MyGrpcServiceImplBase {\n\n    //  The method will be executed by ServiceRequestContext.current().blockingTaskExecutor().\n    @Blocking // \ud83d\udc48\n    public void blockingCall(...) {\n        // Perform a long-running task.\n        ...\n    }\n\n    public void nonBlockingCall(...) {\n        ...\n    }\n}\n"})}),"\n",(0,n.jsxs)(r.h3,{id:"wrapping-a-service-with-servicerequestcontextblockingtaskexecutor",children:["Wrapping a service with ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#blockingTaskExecutor()",children:"ServiceRequestContext#blockingTaskExecutor()"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"import com.linecorp.armeria.common.RequestContext;\nimport com.linecorp.armeria.server.ServiceRequestContext;\n\npublic class MyHelloService extends HelloServiceGrpc.HelloServiceImplBase {\n    @Override\n    public void hello(HelloRequest req, StreamObserver<HelloReply> responseObserver) {\n        ServiceRequestContext.current().blockingTaskExecutor().submit(() -> {\n            // Perform a long-running task.\n\n            HelloReply reply = HelloReply.newBuilder()\n                                         .setMessage(\"Hello, \" + req.getName() + '!')\n                                         .build();\n            responseObserver.onNext(reply);\n            responseObserver.onCompleted();\n        });\n    }\n}\n"})}),"\n",(0,n.jsxs)(r.h3,{id:"using-grpcservicebuilderuseblockingtaskexecutorboolean",children:["Using ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#useBlockingTaskExecutor(boolean)",children:"GrpcServiceBuilder#useBlockingTaskExecutor(boolean)"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"ServerBuilder sb = Server.builder();\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      // All service methods will be run within\n                      // the blocking executor.\n                      .useBlockingTaskExecutor(true) // \ud83d\udc48\n                      .build());\n"})}),"\n",(0,n.jsx)(r.h2,{id:"exception-propagation",children:"Exception propagation"}),"\n",(0,n.jsxs)(r.p,{children:["It can be very useful to enable ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Flags.html#verboseResponses()",children:"Flags#verboseResponses()"})," in your server by specifying the\n",(0,n.jsx)(r.code,{children:"-Dcom.linecorp.armeria.verboseResponses=true"})," system property, which will automatically return\ninformation about an exception thrown in the server to gRPC clients. Armeria clients will automatically\nconvert it back into an exception for structured logging, etc. This response will include information about\nthe actual source code in the server - make sure it is safe to send such potentially sensitive information\nto all your clients before enabling this flag!"]}),"\n",(0,n.jsxs)(r.p,{children:["See more details at ",(0,n.jsx)(r.a,{href:"/docs/client/grpc",children:"Client gRPC"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"server-reflection",children:"Server Reflection"}),"\n",(0,n.jsxs)(r.p,{children:["Armeria supports gRPC server reflection - just add an instance of ",(0,n.jsx)(r.code,{children:"ProtoReflectionService"})," to your server."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"import io.grpc.protobuf.services.ProtoReflectionService;\n\nServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .addService(ProtoReflectionService.newInstance())\n                      .build());\n...\nServer server = sb.build();\nserver.start();\n"})}),"\n",(0,n.jsxs)(r.p,{children:["For more information, see the official ",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc-java/blob/master/documentation/server-reflection-tutorial.md",children:"gRPC Server Reflection tutorial"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"see-also",children:"See also"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/docs/client/grpc",children:"Client gRPC"})}),"\n",(0,n.jsx)(r.li,{children:(0,n.jsx)(r.a,{href:"/docs/advanced/kotlin#coroutines-support-for-grpc-kotlin",children:"Kotlin coroutine gRPC service"})}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,c.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);