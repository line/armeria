"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[9068],{28453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>o});var i=n(96540);const s={},a=i.createContext(s);function t(e){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:r},e.children)}},34893:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"1.23.0","title":"v1.23.0","description":"\ud83c\udf38 Highlights","source":"@site/src/content/release-notes/1.23.0.mdx","sourceDirName":".","slug":"/1.23.0","permalink":"/release-notes/1.23.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/1.23.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2023-04-07T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v1.23.1","permalink":"/release-notes/1.23.1"},"next":{"title":"v1.22.1","permalink":"/release-notes/1.22.1"}}');var s=n(74848),a=n(28453);const t={date:new Date("2023-04-07T00:00:00.000Z")},o="v1.23.0",c={},l=[{value:"\ud83c\udf38 Highlights",id:"-highlights",level:2},{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function h(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{AspectRatio:n,ThankYou:i}=r;return n||m("AspectRatio",!0),i||m("ThankYou",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.header,{children:[(0,s.jsx)(r.h1,{id:"v1230",children:"v1.23.0"}),(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"April 7, 2023"})})]}),"\n",(0,s.jsx)(r.h2,{id:"-highlights",children:"\ud83c\udf38 Highlights"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"})," now supports auto-completion for gRPC and Thrift services. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4516",children:"#4516"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Check out this awesome demo video by ",(0,s.jsx)(r.a,{href:"https://github.com/Dogacel",children:(0,s.jsx)(r.strong,{children:"@Dogacel"})})," to learn more.","\n",(0,s.jsx)(n,{width:18,height:9,maxWidth:"21rem",children:(0,s.jsx)("video",{controls:!0,children:(0,s.jsx)("source",{src:"https://user-images.githubusercontent.com/7023385/201191726-1cc4d893-0394-4392-b6be-8e981583b20e.mov"})})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n","\n",(0,s.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["You can now write a circuit breaker or retry rule that makes a decision based on gRPC trailers. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4496",children:"#4496"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4535",children:"#4535"})]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'final RetryRule rule =\n  RetryRule.builder()\n           .onGrpcTrailers((ctx, trailers) -> trailers.containsInt(\n              "grpc-status", 13)) // Retry for internal error.\n           .thenBackoff(backoff);\n'})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Unhandled exceptions are logged periodically out of the box. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4324",children:"#4324"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4687",children:"#4687"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["You can change the interval of the periodic logging\nusing ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#unhandledExceptionsReportIntervalMillis(long)",children:"ServerBuilder#unhandledExceptionsReportIntervalMillis(long)"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"ServerBuilder sb = ...\n// Log every 10 seconds.\nsb.unhandledExceptionsReportIntervalMillis(10000L);\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use Spring Boot 3 with Armeria. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4574",children:"#4574"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Use ",(0,s.jsx)(r.code,{children:"com.linecorp.armeria:armeria-spring-boot3-autoconfigure:1.23.0"})," dependency for the integration."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now disconnect connections gracefully\nusing ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#initiateConnectionShutdown()",children:"ClientRequestContext#initiateConnectionShutdown()"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4555",children:"#4555"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4708",children:"#4708"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"ClientRequestContext ctx = ...\n// The connection will be gracefully shut down after a request is finished.\nctx.initiateConnectionShutdown();\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceErrorHandler.html",children:"ServiceErrorHandler"})," to configure the per-service or per-virtual host\nerror handlers. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3421",children:"#3421"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4716",children:"#4716"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'ServiceErrorHandler handler = (ctx, cause) -> {\n  if (cause instanceof IllegalArgumentException) {\n    return HttpResponse.of(HttpStatus.BAD_REQUEST);\n  }\n  // Return null to let the default error handler handle the exception.\n  return null;\n};\n\nServerBuilder sb = ...\nsb.route()\n  .get("/foo")\n  .errorHandler(handler)\n  ...\n  .build();\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now handle an HTTP/1 request with an absolute URI\nusing ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#absoluteUriTransformer(java.util.function.Function)",children:"ServerBuilder#absoluteUriTransformer(Function)"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4681",children:"#4681"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4726",children:"#4726"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'ServerBuilder sb = ...\nsb.absoluteUriTransformer(absoluteUri -> {\n  // https://foo.com/bar -> /bar\n  return absoluteUri.replaceFirst("^https://\\\\.foo\\\\.com/", "/");\n  // Or store the original URI in a query and use it in the proxy service.\n  // return "/proxy?uri=" + URLEncoder.encode(absoluteUri);\n});\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now listen to the result of DNS queries using ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/dns/DnsQueryListener.html",children:"DnsQueryListener"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4690",children:"#4690"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4715",children:"#4715"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'DnsAddressEndpointGroup\n  .builder("foo.com")\n  .addDnsQueryListeners(new DnsQueryListener() {\n    @Override\n    void onSuccess(...) {...}\n\n    @Override\n    public void onFailure(...) {\n      logger.warn("DNS query failed");\n    }\n  })\n  .build();\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now create a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/BlockingTaskExecutor.html",children:"BlockingTaskExecutor"})," by wrapping a ",(0,s.jsx)(r.code,{children:"ScheduledExecutorService"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4760",children:"#4760"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Additionally, you can create context-aware or context-propagating ",(0,s.jsx)(r.code,{children:"Executor"})," and\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/BlockingTaskExecutor.html",children:"BlockingTaskExecutor"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"ScheduledExecutorService executorService = ...\n// Wrap a ScheduledExecutorService.\nBlockingTaskExecutor blockingTaskExecutor =\n  BlockingTaskExecutor.of(executorService);\n\nRequestContext ctx = ...\nBlockingTaskExecutor blockingTaskExecutor = ...\n// context-aware\nContextAwareBlockingTaskExecutor.of(context, executor);\n// context-propagating\nRequestContext.makeContextPropagating(blockingTaskExecutor);\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#of(java.io.InputStream)",children:"StreamMessage#of(InputStream)"})," to convert an ",(0,s.jsx)(r.code,{children:"InputStream"}),"\nto ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3937",children:"#3937"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4703",children:"#4703"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"InputStream in = ...\n// The input stream is divided into chunks of 8192 bytes by default.\nByteStreamMessage stream = StreamMessage.of(in);\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#streaming()",children:"StreamMessage#streaming()"})," to create ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamWriter.html",children:"StreamWriter"})," for writing\nstreaming messages. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4253",children:"#4253"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4696",children:"#4696"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'StreamWriter<String> writer = StreamMessage.streaming();\nwriter.write("foo");\nwriter.write("bar");\nwriter.close();\n\n// Subscribe to the writer.\nwriter.subscribe(...);\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now generate a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestId.html",children:"RequestId"})," using the information of ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/RoutingContext.html",children:"RoutingContext"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4362",children:"#4362"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4691",children:"#4691"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Additionally, the request ID generator can be configured per-service or per-virtual host. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4730",children:"#4730"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4752",children:"#4752"})]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'ServerBuilder sb = ...\nsb.requestIdGenerator((routingCtx, req) -> {\n  // Create a request ID from the trace ID of an OpenTelemetry headers.\n  return RequestId.of(\n    requestId(routingCtx.headers().get("traceparent")));\n});\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now collect metrics of open and closed client connections\nusing ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ConnectionPoolListener.html#metricCollecting(io.micrometer.core.instrument.MeterRegistry)",children:"ConnectionPoolListener#metricCollecting(MeterRegistry)"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4685",children:"#4685"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4686",children:"#4686"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"MeterRegistry registry = ...\nConnectionPoolListener listener = ConnectionPoolListener.metricCollecting(registry);\nClientFactory factory = ClientFactory.builder()\n                                     .connectionPoolListener(listener)\n                                     .build();\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#authority()",children:"ClientRequestContext#authority()"})," can now be used to get the authority that will be sent to\nthe server. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4697",children:"#4697"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"ClientRequestContext ctx = ...\nString authority = ctx.authority();\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use ",(0,s.jsx)(r.code,{children:"ManagementServerProperties"})," to configure the management server when using\nSpring integration. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4560",children:"#4560"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4574",children:"#4574"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"armeria:\n  ports:\n    - port: 8080\n# Use a different port with a custom base path:\nmanagement:\n  server:\n    port: 8443\n    base-path: /foo\n  endpoints:\n    web:\n      exposure:\n        include: health, loggers, prometheus\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now execute gRPC ",(0,s.jsx)(r.code,{children:"ServerInterceptor"})," asynchronously in Kotlin\nusing ",(0,s.jsx)(r.a,{href:"type://#",children:"CoroutineServerInterceptor"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4669",children:"#4669"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4724",children:"#4724"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:'class AuthInterceptor : CoroutineServerInterceptor {\n  private val authorizer = ...\n\n  override suspend fun <ReqT, RespT> suspendedInterceptCall(\n    call: ServerCall<ReqT, RespT>,\n    headers: Metadata,\n    next: ServerCallHandler<ReqT, RespT>\n  ): ServerCall.Listener<ReqT> {\n    val result = authorizer.authorize(ServiceRequestContext.current(), headers).await()\n    if (result) {\n      return next.startCall(call, headers)\n    } else {\n      throw AnticipatedException("Invalid access")\n    }\n  }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["The debug page of ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"})," is now a pop-up for easier access. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4599",children:"#4599"})]}),"\n",(0,s.jsxs)(r.li,{children:["You can now use ",(0,s.jsx)(r.code,{children:"Connection: close"})," header to close a connection after sending or receiving a response.\n",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4131",children:"#4131"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4454",children:"#4454"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4471",children:"#4471"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4531",children:"#4531"})]}),"\n",(0,s.jsxs)(r.li,{children:["Armeria now exports the gauge metrics of ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/CommonPools.html#workerGroup()",children:"CommonPools#workerGroup()"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4675",children:"#4675"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4750",children:"#4750"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["The metric names:","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"armeria.netty.common.event.loop.workers"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"armeria.netty.common.event.loop.pending.tasks"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["If the mapping for a HEAD request is not found, the request is rerouted to the service bound to the\nGET method on the same path. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4038",children:"#4038"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4706",children:"#4706"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Armeria client now handles the fragment part of URI consistently. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4789",children:"#4789"})]}),"\n",(0,s.jsxs)(r.li,{children:["The ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryConfig.html",children:"RetryConfig"})," from ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryConfigMapping.html",children:"RetryConfigMapping"})," is retrieved only once for a retry session\nand reused. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4753",children:"#4753"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4778",children:"#4778"})]}),"\n",(0,s.jsxs)(r.li,{children:["Fixed a memory leak of the response body for HEAD requests. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4771",children:"#4771"})]}),"\n",(0,s.jsxs)(r.li,{children:["A ",(0,s.jsx)(r.code,{children:"#"})," character in a request path is now always percent-encoded on the server side. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4751",children:"#4751"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4765",children:"#4765"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"Self-suppression"})," exception is not raised anymore in HTTP/1.1 encoder. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4749",children:"#4749"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4758",children:"#4758"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ConcurrentModificationException"})," is not raised anymore when using ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/AsyncServerInterceptor.html",children:"AsyncServerInterceptor"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4729",children:"#4729"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestHeaders.html#path()",children:"RequestHeaders#path()"})," now returns percent-encoded value like\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html#path()",children:"RequestContext#path()"})," does when used in an Armeria server. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4694",children:"#4694"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4721",children:"#4721"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/ByteStreamMessage.html#range(long,long)",children:"ByteStreamMessage#range(long,long)"})," of a path stream message now handles\nthe overflow of the range correctly. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4705",children:"#4705"})]}),"\n",(0,s.jsxs)(r.li,{children:["The authority header is now correctly set for retried requests. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4697",children:"#4697"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/DnsTimeoutException.html",children:"DnsTimeoutException"})," when an IPv6 network interface is enabled. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4695",children:"#4695"})]}),"\n",(0,s.jsxs)(r.li,{children:["No more deadlocks occur in Thrift 0.14 or older when loading ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4688",children:"#4688"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpStatusException.html",children:"HttpStatusException"})," is not raised anymore when there is no matching route for a request. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4548",children:"#4548"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4552",children:"#4552"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Normal 404 Not Found response is sent instead."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["A gRPC call is now correctly terminated with ",(0,s.jsx)(r.code,{children:"Status.INTERLAL"})," when an invalid response is received. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4808",children:"#4808"})]}),"\n",(0,s.jsxs)(r.li,{children:["A server-side ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html",children:"RequestLog"})," is completed correctly when an empty response is sent. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4807",children:"#4807"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactory.html#setMeterRegistry(io.micrometer.core.instrument.MeterRegistry)",children:"ClientFactory#setMeterRegistry(MeterRegistry)"})," is now deprecated in favor of\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/FlagsProvider.html#meterRegistry()",children:"FlagsProvider#meterRegistry()"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4785",children:"#4785"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Spring Boot 1 integration is no longer supported. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4651",children:"#4651"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4787",children:"#4787"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["The type of ",(0,s.jsx)(r.code,{children:"blockingTaskExecutor"})," property such as ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceConfig.html#blockingTaskExecutor()",children:"ServiceConfig#blockingTaskExecutor()"})," is\nchanged from ",(0,s.jsx)(r.code,{children:"ScheduledExecutorService"})," to ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/BlockingTaskExecutor.html",children:"BlockingTaskExecutor"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4760",children:"#4760"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Simply recompiling your code should be enough in most cases because ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/BlockingTaskExecutor.html",children:"BlockingTaskExecutor"}),"\nis a ",(0,s.jsx)(r.code,{children:"ScheduledExecutorService"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["The return types of ",(0,s.jsx)(r.code,{children:"makeContextAware"})," methods on ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html",children:"RequestContext"})," are changed to the\ncontext-aware types. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4760",children:"#4760"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"makeContextAware(Executor)"})," returns ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ContextAwareExecutor.html",children:"ContextAwareExecutor"})," instead of ",(0,s.jsx)(r.code,{children:"Executor"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"makeContextAware(ScheduledExecutorService)"})," returns ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ContextAwareScheduledExecutorService.html",children:"ContextAwareScheduledExecutorService"}),"\ninstead of ",(0,s.jsx)(r.code,{children:"ScheduledExecutorService"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["The signatures of ",(0,s.jsx)(r.code,{children:"UserClient.execute()"})," have been changed. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4789",children:"#4789"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["It now contains the newly added ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestTarget.html",children:"RequestTarget"})," as a parameter instead of the ",(0,s.jsx)(r.code,{children:"path"}),", ",(0,s.jsx)(r.code,{children:"query"}),",\nand ",(0,s.jsx)(r.code,{children:"fragment"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["The names of path cache meters have been changed. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4789",children:"#4789"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["The old meter name: ",(0,s.jsx)(r.code,{children:"armeria.server.parsed.path.cache"})]}),"\n",(0,s.jsxs)(r.li,{children:["New meter names:","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"armeria.path.cache{type=client}"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.code,{children:"armeria.path.cache{type=server}"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Armeria client doesn't normalize consecutive slashes (e.g. ",(0,s.jsx)(r.code,{children:"foo//bar"}),") in a client request path anymore. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/4789",children:"#4789"})]}),"\n",(0,s.jsxs)(r.admonition,{type:"tip",children:[(0,s.jsxs)(r.p,{children:["Please make sure your server or service is capable of handling consecutive slashes (",(0,s.jsx)(r.code,{children:"//"}),") in request paths\ncorrectly prior to upgrading. In some instances, consecutive slashes may cause unexpected behavior or\nrouting issues if not handled properly."]}),(0,s.jsx)(r.p,{children:"Fortunately, Armeria server automatically cleans up and normalizes request paths containing\nconsecutive slashes for you."})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Brotli4j 1.9.0 \u2192 1.11.0"}),"\n",(0,s.jsx)(r.li,{children:"Dropwizard 2.1.4 \u2192 2.1.5"}),"\n",(0,s.jsx)(r.li,{children:"Dropwizard Metrics 4.2.15 \u2192 4.2.18"}),"\n",(0,s.jsx)(r.li,{children:"fastutil 8.5.11 \u2192 8.5.12"}),"\n",(0,s.jsx)(r.li,{children:"GraphQL Kotlin 6.3.5 \u2192 6.4.0"}),"\n",(0,s.jsx)(r.li,{children:"java-jwt 4.2.2 \u2192 4.3.0"}),"\n",(0,s.jsx)(r.li,{children:"Micrometer 1.10.3 \u2192 1.10.5"}),"\n",(0,s.jsx)(r.li,{children:"Netty 4.1.87.Final \u2192 4.1.91.Final"}),"\n",(0,s.jsx)(r.li,{children:"Reactor Kotlin 1.2.1 \u2192 1.2.2"}),"\n",(0,s.jsx)(r.li,{children:"Sangria 3.5.0 \u2192 3.5.3"}),"\n",(0,s.jsx)(r.li,{children:"Spring 5.3.25 \u2192 6.0.6"}),"\n",(0,s.jsxs)(r.li,{children:["Spring Boot","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"3.0.5"}),"\n",(0,s.jsx)(r.li,{children:"2.7.8 \u2192 2.7.10"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,s.jsx)(i,{usernames:["Bue-von-hon","chanho0912","chris-ryan-square","cj848","di-seo","Dogacel","doljae","echo304","ghkim3221","heowc","hllee1021","ikhoon","injae-kim","jrhee17","kojilin","ks-yim","mauhiz","minwoox","mitrofmep","mscheong01","nao0811ta","opus53","SeanWhoCodes","seonwoo960000","ta7uw","taodo2291","tobias-","trustin","vkostyukov","wu-sheng","yamamichid"]})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}function m(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);