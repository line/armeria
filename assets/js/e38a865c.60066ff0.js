"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[6688],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var s=i(96540);const t={},r=s.createContext(t);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(r.Provider,{value:n},e.children)}},96946:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"0.96.0","title":"v0.96.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/0.96.0.mdx","sourceDirName":".","slug":"/0.96.0","permalink":"/release-notes/0.96.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/release-notes/0.96.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2019-11-23T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.97.0","permalink":"/release-notes/0.97.0"},"next":{"title":"v0.95.0","permalink":"/release-notes/0.95.0"}}');var t=i(74848),r=i(28453);const c={date:new Date("2019-11-23T00:00:00.000Z")},l="v0.96.0",o={},a=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcaa Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{ThankYou:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.header,{children:[(0,t.jsx)(n.h1,{id:"v0960",children:"v0.96.0"}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"November 23, 2019"})})]}),"\n",(0,t.jsx)(n.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The type signature of clients and services has been greatly simplified. Note that this involves various breaking changes unfortunately. See the 'Breaking changes' section for the details. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2239",children:"#2239"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2254",children:"#2254"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Before:\npublic class FooHttpService implements Service<HttpRequest, HttpResponse> { ... }\npublic class FooRpcService implements Service<RpcRequest, RpcResponse> { ... }\npublic class FooHttpClient implements Client<HttpRequest, HttpResponse> { ... }\npublic class FooRpcClient implements Client<RpcRequest, RpcResponse> { ... }\n\nService<HttpRequest, HttpResponse> foo(Service<HttpRequest, HttpResponse> bar) { ... }\n\nFunction<Service<HttpRequest, HttpResponse>,\n         ? extends Service<HttpRequest, HttpResponse>> httpServiceDecorator;\nFunction<Service<RpcRequest, RpcResponse>,\n         ? extends Service<RpcRequest, RpcResponse>> rpcServiceDecorator;\nFunction<Client<HttpRequest, HttpResponse>,\n         ? extends Client<HttpRequest, HttpResponse>> httpClientDecorator;\nFunction<Client<RpcRequest, RpcResponse>,\n         ? extends Client<RpcRequest, RpcResponse>> rpcClientDecorator;\n\n// After:\npublic class FooHttpService implements HttpService { ... }\npublic class FooRpcService implements RpcService { ... }\npublic class FooHttpClient implements HttpClient { ... }\npublic class FooRpcClient implements RpcClient { ... }\n\nHttpService foo(HttpService bar) { ... }\n\nFunction<? super HttpService, ? extends HttpService> httpServiceDecorator;\nFunction<? super RpcService, ? extends RpcService> rpcServiceDecorator;\nFunction<? super HttpClient, ? extends HttpClient> httpClientDecorator;\nFunction<? super RpcClient, ? extends RpcClient> rpcClientDecorator;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You can now specify service-level settings for annotated services, just like other service types. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2180",children:"#2180"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2222",children:"#2222"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Server server =\n    Server.builder()\n          .annotatedService().pathPrefix("/api")\n                             .requestTimeoutMillis(5000)\n                             .exceptionHandler((ctx, req, cause) -> ...)\n                             .build(new Object() { ... }))\n          .build();\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"RequestContext"})," now has its own ",(0,t.jsx)(n.code,{children:"RequestId"}),", which is a 64-bit random integer by default. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2001",children:"#2001"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2174",children:"#2174"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2203",children:"#2203"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2224",children:"#2224"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Server server =\n    Server.builder()\n          .service("/", (ctx, req) -> {\n              return HttpResponse.of("Request ID: %s", ctx.id().text());\n          })\n          .build();\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You can now add a cause to an ",(0,t.jsx)(n.code,{children:"HttpStatusException"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2253",children:"#2253"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"HttpService service = (ctx, req) -> {\n    try (FileInputStream in = new FileInputStream(...)) {\n        ...\n    } catch (FileNotFoundException e) {\n        throw HttpStatusException.of(HttpStatus.NOT_FOUND, e);\n    }\n};\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Armeria server now always has a fallback service which is matched when no routes match a request. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1625",children:"#1625"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2255",children:"#2255"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["As a result, a route decorator bound at ",(0,t.jsx)(n.code,{children:"prefix:/"})," can intercept any requests, even the requests not handled by any services:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// CorsService will intercept any requests,\n// even the ones not handled by any services.\nServer server =\n    Server.builder()\n          .service("/foo", fooService)\n          .service("/bar", barService)\n          .routeDecorator().pathPrefix("/")\n                           .build(CorsService.newDecorator(...))\n          .build();\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You can now determine the log level of ",(0,t.jsx)(n.code,{children:"LoggingClient"})," and ",(0,t.jsx)(n.code,{children:"LoggingService"})," dynamically. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2250",children:"#2250"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2258",children:"#2258"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"LoggingClient.builder()\n             .requestLogLevel(log -> ...)\n             .responseLogLevel(log -> {\n                 if (log.responseCause() == null ||\n                     log.responseCause() instanceof HarmlessException) {\n                     return LogLevel.INFO;\n                 } else {\n                     return LogLevel.WARN;\n                 }\n             });\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ClientFactoryOptions"})," has been added to allow programmatic access to the ",(0,t.jsx)(n.code,{children:"ClientFactory"})," settings. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2230",children:"#2230"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"ClientFactory factory = ...;\nboolean pipelining = factory.options().useHttp1Pipelining();\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You can now disable Armeria's Netty-based asynchronous DNS resolver by specifying ",(0,t.jsx)(n.code,{children:"-Dcom.linecorp.armeria.useJdkDnsResolver=true"})," JVM option. Use it only when the default resolver does not work. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2261",children:"#2261"})]}),"\n"]}),"\n"]}),"\n","\n",(0,t.jsx)(n.h2,{id:"-improvements",children:"\ud83d\udcaa Improvements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Armeria client does not block a request anymore when DNS resolution takes long time. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2017",children:"#2017"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2217",children:"#2217"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2231",children:"#2231"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You do not have to prepend ",(0,t.jsx)(n.code,{children:"none+"})," prefix to non-RPC URIs anymore. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2219",children:"#2219"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2241",children:"#2241"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Before:\nClients.of("none+https://...", ...);\n// After:\nClients.of("https://...", ...);\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The behavior of ",(0,t.jsx)(n.code,{children:"Scheme.parse()"})," and ",(0,t.jsx)(n.code,{children:"tryParse()"})," has been improved in the same manner:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Scheme.parse() now uses SerializationFormat.NONE automatically:\nassert Scheme.parse("http") == Scheme.parse("none+http");\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Armeria Spring auto-configuration now works correctly even when only ",(0,t.jsx)(n.code,{children:"GrpcServiceRegistrationBean"}),"s are given. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2234",children:"#2234"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RequestContext"})," is not pushed more often than necessary anymore when notifying ",(0,t.jsx)(n.code,{children:"RequestLogListener"}),"s. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2227",children:"#2227"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DynamicEndpointGroup"})," now handles the case where an endpoint address does not change but only a weight. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2240",children:"#2240"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"HttpStatusException"})," now respects ",(0,t.jsx)(n.code,{children:"Flags.verboseExceptionSampler()"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2253",children:"#2253"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AccessLogWriter"})," does not fail with a ",(0,t.jsx)(n.code,{children:"ClassCastException"})," anymore. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2259",children:"#2259"})]}),"\n",(0,t.jsxs)(n.li,{children:["Fixed a bug where a service receives an ",(0,t.jsx)(n.code,{children:"OPTIONS"})," request even if the service did not opt-in for ",(0,t.jsx)(n.code,{children:"OPTIONS"})," method. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2263",children:"#2263"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ClientFactory.DEFAULT"})," has been deprecated in favor of ",(0,t.jsx)(n.code,{children:"ClientFactory.ofDefault()"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The getters for host-level settings in ",(0,t.jsx)(n.code,{children:"ServerConfig"})," have been deprecated. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2244",children:"#2244"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2246",children:"#2246"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Before:\nHttpService service = (ctx, req) -> {\n    return HttpResponse.of("maxRequestLength: %d",\n                           ctx.server().maxRequestLength());\n};\n// After:\nHttpService service = (ctx, req) -> {\n    return HttpResponse.of("maxRequestLength: %d",\n                           ctx.virtualHost().maxRequestLength());\n};\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Continuing the migration to static ",(0,t.jsx)(n.code,{children:"builder()"})," factory methods, the following classes have switched from constructors to static ",(0,t.jsx)(n.code,{children:"builder()"})," methods: ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2221",children:"#2221"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ClientCacheControl"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ClientConnectionTimings"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ClientDecoration"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ClientFactory"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ClientOptions"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ClientRequestContext"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"EndpointInfo"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"FieldInfo"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"HttpClient"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"LoggingClient"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"LoggingService"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"RequestContextCurrentTraceContext"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"RetrofitMeterIdPrefixFunction"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ServerCacheControl"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ServiceRequestContext"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The signatures of ",(0,t.jsx)(n.code,{children:"RequestContext.newDerivedContext()"})," have been changed so they always require ",(0,t.jsx)(n.code,{children:"RequestId"}),", ",(0,t.jsx)(n.code,{children:"HttpRequest"})," and ",(0,t.jsx)(n.code,{children:"RpcRequest"})," for less ambiguity. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2209",children:"#2209"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2224",children:"#2224"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Scheme.parse()"})," and ",(0,t.jsx)(n.code,{children:"tryParse()"})," do not fail anymore even if the scheme does not start with ",(0,t.jsx)(n.code,{children:"none+"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2219",children:"#2219"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2241",children:"#2241"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Scheme.parse() now uses SerializationFormat.NONE automatically:\nassert Scheme.parse("http") == Scheme.parse("none+http");\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ClientBuilderParams.uri()"})," does not return a URI with ",(0,t.jsx)(n.code,{children:"none+"})," prefix anymore. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2219",children:"#2219"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2241",children:"#2241"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"HttpClient"})," interface has been renamed to ",(0,t.jsx)(n.code,{children:"WebClient"}),". ",(0,t.jsx)(n.code,{children:"HttpClient"})," is now a different interface that extends ",(0,t.jsx)(n.code,{children:"Client<HttpRequest, HttpResponse>"}),". ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2254",children:"#2254"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Doesn\'t work:\nHttpClient client = HttpClient.of("https://www.google.com/");\n// Good:\nWebClient client = WebClient.of("https://www.google.com/");\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Services must implement ",(0,t.jsx)(n.code,{children:"HttpService"})," or ",(0,t.jsx)(n.code,{children:"RpcService"})," and clients must implement ",(0,t.jsx)(n.code,{children:"HttpClient"})," or ",(0,t.jsx)(n.code,{children:"RpcClient"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2239",children:"#2239"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2254",children:"#2254"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Before:\npublic class FooHttpService implements Service<HttpRequest, HttpResponse> { ... }\npublic class FooRpcService implements Service<RpcRequest, RpcResponse> { ... }\npublic class FooHttpClient implements Client<HttpRequest, HttpResponse> { ... }\npublic class FooRpcClient implements Client<RpcRequest, RpcResponse> { ... }\n// After:\npublic class FooHttpService implements HttpService { ... }\npublic class FooRpcService implements RpcService { ... }\npublic class FooHttpClient implements HttpClient { ... }\npublic class FooRpcClient implements RpcClient { ... }\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You'll have to change any ",(0,t.jsx)(n.code,{children:"Service<...>"})," and ",(0,t.jsx)(n.code,{children:"Client<...>"})," usages in your code into ",(0,t.jsx)(n.code,{children:"HttpService"}),", ",(0,t.jsx)(n.code,{children:"RpcService"}),", ",(0,t.jsx)(n.code,{children:"HttpClient"})," or ",(0,t.jsx)(n.code,{children:"RpcClient"}),", unless you intended to express ",(0,t.jsx)(n.em,{children:"both"})," HTTP- and RPC- level types."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Before:\nService<HttpRequest, HttpResponse> foo(Service<HttpRequest, HttpResponse> bar) { ... }\n// After:\nHttpService foo(HttpService bar) { ... }\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Similarly, you must use ",(0,t.jsx)(n.code,{children:"SimpleDecoratingHttpClient"})," or ",(0,t.jsx)(n.code,{children:"SimpleDecoratingRpcClient"})," instead of ",(0,t.jsx)(n.code,{children:"SimpleDecoratingClient"}),", and ",(0,t.jsx)(n.code,{children:"SimpleDecoratingHttpService"})," or ",(0,t.jsx)(n.code,{children:"SimpleDecoratingRpcService"})," instead of ",(0,t.jsx)(n.code,{children:"SimpleDecoratingService"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Does not work:\nclass MyDecoratorService extends SimpleDecoratingService<HttpRequest, HttpResponse> {\n    MyDecoratorService(Service<HttpRequest, HttpResponse> delegate) {\n        super(delegate);\n    }\n    ...\n}\n// Good:\nclass MyDecoratorService extends SimpleDecoratingHttpService {\n    // Note the constructor parameter change.\n    MyDecoratorService(HttpService delegate) {\n        super(delegate);\n    }\n    ...\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If you implemented your decorator without extending the ",(0,t.jsx)(n.code,{children:"SimpleDecorating{Http,Rpc}Service"})," or ",(0,t.jsx)(n.code,{children:"SimpleDecorating{Http,Rpc}Client"}),", then you must make sure that it implements ",(0,t.jsx)(n.code,{children:"HttpService"}),", ",(0,t.jsx)(n.code,{children:"RpcRequest"}),", ",(0,t.jsx)(n.code,{children:"HttpClient"})," or ",(0,t.jsx)(n.code,{children:"RpcClient"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Does not work:\nclass MyDecoratorService implements Service<HttpRequest, HttpResponse> {\n\n    final Service<HttpRequest, HttpResponse> delegate;\n\n    MyDecoratorService(Service<HttpRequest, HttpResponse> delegate) {\n        this.delegate = delegate;\n    }\n    ...\n}\n// Good:\nclass MyDecoratorService implements HttpService {\n    // Note the type change.\n    final HttpService delegate;\n    // Note the constructor parameter change.\n    MyDecoratorService(HttpService delegate) {\n        this.delegate = delegate;\n    }\n    ...\n}\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Service.decorate()"})," has been pushed down to ",(0,t.jsx)(n.code,{children:"HttpService"})," and ",(0,t.jsx)(n.code,{children:"RpcService"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2239",children:"#2239"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2254",children:"#2254"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Does not work:\nService<HttpRequest, HttpResponse> service = (ctx, req) -> ...;\nservice.decorate(myDecorator); // No such method\n// Good:\nHttpService service (ctx, req) -> ...;\nservice.decorate(myDecorator); // OK!\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The type parameters of decorator ",(0,t.jsx)(n.code,{children:"Function"}),"s have been changed. ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2239",children:"#2239"})," ",(0,t.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2254",children:"#2254"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// Before:\nFunction<Service<HttpRequest, HttpResponse>,\n         ? extends Service<HttpRequest, HttpResponse>> httpServiceDecorator;\nFunction<Service<RpcRequest, RpcResponse>,\n         ? extends Service<RpcRequest, RpcResponse>> rpcServiceDecorator;\nFunction<Client<HttpRequest, HttpResponse>,\n         ? extends Client<HttpRequest, HttpResponse>> httpClientDecorator;\nFunction<Client<RpcRequest, RpcResponse>,\n         ? extends Client<RpcRequest, RpcResponse>> rpcClientDecorator;\n// After:\nFunction<? super HttpService, ? extends HttpService> httpServiceDecorator;\nFunction<? super RpcService, ? extends RpcService> rpcServiceDecorator;\nFunction<? super HttpClient, ? extends HttpClient> httpClientDecorator;\nFunction<? super RpcClient, ? extends RpcClient> rpcClientDecorator;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Some types, which could be used at both HTTP- and RPC- level, have been split into two different types. For example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DecoratingClientFunction"})," has been split into ",(0,t.jsx)(n.code,{children:"DecoratingHttpClientFunction"})," and ",(0,t.jsx)(n.code,{children:"DecoratingRpcClientFunction"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DecoratingServiceFunction"})," has been split into ",(0,t.jsx)(n.code,{children:"DecoratingHttpServiceFunction"})," and ",(0,t.jsx)(n.code,{children:"DecoratingRpcServiceFunction"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"LoggingClient"})," has been split into ",(0,t.jsx)(n.code,{children:"LoggingClient"})," and ",(0,t.jsx)(n.code,{children:"LoggingRpcClient"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ServiceWithRoutes"})," has been split into ",(0,t.jsx)(n.code,{children:"HttpServiceWithRoutes"})," and ",(0,t.jsx)(n.code,{children:"RpcServiceWithRoutes"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"TransientService"})," has been split into ",(0,t.jsx)(n.code,{children:"TransientHttpService"})," and ",(0,t.jsx)(n.code,{children:"TransientRpcService"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"The following services are now provided only at HTTP-level. Please let us know if you need an RPC-level version of them."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"LoggingService"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"MetricCollectingService"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"StructuredLoggingService"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"KafkaStructuredLoggingService"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Brave 5.8.0 -> 5.9.0"}),"\n",(0,t.jsx)(n.li,{children:"gRPC 1.24.1 -> 1.25.0"}),"\n",(0,t.jsx)(n.li,{children:"Jackson 2.10.0 -> 2.10.1"}),"\n",(0,t.jsx)(n.li,{children:"Micrometer 1.3.0 -> 1.3.1"}),"\n",(0,t.jsx)(n.li,{children:"Netty TCNative BoringSSL 2.0.26 -> 2.0.27"}),"\n",(0,t.jsx)(n.li,{children:"Protobuf 3.9.1 -> 3.10.0"}),"\n",(0,t.jsx)(n.li,{children:"RxJava 2.2.13 -> 2.2.14"}),"\n",(0,t.jsx)(n.li,{children:"SLF4J 1.7.28 -> 1.7.29"}),"\n",(0,t.jsx)(n.li,{children:"Spring Boot 2.1.9 -> 2.1.10"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,t.jsx)(i,{usernames:["anuraaga","delegacy","eunchan-kim","heowc","hirakida","ikhoon","imasahiro","jrhee17","jyblue","matsumana","mauhiz","minwoox","rmohta","sivaalli","snaiper80","Stupremee","trustin","yanghun0070"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);