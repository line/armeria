---
type: tutorial
tags:
  - rest
  - request
level: basic
---

# Step 4. Implement READ operations

In this step, we will write methods for retrieving blog posts. Let's write one method for retrieving a single post and in the other, multiple blog posts. The HTTP method we map with these methods are GET.

For retrieving a single post, we will take a blog post ID as the identifier, and for retrieving multiple posts, we will take a sorting order for the blog posts retrieved. 

// TODO: TW 아래 내용은 다른 형식으로 제공할 수 있음. 고민 중임.
<Tip>

View the sample service code [here](#).

</Tip>

// TODO: TW 이 부분은 별도 섹션이 아닌 adomination으로 변경될 가능성 있음. 고민 중임.

After completing this step, you will have learnt to use the following Armeria features:

  - HTTP method mapping (<type://@Get>)
  - Parameter injection (<type://@Param>)
  - Parameter ...<type://@Default>

## Prerequisites

You need to have the following two files prepared from previous steps.

- BlogService.java
- BlogPost.java

## 1. Map HTTP method

Map the GET method for retrieving a _single_ blog post:

1. Declare a service method, `getBlogPost()` in the class `BlogService`.
2. Map the service method with the HTTP GET method by adding the <type://@Get> annotation as follows.

```java filename=BlogService.java highlight=1
@Get("/blogs")
public HttpResponse getBlogPost(int id) throws JsonProcessingException { 
  // Implementation
}
```

Map the GET method for retrieving _multiple_ blog posts:

1. Declare a service method, `getBlogPosts()` in the class `BlogService`.
2. Map the service method with the HTTP GET method by adding the annotation, <type://@Get>.

```java filename=BlogService.java highlight=1
@Get("/blogs")
public Iterable<BlogPost> getBlogPosts(boolean descending) {
  // Implementation
}
```

## 2. Handle request parameters

For retrieving a single blog post, we will take the blog post ID as the identifier. Let's take the ID as the path parameter.

1. Add `/:id` to the <type://@Get> annotation's parameter to get the ID as the path parameter.
2. To inject the path parameter to the service method, annotate the paramter with <type://@Param>.

```java filename=BlogService.java
@Get("/blogs/:id")
public HttpResponse getBlogPost(@Param int id) throws JsonProcessingException { }
```

For retrieving multiple blog posts, we will provide an option to specify the sorting order. Let's take the sorting order as the query parameter:

1. Annotate the parameter `descending` with <type://@Param>.
2. Annotate the parameter `descending` again with <type://@Default> with its parameter as`"true"`.

```java filename=BlogService.java highlight=2
 @Get("/blogs")
    @ProducesJson
    public Iterable<BlogPost> getBlogPosts(@Param @Default("true") boolean descending) { }
```

See [Parameter injection](/docs/server-annotated-service#parameter-injection) for more information.

## 3. Implement service code

In this step, we will write the code required for service itself.

For retrieving a single blog post information, copy the following code inside the `getBlogPost()` method.

```java filename=BlogService.java
final BlogPost blogPost = blogPosts.get(id);
```

For retrieving multiple post information, we will get and return the result right away. See the instructions in the next step.

## 4. Return response

Now, it's time to return a response to our client. Inside the `getBlogPost()` method, create and return a response using Armeria's <type://HTTPResponse> as follows.

```java filename=BlogService.java
...
final byte[] content = mapper.writeValueAsBytes(blogPost);
return HttpResponse.of(HttpStatus.OK, MediaType.JSON_UTF_8, content);
```

To return information for multiple blog posts:

1. Copy the following code inside the `getBlogPosts()` method.
  ```java filename=BlogService.java highlight=2-9
  public Iterable<BlogPost> getBlogPosts(@Param @Default("true") boolean descending) {
    if (descending) {
        return blogPosts.entrySet()
                        .stream()
                        .sorted(Collections.reverseOrder(Comparator.comparingInt(Entry::getKey)))
                        .map(Entry::getValue).collect(toImmutableList());
    }
    return blogPosts.values().stream().collect(toImmutableList());
    ```
2. Annotate the method `getBlogPosts()` with <type://ProducesJson>. This returns the response as a JSON object for you.
  ```java filename=BlogService.java highlight=2
  @Get("/blogs")
  @ProducesJson
  public Iterable<BlogPost> getBlogPosts(@Param @Default("true") boolean descending) {
  ...
  }
  ```

## Next step

In this step, we have written methods for read operation. We have used Armeria's annotations; <type://@Get>, <type://@ProducesJson>, <type://@Param>, and <type://@Default>. Next, let's implement a read operation.


