"use strict";(self.webpackChunkarmeria_site=self.webpackChunkarmeria_site||[]).push([[7968],{8094:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return p},default:function(){return k},pageTitle:function(){return l}});var a,r=n(63366),s=(n(67294),n(64983)),o=n(28819),i=["components"],l="Structured logging",p={},m=(a="Tip",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.kt)("div",e)}),c={pageTitle:l,_frontmatter:p},d=o.Z;function k(e){var t=e.components,n=(0,r.Z)(e,i);return(0,s.kt)(d,Object.assign({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"structured-logging",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h1",href:"#structured-logging","aria-label":"structured logging permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Structured logging"),(0,s.kt)("h6",{className:"inlinePageToc",role:"navigation"},"Table of contents"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#what-properties-can-be-retrieved"},"What properties can be retrieved?")),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#request-properties"},"Request properties")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#response-properties"},"Response properties")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#client-connection-timing-properties"},"Client connection timing properties")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#availability-of-properties"},"Availability of properties")),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#availability-of-client-timing-properties"},"Availability of client timing properties")))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#enabling-content-previews"},"Enabling content previews"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#nested-log"},"Nested log")))),(0,s.kt)("p",null,"Although traditional logging is a useful tool to diagnose the behavior of an application, it has its own\nproblem; the resulting log messages are not always machine-friendly. This section explains the Armeria API for\nretrieving the information collected during request life cycle in a machine-friendly way."),(0,s.kt)("h2",{id:"what-properties-can-be-retrieved",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h2",href:"#what-properties-can-be-retrieved","aria-label":"what properties can be retrieved permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"What properties can be retrieved?"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," provides various properties recorded while handling a request:"),(0,s.kt)("h3",{id:"request-properties",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h3",href:"#request-properties","aria-label":"request properties permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Request properties"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("div",{style:{width:"13rem"}},"Property")),(0,s.kt)("th",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"th"},"Description")))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestStartTimeMicros"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"when the request processing started, in microseconds since the\nepoch (01-Jan-1970 00:00:00 UTC)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration took to process the request completely"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestLength"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the byte length of the request content"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestCause"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the cause of request processing failure (if any)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"sessionProtocol"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the protocol of the connection (e.g. ",(0,s.kt)("inlineCode",{parentName:"p"},"H2C"),")"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"serializationFormat"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the serialization format of the content (e.g. ",(0,s.kt)("inlineCode",{parentName:"p"},"tbinary"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"none"),")"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"name"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the human-readable simple name of the request, such as:"),(0,s.kt)("ul",{parentName:"td"},(0,s.kt)("li",{parentName:"ul"},"gRPC - A capitalized method name defined in\n",(0,s.kt)("inlineCode",{parentName:"li"},"io.grpc.MethodDescriptor")," (e.g, ",(0,s.kt)("inlineCode",{parentName:"li"},"GetItems"),")"),(0,s.kt)("li",{parentName:"ul"},"Thrift and annotated service - a method name (e.g, ",(0,s.kt)("inlineCode",{parentName:"li"},"getItems"),")"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"type://HttpService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpService.html"},"type://HttpService")," - an HTTP method name")))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"serviceName"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the human-readable name of the service that served the request,\nsuch as:"),(0,s.kt)("ul",{parentName:"td"},(0,s.kt)("li",{parentName:"ul"},"gRPC - a service name (e.g, ",(0,s.kt)("inlineCode",{parentName:"li"},"com.foo.GrpcService"),")"),(0,s.kt)("li",{parentName:"ul"},"Thrift - a service type (e.g, ",(0,s.kt)("inlineCode",{parentName:"li"},"com.foo.ThriftService$AsyncIface")," or\n",(0,s.kt)("inlineCode",{parentName:"li"},"com.foo.ThriftService$Iface)")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"type://HttpService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpService.html"},"type://HttpService")," and annotated service - an innermost class\nname")))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"host"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the name of the virtual host that serves the request"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestHeaders"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the HTTP headers of the request.\nthe header contains the method (e.g. ",(0,s.kt)("inlineCode",{parentName:"p"},"GET"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"POST"),"),\nthe path (e.g. ",(0,s.kt)("inlineCode",{parentName:"p"},"/thrift/foo"),"),\nthe query (e.g. ",(0,s.kt)("inlineCode",{parentName:"p"},"foo=bar&bar=baz"),"), the content type, etc."))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestContent"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the serialization-dependent content object of the request.\n",(0,s.kt)("inlineCode",{parentName:"p"},"ThriftCall")," for Thrift. ",(0,s.kt)("inlineCode",{parentName:"p"},"null")," otherwise."))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"requestContentPreview"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the preview of the request content"))))),(0,s.kt)("h3",{id:"response-properties",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h3",href:"#response-properties","aria-label":"response properties permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Response properties"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("div",{style:{width:"13rem"}},"Property")),(0,s.kt)("th",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"th"},"Description")))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseStartTimeMicros"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"when the response processing started, in microseconds since the\nepoch (01-Jan-1970 00:00:00 UTC)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration took to process the response completely"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseLength"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the byte length of the response content"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseCause"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the cause of response processing failure (if any)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"totalDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration between the request start and the response end\n(i.e. response time)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseHeaders"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the HTTP headers of the response.\nthe header contains the statusCode (e.g. 404), the content type, etc."))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseContent"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the serialization-dependent content object of the response.\n",(0,s.kt)("inlineCode",{parentName:"p"},"ThriftReply")," for Thrift. ",(0,s.kt)("inlineCode",{parentName:"p"},"null")," otherwise."))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"responseContentPreview"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the preview of the response content"))))),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"totalDurationNanos")," value is calculated differently between the client-side and the server-side."),(0,s.kt)("p",null,"For the server-side, ",(0,s.kt)("inlineCode",{parentName:"p"},"totalDurationNanos")," starts when the server receives the ",(0,s.kt)("a",{parentName:"p",href:"type://RequestHeaders:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestHeaders.html"},"type://RequestHeaders")," and\nends when the server sends the response fully:"),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"744",height:"208",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"744",height:"208"}),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"428",y:"88",width:"224",height:"32",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"440,100 432,104 440,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"440",y1:"104",x2:"456",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"458",y:"108"},"responseDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"624",y1:"104",x2:"640",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,100 648,104 640,108",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"104,36 96,40 104,44",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"104",y1:"40",x2:"312",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"314",y:"44"},"totalDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"456",y1:"40",x2:"640",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,36 648,40 640,44",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"104,68 96,72 104,76",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"104",y1:"72",x2:"128",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"130",y:"76"},"requestDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"288",y1:"72",x2:"312",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"312,68 320,72 312,76",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"88,108 92,96 96,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"92",y1:"108",x2:"92",y2:"144",className:"broken"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"320,108 324,96 328,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"324",y1:"108",x2:"324",y2:"144",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"90",y:"156"},"RequestHeaders"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"306",y:"156"},"the"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"424,140 428,128 432,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"428",y1:"140",x2:"428",y2:"176",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"410",y:"188"},"ResponseHeaders"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"648,140 652,128 656,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"652",y1:"140",x2:"652",y2:"176",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"626",y:"188"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"658",y:"188"},"last"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"18",y:"156"},"Received"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"234",y:"156"},"Received"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"338",y:"156"},"last"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"378",y:"156"},"frame"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"346",y:"188"},"Sending"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"562",y:"188"},"Sending"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"698",y:"188"},"frame"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"24",x2:"652",y2:"24",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"24",x2:"92",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"652",y1:"24",x2:"652",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"56",x2:"652",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"324",y1:"56",x2:"324",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"88",x2:"324",y2:"88",className:"solid"}),"\n  "))),(0,s.kt)("p",null,"As you noticed, ",(0,s.kt)("inlineCode",{parentName:"p"},"totalDurationNanos")," is not the sum of ",(0,s.kt)("inlineCode",{parentName:"p"},"requestDurationNanos")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"responseDurationNanos"),".\nThe sum of ",(0,s.kt)("inlineCode",{parentName:"p"},"requestDurationNanos")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"responseDurationNanos")," even can be greater than ",(0,s.kt)("inlineCode",{parentName:"p"},"totalDurationNanos")," when\nthe ",(0,s.kt)("a",{parentName:"p",href:"type://ResponseHeaders:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseHeaders.html"},"type://ResponseHeaders")," is sent before the service receives the ",(0,s.kt)("a",{parentName:"p",href:"type://HttpRequest:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html"},"type://HttpRequest")," fully:"),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"664",height:"192",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"664",height:"192"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"104,36 96,40 104,44",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"104",y1:"40",x2:"312",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"314",y:"44"},"totalDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"456",y1:"40",x2:"640",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,36 648,40 640,44",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"104,68 96,72 104,76",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"104",y1:"72",x2:"192",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"194",y:"76"},"requestDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"352",y1:"72",x2:"440",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"440,68 448,72 440,76",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"296,100 288,104 296,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"296",y1:"104",x2:"384",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"386",y:"108"},"responseDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"552",y1:"104",x2:"640",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,100 648,104 640,108",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"280,140 284,128 288,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"284",y1:"140",x2:"284",y2:"144",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"156"},":"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"170",y:"172"},"ResponseHeaders"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"106",y:"172"},"Sending"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"172"},"before"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"354",y:"172"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"386",y:"172"},"service"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"450",y:"172"},"fully"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"498",y:"172"},"receives"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"570",y:"172"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"602",y:"172"},"request"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"24",x2:"652",y2:"24",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"24",x2:"92",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"652",y1:"24",x2:"652",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"56",x2:"652",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"452",y1:"56",x2:"452",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"92",y1:"88",x2:"652",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"88",x2:"284",y2:"120",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"652",y1:"88",x2:"652",y2:"120",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"120",x2:"652",y2:"120",className:"solid"}),"\n  "))),(0,s.kt)("p",null,"On the other hand, ",(0,s.kt)("inlineCode",{parentName:"p"},"totalDurationNanos")," of the client-side contains\n",(0,s.kt)("a",{parentName:"p",href:"/docs/advanced-structured-logging#client-connection-timing-properties"},"connectionAcquisitionDuration"),",\nbecause a client may have to establish a new connection or acquire an existing connection from\nthe connection pool before sending a request:"),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"768",height:"240",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"768",height:"240"}),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"276",y:"88",width:"216",height:"32",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"288,100 280,104 288,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"288",y1:"104",x2:"304",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"306",y:"108"},"requestDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"464",y1:"104",x2:"480",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"480,100 488,104 480,108",className:"filled"}),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"532",y:"120",width:"224",height:"32",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"544,132 536,136 544,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"544",y1:"136",x2:"560",y2:"136",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"562",y:"140"},"responseDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"728",y1:"136",x2:"744",y2:"136",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"744,132 752,136 744,140",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"40,36 32,40 40,44",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"40",y1:"40",x2:"328",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"330",y:"44"},"totalDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"472",y1:"40",x2:"744",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"744,36 752,40 744,44",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"40,68 32,72 40,76",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"40",y1:"72",x2:"56",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"58",y:"76"},"connectionAcquisition"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"224",y1:"72",x2:"240",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"240,68 248,72 240,76",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"272,140 276,128 280,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"276",y1:"140",x2:"276",y2:"176",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"218",y:"188"},"RequestHeaders"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"488,140 492,128 496,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"492",y1:"140",x2:"492",y2:"176",className:"broken"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"528,172 532,160 536,172",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"532",y1:"172",x2:"532",y2:"208",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"490",y:"188"},"frame"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"442",y:"220"},"ResponseHeaders"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"752,172 756,160 760,172",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"756",y1:"172",x2:"756",y2:"208",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"722",y:"220"},"chunk"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"154",y:"188"},"Sending"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"354",y:"188"},"Sending"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"418",y:"188"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"450",y:"188"},"last"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"370",y:"220"},"Received"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"578",y:"220"},"Received"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"650",y:"220"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"682",y:"220"},"last"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"24",x2:"756",y2:"24",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"24",x2:"28",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"756",y1:"24",x2:"756",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"56",x2:"756",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"252",y1:"56",x2:"252",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"88",x2:"252",y2:"88",className:"solid"}),"\n  "))),(0,s.kt)(m,{mdxType:"Tip"},(0,s.kt)("p",null,"In the client-side, the response timeout scheduler starts by the first of the following two events:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The client sends the last frame of an ",(0,s.kt)("a",{parentName:"li",href:"type://HttpRequest:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html"},"type://HttpRequest"),"."),(0,s.kt)("li",{parentName:"ul"},"The client receives a ",(0,s.kt)("a",{parentName:"li",href:"type://ResponseHeaders:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseHeaders.html"},"type://ResponseHeaders"),".")),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"664",height:"304",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"664",height:"304"}),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"172",y:"88",width:"216",height:"32",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"184,100 176,104 184,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"184",y1:"104",x2:"200",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"202",y:"108"},"requestDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"360",y1:"104",x2:"376",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"376,100 384,104 376,108",className:"filled"}),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"428",y:"120",width:"224",height:"32",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"440,132 432,136 440,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"440",y1:"136",x2:"456",y2:"136",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"458",y:"140"},"responseDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"624",y1:"136",x2:"640",y2:"136",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,132 648,136 640,140",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"24,36 16,40 24,44",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"24",y1:"40",x2:"224",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"226",y:"44"},"totalDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"368",y1:"40",x2:"640",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,36 648,40 640,44",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"24,68 16,72 24,76",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"24",y1:"72",x2:"40",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"42",y:"76"},"connection"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"120",y1:"72",x2:"136",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"136,68 144,72 136,76",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"384,140 388,128 392,140",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"388",y1:"140",x2:"388",y2:"144",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"386",y:"156"},":"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"338",y:"172"},"timeout"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"402",y:"172"},"scheduler"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"482",y:"172"},"starts"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"266",y:"172"},"Response"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"306",y:"188"},":"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"308",y1:"192",x2:"308",y2:"196",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"304,196 312,196 308,208",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"184,228 176,232 184,236",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"184",y1:"232",x2:"264",y2:"232",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"266",y:"236"},"requestDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"424",y1:"232",x2:"504",y2:"232",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"504,228 512,232 504,236",className:"filled"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"320,260 312,264 320,268",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"320",y1:"264",x2:"408",y2:"264",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"410",y:"268"},"responseDurationNanos"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"576",y1:"264",x2:"640",y2:"264",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"640,260 648,264 640,268",className:"filled"}),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"12",y1:"24",x2:"652",y2:"24",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"12",y1:"24",x2:"12",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"652",y1:"24",x2:"652",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"12",y1:"56",x2:"652",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"148",y1:"56",x2:"148",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"12",y1:"88",x2:"148",y2:"88",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"172",y1:"216",x2:"516",y2:"216",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"172",y1:"216",x2:"172",y2:"248",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"516",y1:"216",x2:"516",y2:"248",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"172",y1:"248",x2:"652",y2:"248",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"652",y1:"248",x2:"652",y2:"280",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"308",y1:"256",x2:"308",y2:"280",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"308",y1:"280",x2:"652",y2:"280",className:"solid"}),"\n  ")))),(0,s.kt)("h3",{id:"client-connection-timing-properties",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h3",href:"#client-connection-timing-properties","aria-label":"client connection timing properties permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Client connection timing properties"),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("div",{style:{width:"20rem"}},"Property")),(0,s.kt)("th",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"th"},"Description")))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"connectionAcquisitionStartTimeMicros"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"when the client started to acquire a connection, in microseconds\nsince the epoch (01-Jan-1970 00:00:00 UTC)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"connectionAcquisitionDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration took to get a connection (i.e. the total duration)"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"dnsResolutionStartTimeMicros"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"when the client started to resolve a domain name, in microseconds\nsince the epoch (01-Jan-1970 00:00:00 UTC), ",(0,s.kt)("inlineCode",{parentName:"p"},"-1")," if DNS lookup\ndid not occur"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"dnsResolutionDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration took to resolve a domain name, ",(0,s.kt)("inlineCode",{parentName:"p"},"-1")," if DNS lookup\ndid not occur"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"socketConnectStartTimeMicros"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"when the client started to connect to a remote peer, in\nmicroseconds since the epoch (01-Jan-1970 00:00:00 UTC), ",(0,s.kt)("inlineCode",{parentName:"p"},"-1"),"\nif socket connection attempt did not occur"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"socketConnectDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration took to connect to a remote peer, ",(0,s.kt)("inlineCode",{parentName:"p"},"-1")," if socket\nconnection attempt did not occur"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"pendingAcquisitionStartTimeMicros"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"when the client started to wait for the completion of an existing\nconnection attempt, in microseconds since the\nepoch (01-Jan-1970 00:00:00 UTC), ",(0,s.kt)("inlineCode",{parentName:"p"},"-1")," if waiting did not occur"))),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},(0,s.kt)("inlineCode",{parentName:"p"},"pendingAcquisitionDurationNanos"))),(0,s.kt)("td",{parentName:"tr",colspan:1,rowspan:1},(0,s.kt)("p",{parentName:"td"},"the duration took to wait for the completion of an existing\nconnection attempt to use one connection in HTTP/2, ",(0,s.kt)("inlineCode",{parentName:"p"},"-1")," if\nwaiting did not occur"))))),(0,s.kt)("p",null,"The connection acquisition duration is the sum of ",(0,s.kt)("inlineCode",{parentName:"p"},"dnsResolutionDurationNanos"),", ",(0,s.kt)("inlineCode",{parentName:"p"},"socketConnectDurationNanos")," and\n",(0,s.kt)("inlineCode",{parentName:"p"},"pendingAcquisitionDurationNanos"),". They may or may not occur depending on circumstances.\nThese are some of the scenarios how the total duration is composed of:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"Resolving a domain name and connecting to the remote peer.")),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"816",height:"144",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"816",height:"144"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"26",y:"44"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"40,36 32,40 40,44",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"40",y1:"40",x2:"208",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"210",y:"44"},"connectionAcquisition"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"376",y1:"40",x2:"528",y2:"40",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"528,36 536,40 528,44",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"26",y:"76"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"40,68 32,72 40,76",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"40",y1:"72",x2:"104",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"106",y:"76"},"dnsResolution"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"208",y1:"72",x2:"272",y2:"72",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"272,68 280,72 272,76",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"284",y1:"64",x2:"284",y2:"96",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"108"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"296,100 288,104 296,108",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"296",y1:"104",x2:"360",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"362",y:"108"},"socketConnect"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"464",y1:"104",x2:"528",y2:"104",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"528,100 536,104 528,108",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"794",y:"28"},"#1"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"24",x2:"540",y2:"24",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"24",x2:"28",y2:"32",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"540",y1:"24",x2:"540",y2:"56",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"48",x2:"28",y2:"64",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"56",x2:"540",y2:"56",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"80",x2:"28",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"28",y1:"88",x2:"540",y2:"88",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"540",y1:"88",x2:"540",y2:"120",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"112",x2:"284",y2:"120",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"120",x2:"540",y2:"120",className:"solid"}),"\n  "))),(0,s.kt)("ol",{start:2},(0,s.kt)("li",{parentName:"ol"},"Waiting for the connection to be established, since there's an existing connection attempt, to use one\nconnection in HTTP/2. (Note that, if you create a client with an IP address, ",(0,s.kt)("inlineCode",{parentName:"li"},"dnsResolution")," did not\noccur. Also note that, there's no ",(0,s.kt)("inlineCode",{parentName:"li"},"socketConnect")," because the client just waits for the connection and\nuses it.)")),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"792",height:"96",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"792",height:"96"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"2",y:"28"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"16,20 8,24 16,28",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"16",y1:"24",x2:"40",y2:"24",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"42",y:"28"},"connectionAcquisition"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"208",y1:"24",x2:"232",y2:"24",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"232,20 240,24 232,28",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"2",y:"60"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"16,52 8,56 16,60",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"16",y1:"56",x2:"56",y2:"56",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"58",y:"60"},"pendingAcquisition"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"200",y1:"56",x2:"232",y2:"56",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"232,52 240,56 232,60",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"770",y:"12"},"#2"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"8",x2:"244",y2:"8",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"8",x2:"4",y2:"16",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"244",y1:"8",x2:"244",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"32",x2:"4",y2:"48",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"40",x2:"244",y2:"40",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"64",x2:"4",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"72",x2:"244",y2:"72",className:"solid"}),"\n  "))),(0,s.kt)("ol",{start:3},(0,s.kt)("li",{parentName:"ol"},"Connecting to the remote peer with the resolved IP address after the existing connection attempt is\nfailed.")),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"792",height:"160",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"792",height:"160"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"2",y:"28"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"16,20 8,24 16,28",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"16",y1:"24",x2:"296",y2:"24",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"28"},"connectionAcquisition"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"464",y1:"24",x2:"720",y2:"24",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"720,20 728,24 720,28",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"2",y:"60"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"16,52 8,56 16,60",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"16",y1:"56",x2:"80",y2:"56",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"82",y:"60"},"dnsResolution"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"184",y1:"56",x2:"248",y2:"56",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"248,52 256,56 248,60",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"260",y1:"48",x2:"260",y2:"80",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"258",y:"92"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"272,84 264,88 272,92",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"272",y1:"88",x2:"296",y2:"88",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"92"},"pendingAcquisition"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"440",y1:"88",x2:"464",y2:"88",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"464,84 472,88 464,92",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"474",y:"124"},":"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"488,116 480,120 488,124",className:"filled"}),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"488",y1:"120",x2:"552",y2:"120",className:"solid"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"554",y:"124"},"socketConnect"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"656",y1:"120",x2:"720",y2:"120",className:"solid"}),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"720,116 728,120 720,124",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"770",y:"12"},"#3"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"8",x2:"732",y2:"8",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"8",x2:"4",y2:"16",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"732",y1:"8",x2:"732",y2:"40",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"32",x2:"4",y2:"48",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"40",x2:"732",y2:"40",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"64",x2:"4",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"72",x2:"476",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"476",y1:"72",x2:"476",y2:"112",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"260",y1:"96",x2:"260",y2:"104",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"260",y1:"104",x2:"732",y2:"104",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"732",y1:"104",x2:"732",y2:"136",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"476",y1:"128",x2:"476",y2:"136",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"476",y1:"136",x2:"732",y2:"136",className:"solid"}),"\n  "))),(0,s.kt)("h2",{id:"availability-of-properties",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h2",href:"#availability-of-properties","aria-label":"availability of properties permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Availability of properties"),(0,s.kt)("p",null,"Armeria handles requests and responses in a stream-oriented way, which means that some properties are revealed\nonly after the streams are processed to some point. For example, there's no way to know the ",(0,s.kt)("inlineCode",{parentName:"p"},"requestLength"),"\nuntil the request processing ends. Also, some properties related to the (de)serialization of request content,\nsuch as ",(0,s.kt)("inlineCode",{parentName:"p"},"serializationFormat")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"requestContent"),", will not be available when request processing just\nstarted."),(0,s.kt)("p",null,"The collected properties must be accessed via ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLogAccess:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLogAccess.html"},"type://RequestLogAccess"),", which provides a safe access to the\ncollected properties via the following methods:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"isComplete()")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"whenComplete()")," to check if or to get notified when all request and response\nproperties are available."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"isRequestComplete()")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"whenRequestComplete()")," to check if or to get notified when all request\nproperties are available."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"isAvailable(RequestLogProperty...)")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"whenAvailable(RequestLogProperty...)")," to check if or to get\nnotified when a certain set of properties are available.")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},'import com.linecorp.armeria.common.HttpRequest;\nimport com.linecorp.armeria.common.HttpResponse;\nimport com.linecorp.armeria.common.logging.RequestLog;\nimport com.linecorp.armeria.common.logging.RequestLogProperty;\nimport com.linecorp.armeria.server.ServiceRequestContext;\nimport com.linecorp.armeria.server.AbstractHttpService;\n\nHttpService myService = (ctx, req) -> {\n    final RequestLogAccess logAccess = ctx.log();\n\n    logAccess.whenAvailable(RequestLogProperty.REQUEST_HEADERS)\n             .thenAccept(log -> {\n                 assert log.isAvailable(RequestLogProperty.REQUEST_HEADERS);\n                 System.err.println("Started to handle a request: " +\n                                    log.requestHeaders());\n             });\n\n    logAccess.whenComplete()\n             .thenAccept(log -> {\n                 assert log.isComplete();\n                 System.err.println("Handled a request: " + log);\n             });\n    ...\n}\n')),(0,s.kt)("h3",{id:"availability-of-client-timing-properties",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h3",href:"#availability-of-client-timing-properties","aria-label":"availability of client timing properties permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Availability of client timing properties"),(0,s.kt)("p",null,"On the client side, you can also get the timing information about the related connection attempt. Unlike\nrequest and response properties, you need to use ",(0,s.kt)("a",{parentName:"p",href:"type://ClientConnectionTimings:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/ClientConnectionTimings.html"},"type://ClientConnectionTimings")," as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},'import com.linecorp.armeria.client.ClientConnectionTimings;\nimport com.linecorp.armeria.client.WebClient;\n\nWebClient client = WebClient\n    .builder("http://armeria.com")\n    .decorator((delegate, ctx, req) -> {\n        // Can get as soon as a request is started.\n        ctx.log().whenAvailable(RequestLogProperty.REQUEST_START_TIME)\n           .thenAccept(log -> {\n               final ClientConnectionTimings timings = ClientConnectionTimings.get(log);\n               if (timings != null) {\n                   System.err.println("Connection acquisition duration: " +\n                                      timings.connectionAcquisitionDurationNanos());\n               }\n           });\n        return delegate.execute(ctx, req);\n    })\n    .build();\n')),(0,s.kt)(m,{mdxType:"Tip"},(0,s.kt)("p",null,"The reason why we used the static method is that the ",(0,s.kt)("a",{parentName:"p",href:"type://ClientConnectionTimings:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/ClientConnectionTimings.html"},"type://ClientConnectionTimings")," is stored using\nthe attribute. See ",(0,s.kt)("a",{parentName:"p",href:"/docs/advanced-custom-attributes"},"RequestContext custom attributes")," for more information.")),(0,s.kt)("h2",{id:"enabling-content-previews",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h2",href:"#enabling-content-previews","aria-label":"enabling content previews permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Enabling content previews"),(0,s.kt)("p",null,"Armeria provides the ",(0,s.kt)("inlineCode",{parentName:"p"},"requestContentPreview")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"responseContentPreview")," properties in ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog"),"\nto retrieve the textual representation of the first N bytes of the request and response content.\nHowever, the properties are disabled by default due to performance overhead and thus they return ",(0,s.kt)("inlineCode",{parentName:"p"},"null"),"\nby default. You can enable it using ",(0,s.kt)("a",{parentName:"p",href:"type://ContentPreviewingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/logging/ContentPreviewingClient.html"},"type://ContentPreviewingClient")," and ",(0,s.kt)("a",{parentName:"p",href:"type://ContentPreviewingService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/ContentPreviewingService.html"},"type://ContentPreviewingService"),"\ndecorators."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},"import com.linecorp.armeria.server.logging.ContentPreviewingService;\nimport com.linecorp.armeria.server.ServerBuilder;\n\nServerBuilder sb = Server.builder();\n...\n// Enable previewing the content with the maximum length of 100 for textual content.\nsb.decorator(ContentPreviewingService.newDecorator(100));\n...\nsb.build();\n")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},"import com.linecorp.armeria.client.logging.ContentPreviewingClient;\nimport com.linecorp.armeria.client.WebClientBuilder;\n\nWebClientBuilder cb = WebClient.builder();\n...\ncb.decorator(ContentPreviewingClient.newDecorator(100));\n")),(0,s.kt)("p",null,"Note that the above decorators enable the previews only for textual content\nwhich meets one of the following cases:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"when its type matches ",(0,s.kt)("inlineCode",{parentName:"li"},"text/*")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"application/x-www-form-urlencoded"),"."),(0,s.kt)("li",{parentName:"ul"},"when its charset has been specified. e.g. application/json; charset=utf-8."),(0,s.kt)("li",{parentName:"ul"},"when its subtype is ",(0,s.kt)("inlineCode",{parentName:"li"},"xml")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"json"),". e.g. application/xml, application/json."),(0,s.kt)("li",{parentName:"ul"},"when its subtype ends with ",(0,s.kt)("inlineCode",{parentName:"li"},"+xml")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"+json"),". e.g. application/atom+xml, application/hal+json")),(0,s.kt)("p",null,"You can also customize the previews by specifying your own ",(0,s.kt)("a",{parentName:"p",href:"type://ContentPreviewerFactory:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/ContentPreviewerFactory.html"},"type://ContentPreviewerFactory")," implementation.\nThe following example enables the textual preview of first 100 characters for the content type of ",(0,s.kt)("inlineCode",{parentName:"p"},"text/*"),",\nand the hex dump preview of first 100 characters for the content type of ",(0,s.kt)("inlineCode",{parentName:"p"},"application/binary"),":"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},"import io.netty.buffer.ByteBufUtil;\nimport com.linecorp.armeria.common.MediaType;\nimport com.linecorp.armeria.common.logging.ContentPreviewer;\nimport com.linecorp.armeria.common.logging.ContentPreviewerFactoryBuilder;\n\nServerBuilder sb = Server.builder();\n\nContentPreviewerFactoryBuilder builder = ContentPreviewerFactory.builder().maxLength(100);\nbuilder.text((ctx, headers) -> {\n    final MediaType contentType = headers.contentType();\n    // Produces the textual preview when the content type is ANY_TEXT_TYPE.\n    if (contentType != null && contentType.is(MediaType.ANY_TEXT_TYPE)) {\n        return true;\n    }\n    return false;\n});\n\n// Produces the hex dump when the content type is APPLICATION_BINARY.\nbuilder.binary(MediaType.APPLICATION_BINARY);\n\nsb.decorator(ContentPreviewingService.newDecorator(builder.build()));\n")),(0,s.kt)("p",null,"You can write your own producer to change the way to make the preview, e.g."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},"ContentPreviewerFactoryBuilder builder = ContentPreviewerFactory.builder();\nbuilder.binary(MediaTypeSet.of(MediaType.APPLICATION_BINARY),\n               (headers, byteBuf) -> {\n                   // You can use the byteBuf to produce your own way.\n               });\n...\nServerBuilder sb = Server.builder();\n...\nsb.decorator(ContentPreviewingService.newDecorator(builder.build()));\n")),(0,s.kt)("h2",{id:"nested-log",style:{position:"relative"}},(0,s.kt)("a",{parentName:"h2",href:"#nested-log","aria-label":"nested log permalink",className:"anchor before"},(0,s.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Nested log"),(0,s.kt)("p",null,"When you retry a failed attempt, you might want to record the result of each attempt and to group them under\na single ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog"),". A ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," can contain more than one child ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog"),"\nto support this sort of use cases."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},"import com.linecorp.armeria.common.logging.RequestLogBuilder;\n\nRequestLogBuilder.addChild(RequestLog);\n")),(0,s.kt)("p",null,"If the added ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," is the first child, the request-side log of the ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," will\nbe propagated to the parent log. You can add as many child logs as you want, but the rest of logs would not\nbe affected. If you want to fill the response-side log of the parent log, please invoke:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},"RequestLogBuilder.endResponseWithLastChild();\n")),(0,s.kt)("p",null,"This will propagate the response-side log of the last added child to the parent log. The following diagram\nillustrates how a ",(0,s.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," with child logs looks like:"),(0,s.kt)("span",{className:"remark-draw remark-draw-bob-svg"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"520",height:"544",className:"svgbob"},"\n  ",(0,s.kt)("style",{parentName:"svg"},".svgbob line, .svgbob path, .svgbob circle, .svgbob rect, .svgbob polygon {\n  stroke: black;\n  stroke-width: 2;\n  stroke-opacity: 1;\n  fill-opacity: 1;\n  stroke-linecap: round;\n  stroke-linejoin: miter;\n}\n\n.svgbob text {\n  white-space: pre;\n  fill: black;\n  font-family: Iosevka Fixed, monospace;\n  font-size: 14px;\n}\n\n.svgbob rect.backdrop {\n  stroke: none;\n  fill: white;\n}\n\n.svgbob .broken {\n  stroke-dasharray: 8;\n}\n\n.svgbob .filled {\n  fill: black;\n}\n\n.svgbob .bg_filled {\n  fill: white;\n  stroke-width: 1;\n}\n\n.svgbob .nofill {\n  fill: white;\n}\n\n.svgbob .end_marked_arrow {\n  marker-end: url(#arrow);\n}\n\n.svgbob .start_marked_arrow {\n  marker-start: url(#arrow);\n}\n\n.svgbob .end_marked_diamond {\n  marker-end: url(#diamond);\n}\n\n.svgbob .start_marked_diamond {\n  marker-start: url(#diamond);\n}\n\n.svgbob .end_marked_circle {\n  marker-end: url(#circle);\n}\n\n.svgbob .start_marked_circle {\n  marker-start: url(#circle);\n}\n\n.svgbob .end_marked_open_circle {\n  marker-end: url(#open_circle);\n}\n\n.svgbob .start_marked_open_circle {\n  marker-start: url(#open_circle);\n}\n\n.svgbob .end_marked_big_open_circle {\n  marker-end: url(#big_open_circle);\n}\n\n.svgbob .start_marked_big_open_circle {\n  marker-start: url(#big_open_circle);\n}\n\n.remark-draw-bob-svg * {\n            font-family: Hack;\n            font-size: 13px;\n          }\n          .remark-draw-bob-svg rect.backdrop,\n          .remark-draw-bob-svg .nofill {\n            fill: none;\n          }\n          "),"\n  ",(0,s.kt)("defs",{parentName:"svg"},"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"arrow",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,0 0,4 4,2 0,0"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"diamond",viewBox:"-2 -2 8 8",refX:"4",refY:"2",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("polygon",{parentName:"marker",points:"0,2 2,0 4,2 2,4 0,2"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"2",className:"bg_filled"}),"\n    "),"\n    ",(0,s.kt)("marker",{parentName:"defs",id:"big_open_circle",viewBox:"0 0 8 8",refX:"4",refY:"4",markerWidth:"7",markerHeight:"7",orient:"auto-start-reverse"},"\n      ",(0,s.kt)("circle",{parentName:"marker",cx:"4",cy:"4",r:"3",className:"bg_filled"}),"\n    "),"\n  "),"\n  ",(0,s.kt)("rect",{parentName:"svg",className:"backdrop",x:"0",y:"0",width:"520",height:"544"}),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"28",y:"104",width:"184",height:"160",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"58",y:"156"},"Request"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"122",y:"156"},"side"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"162",y:"156"},"log"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"74",y:"204"},"Copied"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"130",y:"204"},"from"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"74",y:"220"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"106",y:"220"},"first"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"154",y:"220"},"child"),"\n  ",(0,s.kt)("rect",{parentName:"svg",x:"28",y:"296",width:"184",height:"160",className:"solid nofill",rx:"0"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"50",y:"348"},"Response"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"122",y:"348"},"side"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"162",y:"348"},"log"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"74",y:"396"},"Copied"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"130",y:"396"},"from"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"74",y:"412"},"the"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"106",y:"412"},"last"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"146",y:"412"},"child"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"26",y:"44"},"RequestLog"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"172"},"Child"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"330",y:"172"},"#1"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"224,196 216,200 224,204",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"204"},"Request"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"362",y:"204"},"side"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"402",y:"204"},"log"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"244",y1:"208",x2:"244",y2:"416",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"236"},":"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"236"},"Response"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"370",y:"236"},"side"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"410",y:"236"},"log"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"284"},"..."),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"362",y:"316"},"."),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"362",y:"332"},"."),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"364"},"Child"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"330",y:"364"},"#N"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"282",y:"396"},":"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"396"},"Request"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"362",y:"396"},"side"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"402",y:"396"},"log"),"\n  ",(0,s.kt)("polygon",{parentName:"svg",points:"224,420 216,424 224,428",className:"filled"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"428"},"Response"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"370",y:"428"},"side"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"410",y:"428"},"log"),"\n  ",(0,s.kt)("line",{parentName:"svg",x1:"244",y1:"432",x2:"244",y2:"480",className:"broken"}),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"298",y:"108"},"Child"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"346",y:"108"},"RequestLogs"),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"314",y:"124"},"e.g."),"\n  ",(0,s.kt)("text",{parentName:"svg",x:"354",y:"124"},"retries"),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"8",y1:"0",x2:"4",y2:"8",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"8",x2:"508",y2:"8",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"8",x2:"4",y2:"512",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"504",y1:"0",x2:"508",y2:"8",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"508",y1:"8",x2:"508",y2:"512",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"0",y1:"512",x2:"8",y2:"528",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"4",y1:"520",x2:"508",y2:"520",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"512",y1:"512",x2:"504",y2:"528",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"248",y1:"64",x2:"244",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"244",y1:"72",x2:"484",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"244",y1:"72",x2:"244",y2:"192",className:"broken"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"480",y1:"64",x2:"484",y2:"72",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"484",y1:"72",x2:"484",y2:"480",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"152",x2:"460",y2:"152",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"152",x2:"268",y2:"192",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"460",y1:"152",x2:"460",y2:"296",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"208",x2:"268",y2:"296",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"264",x2:"460",y2:"264",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"296",x2:"460",y2:"296",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"184",x2:"444",y2:"184",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"184",x2:"284",y2:"224",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"444",y1:"184",x2:"444",y2:"248",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"224",y1:"200",x2:"284",y2:"200",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"216",x2:"444",y2:"216",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"240",x2:"284",y2:"248",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"248",x2:"444",y2:"248",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"344",x2:"460",y2:"344",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"344",x2:"268",y2:"416",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"460",y1:"344",x2:"460",y2:"456",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"432",x2:"268",y2:"456",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"268",y1:"456",x2:"460",y2:"456",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"376",x2:"444",y2:"376",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"376",x2:"284",y2:"384",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"444",y1:"376",x2:"444",y2:"440",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"400",x2:"284",y2:"440",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"408",x2:"444",y2:"408",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"224",y1:"424",x2:"284",y2:"424",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"284",y1:"440",x2:"444",y2:"440",className:"solid"}),"\n  "),"\n  ",(0,s.kt)("g",{parentName:"svg"},"\n    ",(0,s.kt)("line",{parentName:"g",x1:"240",y1:"480",x2:"248",y2:"496",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"244",y1:"488",x2:"484",y2:"488",className:"solid"}),"\n    ",(0,s.kt)("line",{parentName:"g",x1:"488",y1:"480",x2:"480",y2:"496",className:"solid"}),"\n  "))),(0,s.kt)("p",null,"You can retrieve the child logs using ",(0,s.kt)("inlineCode",{parentName:"p"},"RequestLog.children()"),"."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-java"},'final RequestContext ctx = ...;\nctx.log().whenComplete().thenAccept(log -> {\n    if (!log.children().isEmpty()) {\n        System.err.println("A request finished after " + log.children().size() + " attempt(s): " + log);\n    } else {\n        System.err.println("A request is done: " + log);\n    }\n});\n')),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"type://RetryingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html"},"type://RetryingClient")," is a good example that leverages this feature.\nSee ",(0,s.kt)("a",{parentName:"p",href:"/docs/client-retry#retryingclient-with-logging"},"RetryingClient with logging")," for more information."))}k.isMDXComponent=!0},28819:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(25444),r=n(67294),s=JSON.parse('{"root":["index","setup"],"Useful links":{"Tutorials":"/tutorials","Community articles":"/community/articles","API documentation":"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/index.html","Release notes":"/release-notes"},"Server":["server-basics","server-decorator","server-grpc","server-thrift","server-graphql","server-docservice","server-annotated-service","server-http-file","server-servlet","server-access-log","server-cors","server-sse","server-service-registration","server-multipart","server-timeouts"],"Client":["client-http","client-thrift","client-grpc","client-factory","client-decorator","client-retrofit","client-custom-http-headers","client-timeouts","client-retry","client-circuit-breaker","client-service-discovery"],"Advanced":["advanced-logging","advanced-structured-logging","advanced-custom-attributes","advanced-streaming-backpressure","advanced-structured-logging-kafka","advanced-metrics","advanced-unit-testing","advanced-production-checklist","advanced-saml","advanced-spring-boot-integration","advanced-spring-webflux-integration","advanced-dropwizard-integration","advanced-kotlin","advanced-scala","advanced-scalapb","advanced-flags-provider","advanced-zipkin","advanced-client-interoperability"]}'),o=n(46731),i=function(e){var t=(0,a.useStaticQuery)("1217743243").allMdx.nodes;return r.createElement(o.Z,Object.assign({},e,{candidateMdxNodes:t,index:s,prefix:"docs",pageTitleSuffix:"Armeria documentation"}))}}}]);
//# sourceMappingURL=component---src-pages-docs-advanced-structured-logging-mdx-fc8ff3f7518a38f6c237.js.map