<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-blog-ko" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Armeria로 Reactive Streams와 놀자! - 2 | Armeria</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://armeria.dev/img/og-image.png"><meta data-rh="true" name="twitter:image" content="https://armeria.dev/img/og-image.png"><meta data-rh="true" property="og:url" content="https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="og:site_name" content="Armeria - Your go-to microservice framework"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:image:width" content="1280"><meta data-rh="true" name="og:image:height" content="640"><meta data-rh="true" name="twitter:site" content="@armeria_project"><meta data-rh="true" name="twitter:creator" content="@armeria_project"><meta data-rh="true" property="og:title" content="Armeria로 Reactive Streams와 놀자! - 2 | Armeria"><meta data-rh="true" name="description" content="안녕하세요."><meta data-rh="true" property="og:description" content="안녕하세요."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-05-06T11:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2"><link data-rh="true" rel="alternate" href="https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2" hreflang="en"><link data-rh="true" rel="alternate" href="https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2","mainEntityOfPage":"https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2","url":"https://armeria.dev/blog/ko/2020/02/19/reactive-streams-armeria-2","headline":"Armeria로 Reactive Streams와 놀자! - 2","name":"Armeria로 Reactive Streams와 놀자! - 2","description":"안녕하세요.","datePublished":"2020-05-06T11:00:00.000Z","author":{"@type":"Person","name":"엄익훈","description":"LINE Plus에서 오픈소스 Armeria와 Central Dogma를 개발하고 있습니다.","image":"https://github.com/ikhoon.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://armeria.dev/blog/ko","name":"Armeria Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Armeria Newsletter RSS Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CY9YHLJ0K6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CY9YHLJ0K6",{anonymize_ip:!0})</script>





<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Armeria Blog RSS Feed">
<link rel="alternate" type="application/rss+xml" href="/blog/ja/rss.xml" title="Armeria Blog - Japanese RSS Feed">
<link rel="alternate" type="application/rss+xml" href="/blog/ko/rss.xml" title="Armeria Blog - Korean RSS Feed">

<link rel="manifest" href="/manifest.json">


<link rel="alternate" type="application/rss+xml" href="/release-notes/rss.xml" title="Armeria Release Notes RSS Feed">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Armeria RSS Feed"><link rel="stylesheet" href="/assets/css/styles.884c8684.css">
<script src="/assets/js/runtime~main.4c78ee10.js" defer="defer"></script>
<script src="/assets/js/main.e9c1103a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/armeria_logo_horiz.svg"><link rel="preload" as="image" href="https://github.com/ikhoon.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/armeria_logo_horiz.svg" alt="Armeria Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/armeria_logo_horiz.svg" alt="Armeria Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">News</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/news/20231208-newsletter-6">Newsletter</a></li><li><a class="dropdown__link" href="/release-notes/1.34.2">Release notes</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/community/">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a class="navbar__item navbar__link header-discord-link" aria-label="Discord" href="/s/discord"></a><a href="https://x.com/armeria_project" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-x-link" aria-label="X"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md"> </div><button type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-btn-lg ant-dropdown-trigger blogLanguageSelector__AnM"><a href="/blog">English</a><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button><div role="group"><h3 class="yearGroupHeading_rMGB">2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2021/07/15/customizing-armeria-metrics">Armeria 지표 커스터마이징하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2021/06/28/monitoring-prometheus-metrics-from-armeria">Armeria에서 Prometheus 지표 모니터링하기</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2020</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/ko/2020/02/19/reactive-streams-armeria-2">Armeria로 Reactive Streams와 놀자! - 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2020/02/18/reactive-streams-armeria-1">Armeria로 Reactive Streams와 놀자! - 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2020/04/27/circuit-breakers-armeria">Armeria의 서킷 브레이커 사용해 보기</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2019</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2019/12/24/my-first-opensource-contribution-to-armeria">생애 첫 오픈 소스 기여 경험(feat. Armeria)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2019/05/09/armeria-sprint-1">GitHub Contributions 그래프를 푸릇푸릇하게 만들어보아요(feat. Armeria Sprint)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2019/04/16/thank-you-for-contributing-to-armeria">오픈소스 Armeria의 기여자를 위한 이벤트를 진행하였습니다</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2016</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2016/08/04/applying-circuitbreaker-to-channel-gateway">Channel Gateway에 CircuitBreaker 적용</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2016/07/24/circuit-breakers-for-distributed-services">분산 서비스 환경에 대한 Circuit Breaker 적용</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ko/2016/04/13/open-sourcing-armeria">Armeria 오픈소스화 이야기</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><div><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This post is also available in<!-- --> <a href="/blog/ja/2020/03/26/reactive-streams-armeria-2">Japanese</a> and <a href="/blog/2020/07/03/reactive-streams-armeria-2">English</a>.</p></div></div></div><h1 class="title_f1Hy">Armeria로 Reactive Streams와 놀자! - 2</h1><div class="container_mt6G margin-vert--md"><time datetime="2020-05-06T11:00:00.000Z">May 6, 2020</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><img class="avatar__photo authorImage_XqGP" src="https://github.com/ikhoon.png" alt="엄익훈"><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><span class="authorName_yefp" translate="no">엄익훈</span></div><small class="authorTitle_nd0D" title="LINE Plus에서 오픈소스 Armeria와 Central Dogma를 개발하고 있습니다.">LINE Plus에서 오픈소스 Armeria와 Central Dogma를 개발하고 있습니다.</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>안녕하세요.
LINE+에서 오픈소스 Armeria와 Central Dogma를 개발하고 있는 엄익훈입니다. <a class="" href="/blog/ko/2020/02/18/reactive-streams-armeria-1">지난 포스팅</a>에선 Reactive Streams의 개념을 살펴보았는데요. 이번 포스팅에선 Reactive Streams를 오픈 소스 비동기 HTTP/2, RPC, REST 클라이언트/서버 라이브러리인 Armeria에서 사용하는 방법에 대해 공유하려고 합니다.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="whats-armeria">What’s Armeria?<a href="#whats-armeria" class="hash-link" aria-label="Direct link to What’s Armeria?" title="Direct link to What’s Armeria?" translate="no">​</a></h2>
<p>Armeria는 Java 8 및 Netty, Thrift, gRPC에 기반한 오픈 소스 비동기 HTTP/2, RPC, REST 클라이언트/서버 라이브러리입니다.
Armeria는 경량(Lightweight) 마이크로 서비스 프레임워크지만 지원하는 기능은 다른 풀 스택(full stack) 웹 프레임워크와 비교해도 손색이 없습니다.</p>
<p>먼저 Armeria에서 Reactive Streams를 활용한 서버를 구현하기 위해선 기본적으로 알아야 할 것들을 알려드리겠습니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="지원하는-프로토콜">지원하는 프로토콜<a href="#지원하는-프로토콜" class="hash-link" aria-label="Direct link to 지원하는 프로토콜" title="Direct link to 지원하는 프로토콜" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-1-b8df78267813bd6db4a7146dc18e2f91.png" width="3030" height="1468" class="img_ev3q"></p>
<p>Armeria에서는 HTTP/1과 HTTP/2를 모두 지원하고, 이 두 개의 프로토콜은 <a href="https://simple.wikipedia.org/wiki/Cleartext" target="_blank" rel="noopener noreferrer" class="">cleartext</a>와 TLS(Transport Layer Security) 암호화 통신을 모두 지원합니다.
HTTP/1에서 HTTP/2로의 호환성을 지원하기 위한 프로토콜 업그레이드 면에선, HTTP/2의 &#x27;connection preface&#x27;와 HTTP/1의 &#x27;upgrade request&#x27;를 모두 지원하고 있습니다.</p>
<p>또한 Armeria에선 gRPC와 Thrift가 HTTP/1과 HTTP/2, 양쪽에서 모두 동작합니다. 이는 Armeria만의 특별한 기능인데요. gRPC는 HTTP/1을 지원하지 않고, 기존의 Thrift에선 HTTP/2를 지원하지 않습니다. 하지만 Armeria에서는 모두 지원하고 있어서 다양한 비즈니스 환경에서 유연하게 사용할 수 있습니다. 또한 리눅스 환경에선 JNI(Java Native Interface) 기반의 소켓 IO와 BoringSSL 기반의 TLS를 통해서 더욱더 빠른 성능으로 프로덕션에 사용할 수 있습니다.</p>
<p>그럼 예제 코드와 함께 Armeria에 대해서 하나씩 알아보겠습니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="예제-코드로-알아보는-armeria">예제 코드로 알아보는 Armeria<a href="#예제-코드로-알아보는-armeria" class="hash-link" aria-label="Direct link to 예제 코드로 알아보는 Armeria" title="Direct link to 예제 코드로 알아보는 Armeria" translate="no">​</a></h3>
<p>Armeria는 사용자 친화적인 API입니다. 코드가 간결하고 사용하기 쉽습니다. &#x27;Hello world&#x27; 서버를 실행하고 싶다면 아래와 같이 5줄만 작성하면 됩니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Build your own server under 5 lines.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .service(“/“, (ctx, req) -&gt; HttpResponse.of(“Hello, World!”))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.start();</span><br></span></code></pre></div></div>
<p>서버를 쉽게 실행할 수 있다는 점은 마이크로 서비스 환경에서 각각의 비즈니스 컴포넌트를 분리하여 독립된 서버로 관리하려고 할 때 핵심이 되는 사항입니다.</p>
<p>또한 서버 아키텍처를 단순하게 만들 수 있습니다.
HTTPS나 HTTP/2를 사용하기 위해 별도로 <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/sidecar" target="_blank" rel="noopener noreferrer" class="">사이드카</a>(sidecar)인 Nginx나 Apache Httpd와 같은 정적 웹 서버를 실행할 필요가 없습니다. 앞서 언급했듯, 리눅스 환경에서는 JNI 기반의 소켓 IO와 BoringSSL을 지원하기 때문에 별도로 성능 저하를 고려하지 않아도 됩니다. 또한 JS나 CSS, 이미지와 같은 정적 파일을 서빙하는 기능도 제공하고 있습니다(<a href="https://line.github.io/armeria/server-http-file.html" target="_blank" rel="noopener noreferrer" class="">참고</a>).</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .https(8443) // HTTPS support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .tlsSelfSigned()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .service(“/“, (ctx, req) -&gt; HttpResponse.of(“Hello, World!”))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.start();</span><br></span></code></pre></div></div>
<p>네트워크 홉(hop)을 추가하지 않아도 되기 때문에 장애점을 줄일 수 있고, 리소스를 절약할 수 있어 효율적으로 통신할 수 있으며, 아키텍처가 단순해지고, 모니터링이 쉬워지며, 서버를 유연하게 확장할 수 있습니다.</p>
<p>그 외에도 유용한 기능이 많습니다. 그중 하나가 Armeria에서 빌트인으로 제공하는 어노테이션(annotation)입니다. 어노테이션을 이용하면 Armeria의 기능을 더욱 쉽게 사용할 수 있습니다. 예를 들어 아래와 같이 <code>hello</code>를 프리픽스(prefix)로, <code>name</code>을 경로 변수로 설정하여 라우팅하는 코드를 손쉽게 작성할 수 있습니다(<a href="https://line.github.io/armeria/server-annotated-service.html" target="_blank" rel="noopener noreferrer" class="">Armeria 공식 문서</a>를 참고하면 그 외 다양한 어노테이션을 더욱 자세하게 살펴볼 수 있습니다).</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.Get;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.Param;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.PathPrefix;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use built-in annotations for mapping path and parameter injection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PathPrefix(“/hello”)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class HelloService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   @Get(“/:name”)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public String hello(@Param String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return String.format(“Hello, %s!”, name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Armeria에는 다른 종류의 RPC 프로토콜을 동시에 서빙할 수 있는 특별한 기능도 있습니다. 하나의 서버에서 REST API와 gRPC, Thrift를 모두 제공할 수 있어서 비즈니스 요구 사항이나 아키텍처의 변화에 유연하게 대응할 수 있습니다. 또한 단일 포트로 제공하기 때문에 리소스를 효율적으로 사용하면서 보안 측면에서 불필요한 노출을 최소화하고, 관리 포인트를 줄일 수 있는 장점이 있습니다.<a href="#footnotes" class="">[1]</a></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .service(“/hello/rest”, (ctx, req) -&gt; HttpResponse.of(“Hello, world!”))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .service(“/hello/thrift”, THttpService.of(new ThriftHelloService()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .service(“/hello/grpc”, GrpcService.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      .addService(new GrpcHelloService())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .build();</span><br></span></code></pre></div></div>
<p>엔터프라이즈 소프트웨어 개발자들은 공통적으로 인증, 로깅과 같은 부분을 어떻게 하면 효율적으로 처리할 수 있을지에 관심을 갖고 고민하게 됩니다.
Armeria에서는 <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" target="_blank" rel="noopener noreferrer" class="">separation of concerns</a>라고 부르는 이런 부분을 별도의 <a href="https://line.github.io/armeria/server-decorator.html" target="_blank" rel="noopener noreferrer" class="">decorator</a>로 관리할 수 있는 기능을 제공합니다.<a href="#footnotes" class="">[2]</a></p>
<p>또한 기본 제공 외에 다른 decorator가 필요하다면, 직접 손쉽게 구현해서 특정 경로나 서비스에 바인딩해서 사용할 수도 있습니다. 예를 들어 아래 그림에서 구현한 <code>AuthService</code>같은 경우에는 <code>request</code>에 인증 정보가 포함되어 있을 때만 서비스를 호출하고, 그렇지 않으면 &#x27;401 unauthorized&#x27; 에러를 발생시키도록 했습니다.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-2-651dfe37d84cf70fa56b6314072fc869.png" width="3316" height="1652" class="img_ev3q"></p>
<p>다음으로 Armeria에서 Reactive Streams를 어떻게 지원하고 있는지 알아보겠습니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="armeria-내-http2-스트림">Armeria 내 HTTP/2 스트림<a href="#armeria-내-http2-스트림" class="hash-link" aria-label="Direct link to Armeria 내 HTTP/2 스트림" title="Direct link to Armeria 내 HTTP/2 스트림" translate="no">​</a></h3>
<p>스트림(stream)은 흐르는 물과 같이 유기적으로 계속 연결되어 있어야 합니다. 어느 한곳만 뚫려있고 나머지가 막혀 있다면 곧 넘쳐 버립니다.
Armeria에서는 데이터의 흐름을 유기적으로 제어하기 위해서 서버 내에선 Reactive Streams의 백 프레셔를 이용해 트래픽을 제어합니다. 또한 <a href="https://http2.github.io/http2-spec/#WINDOW_UPDATE" target="_blank" rel="noopener noreferrer" class="">WINDOW_UPDATE</a>를 이용한 <a href="https://tools.ietf.org/html/rfc7540#section-5.2" target="_blank" rel="noopener noreferrer" class="">HTTP/2 stream flow control</a>로, 백 프레셔가 하위 네트워크 레이어에서 Armeria 서버와 여러분이 구현한 서비스, 그리고 데이터 저장소까지 유기적으로 연결할 수 있도록 만들었습니다.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-3-19c9d7f507f0cc7efb072673431792ff.png" width="3336" height="1792" class="img_ev3q"></p>
<p>만약 서비스에서 사용하는 서버를 Armeria의 Reactive 서버로 당장 바꾸기 어렵다면, 아래와 같이 Armeria를 Reactive 프락시 서버로 활용할 수도 있습니다(<a href="https://github.com/line/armeria-examples/tree/master/proxy-server" target="_blank" rel="noopener noreferrer" class="">참고</a>).</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Use Armeria’s async &amp; reactive HTTP/2 client.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var client = HttpClient.of(“h2c://backend”);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .http(8080)          // Forward all requests reactively</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .service(“prefix:/“, (ctx, req) -&gt; client.execute(req))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<p>Armeria 프락시 서버를 앞에 두면 여러분의 서버를 험난한 외부 인터넷으로부터 안전하게 보호할 수 있습니다.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-4-d1176606f39d7cc2951b0a21a74b80c6.png" width="2310" height="716" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactive-streams와-armeria의-통합">Reactive Streams와 Armeria의 통합<a href="#reactive-streams와-armeria의-통합" class="hash-link" aria-label="Direct link to Reactive Streams와 Armeria의 통합" title="Direct link to Reactive Streams와 Armeria의 통합" translate="no">​</a></h2>
<p>Armeria로 직접 Reactive Streams를 지원하는 서버를 만든다면 더욱더 다양한 기능을 쓸 수 있는데요.
Armeria에서 Reactive Streams를 활용하는 방법과 빌트인 publisher에 대해서 좀 더 자세히 알아보겠습니다.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="armeria-http-응답-publisher">Armeria HTTP 응답 Publisher<a href="#armeria-http-응답-publisher" class="hash-link" aria-label="Direct link to Armeria HTTP 응답 Publisher" title="Direct link to Armeria HTTP 응답 Publisher" translate="no">​</a></h3>
<p>Armeria의 응답은 헤더를 표현하는 <a href="https://line.github.io/armeria/apidocs/com/linecorp/armeria/common/HttpHeaders.html" target="_blank" rel="noopener noreferrer" class="">HttpHeaders</a>와 데이터를 표현하는 <a href="https://line.github.io/armeria/apidocs/com/linecorp/armeria/common/HttpData.html" target="_blank" rel="noopener noreferrer" class="">HttpData</a>로 구성되어 있습니다.
RxJava의 <a href="http://reactivex.io/RxJava/javadoc/io/reactivex/Observable.html" target="_blank" rel="noopener noreferrer" class="">Observable</a>을 Armeria의 <a href="https://line.github.io/armeria/apidocs/com/linecorp/armeria/common/HttpResponse.html" target="_blank" rel="noopener noreferrer" class="">HttpResponse</a>로 바꾸는 과정을 단계별로 살펴보겠습니다.</p>
<p>데이터가 준비되면 먼저 <code>Observable</code>의 <code>map</code> 연산자를 이용해서 <code>dataStream</code>을 <code>HttpData</code>로 감싸줍니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 1. Fetch data from Reactive Streams Publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;String&gt; dataStream = Observable.just(“a”, “b”, “c”, “d”, “e”);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. Convert string to Armeria HttpData</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;HttpData&gt; httpDataStream = dataStream.map(HttpData::ofUtf8);</span><br></span></code></pre></div></div>
<p>어떤 식으로 응답할지 결정하여 응답 헤더를 준비한 후, <code>concat</code> 연산자로 위에서 준비한 <code>httpDataStream</code>과 합치면, <code>HttpHeaders</code>에서 <code>HttpData</code>로 연결되는 하나의 스트림이 완성됩니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 3. Prepare response headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ResponseHeaders httpHeaders = ResponseHeaders.of(HttpStatus.OK);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 4. Concat http header and body stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;HttpObject&gt; responseStream = Observable.concat(Observable.just(httpHeaders), httpDataStream);</span><br></span></code></pre></div></div>
<p><code>완성된 스트림을 Observable</code>의 <code>toFlowable</code> 함수를 이용하여 Reactive Streams의 <a href="https://www.baeldung.com/rxjava-2-flowable" target="_blank" rel="noopener noreferrer" class="">Flowable</a>로 변환한 뒤, 최종적으로 Armeria의 <code>HttpResponse로</code> 감싸면 과정이 끝납니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 5. Convert Observable to Armeria Response Stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse response = HttpResponse.of(responseStream.toFlowable(BackpressureStrategy.BUFFER));</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="armeria-빌트인-publisher">Armeria 빌트인 Publisher<a href="#armeria-빌트인-publisher" class="hash-link" aria-label="Direct link to Armeria 빌트인 Publisher" title="Direct link to Armeria 빌트인 Publisher" translate="no">​</a></h3>
<p>위 과정이 조금 복잡하거나, 혹은 지루하게 느껴졌을 수도 있습니다. 그래서 Armeria에서는 웹에서 스트림 데이터를 전달하는 방법의 표준인 <a href="https://tools.ietf.org/html/rfc7464" target="_blank" rel="noopener noreferrer" class="">JSON Text Sequences(RFC 7464)</a>와 HTML5 규격인 <a href="https://en.wikipedia.org/wiki/Server-sent_events" target="_blank" rel="noopener noreferrer" class="">Server-sent events</a>에 대한 빌트인 Publisher를 제공합니다. 이 publisher를 이용하면 Reactive Streams를 좀 더 편리하게 웹으로 전달할 수 있습니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Fetch data from Reactive Streams Publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Publisher&lt;String&gt; dataStream = Flux.just(“a”, “b”, “c”, “d”, “e”);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Convert Publisher to JSON Text Sequences with Armeria HttpResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// with “application/json-seq” MIME type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse httpResponse = JsonTextSequences.fromPublisher(dataStream);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Convert Publisher to Server-sent Events with Armeria HttpResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// with “text/event-stream” MIME type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse httpResponse = ServerSentEvents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .fromPublisher(dataStream, SeverSentEvent::ofData);</span><br></span></code></pre></div></div>
<p>또한 빌트인 publisher를 더욱 쉽게 사용할 수 있도록 RxJava 통합을 지원하고 있습니다. 어노테이션한 서비스에 <code>@ProduceJsonSequence</code> 어노테이션을 추가하고, <code>Observable</code>을 그대로 반환하면 Armeria에서 해당 프로토콜로 자동으로 변환합니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.reactivex.Observable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.ProducesJsonSequences;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RxJavaService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Get(“/json-streaming”)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Generate JSON Text Sequences</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ProducesJsonSequences</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Observable&lt;String&gt; json() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // Just return RxJava Observable!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Observable.just(“a”, “b”, “c”);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre></div></div>
<p>아래와 같이&#x27;JsonTextSequences&#x27;로 인코딩하면 JSON 문자열의 시작과 끝에 레코드 구분자(separator)와 라인 피드(line feed)가 추가됩니다. 또한 현재 프로토콜에 따라 HTTP/1과 HTTP/2로 전송될 때 다르게 동작해야 하는데요.
Armeria에선 현재 연결된 프로토콜에 따라 알아서 적합한 형태의 데이터로 전송합니다.
HTTP/2의 경우에는 <a href="https://http2.github.io/http2-spec/#DATA" target="_blank" rel="noopener noreferrer" class="">Data frame</a>안에 JSON 데이터를 나누어서 보내고, HTTP/1의 경우에는 <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding" target="_blank" rel="noopener noreferrer" class="">chunked transfer encoding</a>을 이용하여 나누어서 보냅니다.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-5-b047c88a956d6aea2e8163ea08fd3590.png" width="3278" height="1818" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="spring-webflux-통합">Spring WebFlux 통합<a href="#spring-webflux-통합" class="hash-link" aria-label="Direct link to Spring WebFlux 통합" title="Direct link to Spring WebFlux 통합" translate="no">​</a></h2>
<p>Armeria는 다양한 라이브러리 및 프레임워크와의 연동을 지원합니다.
Reactive Streams를 사용하기 위해서 이미 <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html" target="_blank" rel="noopener noreferrer" class="">Spring WebFlux</a>를 사용하고 있다면, 별도의 코드 수정 없이 &#x27;armeria-spring-boot-webflux-starter&#x27;를 의존성에 추가(<a href="https://line.github.io/armeria/advanced-spring-webflux-integration.html" target="_blank" rel="noopener noreferrer" class="">참고</a>)하는 것만으로 Armeria로의 마이그레이션을 끝낼 수 있습니다. 이런 방식으로 WebFlux의 네트워크 레이어인 <a href="https://github.com/reactor/reactor-netty" target="_blank" rel="noopener noreferrer" class="">Reactor-Netty</a>를 Armeria의 Reactive 엔진으로 교체할 수 있습니다.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-6-0408b3405e56818eebd1d7b8471bbc75.png" width="3120" height="1346" class="img_ev3q"></p>
<p>단순히 엔진만 교체하는 거라면 &#x27;그냥 WebFlux만 사용하면 되지 않을까?&#x27;라는 의문이 생길 수도 있는데요. 과연 어떤 이점이 있는 걸까요?</p>
<p>엔진을 교체하면 <a href="https://line.github.io/armeria/apidocs/com/linecorp/armeria/spring/ArmeriaServerConfigurator.html" target="_blank" rel="noopener noreferrer" class="">ArmeriaServerConfigurator</a>를 통해서 Spring에 Armeria의 기능을 추가할 수 있어서, 기존 Spring에서는 지원하지 않는 Armeria만의 기능을 활용할 수 있습니다. 예를 들어 아래와 같이 REST API로 구성된 기존 Spring Webflux 서버에 gRPC나 Thrift 기능을 추가하여 기존과 동일한, 단일 포트에서 서비스할 수 있습니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ArmeriaConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Configure the server by providing an ArmeriaServerConfigurator bean.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public ArmeriaServerConfigurator armeriaServerConfigurator() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       // Customize the server using the given ServerBuilder. For example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return builder -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // Add DocService that enables you to send gRPC and Thrift requests from web browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.serviceUnder(“/docs”, new DocService());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // Log every message which the server receives and responds.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.decorator(LoggingService.newDecorator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // Write access log after completing a request.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.accessLogWriter(AccessLogWriter.combined(), false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // You can also bind asynchronous RPC services such as Thrift and gRPC:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.service(THttpService.of(…));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.service(GrpcService.builder()…build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>또한 이외에도 앞서 설명드린 decorator 기능을 활용해서 더욱더 풍성한 서비스로 만들 수 있습니다.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="grpc-스트림-지원">gRPC 스트림 지원<a href="#grpc-스트림-지원" class="hash-link" aria-label="Direct link to gRPC 스트림 지원" title="Direct link to gRPC 스트림 지원" translate="no">​</a></h2>
<p>gRPC는 <a href="https://grpc.github.io/grpc-java/javadoc/io/grpc/stub/StreamObserver.html" target="_blank" rel="noopener noreferrer" class="">StreamObserver</a>를 이용하여 스트림을 지원합니다(<a href="https://grpc.io/docs/tutorials/basic/java/#server-side-streaming-rpc" target="_blank" rel="noopener noreferrer" class="">참고</a>). 그리고 Reactive Streams에선 gRPC의 <a href="https://grpc.github.io/grpc-java/javadoc/io/grpc/stub/StreamObserver.html" target="_blank" rel="noopener noreferrer" class="">StreamObserver</a>로 손쉽게 변환할 수 있습니다. 예제를 통해서 알아보겠습니다.</p>
<p>우선 아래와 같이 protobuf를 이용해 데이터를 어떤 식으로 주고받을지, 인터페이스를 정의합니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">syntax = “proto3”;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package users;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">option java_package = “users”;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Returns all user information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc getAllUsers(UserRequest) returns (stream User) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Push to stream of users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc pushToUsers(stream User) returns (Result) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>전체 회원에게 메일 혹은 푸시 메시지를 보내고 싶다면 먼저 모든 사용자 정보를 조회해야 하는데요. 만약 회원 수가 너무 많다면 데이터를 한 번에 전송하는 게 어려울 수 있습니다. 그럴 때 아래와 같은 방법으로 대량의 사용자 정보를 반환하는 스트림 서버를 gRPC로 구축할 수 있습니다.</p>
<ol>
<li class="">ProjectReactor의 <code>Flux</code>를 Publisher로 사용하여 저장소에서 스트림 형태로 데이터를 조회합니다.</li>
<li class="">gRPC의 <code>StreamObservser</code>로 변환하여 외부로 전송합니다.</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Implement interfaces generated by gRPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public final class UserServiceImpl extends UserServiceImplBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void getAllUsers(UserRequest request, StreamObserver&lt;User&gt; responseObserver) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final Flux&lt;User&gt; userPublisher = userRepo.findAll();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        publisher.subscribe(responseObserver::onNext,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            responseObserver::onError,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            responseObserver::onCompleted);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><code>StreamObserver</code>에도 Reactive Streams와 유사하게 <code>onNext</code>, <code>onError</code>, <code>onCompleted</code> 함수가 존재하기 때문에 각각의 API를 매칭해서 연결하기만 하면 됩니다.</p>
<p>이번에는 수신 측에서 전체 사용자의 정보를 스트림으로 받는 것을 생각해 볼 건데요. <a href="https://www.reactive-streams.org/reactive-streams-1.0.0-javadoc/org/reactivestreams/Processor.html" target="_blank" rel="noopener noreferrer" class="">Processor</a>를 활용하겠습니다. <code>Processor</code>는 별도의 API를 가지고 있지 않고, <code>Subscriber</code>와 <code>Publisher,</code> 이 두 개의 인터페이스를 상속받고 있는 게 전부인데요. 데이터를 구독 받고, 구독한 데이터를 다시 발행할 때 유용하게 사용할 수 있습니다. <code>StreamObserver</code>의 <code>onNext</code>로 들어온 새로운 사용자 정보를 <code>Processor</code>의 <code>onNext</code> 함수로 전달할 수 있고, 이를 다시 구독해서 원하는 작업을 추가로 수행할 수 있습니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public StreamObserver&lt;User&gt; pushToUsers(StreamObserver&lt;Result&gt; responseObserver) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Processor&lt;User, User&gt; processor = EmitterProcessor.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Publisher&lt;User&gt; publisher = processor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Subscriber&lt;User&gt; subscriber = processor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Push one-by-one by subscribing publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return new StreamObserver&lt;User&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // subscribe user data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override public void onNext(User user) { processor.onNext(user); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override public void onError(Throwable throwable) { processor.onError(throwable); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override public void onCompleted() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseObserver.onNext(Result.newBuilder().setStatus(200).build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseObserver.onCompleted();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>작성한 gRPC 코드를 Armeria에서 실행해보겠습니다.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.Server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.grpc.GrpcService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Add your grpc service to Armeria GrpcService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var grpcService = GrpcService.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             .addService(new UserServiceImpl())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .serviceUnder(“/grpc”, grpcService)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .serviceUnder(“/docs”, new DocService())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .build();</span><br></span></code></pre></div></div>
<p>이렇게 만든 스트림 서버를 이용해 작은 메모리로도 많은 양의 데이터를 스트림 형태로 처리할 수 있습니다.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="마이크로-서비스를-위한-armeria의-기능">마이크로 서비스를 위한 Armeria의 기능<a href="#마이크로-서비스를-위한-armeria의-기능" class="hash-link" aria-label="Direct link to 마이크로 서비스를 위한 Armeria의 기능" title="Direct link to 마이크로 서비스를 위한 Armeria의 기능" translate="no">​</a></h2>
<p>Armeria를 통해 Reactive Streams를 활용하면 많은 양의 데이터와 트랙픽을 유연하게 처리할 수 있습니다. 또한 RPC를 통해서 마이크로 서비스간 통신도 쉽게 처리할 수 있습니다.</p>
<p>이외에도 아래와 같이 마이크로 서비스에 필요한 다양한 기능을 제공하고 있습니다.</p>
<ul>
<li class="">클라우드 환경에서 서버의 위치를 파악하기 위해 Kubernetes 유형의 DNS(Domain Name System)와 ZooKeeper를 활용한 서비스 검색(discovery)을 제공(<a href="https://line.github.io/armeria/advanced-zookeeper.html" target="_blank" rel="noopener noreferrer" class="">참고</a>)하고 있습니다.</li>
<li class="">검색된 서비스는 클라이언트 측 로드 밸런싱으로 직접 부하를 분산하며 서버와 통신합니다. 이를 통해 장애점을 줄일 수 있습니다.</li>
<li class=""><a href="https://www.nginx.com/resources/glossary/layer-7-load-balancing/" target="_blank" rel="noopener noreferrer" class="">L7</a>이 아닌 클라이언트가 직접 서버 상태를 체크할 수 있습니다.</li>
<li class="">로그를 확인할 때 분산된 서버에 접근하지 않고도 확인할 수 있도록 Kafka로 접속 로그를 전송합니다.</li>
<li class="">Micrometer를 활용해서 필요한 수치를 설정, 수집하여 Prometheus나 Netflix의 Atlas와 같은 애플리케이션 모니터링 툴로 전송할 수 있습니다.</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/reactive-streams-armeria-2-7-da8c2428f8f86f6212efef177ca57d88.png" width="3076" height="1428" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="마치며">마치며<a href="#마치며" class="hash-link" aria-label="Direct link to 마치며" title="Direct link to 마치며" translate="no">​</a></h2>
<p>두 번에 걸쳐 Reactive Streams와 Armeria에 대한 내용을 공유드렸습니다. 함께 살펴보았듯 Armeria를 이용하면, Reactive Streams와 고성능, 비동기, RPC, HTTP/2를 지원하면서 장애에 탄력적인, 보다 안전한 서버를 구축할 수 있습니다.</p>
<p>Armeria에선 포스팅에서 언급한 기능 외에 더 많은 기능을 제공하고 있습니다. 이와 관련하여 Armeria의 <a href="https://line.github.io/armeria/index.html" target="_blank" rel="noopener noreferrer" class="">공식 홈페이지</a>와 아래 링크를 참고하시기 바랍니다.</p>
<ul>
<li class="">GitHub: <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">line/armeria</a></li>
<li class="">Twitter: <a href="https://twitter.com/armeria_project" target="_blank" rel="noopener noreferrer" class="">@armeria_project</a></li>
<li class="">Chat: <a href="https://armeria.dev/s/discord" target="_blank" rel="noopener noreferrer" class="">Discord</a></li>
<li class=""><a href="https://line.github.io/armeria/apidocs/index.html" target="_blank" rel="noopener noreferrer" class="">API documentation</a></li>
<li class="">Armeria examples: <a href="https://github.com/line/armeria-examples" target="_blank" rel="noopener noreferrer" class="">line/armeria-examples</a></li>
</ul>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="footnotes">Footnotes<a href="#footnotes" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes" translate="no">​</a></h4>
<ol>
<li class=""><a href="https://line.github.io/armeria/server-grpc.html" target="_blank" rel="noopener noreferrer" class="">gRPC 서버를 Armeria에서 구동하는 법</a>과 <a href="https://line.github.io/armeria/server-thrift.html" target="_blank" rel="noopener noreferrer" class="">Thrift 서버를 Armeria에서 구동하는 법</a>을 참고하시기 바랍니다.</li>
<li class="">Armeria에서 기본적으로 제공하는 다양한 decorator는 공식 문서와 아래 Javadoc에서 확인해 볼 수 있습니다.<!-- -->
<ul>
<li class=""><a href="https://line.github.io/armeria/apidocs/com/linecorp/armeria/server/SimpleDecoratingHttpService.html" target="_blank" rel="noopener noreferrer" class="">SimpleDecoratingHttpService</a>와 <a href="https://line.github.io/armeria/apidocs/com/linecorp/armeria/client/SimpleDecoratingClient.html" target="_blank" rel="noopener noreferrer" class="">SimpleDecoratingClient</a>의 Direct Known Subsclasses 항목</li>
</ul>
</li>
</ol></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/line/armeria/edit/main/site/src/content/blog/ko/2020-02-19-reactive-streams-armeria-2.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/ko/2021/06/28/monitoring-prometheus-metrics-from-armeria"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Armeria에서 Prometheus 지표 모니터링하기</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/ko/2020/02/18/reactive-streams-armeria-1"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Armeria로 Reactive Streams와 놀자! - 1</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#whats-armeria" class="table-of-contents__link toc-highlight">What’s Armeria?</a><ul><li><a href="#지원하는-프로토콜" class="table-of-contents__link toc-highlight">지원하는 프로토콜</a></li><li><a href="#예제-코드로-알아보는-armeria" class="table-of-contents__link toc-highlight">예제 코드로 알아보는 Armeria</a></li><li><a href="#armeria-내-http2-스트림" class="table-of-contents__link toc-highlight">Armeria 내 HTTP/2 스트림</a></li></ul></li><li><a href="#reactive-streams와-armeria의-통합" class="table-of-contents__link toc-highlight">Reactive Streams와 Armeria의 통합</a><ul><li><a href="#armeria-http-응답-publisher" class="table-of-contents__link toc-highlight">Armeria HTTP 응답 Publisher</a></li><li><a href="#armeria-빌트인-publisher" class="table-of-contents__link toc-highlight">Armeria 빌트인 Publisher</a></li></ul></li><li><a href="#spring-webflux-통합" class="table-of-contents__link toc-highlight">Spring WebFlux 통합</a></li><li><a href="#grpc-스트림-지원" class="table-of-contents__link toc-highlight">gRPC 스트림 지원</a></li><li><a href="#마이크로-서비스를-위한-armeria의-기능" class="table-of-contents__link toc-highlight">마이크로 서비스를 위한 Armeria의 기능</a></li><li><a href="#마치며" class="table-of-contents__link toc-highlight">마치며</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container--fluid"><div class="row"><div class="newsletterForm_kJQ8 col"><p>Sign up for our newsletters:</p><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div><div class="copyright_C6JK col"><div>© 2015-<!-- -->2025<!-- -->, LY Corporation<br><br><a href="https://terms.line.me/line_rules?lang=en" target="_blank" rel="noopener noreferrer">Privacy policy</a></div><div><span role="img" aria-label="Armeria project logo" aria-hidden="false"><svg class="" style="width:4rem;overflow:hidden;vertical-align:middle" viewBox="20 70 70 70" version="1.1"><title>Armeria project logo</title><g id="layer1" transform="translate(0,-87)"><g id="g4208" transform="matrix(1.3217499,0,0,1.3217499,-49.437761,-33.946772)"><g transform="matrix(0.35277777,0,0,-0.35277777,80.962517,162.47851)" id="g46"><path id="path48" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 -20.785,-12 V -36 L 0,-48 20.785,-36 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,162.47851)" id="g50"><path id="path52" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 V 24 L -20.785,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,170.94517)" id="g54"><path id="path56" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 V 24 L -20.784,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,192.11184)" id="g58"><path id="path60" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 V 24 L -20.785,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,154.01184)" id="g62"><path id="path64" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="m 0,0 v -24 l 20.785,12 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,162.47851)" id="g66"><path id="path68" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="m 0,0 v -24 l 20.785,12 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,73.630137,183.64517)" id="g70"><path id="path72" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="m 0,0 v -24 l 20.785,12 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,73.630137,149.77851)" id="g74"><path id="path76" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 -20.785,-12 0,-24 20.785,-12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,154.01184)" id="g78"><path id="path80" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 -20.785,12 -41.569,0 -20.785,-12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,166.71184)" id="g82"><path id="path84" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="m 0,0 v 0 -24 l 20.785,12 V 12 L 0,24 -20.785,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,73.630137,166.71184)" id="g86"><path id="path88" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 20.785,12 0,24 -20.785,12 V -12 L 0,-24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,192.11184)" id="g90"><path id="path92" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 20.785,12 V 36 L 0,24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,170.94517)" id="g94"><path id="path96" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="m 0,0 v -24 l 20.785,12 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,187.8785)" id="g98"><path id="path100" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 20.785,-12 V 12 L 0,24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,58.965587,166.71184)" id="g102"><path id="path104" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="m 0,0 v -24 l 20.784,-12 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,80.962517,179.41184)" id="g106"><path id="path108" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 -20.785,12 V -12 L 0,-24 20.785,-12 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,158.24517)" id="g110"><path id="path112" class="tertiary_B5zC" style="fill:transparent" d="M 0,0 -20.785,12 -41.569,0 -20.785,-12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,170.94517)" id="g114"><path id="path116" class="tertiary_B5zC" style="fill:transparent" d="M 0,0 -20.785,-12 V -36 L 0,-24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,170.94517)" id="g118"><path id="path120" class="tertiary_B5zC" style="fill:transparent" d="M 0,0 20.785,-12 V -36 L 0,-24 Z"></path></g></g></g></svg></span></div></div></div></div></footer><div id="starBegging_pb0B" class="off_vUOf"><p>Like Armeria?<br>Star us ⭐️</p><span role="button" tabindex="0" class="close_CaW0">×</span> <iframe id="starFrame" class="githubStar" title="github-stars" src="https://ghbtns.com/github-btn.html?user=line&amp;repo=armeria&amp;type=star&amp;count=true&amp;size=large" width="150px" height="30px"></iframe></div></div>
</body>
</html>