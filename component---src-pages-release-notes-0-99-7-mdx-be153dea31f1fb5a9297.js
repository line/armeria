"use strict";(self.webpackChunkarmeria_site=self.webpackChunkarmeria_site||[]).push([[8269],{86634:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return l},default:function(){return u}});var r,n=a(63366),i=(a(67294),a(64983)),o=a(20370),s=["components"],l={},p=(r="ThankYou",function(e){return console.warn("Component "+r+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)}),c={_frontmatter:l},m=o.Z;function u(e){var t=e.components,a=(0,n.Z)(e,s);return(0,i.kt)(m,Object.assign({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",{className:"date"},"22nd June 2020"),(0,i.kt)("h2",{id:"-new-features",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-new-features","aria-label":" new features permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"üåü New features"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now specify the maximum lifespan of server-side connections using\n",(0,i.kt)("a",{parentName:"p",href:"type://ServerBuilder#maxConnectionAge(Duration):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#maxConnectionAge(java.time.Duration)"},"type://ServerBuilder#maxConnectionAge(Duration)"),". This is useful when you have to deal with a load balancer\nwithout HTTP/2 support. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2747"},"#2747")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2796"},"#2796")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},"Server server =\n    Server.builder()\n          .maxConnectionAge(Duration.ofMinutes(1))\n          ...\n          .build();\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now record the name of the service that handled a request into ",(0,i.kt)("a",{parentName:"p",href:"type://RequestOnlyLog#serviceName():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestOnlyLog.html#serviceName()"},"type://RequestOnlyLog#serviceName()"),".\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2768"},"#2768")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2780"},"#2780")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2809"},"#2809")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2820"},"#2820")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"By using ",(0,i.kt)("a",{parentName:"p",href:"type://ServiceBindingBuilder#defaultServiceName(String):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceBindingBuilder.html#defaultServiceName(java.lang.String)"},"type://ServiceBindingBuilder#defaultServiceName(String)"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Server server =\n    Server.builder()\n          .route().path("/service")\n                  .defaultServiceName("my-service")\n                  .build(new MyService())\n          .build();\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"By using ",(0,i.kt)("a",{parentName:"p",href:"type://@ServiceName:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/ServiceName.html"},"type://@ServiceName"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'@ServiceName("my-service")\npublic class MyAnnotatedService {\n    @Get("/get")\n    public String get() { ... }\n\n    @Post("/set")\n    @ServiceName("my-post-service")\n    public String post(@Param String value) { ... }\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Programmatically:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Server server =\n    Server.builder()\n          .service("/service", (ctx, req) -> {\n              ctx.logBuilder().serviceName("my-service");\n          })\n          .build();\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Armeria will use the FQCN of the service class if you did not specify a service name.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now use ",(0,i.kt)("inlineCode",{parentName:"p"},"@Nullable")," annotation to specify an optional parameter or request object in annotated\nservices. Previously, only the parameters with ",(0,i.kt)("a",{parentName:"p",href:"type://@Default:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Default.html"},"type://@Default")," annotation or ",(0,i.kt)("inlineCode",{parentName:"p"},"Optional")," type were accepted.\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2773"},"#2773")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public class MyAnnotatedService {\n    // null will be injected into 'value' instead of returning\n    // '400 Bad Request' when 'value' is missing.\n    @Get(\"/get\")\n    public String get(@Param @Nullable String value) { ... }\n}\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now use the classes in the ",(0,i.kt)("inlineCode",{parentName:"p"},"java.time")," package in annotated services. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2760"},"#2760")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2783"},"#2783")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2792"},"#2792")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2799"},"#2799")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public class MyAnnotatedService {\n    @Get("/sleep/{duration}")\n    public void sleep(@Param Duration duration) { ... }\n}\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now determine whether a request was successful or not from HTTP trailers in\n",(0,i.kt)("a",{parentName:"p",href:"type://CircuitBreakerClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html"},"type://CircuitBreakerClient")," and ",(0,i.kt)("a",{parentName:"p",href:"type://RetryingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html"},"type://RetryingClient")," using ",(0,i.kt)("inlineCode",{parentName:"p"},"onResponseTrailers()")," method.\nThis can be useful when you work with gRPC, whose status code is encoded in the ",(0,i.kt)("inlineCode",{parentName:"p"},"grpc-status")," trailer. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2816"},"#2816")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'CircuitBreaker cb = CircuitBreaker.of("my-service");\nCircuitBreakerRule cbr =\n    CircuitBreakerRule.builder()\n                      .onResponseTrailers(trailers -> {\n                          return trailers.getInt("grpc-status", -1) != 0;\n                      })\n                      .thenFailure()\n                      .build();\n\nMyServiceStub myService =\n    Clients.builder("gproto+h2c://example.com/")\n           .decorator(CircuitBreakerClient.newDecorator(cb, cbr))\n           .build(MyServiceStub.class);\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," sanitizers now accept ",(0,i.kt)("a",{parentName:"p",href:"type://RequestContext:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html"},"type://RequestContext")," as an additional input, so that\nthe sanitizers can behave differently depending on the current path, etc. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2803"},"#2803")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Server server =\n    Server.builder()\n          .decorator(LoggingService.builder()\n                                   .headersSanitizer((ctx, headers) -> {\n                                       if (ctx.path().startsWith("/secret/")) {\n                                           return "<secret>";\n                                       } else {\n                                           return headers;\n                                       }\n                                   })\n                                   .newDecorator())\n          ...\n          .build();\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Armeria now supports service discovery and registration for\n",(0,i.kt)("a",{parentName:"p",href:"https://curator.apache.org/curator-x-discovery/index.html"},"Curator Service Discovery")," and\n",(0,i.kt)("a",{parentName:"p",href:"http://stevenskelton.ca/finagle-serverset-clusters-using-zookeeper/"},"Finagle ServerSets"),". ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2673"},"#2673")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2749"},"#2749")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2791"},"#2791")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'CuratorFramework curator = ...;\n// Client side:\n//// Curator Service Discovery:\nEndpointGroup curatorEndpointGroup =\n    ZooKeeperEndpointGroup.of(curator, "/discovery/curator",\n                              ZooKeeperDiscoverySpec.curator("my-service"));\n//// Finagle ServerSets:\nEndpointGroup serverSetsEndpointGroup =\n    ZooKeeperEndpointGroup.of(curator, "/discovery/serversets"\n                              ZooKeeperDiscoverySpec.serverSets());\n\n// Server-side:\nServer server = ...;\n//// Curator Service Discovery:\nserver.addListener(ZooKeeperUpdatingListener.of(\n    curator, "/discovery/curator",\n    ZooKeeperRegistrationSpec.curator("my-service")));\n//// Finagle ServerSets:\nserver.addListener(ZooKeeperUpdatingListener.of(\n    curator, "/discovery/serversets",\n    ZooKeeperRegistrationSpec.serverSets()));\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now build ",(0,i.kt)("a",{parentName:"p",href:"type://OAuth1aToken:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/auth/OAuth1aToken.html"},"type://OAuth1aToken")," more conveniently using the builder API. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2770"},"#2770")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'OAuth1aToken token =\n    OAuth1aToken.builder()\n                .realm("...")\n                .consumerKey("...")\n                .token("...")\n                ...\n                .build();\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The Spring Boot integration now hides all services under ",(0,i.kt)("inlineCode",{parentName:"p"},"/internal/")," for non-management ports when\n",(0,i.kt)("inlineCode",{parentName:"p"},"management.server.port")," property is set. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2408"},"#2408")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2502"},"#2502"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The Spring Boot integration now supports\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.spring.io/spring-boot/docs/2.3.0.RELEASE/reference/html/spring-boot-features.html#boot-features-graceful-shutdown"},"the new graceful shutdown properties"),"\nintroduced in Spring Boot 2.3. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2784"},"#2784")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2802"},"#2802"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Added a new API for handling reference counted or pooled objects such as ",(0,i.kt)("a",{parentName:"p",href:"type://PooledHttpData"},"type://PooledHttpData")," in\na relatively safer way. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2448"},"#2448")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"type://PooledHttpData"},"type://PooledHttpData"),", ",(0,i.kt)("a",{parentName:"li",href:"type://PooledWebClient"},"type://PooledWebClient"),", ",(0,i.kt)("a",{parentName:"li",href:"type://PooledHttpRequest"},"type://PooledHttpRequest")," and\n",(0,i.kt)("a",{parentName:"li",href:"type://PooledHttpResponse"},"type://PooledHttpResponse")," for more information.")))),(0,i.kt)("h2",{id:"-improvements",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-improvements","aria-label":" improvements permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"üìà Improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Cleaned up minor issues reported by ",(0,i.kt)("a",{parentName:"li",href:"https://errorprone.info/"},"errorprone"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2772"},"#2772")),(0,i.kt)("li",{parentName:"ul"},"Made some exception messages more user-friendly. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2751"},"#2751"))),(0,i.kt)("h2",{id:"Ô∏è-bug-fixes",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-bug-fixes","aria-label":"Ô∏è bug fixes permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"üõ†Ô∏è Bug fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"It's now allowed to specify an absolute URL ",(0,i.kt)("em",{parentName:"li"},"only when")," a ",(0,i.kt)("a",{parentName:"li",href:"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html"},"type://WebClient")," was created ",(0,i.kt)("em",{parentName:"li"},"without")," a base\nURL. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2757"},"#2757"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'WebClient clientWithoutBaseUrl = WebClient.of();\nWebClient clientWithBaseUrl = WebClient.of("https://example.com/");\n// Good\nclientWithBaseUrl.get("/bar");\nclientWithoutBaseUrl.get("https://foo.com/");\n// Bad\nclientWithBaseUrl.get("https://foo.com/");\nclientWithoutBaseUrl.get("/bar");\n'))),(0,i.kt)("li",{parentName:"ul"},"Boolean parameter conversion became more strict in annotated services. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2767"},"#2767")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2774"},"#2774"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Only ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"1")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"0")," are accepted. Other values will cause a ",(0,i.kt)("inlineCode",{parentName:"li"},"400 Bad Request")," response."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"type://DocService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html"},"type://DocService")," web UI now shows the 'request body' field for ",(0,i.kt)("inlineCode",{parentName:"li"},"DELETE")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"PATCH")," methods in the debug\nform. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2756"},"#2756")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2819"},"#2819")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"type://JacksonRequestConverterFunction:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/JacksonRequestConverterFunction.html"},"type://JacksonRequestConverterFunction")," now handles the case where the target type has a type parameter,\ne.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"List<Long>"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2769"},"#2769")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2779"},"#2779")),(0,i.kt)("li",{parentName:"ul"},"Fixed a bug where the current ",(0,i.kt)("a",{parentName:"li",href:"type://ServiceRequestContext:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html"},"type://ServiceRequestContext")," is not pushed when invoking\n",(0,i.kt)("a",{parentName:"li",href:"type://ResponseConverterFunction#convertResponse(ServiceRequestContext,ResponseHeaders,Object,HttpHeaders):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/ResponseConverterFunction.html#convertResponse(com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.ResponseHeaders,java.lang.Object,com.linecorp.armeria.common.HttpHeaders)"},"type://ResponseConverterFunction#convertResponse(ServiceRequestContext,ResponseHeaders,Object,HttpHeaders)"),".\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2789"},"#2789")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"type://RequestContextExportingAppender:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logback/RequestContextExportingAppender.html"},"type://RequestContextExportingAppender")," now handles the ",(0,i.kt)("inlineCode",{parentName:"li"},"<exports />")," tag correctly. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2781"},"#2781")),(0,i.kt)("li",{parentName:"ul"},"Fixed a bug where some Reactive Streams ",(0,i.kt)("inlineCode",{parentName:"li"},"Subscriber")," implementations violate the specification. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2815"},"#2815")),(0,i.kt)("li",{parentName:"ul"},"You no longer get sporadic ",(0,i.kt)("a",{parentName:"li",href:"type://WriteTimeoutException:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WriteTimeoutException.html"},"type://WriteTimeoutException")," from proxied connections. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2801"},"#2801")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2805"},"#2805")),(0,i.kt)("li",{parentName:"ul"},"You no longer get a ",(0,i.kt)("a",{parentName:"li",href:"type://CancelledSubscriptionException:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/CancelledSubscriptionException.html"},"type://CancelledSubscriptionException")," unnecessarily when using\n",(0,i.kt)("a",{parentName:"li",href:"type://PublisherBasedStreamMessage:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/PublisherBasedStreamMessage.html"},"type://PublisherBasedStreamMessage"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2797"},"#2797")),(0,i.kt)("li",{parentName:"ul"},"You no longer get sporadic ",(0,i.kt)("inlineCode",{parentName:"li"},"EncoderException"),"s from HTTP/1 connections. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2765"},"#2765")),(0,i.kt)("li",{parentName:"ul"},"It's now disallowed to specify the following headers in gRPC ",(0,i.kt)("inlineCode",{parentName:"li"},"Metadata"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2718"},"#2718"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},":status")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"grpc-message")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"grpc-status")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"armeria.grpc.ThrowableProto-bin"))))),(0,i.kt)("h2",{id:"Ô∏è-deprecations",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-deprecations","aria-label":"Ô∏è deprecations permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"üèöÔ∏è Deprecations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"type://AbstractUnwrappable#delegate()"},"type://AbstractUnwrappable#delegate()")," has been deprecated in favor of ",(0,i.kt)("a",{parentName:"li",href:"type://Unwrappable#unwrap():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/Unwrappable.html#unwrap()"},"type://Unwrappable#unwrap()"),".")),(0,i.kt)("h2",{id:"Ô∏è-breaking-changes",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-breaking-changes","aria-label":"Ô∏è breaking changes permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"‚ò¢Ô∏è Breaking changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You can specify an absolute URL ",(0,i.kt)("em",{parentName:"li"},"only when")," a ",(0,i.kt)("a",{parentName:"li",href:"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html"},"type://WebClient")," was created ",(0,i.kt)("em",{parentName:"li"},"without")," a base URL.\nIt was previously allowed to specify an absolute URL even when created with a base URL. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2757"},"#2757")),(0,i.kt)("li",{parentName:"ul"},"The method signature of\n",(0,i.kt)("a",{parentName:"li",href:"type://RequestConverterFunction#convertRequest(ServiceRequestContext,AggregatedHttpRequest,Class,ParameterizedType):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/RequestConverterFunction.html#convertRequest(com.linecorp.armeria.server.ServiceRequestContext,com.linecorp.armeria.common.AggregatedHttpRequest,java.lang.Class,java.lang.reflect.ParameterizedType)"},"type://RequestConverterFunction#convertRequest(ServiceRequestContext,AggregatedHttpRequest,Class,ParameterizedType)"),"\nhas been changed to support parameterized types. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2779"},"#2779")),(0,i.kt)("li",{parentName:"ul"},"The default ",(0,i.kt)("a",{parentName:"li",href:"type://MeterIdPrefixFunction:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html"},"type://MeterIdPrefixFunction")," returned by ",(0,i.kt)("a",{parentName:"li",href:"type://MeterIdPrefixFunction#ofDefault(String):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html#ofDefault(java.lang.String)"},"type://MeterIdPrefixFunction#ofDefault(String)"),"\nnow generates the meter IDs with different tags. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2780"},"#2780"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"route")," tag has been replaced with the ",(0,i.kt)("inlineCode",{parentName:"li"},"service")," tag."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"RetrofitMeterIdPrefixFunctionBuilder")," has been removed and superseded by\n",(0,i.kt)("a",{parentName:"li",href:"type://RequestOnlyLog#serviceName():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestOnlyLog.html#serviceName()"},"type://RequestOnlyLog#serviceName()"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2780"},"#2780")),(0,i.kt)("li",{parentName:"ul"},"ZooKeeper-based service discovery: ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2749"},"#2749")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2791"},"#2791"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"You now must specify ",(0,i.kt)("a",{parentName:"li",href:"type://ZooKeeperRegistrationSpec:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/zookeeper/ZooKeeperRegistrationSpec.html"},"type://ZooKeeperRegistrationSpec")," or ",(0,i.kt)("a",{parentName:"li",href:"type://ZooKeeperDiscoverySpec:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/zookeeper/ZooKeeperDiscoverySpec.html"},"type://ZooKeeperDiscoverySpec")," when creating\n",(0,i.kt)("a",{parentName:"li",href:"type://ZooKeeperUpdatingListener:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/zookeeper/ZooKeeperUpdatingListener.html"},"type://ZooKeeperUpdatingListener")," or ",(0,i.kt)("a",{parentName:"li",href:"type://ZooKeeperEndpointGroup:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/zookeeper/ZooKeeperEndpointGroup.html"},"type://ZooKeeperEndpointGroup"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"NodeValueCodec")," has been removed."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ZooKeeperEndpointGroupBuilder.codec()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"ZooKeeperUpdatingListenerBuilder.codec()")," have been removed."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ByteBufHttpData")," has been replaced with ",(0,i.kt)("a",{parentName:"li",href:"type://PooledHttpData"},"type://PooledHttpData"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2448"},"#2448")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"HttpRequest.aggregateWithPooledObjects()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpResponse.aggregateWithPooledObject")," have been replaced\nwith ",(0,i.kt)("a",{parentName:"li",href:"type://PooledHttpRequest"},"type://PooledHttpRequest")," and ",(0,i.kt)("a",{parentName:"li",href:"type://PooledHttpResponse"},"type://PooledHttpResponse"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2448"},"#2448")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"SubscriptionOption.WITH_POOLED_OBJECTS")," has been removed. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2448"},"#2448"))),(0,i.kt)("h2",{id:"-dependencies",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-dependencies","aria-label":" dependencies permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"‚õì Dependencies"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Bouncy Castle 1.65 ‚Üí 1.65.01"),(0,i.kt)("li",{parentName:"ul"},"Dropwizard 2.0.9 ‚Üí 2.0.10"),(0,i.kt)("li",{parentName:"ul"},"gRPC 1.29.0 ‚Üí 1.30.1"),(0,i.kt)("li",{parentName:"ul"},"Jetty 9.4.29 ‚Üí 9.4.30"),(0,i.kt)("li",{parentName:"ul"},"Reactor 3.3.5 ‚Üí 3.3.6"),(0,i.kt)("li",{parentName:"ul"},"Spring Boot 2.3.0 ‚Üí 2.3.1, 2.1.14 ‚Üí 2.1.15"),(0,i.kt)("li",{parentName:"ul"},"Tomcat 9.0.35 ‚Üí 9.0.36, 8.5.55 ‚Üí 8.5.56"),(0,i.kt)("li",{parentName:"ul"},"Example dependencies",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Dagger 2.27 ‚Üí 2.28"),(0,i.kt)("li",{parentName:"ul"},"grpc-kotlin-stub 0.1.2 ‚Üí 0.1.3")))),(0,i.kt)("h2",{id:"-thank-you",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-thank-you","aria-label":" thank you permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"üôá Thank you"),(0,i.kt)(p,{usernames:["anuraaga","cbornet","eonezhang","ghkim3221","heowc","huydx","ikhoon","jongmin92","joonhaeng","jrhee17","KarboniteKream","kojilin","max904-github","minwoox","okue","sokangmin","tobias-","trustin"],mdxType:"ThankYou"}))}u.isMDXComponent=!0},20370:function(e,t,a){a(88025);var r=a(1923),n=a(25444),i=a(67294),o=a(55746),s=a(8284),l=a(96759),p=a(46731),c=a(9396),m=r.Z.Title,u=Object.keys(s)[0],h=d(u);function d(e){return e.substring(e.lastIndexOf("/")+1)}t.Z=function(e){var t={},a={},r={root:{"Latest news items":"/news","Latest release notes":"/release-notes","Past news items":"/news/list","Past release notes":"/release-notes/list"},"Recent news items":t,"Recent releases":a};Object.entries(o).forEach((function(e){var a=e[0],r=e[1];t[r]=a})),Object.entries(s).forEach((function(e){var t=e[0],r=e[1];a[r]=t}));var v=(0,c.Z)(e.location),k=e.version||d(v);return k.match(/^[0-9]/)||(k=void 0),i.createElement(p.Z,Object.assign({},e,{candidateMdxNodes:[],index:r,prefix:"release-notes",pageTitle:k?k+" release notes":e.pageTitle,pageTitleSuffix:"Armeria release notes"}),k&&k!==h?i.createElement(l.Ch,null,"You're seeing the release note of an old version. Check out"," ",i.createElement(n.Link,{to:u},"the latest release note"),"."):"",k?i.createElement(m,{id:"release-notes",level:1},i.createElement("a",{href:"#release-notes","aria-label":"release notes permalink",className:"anchor before"},i.createElement("svg",{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},i.createElement("path",{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),k," release notes"):"",e.children)}},55746:function(e){e.exports=JSON.parse('{"/news/20230426-newsletter-5":"Armeria Newsletter vol. 5","/news/20220714-newsletter-4":"Armeria Newsletter vol. 4","/news/20211029-newsletter-3":"Armeria Newsletter vol. 3","/news/20210202-newsletter-2":"Armeria Newsletter vol. 2","/news/20200703-newsletter-1":"Armeria Newsletter vol. 1","/news/20200514-newsletter-0":"Armeria Newsletter vol. 0"}')},8284:function(e){e.exports=JSON.parse('{"/release-notes/1.24.1":"v1.24.1","/release-notes/1.24.0":"v1.24.0","/release-notes/1.23.1":"v1.23.1","/release-notes/1.23.0":"v1.23.0","/release-notes/1.22.1":"v1.22.1","/release-notes/1.22.0":"v1.22.0","/release-notes/1.21.0":"v1.21.0","/release-notes/1.20.3":"v1.20.3","/release-notes/1.20.2":"v1.20.2","/release-notes/1.20.1":"v1.20.1","/release-notes/1.20.0":"v1.20.0","/release-notes/1.19.0":"v1.19.0","/release-notes/1.18.0":"v1.18.0","/release-notes/1.17.2":"v1.17.2","/release-notes/1.17.1":"v1.17.1","/release-notes/1.17.0":"v1.17.0"}')}}]);
//# sourceMappingURL=component---src-pages-release-notes-0-99-7-mdx-be153dea31f1fb5a9297.js.map