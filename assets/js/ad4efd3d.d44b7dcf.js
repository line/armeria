"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[8226],{28453:(e,r,a)=>{a.d(r,{R:()=>o,x:()=>s});var i=a(96540);const n={},t=i.createContext(n);function o(e){const r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(t.Provider,{value:r},e.children)}},63175:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"1.10.0","title":"v1.10.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/1.10.0.mdx","sourceDirName":".","slug":"/1.10.0","permalink":"/release-notes/1.10.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/release-notes/1.10.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2021-08-19T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v1.11.0","permalink":"/release-notes/1.11.0"},"next":{"title":"v1.9.2","permalink":"/release-notes/1.9.2"}}');var n=a(74848),t=a(28453);const o={date:new Date("2021-08-19T00:00:00.000Z")},s="v1.10.0",c={},l=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc3 Documentation",id:"-documentation",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function h(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:a}=r;return a||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.header,{children:[(0,n.jsx)(r.h1,{id:"v1100",children:"v1.10.0"}),(0,n.jsx)(r.p,{children:(0,n.jsx)(r.em,{children:"August 19, 2021"})})]}),"\n",(0,n.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["A new module ",(0,n.jsx)(r.code,{children:"armeria-sangria"})," that integrates with ",(0,n.jsx)(r.a,{href:"https://sangria-graphql.github.io",children:"Sangria GraphQL"})," is\nintroduced to let you serve a GraphQL request in Scala. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3703",children:"#3703"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3704",children:"#3704"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-scala",children:'val schema: Schema[CharacterRepo, Unit] = Schema(Query)\nServer.builder()\n      .service("/graphql",\n          SangriaGraphqlService.builder(schema, new CharacterRepo)\n                               .enableTracing(true)\n                               .maxQueryDepth(10)\n                               .build())\n'})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now configure ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html",children:"WebClient"})," to automatically follow redirections. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2489",children:"#2489"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3641",children:"#3641"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:'WebClient.builder()\n         .followRedirects()\n         .build();\n// Customize redirection policy\nRedirectConfig config = RedirectConfig.builder()\n                                      .maxRedirects(10)\n                                      .allownDomains("foo.com", "bar.com")\n                                      .build();\nWebClient.builder("https://example.com")\n         .followRedirects(config)\n         .build();\n'})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now recover a failed ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"})," with a fallback ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"}),". It would be useful\nfor handling an error of ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"})," in a decorator. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:'HttpResponse response =\n    HttpResponse.ofFailure(new IllegalStateException("Oops..."));\n// The failed HttpResponse will be recovered by the fallback function.\nHttpResponse recovered =\n    response.recover(cause -> HttpResponse.of("Fallback"));\nassert recovered.aggregate().join().contentUtf8().equals("Fallback");\n'})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now resume a failed ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," with a fallback ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:'DefaultStreamMessage<Integer> stream = new DefaultStreamMessage<>();\nstream.write(1);\nstream.write(2);\nstream.close(new IllegalStateException("Oops..."));\nStreamMessage<Integer> resumed =\n    stream.recoverAndResume(cause -> StreamMessage.of(3, 4));\nassert resumed.collect().join().equals(List.of(1, 2, 3, 4));\n'})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now transform an error of ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," into another using\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#mapError(java.util.function.Function)",children:"StreamMessage#mapError(Function)"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3668",children:"#3668"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"StreamMessage stream =\n    StreamMessage.aborted(ClosedStreamException.get());\nStreamMessage transformed = stream.mapError(ex -> {\n  if (ex instanceof ClosedStreamException) {\n    return new IllegalStateException(ex);\n  } else {\n    return ex;\n  }\n});\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now automatically encode an object into JSON for a response payload using\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html#ofJson(java.lang.Object)",children:"HttpResponse#ofJson(Object)"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3662",children:"#3662"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"MyObject myObject = ...;\nHttpResponse.ofJson(myObject);\nMyError myError = ...;\nHttpResponse.ofJson(HttpStatus.INTERNAL_SERVER_ERROR, myError);\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now fluently inject ",(0,n.jsx)(r.code,{children:"io.grpc.ServerInterceptor"}),"s using\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#intercept(java.lang.Iterable)",children:"GrpcServiceBuilder#intercept(Iterable)"}),"."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"GrpcService.builder()\n           .addService(myService)\n           .intercept(myInterceptror)\n           .build();\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now easily add ",(0,n.jsx)(r.code,{children:"Accept"})," headers with ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestHeadersBuilder.html#accept(java.lang.Iterable)",children:"RequestHeadersBuilder#accept(Iterable)"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3704",children:"#3704"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"RequestHeaders.builder()\n              .accept(MediaType.JSON)\n              .accept(MediaType.PLAIN_TEXT);\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now initiate graceful connection shutdown using\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#initiateConnectionShutdown()",children:"ServiceRequestContext#initiateConnectionShutdown()"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3516",children:"#3516"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3715",children:"#3715"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now specify the default ",(0,n.jsx)(r.code,{children:"ObjectMapper"})," using ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/JacksonObjectMapperProvider.html",children:"JacksonObjectMapperProvider"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3728",children:"#3728"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"public class MyObjectMapperProvider\n    implements JacksonObjectMapperProvider {\n\n  @Override\n  public ObjectMapper newObjectMapper() {\n    return JsonMapper\n       .builder()\n       .addModules(new KotlinModule())\n       .enable(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES)\n       .build();\n  }\n}\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now serve ",(0,n.jsx)(r.code,{children:"application/grpc-web+proto"})," and ",(0,n.jsx)(r.code,{children:"application/grpc-web-text+proto"}),"\n",(0,n.jsx)(r.a,{href:"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md#protocol-differences-vs-grpc-over-http2",children:"protocols"}),"\nusing ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/protocol/AbstractUnaryGrpcService.html",children:"AbstractUnaryGrpcService"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3638",children:"#3638"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3716",children:"#3716"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["gRPC trailers are available in the ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html",children:"RequestContext"})," for unary gRPC server and client. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3724",children:"#3724"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3739",children:"#3739"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:'UnaryGrpcClient client = ...;\ntry (ClientRequestContextCaptor captor = Clients.newContextCaptor()) {\n    client.execute("/com.example.MyService/UnaryCall", request);\n    ClientRequestContext ctx = captor.get();\n    HttpHeaders trailers = GrpcWebTrailers.get(ctx); // \ud83d\udc48\ud83d\udc48\ud83d\udc48\n}\n'})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now compress and decompress content with ",(0,n.jsx)(r.a,{href:"https://www.brotli.org/",children:"Brotli"})," when using\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/encoding/EncodingService.html",children:"EncodingService"}),", ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/encoding/DecodingService.html",children:"DecodingService"})," and ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/encoding/DecodingClient.html",children:"DecodingClient"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3544",children:"#3544"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3686",children:"#3686"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now create an ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpResponseException.html",children:"HttpResponseException"})," with a cause. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now easily capture ",(0,n.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html",children:"ServiceRequestContext"})," using ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/testing/junit5/server/ServerExtension.html",children:"ServerExtension"})," in tests. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3648",children:"#3648"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["You can now suppress the inconsistent Netty version warning by specifying\n",(0,n.jsx)(r.code,{children:"-Dcom.linecorp.armeria.warnNettyVersions=false"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3572",children:"#3572"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3766",children:"#3766"})]}),"\n"]}),"\n"]}),"\n","\n",(0,n.jsx)(r.h2,{id:"-documentation",children:"\ud83d\udcc3 Documentation"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["You can now learn how to write a REST service with Armeria by walking through the\n",(0,n.jsx)(r.a,{href:"/docs/tutorials",children:"brand-new tutorials"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3420",children:"#3420"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Special thanks to ",(0,n.jsx)(r.a,{href:"https://github.com/freevie",children:(0,n.jsx)(r.strong,{children:"@freevie"})})," who volunteered for this."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpHeaders.html",children:"HttpHeaders"})," now properly caches well-known HTTP headers' value objects. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3711",children:"#3711"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3714",children:"#3714"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/limit/ConcurrencyLimitTimeoutException.html",children:"ConcurrencyLimitTimeoutException"})," is now raised when a request times out\nin ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/limit/ConcurrencyLimitingClient.html",children:"ConcurrencyLimitingClient"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3681",children:"#3681"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/auth/oauth2/OAuth2AuthorizationGrant.html",children:"OAuth2AuthorizationGrant"})," no longer uses locks for better performance. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3571",children:"#3571"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3618",children:"#3618"})]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["You no longer see an ",(0,n.jsx)(r.code,{children:"IllegalArgumentException"})," when ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html#aggregate()",children:"HttpRequest#aggregate()"}),"\nand ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html#aggregate()",children:"HttpResponse#aggregate()"})," fail with an exception. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3676",children:"#3676"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3684",children:"#3684"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3687",children:"#3687"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see an incomplete ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html",children:"RequestLog"})," when an ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpStatusException.html",children:"HttpStatusException"}),"\nis raised. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3719",children:"#3719"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see a ",(0,n.jsx)(r.code,{children:"NullPointerException"})," when an HTTP/1 connection of a client is closed. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3729",children:"#3729"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3747",children:"#3747"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see a ",(0,n.jsx)(r.code,{children:"NullPointerException"})," when a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," is aborted. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3731",children:"#3731"})]}),"\n",(0,n.jsxs)(r.li,{children:["No more unintended leakage of sensitive information when logging a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html",children:"RequestLog"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3758",children:"#3758"})]}),"\n",(0,n.jsxs)(r.li,{children:["A request is now correctly reset when ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#cancel()",children:"ServiceRequestContext#cancel()"})," is called. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see a ",(0,n.jsx)(r.code,{children:"ClassNotFoundException"})," in the shaded fastutil. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3713",children:"#3713"})]}),"\n",(0,n.jsxs)(r.li,{children:["Armeria now accepts harmless yet illegal characters in a request path for HTTP/1 connections, like it did for\nHTTP/2. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3778",children:"#3778"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see an ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EmptyEndpointGroupException.html",children:"EmptyEndpointGroupException"})," when ",(0,n.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"})," are completely switched\nto new ",(0,n.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"})," in ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/healthcheck/HealthCheckedEndpointGroup.html",children:"HealthCheckedEndpointGroup"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3637",children:"#3637"})]}),"\n",(0,n.jsxs)(r.li,{children:["You can now correctly monitor a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/BlockingTaskExecutor.html",children:"BlockingTaskExecutor"})," with Micrometer. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3710",children:"#3710"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3718",children:"#3718"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/BlockingTaskExecutor.html",children:"BlockingTaskExecutor"}),"'s idle threads are now properly terminated after timeout. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3718",children:"#3718"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see a ",(0,n.jsx)(r.code,{children:"ClassNotFoundException"})," when a ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/TransportType.html",children:"TransportType"})," is initialized. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3717",children:"#3717"})]}),"\n",(0,n.jsxs)(r.li,{children:["The second ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRuleWithContent.html",children:"RetryRuleWithContent"})," is now properly applied to decide to retry or not when\nusing ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html",children:"RetryingClient"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3720",children:"#3720"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"requestDurationNanos"}),", ",(0,n.jsx)(r.code,{children:"responseDurationNanos"})," and ",(0,n.jsx)(r.code,{children:"totalDurationNanos"})," of a child log are properly\ncalculated. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3749",children:"#3749"})]}),"\n",(0,n.jsxs)(r.li,{children:["An ",(0,n.jsx)(r.code,{children:"IllegalArgumentException"})," raised in annotated service will be correctly logged by\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/LoggingService.html",children:"LoggingService"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ClosedSessionException.html",children:"ClosedSessionException"})," when a large content is sent to an invalid path. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#localPort(int,java.lang.Iterable)",children:"ServerBuilder#localPort(int,Iterable)"})," correctly binds both IPv4 and IPv6\nloopback addresses. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3725",children:"#3725"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3726",children:"#3726"})]}),"\n",(0,n.jsxs)(r.li,{children:["A ",(0,n.jsx)(r.code,{children:"Publisher"})," or a ",(0,n.jsx)(r.code,{children:"CompletableFuture"})," returned by a service now properly gets a cancellation signal when the\nrequest is cancelled. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3690",children:"#3690"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3691",children:"#3691"})]}),"\n",(0,n.jsxs)(r.li,{children:["Brave's ",(0,n.jsx)(r.code,{children:"ScopeDecorator"}),"s now correctly propagates a decorated ",(0,n.jsx)(r.code,{children:"Scope"})," context when\nusing ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/brave/BraveService.html",children:"BraveService"})," and ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/brave/BraveClient.html",children:"BraveClient"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3408",children:"#3408"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3430",children:"#3430"})]}),"\n",(0,n.jsxs)(r.li,{children:["A ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Server.html",children:"Server"})," in Spring integration is now automatically started by ",(0,n.jsx)(r.code,{children:"SmartLifecycle"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3759",children:"#3759"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3762",children:"#3762"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/CancelledSubscriptionException.html",children:"CancelledSubscriptionException"})," when a WebFlux's ",(0,n.jsx)(r.code,{children:"WebClient"})," receives an unexpected\n",(0,n.jsx)(r.code,{children:"Content-Type"})," header. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3730",children:"#3730"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3750",children:"#3750"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/tomcat/TomcatService.html",children:"TomcatService"})," now properly handles an exception with Spring Web's ",(0,n.jsx)(r.code,{children:"ExceptionHandler"}),"s. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3447",children:"#3447"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3732",children:"#3732"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"ErrorWebExceptionHandler"})," in WebFlux converts an exception to the response correctly. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3779",children:"#3779"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/jetty/JettyService.html",children:"JettyService"})," doesn't raise an ",(0,n.jsx)(r.code,{children:"EofException"})," anymore. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3688",children:"#3688"})]}),"\n",(0,n.jsxs)(r.li,{children:["Kotlin ",(0,n.jsx)(r.a,{href:"https://kotlinlang.org/docs/java-interop.html#compiler-configuration",children:(0,n.jsx)(r.code,{children:"jsr305=strict"})})," option no\nlonger raises a false positive error when a null value is returned from where nulls are allowed\nto return. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3751",children:"#3751"})]}),"\n",(0,n.jsxs)(r.li,{children:["You no longer see null values when a case class is decoded from a JSON when using annotated services with\nScala. 400 Bad Request will be returned instead. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3728",children:"#3728"})]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"-Dcom.linecorp.armeria.annotatedServiceExceptionVerbosity"})," and ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/ExceptionVerbosity.html",children:"ExceptionVerbosity"})," has been\ndeprecated. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["You can use ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/LoggingService.html",children:"LoggingService"})," that automatically logs exceptions using for your convenience; or\nmanually log exceptions using ",(0,n.jsx)(r.a,{href:"type://#",children:"ServerBuilder#exceptionHandler(ExceptionHandler)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/rxjava2/ObservableResponseConverterFunction.html#%3Cinit%3E(com.linecorp.armeria.server.annotation.ResponseConverterFunction,com.linecorp.armeria.server.annotation.ExceptionHandlerFunction)?full",children:"ObservableResponseConverterFunction#<init>(ResponseConverterFunction,ExceptionHandlerFunction)"}),"\nhas been deprecated in favor of\n",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/rxjava2/ObservableResponseConverterFunction.html#%3Cinit%3E(com.linecorp.armeria.server.annotation.ResponseConverterFunction)?full",children:"ObservableResponseConverterFunction#<init>(ResponseConverterFunction)"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpResponseException.html#of(com.linecorp.armeria.common.HttpStatus)?full",children:"HttpResponseException#of(HttpStatus)"})," and ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpResponseException.html#of(int)?full",children:"HttpResponseException#of(int)"})," has been\ndeprecated in favor of ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpStatusException.html",children:"HttpStatusException"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/ExceptionHandler.html",children:"ExceptionHandler"})," now returns ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"})," instead of ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/AggregatedHttpResponse.html",children:"AggregatedHttpResponse"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"// Before:\nExceptionHandler handler = (ctx, cause) -> {\n    if (cause instanceof IllegalArgumentException) {\n        return AggregatedHttpResponse.of(HttpStatus.BAD_REQUEST);\n    }\n    return null;\n}\n\n// After:\nExceptionHandler handler = (ctx, cause) -> {\n    if (cause instanceof IllegalArgumentException) {\n        return HttpResponse.of(HttpStatus.BAD_REQUEST); // \ud83d\udc48\ud83d\udc48\ud83d\udc48\n    }\n    return null;\n}\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html",children:"RequestContext"})," is added as the first parameter of ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/grpc/GrpcStatusFunction.html",children:"GrpcStatusFunction"}),". ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3692",children:"#3692"})," ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3693",children:"#3693"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-java",children:"// Before:\nGrpcService.builder()\n           .exceptionMapping((throwable, metadata) -> {\n               if (throwable instanceof IllegalArgumentException) {\n                   return Status.INVALID_ARGUMENT;\n               }\n               return null;\n           });\n\n// After:\nGrpcService.builder()\n           .exceptionMapping((ctx, throwable, metadata) -> { // \ud83d\udc48\ud83d\udc48\ud83d\udc48\n               if (throwable instanceof IllegalArgumentException) {\n                   return Status.INVALID_ARGUMENT;\n               }\n               return null;\n            });\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"JacksonModuleProvider"})," has been removed in favor of ",(0,n.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/JacksonObjectMapperProvider.html",children:"JacksonObjectMapperProvider"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"ResponseConverterFunctionProvider.createResponseConverterFunction(Type,ResponseConverterFunction,ExceptionHandlerFunction)"}),"\nhas been removed in favor of\n",(0,n.jsx)(r.a,{href:"type://#",children:"ResponseConverterFunctionProvider#createResponseConverterFunction(Type,ResponseConverterFunction)?full"}),"\n. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3674",children:"#3674"})]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"OAuth2AuthorizationGrant.withAuthorization()"})," has been removed. ",(0,n.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3618",children:"#3618"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"Curator 5.1.0 \u2192 5.2.0"}),"\n",(0,n.jsx)(r.li,{children:"Dropwizard 2.0.23 \u2192 2.0.24"}),"\n",(0,n.jsx)(r.li,{children:"Dropwizard Metrics 4.2.2 \u2192 4.2.3"}),"\n",(0,n.jsx)(r.li,{children:"Jackson 2.12.3 \u2192 2.12.4"}),"\n",(0,n.jsx)(r.li,{children:"Jetty 9.4.42 \u2192 9.4.23"}),"\n",(0,n.jsx)(r.li,{children:"GraphQL-Java 16.2 \u2192 17.1"}),"\n",(0,n.jsx)(r.li,{children:"gRPC-Java 1.38.1 \u2192 1.40.0"}),"\n",(0,n.jsx)(r.li,{children:"Kotlin 1.5.10 \u2192 1.5.21"}),"\n",(0,n.jsx)(r.li,{children:"kotlinx-coroutines-core 1.5.0 \u2192 1.5.1"}),"\n",(0,n.jsx)(r.li,{children:"Logback 1.2.3 \u2192 1.2.5"}),"\n",(0,n.jsx)(r.li,{children:"Micrometer 1.7.1 \u2192 1.7.2"}),"\n",(0,n.jsx)(r.li,{children:"Netty 4.1.65 \u2192 4.1.66"}),"\n",(0,n.jsx)(r.li,{children:"netty-tcnative-boringssl-static 2.0.39 \u2192 2.0.40"}),"\n",(0,n.jsx)(r.li,{children:"netty-transport-native-io_uring 0.0.5 \u2192 0.0.8"}),"\n",(0,n.jsx)(r.li,{children:"java-jwt 3.16.0 \u2192 3.18.1"}),"\n",(0,n.jsx)(r.li,{children:"protobuf-java 3.12.0 \u2192 3.17.2"}),"\n",(0,n.jsx)(r.li,{children:"Reactor 3.4.7 \u2192 3.4.9"}),"\n",(0,n.jsx)(r.li,{children:"RESTeasy 4.6.1 \u2192 4.7.1"}),"\n",(0,n.jsx)(r.li,{children:"RxJava 3.0.13 \u2192 3.1.0"}),"\n",(0,n.jsx)(r.li,{children:"scala-collection-compat 2.4.4 \u2192 2.5.0"}),"\n",(0,n.jsx)(r.li,{children:"ScalaPB 0.11.4 \u2192 0.11.5"}),"\n",(0,n.jsx)(r.li,{children:"ScalaPB json4s 0.11.1 \u2192 0.12.0"}),"\n",(0,n.jsx)(r.li,{children:"SLF4J 1.7.31 \u2192 1.7.32"}),"\n",(0,n.jsx)(r.li,{children:"Spring 5.3.8 \u2192 5.3.9"}),"\n",(0,n.jsx)(r.li,{children:"Spring Boot 2.5.2 \u2192 2.5.3"}),"\n",(0,n.jsx)(r.li,{children:"ZooKeeper 3.6.2 \u2192 3.6.3"}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,n.jsx)(a,{usernames:["anuraaga","alexc-db","freevie","ghkim3221","heowc","heka1024","icepeppermint","imasahiro","jrhee17","jupiny","karellen-kim","kezhenxu94","kojilin","ks-yim","ikhoon","minwoox","mauhiz","mynameisjwlee","sfc-gh-pbennes","tobias-","trustin"]})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);