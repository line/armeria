"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[695],{28453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>o});var i=n(96540);const a={},t=i.createContext(a);function s(e){const r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(t.Provider,{value:r},e.children)}},69970:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"1.4.0","title":"v1.4.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/1.4.0.mdx","sourceDirName":".","slug":"/1.4.0","permalink":"/release-notes/1.4.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/1.4.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2021-02-01T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v1.5.0","permalink":"/release-notes/1.5.0"},"next":{"title":"v1.3.0","permalink":"/release-notes/1.3.0"}}');var a=n(74848),t=n(28453);const s={date:new Date("2021-02-01T00:00:00.000Z")},o="v1.4.0",c={},l=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\ud83c\udfda\ufe0f Deprecations",id:"\ufe0f-deprecations",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function h(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.header,{children:[(0,a.jsx)(r.h1,{id:"v140",children:"v1.4.0"}),(0,a.jsx)(r.p,{children:(0,a.jsx)(r.em,{children:"February 1, 2021"})})]}),"\n",(0,a.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now register/discover your servers to/from ",(0,a.jsx)(r.a,{href:"https://www.consul.io/",children:"Consul"}),"\nusing a new ",(0,a.jsx)(r.code,{children:"armeria-consul"})," module. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/194",children:"#194"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2192",children:"#2192"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3002",children:"#3002"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3281",children:"#3281"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'// Registration\nServer server = ...;\nserver.addListener(\n  ConsulUpdatingListener.builder(myConsulUri, "myService")\n                        .consulToken(myConsulAccessToken)\n                        .build());\nserver.start().join();\n\n// Discovery\nConsulEndpointGroup endpointGroup =\n  ConsulEndpointGroup.builder(myConsulUri, "myService")\n                     .consulToken(myConsulAccessToken)\n                     .build();\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now smoothly ramp up the weight of newly added ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"})," in\nan ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointGroup.html",children:"EndpointGroup"})," using ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelectionStrategy.html#rampingUp()",children:"EndpointSelectionStrategy#rampingUp()"}),"\nto protect a fresh node from getting too much traffic suddenly. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/1757",children:"#1757"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3217",children:"#3217"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'EndpointGroup endpointGroup =\n  DnsAddressEndpointGroup\n    .builder("my.hostname.local")\n    .selectionStrategy(EndpointSelectionStrategy.rampingUp())\n    .build();\n\n// Customize as necessary.\nEndpointSelectionStrategy\n  .builderForRampingUp()\n  // Ramp up a fresh endpoint for 60 seconds,\n  // increasing weight every second.\n  .rampingUpInterval(Duration.ofSeconds(1))\n  .numberSteps(60)\n  .build();\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now start your server as unhealthy with\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckServiceBuilder.html#startUnhealthy()",children:"HealthCheckServiceBuilder#startUnhealthy()"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3260",children:"#3260"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"This can be useful when you don't want to handle incoming requests immediately\nafter startup but after some operational steps, such as warming up."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now add ",(0,a.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckUpdateListener.html",children:"HealthCheckUpdateListener"})," to\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckService.html",children:"HealthCheckService"})," to get notified when healthiness is updated externally,\ne.g., from a ",(0,a.jsx)(r.code,{children:"POST"})," request handled by ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckUpdateHandler.html",children:"HealthCheckUpdateHandler"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3260",children:"#3260"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["This can be useful when used in combination with ",(0,a.jsx)(r.code,{children:"startUnhealthy()"})," above."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now specify a custom HTTP header naming rule for HTTP/1 connections,\nso that you can work around the interoperability issues with old HTTP/1 servers\nthat don't recognize lower-cased headers such as ",(0,a.jsx)(r.code,{children:"content-length"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3196",children:"#3196"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3259",children:"#3259"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"ClientFactory factory =\n  ClientFactory.builder()\n               // Send 'Content-Length', not 'content-length'.\n               .http1HeaderNaming(http1HeaderNaming.traditional())\n               .build();\nWebClient client =\n  WebClient.builder()\n           .factory(factory)\n           .build();\n"})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now close a connection after handling a certain number of requests or\nafter a certain period of time, rather than keeping it open indefinitely. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/203",children:"#203"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3267",children:"#3267"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.a,{href:"/release-notes/0.99.7",children:"v0.99.7"})," introduced this feature partially for the server\nside. We expanded it into both client and server side and also added a way\nto disconnect after handling a certain number of requests."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:"// For server\nServer.builder()\n      // A connection will be closed after\n      // sending the 10000th request's response.\n      .maxNumRequestsPerConnection(10000);\n\n// For client\nClientFactory.builder()\n             // A connection will be closed after\n             // receiving the 2000th request's response.\n             .maxNumRequestsPerConnection(2000);\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now turn any service into a transient service by decorating it with\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientHttpService.html",children:"TransientHttpService"})," or ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientRpcService.html",children:"TransientRpcService"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3221",children:"#3221"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["By making a service transient, you can disable metric collection by\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/metric/MetricCollectingService.html",children:"MetricCollectingService"}),", service logging by ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/LoggingService.html",children:"LoggingService"})," or\naccess logging by ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/AccessLogWriter.html",children:"AccessLogWriter"}),"."]}),"\n",(0,a.jsxs)(r.li,{children:["The following example disables metric collection, service and access logs for\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckService.html",children:"HealthCheckService"}),":","\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'Server.builder()\n      .serviceUnder(\n        "/internal/l7check",\n        HealthCheckService.of()\n                          .decorate(TransientHttpService.newDecorator()))\n      .build()\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now disable the check that rejects potentially unsafe TLS cipher suites\nwhen configuring server-side TLS, at your own risk. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3292",children:"#3292"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'Server.builder()\n      .tlsAllowUnsafeCiphers()\n      .tlsCustomizer(sslCtxBuilder -> {\n        sslCtxBuilder.ciphers(Set.of(\n          "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA" // Bad cipher suite\n        ))\n      })\n      ...\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now get, set and parse a ",(0,a.jsx)(r.code,{children:"Content-Disposition"})," header using\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ContentDisposition.html",children:"ContentDisposition"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3253",children:"#3253"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'// Setting\nHttpHeaders headers = HttpHeaders.of(\n  HttpHeaderNames.CONTENT_DISPOSITION,\n  ContentDisposition.of("attachment", "fileName", "file.png"));\n\n// Getting\nContentDisposition disposition = headers.contentDisposition();\nassert "attachment".equals(disposition.type());\nassert "fileName".equals(disposition.name());\nassert "file.png".equals(disposition.filename());\n\n// Parsing\nContentDisposition parsed = ContentDisposition.parse(\n  "attachment; name=\\"fileName\\"; filename=\\"file.png\\"");\nassert parsed.equals(disposition);\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now serve a file by returning an ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html",children:"HttpFile"})," in an annotated service. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3258",children:"#3258"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3287",children:"#3287"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'Server\n  .builder()\n  .annotatedService(new Object() {\n    @Get\n    @Head\n    @Path("/files/{fileName}")\n    HttpFile myFile(@Param String fileName) {\n      return HttpFile.of(new File("/var/www/" + fileName));\n    }\n  })\n  .build();\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now invoke ",(0,a.jsx)(r.code,{children:"Runnable"})," or ",(0,a.jsx)(r.code,{children:"Callable"})," with ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html",children:"RequestContext"})," set in\nthe thread-local storage using ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html#run(java.lang.Runnable)",children:"RequestContext#run(Runnable)"})," and\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html#run(java.util.concurrent.Callable)",children:"RequestContext#run(Callable)"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3311",children:"#3311"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'Runnable task = () -> {\n  logger.info("Current request: {}", ServiceRequestContext.current());\n};\nctx.run(task);\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now concat multiple ",(0,a.jsx)(r.code,{children:"Publisher"}),"s into one using\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#concat(java.lang.Iterable)",children:"StreamMessage#concat(Iterable)"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3254",children:"#3254"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3299",children:"#3299"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'StreamMessage<String> stream =\n  StreamMessage.concat(Mono.just("foo"),\n                       Mono.just("bar"));\n\nStepVerifier.create(stream)\n            .expectNext("foo")\n            .expectNext("bar")\n            .expectComplete()\n            .verify()\n\n// You can also concat a `Publisher` of `Publisher`s.\nStreamMessage<String> flat =\n  StreamMessage.concat(Flux.just(Mono.just("foo"),\n                                 Mono.just("bar")));\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now create an ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"})," from a ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseHeaders.html",children:"ResponseHeaders"})," and\na stream of ",(0,a.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpData.html",children:"HttpData"})," using\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html#of(com.linecorp.armeria.common.ResponseHeaders,org.reactivestreams.Publisher)",children:"HttpResponse#of(ResponseHeaders,Publisher)"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3089",children:"#3089"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3237",children:"#3237"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'HttpResponse res = HttpResponse.of(\n  ResponseHeaders.of(200),\n  Flux.just("one\\n", "two\\n", "three\\n")\n      .map(HttpData::ofUtf8));\n'})}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now check which native transports are available or not and why they are\nunavailable using ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/TransportType.html#isAvailable()",children:"TransportType#isAvailable()"})," and\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/TransportType.html#unavailabilityCause()",children:"TransportType#unavailabilityCause()"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3244",children:"#3244"})]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-java",children:'if (!TransportType.EPOLL.isAvailable()) {\n  logger.warn("/dev/epoll support not available:",\n              TransportType.EPOLL.unavailabilityCause());\n}\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["We also added methods like ",(0,a.jsx)(r.code,{children:"serverChannelType()"}),", ",(0,a.jsx)(r.code,{children:"socketChannelType()"})," and\n",(0,a.jsx)(r.code,{children:"datagramChannelType()"}),", which may be useful when you need to deal with Netty\nchannels."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now decode the body of ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html",children:"HttpRequest"})," or ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"})," into\na ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," using ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpMessage.html#decode(com.linecorp.armeria.common.stream.HttpDecoder)",children:"HttpMessage#decode(HttpDecoder)"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3215",children:"#3215"})]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"This feature can be useful when you need to reactively decode an HTTP body.\nFor example, Armeria will use this feature to handle a multipart body."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["Added ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#demand()",children:"StreamMessage#demand()"})," that returns the remaining demand of\nthe current subscription. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3215",children:"#3215"})]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["Added ",(0,a.jsx)(r.code,{children:"withTags(Tag...)"})," method to ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html",children:"MeterIdPrefixFunction"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3241",children:"#3241"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3242",children:"#3242"})]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now register a custom gRPC client stub factory via SPI or\n",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/grpc/GrpcClientOptions.html#GRPC_CLIENT_STUB_FACTORY",children:"GrpcClientOptions#GRPC_CLIENT_STUB_FACTORY"})," option. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3214",children:"#3214"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3294",children:"#3294"})]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["\n",(0,a.jsxs)(r.p,{children:["You can now keep using the old decoration ordering for route decorators by\nspecifying the ",(0,a.jsx)(r.code,{children:"-Dcom.linecorp.armeria.useLegacyRouteDecoratorOrdering=true"}),"\nJVM option. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3279",children:"#3279"})]}),"\n"]}),"\n"]}),"\n","\n",(0,a.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["You can now run your Armeria application even if ",(0,a.jsx)(r.code,{children:"netty-transport-native-epoll"})," and\n",(0,a.jsx)(r.code,{children:"netty-incubator-transport-native-io_uring"})," are not in the class path. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3244",children:"#3244"})]}),"\n",(0,a.jsxs)(r.li,{children:["You can now use ",(0,a.jsx)(r.code,{children:"/dev/epoll"})," transport on WSL 2. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3244",children:"#3244"})]}),"\n",(0,a.jsxs)(r.li,{children:["You can now use ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/jetty/JettyService.html",children:"JettyService"})," with Jetty 9.3. We previously supported\nJetty 9.4 only. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3288",children:"#3288"})]}),"\n",(0,a.jsxs)(r.li,{children:["We improved how we shut down a ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Server.html",children:"Server"})," in our Spring Boot integration\nso it's more future-proof. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3266",children:"#3266"})]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["The future returned by ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamWriter.html#whenConsumed()",children:"StreamWriter#whenConsumed()"})," is now completed\nimmediately even when the current demand is ",(0,a.jsx)(r.code,{children:"0"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3213",children:"#3213"})]}),"\n",(0,a.jsxs)(r.li,{children:["Fixed the violation of Reactive Streams specification when ",(0,a.jsx)(r.code,{children:"null"})," is published. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3212",children:"#3212"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3216",children:"#3216"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/tomcat/TomcatService.html",children:"TomcatService"})," does not raise a ",(0,a.jsx)(r.code,{children:"NullPointerException"})," when it stops.\n",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3136",children:"#3136"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3218",children:"#3218"})]}),"\n",(0,a.jsxs)(r.li,{children:["Fixed stability and interoperability issues in Eureka service discovery module.\n",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3235",children:"#3235"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3275",children:"#3275"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3238",children:"#3238"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3301",children:"#3301"})]}),"\n",(0,a.jsxs)(r.li,{children:["The service name generated from a CGLIB-enhanced class does not have synthetic\nsuffix anymore. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3103",children:"#3103"})," ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3240",children:"#3240"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/healthcheck/HealthCheckedEndpointGroup.html",children:"HealthCheckedEndpointGroup"})," now refreshes its ",(0,a.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"}),"'\nstatus when their weights are changed. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3236",children:"#3236"})]}),"\n",(0,a.jsxs)(r.li,{children:["You'll no longer see a ",(0,a.jsx)(r.code,{children:"NullPointerException"})," when retrying a gRPC request. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3251",children:"#3251"})]}),"\n",(0,a.jsxs)(r.li,{children:["Fixed the incorrect return type of some builder methods. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3220",children:"#3220"})]}),"\n",(0,a.jsxs)(r.li,{children:["Fixed a UI glitch in the go-to form of ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"})," client ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3261",children:"#3261"})]}),"\n",(0,a.jsxs)(r.li,{children:["You'll no longer see a harmless ",(0,a.jsx)(r.code,{children:"Http2Exception: Stream N does not exist"}),"\nwarning log message anymore. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3233",children:"#3233"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"You'll see it if there was really a protocol violation, however."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(r.li,{children:["Fixed an issue where a ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html",children:"RequestLog"})," is sometimes not completed immediately. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3291",children:"#3291"})]}),"\n",(0,a.jsxs)(r.li,{children:["TLS is now configured only once in Spring Boot WebFlux integration. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3266",children:"#3266"})]}),"\n",(0,a.jsxs)(r.li,{children:["Armeria now finds the gRPC ",(0,a.jsx)(r.code,{children:"ServiceDescriptor"})," correctly from the code\ngenerated with ",(0,a.jsx)(r.a,{href:"https://github.com/salesforce/reactive-grpc",children:"Reactive-gRPC"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3294",children:"#3294"})]}),"\n",(0,a.jsxs)(r.li,{children:["A request refused with HTTP/2 ",(0,a.jsx)(r.code,{children:"REFUSED_STREAM"})," error code now fails with\nan ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/UnprocessedRequestException.html",children:"UnprocessedRequestException"}),", so it can be safely retried. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3298",children:"#3298"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/thrift/THttpService.html",children:"THttpService"})," can now handle the Thrift code generated with the ",(0,a.jsx)(r.code,{children:"fullcamel"}),"\noption. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3272",children:"#3272"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/zookeeper/ZooKeeperUpdatingListener.html",children:"ZooKeeperUpdatingListener"})," does not raise an ",(0,a.jsx)(r.code,{children:"IllegalStateException"})," anymore\neven if the given Curator client is started already. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3305",children:"#3305"})]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\ufe0f-deprecations",children:"\ud83c\udfda\ufe0f Deprecations"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"*ChannelType()"})," methods in ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/EventLoopGroups.html",children:"EventLoopGroups"})," have been deprecated in favor of\nthe new methods in ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/TransportType.html",children:"TransportType"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3244",children:"#3244"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.a,{href:"type://#",children:"CircuitBreakerRpcClient#newPerHostAndMethodDecorator()"})," has been deprecated\nin favor of ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRpcClient.html#newDecorator(com.linecorp.armeria.client.circuitbreaker.CircuitBreakerMapping,com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRuleWithContent)",children:"CircuitBreakerRpcClient#newDecorator(CircuitBreakerMapping,CircuitBreakerRuleWithContent)"}),".\n",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3249",children:"#3249"})]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"armeria-tomcat9"})," and ",(0,a.jsx)(r.code,{children:"armeria-tomcat8"})," don't depend on ",(0,a.jsx)(r.code,{children:"tomcat-embed-jasper"}),"\nanymore, which was pulled into runtime dependencies by mistake. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3256",children:"#3256"})]}),"\n",(0,a.jsxs)(r.li,{children:["You have to recompile your application because we changed the return type of\nsome builder methods. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3220",children:"#3220"})]}),"\n",(0,a.jsxs)(r.li,{children:["Changes in the API annotated with ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/annotation/UnstableApi.html",children:"@UnstableApi"}),":","\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"HttpDeframer"})," has been replaced with ",(0,a.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpMessage.html#decode(com.linecorp.armeria.common.stream.HttpDecoder)",children:"HttpMessage#decode(HttpDecoder)"}),". ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3215",children:"#3215"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Bouncy Castle 1.67 \u2192 1.68"}),"\n",(0,a.jsx)(r.li,{children:"Brave 5.13.1 \u2192 5.13.3"}),"\n",(0,a.jsx)(r.li,{children:"Dropwizard 2.0.16 -> 2.0.18, 1.3.25 \u2192 1.3.29"}),"\n",(0,a.jsx)(r.li,{children:"Dropwizard Metrics 4.1.15 \u2192 4.1.17"}),"\n",(0,a.jsx)(r.li,{children:"gRPC-Java 1.33.1 \u2192 1.35.0"}),"\n",(0,a.jsx)(r.li,{children:"gRPC-Kotlin 0.2.1 \u2192 1.0.0"}),"\n",(0,a.jsx)(r.li,{children:"java-jwt 3.11.0 \u2192 3.12.1"}),"\n",(0,a.jsx)(r.li,{children:"Jetty 9.4.35 \u2192 9.4.36"}),"\n",(0,a.jsx)(r.li,{children:"Micrometer 1.6.1 \u2192 1.6.3"}),"\n",(0,a.jsxs)(r.li,{children:["Netty 4.1.54 \u2192 4.1.58","\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"tcnative 2.0.34 \u2192 2.0.36"}),"\n",(0,a.jsxs)(r.li,{children:["io_uring 0.0.1 \u2192 0.0.3","\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"io_uring is now an optional dependency."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.li,{children:"Protobuf Jackson 1.1.0 \u2192 1.2.0"}),"\n",(0,a.jsx)(r.li,{children:"Project Reactor 3.4.0 \u2192 3.4.2"}),"\n",(0,a.jsx)(r.li,{children:"RxJava 3.0.7 \u2192 3.0.9"}),"\n",(0,a.jsx)(r.li,{children:"ScalaPB runtime 0.10.8 \u2192 0.10.10"}),"\n",(0,a.jsx)(r.li,{children:"ScalaPB json4s 0.10.1 \u2192 0.10.3"}),"\n",(0,a.jsx)(r.li,{children:"Spring Boot 2.4.0 \u2192 2.4.1"}),"\n",(0,a.jsxs)(r.li,{children:["Tomcat 9.0.40 \u2192 9.0.41, 8.5.58 \u2192 8.5.61","\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["We don't depend on ",(0,a.jsx)(r.code,{children:"tomcat-embed-jasper"})," anymore. ",(0,a.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3256",children:"#3256"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,a.jsx)(n,{usernames:["anuraaga","arhont375","codefromthecrypt","delegacy","eisig","eugene70","ghkim3221","heowc","ikhoon","imasahiro","jongmin92","JunoJunho","KarboniteKream","kojilin","ks-kim","max904-github","minwoox","okue","policeman-kh","progresivoJS","renaudb","richieyan","snaiper80","syleeeee","tobias-","trustin","tumile","wickedev"]})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);