"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[7068],{1541:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>d});var n=i(68584),c=i(74848),t=i(28453);const s={authors:["seunghwanjoo"],other_languages:{en:"/blog/2020/07/08/circuit-breakers-armeria"}},a="Armeria\uc758 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0ac\uc6a9\ud574 \ubcf4\uae30",l={authorsImageUrls:[void 0]},d=[{value:"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\ub780?",id:"\uc11c\ud0b7-\ube0c\ub808\uc774\ucee4\ub780",level:2},{value:"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \uc0c1\ud0dc",id:"\uc11c\ud0b7-\ube0c\ub808\uc774\ucee4\uc758-\uc0c1\ud0dc",level:2},{value:"Armeria\uc758 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4",id:"armeria\uc758-\uc11c\ud0b7-\ube0c\ub808\uc774\ucee4",level:2},{value:"\uc900\ube44\ud558\uae30",id:"\uc900\ube44\ud558\uae30",level:3},{value:"Server2 \uad6c\ud604 \ucf54\ub4dc",id:"server2-\uad6c\ud604-\ucf54\ub4dc",level:4},{value:"Server1 \uad6c\ud604 \ucf54\ub4dc",id:"server1-\uad6c\ud604-\ucf54\ub4dc",level:4},{value:"\ud14c\uc2a4\ud2b8",id:"\ud14c\uc2a4\ud2b8",level:3},{value:"\ub9c8\uce58\uba70",id:"\ub9c8\uce58\uba70",level:2}];function o(e){const r={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.p,{children:"\uc548\ub155\ud558\uc138\uc694.\nLINE\uc5d0\uc11c OpenChat \uc11c\ube44\uc2a4\uc758 \ubc31\uc5d4\ub4dc\ub97c \uac1c\ubc1c\ud558\uace0 \uc788\ub294 \uc8fc\uc2b9\ud658\uc785\ub2c8\ub2e4. \uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uac04\ub2e8\ud55c \ucf54\ub4dc \uc608\uc81c\uc640 \ud568\uaed8 Armeria\uc758 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud574 \ubcf8 \ub0b4\uc6a9\uc744 \uacf5\uc720\ud558\uace0\uc790 \ud569\ub2c8\ub2e4."}),"\n","\n",(0,c.jsx)(r.h2,{id:"\uc11c\ud0b7-\ube0c\ub808\uc774\ucee4\ub780",children:"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\ub780?"}),"\n",(0,c.jsx)(r.p,{children:"\ub9cc\uc57d \uc608\uc0c1\uce58 \ubabb\ud55c \uc7a5\uc560(\ub124\ud06c\uc6cc\ud06c \uc774\uc288 \ud639\uc740 \uc11c\ubc84 \ub2e4\uc6b4 \ub4f1)\uac00 \ubc1c\uc0dd\ud558\uc5ec \uc5b4\ub5a4 \uc6d0\uaca9 \uc11c\ubc84 \ud558\ub098\uac00 \uc694\uccad\uc5d0 \uc751\ub2f5\ud558\uc9c0 \ubabb\ud558\ub294 \uc0c1\ud0dc\ub77c\uace0 \uac00\uc815\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uc774\ub54c \ud574\ub2f9 \uc11c\ubc84\ub85c \uc694\uccad\uc744 \ubcf4\ub0b8 \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 \ud0c0\uc784\uc544\uc6c3\uc774 \ubc1c\uc0dd\ud560 \ub54c\uae4c\uc9c0 \uc751\ub2f5\uc744 \uae30\ub2e4\ub9ac\uac70\ub098 \uacc4\uc18d \ubb34\uc758\ubbf8\ud55c \uc694\uccad\uc744 \ubcf4\ub0b4\uba70 \uc790\uc6d0\uc744 \ub0ad\ube44\ud558\uac8c \ub420 \uac83\uc785\ub2c8\ub2e4.\nMSA(Microservice Architecture)\uc5d0\uc11c\ub294 \uc774 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ub610 \ub2e4\ub978 \ub204\uad70\uac00\uc758 \uc11c\ubc84\uac00 \ub420 \uc218\ub3c4 \uc788\ub294\ub370\uc694. \uadf8\ub807\ub2e4\uba74 \uc774 \uc11c\ubc84\uc758 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc5ed\uc2dc \ub611\uac19\uc740 \ubb38\uc81c\ub97c \uacaa\uac8c \ub420 \uac83\uc785\ub2c8\ub2e4. \uc774\ub807\uac8c \uc7a5\uc560\uac00 \uacc4\uc18d \uc804\ud30c\ub418\uba70 \ud55c \uc6d0\uaca9 \uc11c\ubc84\uc5d0\uc11c \ubc1c\uc0dd\ud55c \uc7a5\uc560\uac00 \ubaa8\ub4e0 \uc2dc\uc2a4\ud15c\uc5d0 \ud070 \uc601\ud5a5\uc744 \uc904 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub7f0 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ub4f1\uc7a5\ud55c \uac1c\ub150\uc774 \ubc14\ub85c '\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4(circuit breaker)'\uc785\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(r.p,{children:["\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\ub780, \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc5b4\ub5a4 \uc6d0\uaca9 \uc11c\ubc84\ub85c \uc804\uc1a1\ud55c \uc694\uccad\uc758 \uc2e4\ud328\uc728\uc774 \ud2b9\uc815 \uc784\uacc4\uce58(threshold)\ub97c \ub118\uc5b4\uc11c\uba74, \uc774 \uc11c\ubc84\uc5d0 \ubb38\uc81c\uac00 \uc788\ub2e4\uace0 \ud310\ub2e8\ud558\uc5ec \ub354 \uc774\uc0c1 \ubb34\uc758\ubbf8\ud55c \uc694\uccad\uc744 \uc804\uc1a1\ud558\uc9c0 \uc54a\uace0 \ube60\ub974\uac8c \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\ub294 \ubc29\ubc95(fail fast)\uc785\ub2c8\ub2e4. \uc774 \ubc29\ubc95\uc73c\ub85c \uc55e\uc11c \uc5b8\uae09\ud55c \ubb38\uc81c\ub97c \ubc29\uc9c0\ud558\uc5ec \uc7a5\uc560 \uaddc\ubaa8\ub97c \ucd5c\uc18c\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4(\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \uac1c\ub150\uc740 '",(0,c.jsx)(r.a,{href:"/blog/ko/2016/07/24/circuit-breakers-for-distributed-services",children:"\ubd84\uc0b0 \uc11c\ube44\uc2a4 \ud658\uacbd\uc5d0 \ub300\ud55c Circuit Breaker \uc801\uc6a9"}),"' \ube14\ub85c\uadf8\uc5d0 \uc798 \uc124\uba85\ub418\uc5b4 \uc788\uc73c\ub2c8 \ucc38\uace0\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4)."]}),"\n",(0,c.jsx)(r.h2,{id:"\uc11c\ud0b7-\ube0c\ub808\uc774\ucee4\uc758-\uc0c1\ud0dc",children:"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \uc0c1\ud0dc"}),"\n",(0,c.jsx)(r.p,{children:"\uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc5d0\ub294 \ucd1d 3\uac00\uc9c0 \uc0c1\ud0dc\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(72289).A+"",width:"1806",height:"598"})}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"CLOSED"}),": \uc694\uccad\uc758 \uc2e4\ud328\uc728\uc774 \uc815\ud574 \ub193\uc740 \uc784\uacc4\uce58\ubcf4\ub2e4 \ub0ae\uc740 \uc815\uc0c1\uc801\uc778 \uc0c1\ud0dc."]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"OPEN"}),": \uc694\uccad\uc758 \uc2e4\ud328\uc728\uc774 \uc815\ud574 \ub193\uc740 \uc784\uacc4\uce58\ub97c \ub118\uc5b4\uc120 \uc0c1\ud0dc. \uc694\uccad\uc744 \uc804\uc1a1\ud558\uc9c0 \uc54a\uace0 \ubc14\ub85c \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\uc2dc\ud0b4(fail fast)."]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"HALF_OPEN"}),": ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\uc5d0\uc11c \uc8fc\uae30\uc801\uc73c\ub85c \uc694\uccad\uc744 \uc804\uc1a1\ud558\uc5ec \uc751\ub2f5\uc744 \ud655\uc778\ud558\ub294 \uc0c1\ud0dc. \uc131\uacf5\ud558\uba74 ",(0,c.jsx)(r.code,{children:"CLOSED"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ud558\uace0 \uc2e4\ud328\ud558\uba74 ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub97c \uc720\uc9c0."]}),"\n"]}),"\n",(0,c.jsx)(r.h2,{id:"armeria\uc758-\uc11c\ud0b7-\ube0c\ub808\uc774\ucee4",children:"Armeria\uc758 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4"}),"\n",(0,c.jsxs)(r.p,{children:["LINE\uc5d0\uc11c \uc6b4\uc601\ud558\ub294 ",(0,c.jsx)(r.a,{href:"https://netty.io/",children:"Netty"})," \uae30\ubc18\uc758 \ube44\ub3d9\uae30 \ub9c8\uc774\ud06c\ub85c \uc11c\ube44\uc2a4 \ud504\ub808\uc784\uc6cc\ud06c \uc624\ud508\uc18c\uc2a4, ",(0,c.jsx)(r.a,{href:"https://github.com/line/armeria",children:"Armeria"}),"\uc5d0\uc11c\ub294 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uae30\ub2a5\uc744 \uc9c1\uc811 \uad6c\ud604\ud558\uc5ec \uc81c\uacf5\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \uc774\uc6a9\ud574 \uc9c1\uc811 \ub85c\uadf8\ub97c \uc0b4\ud3b4\ubcf4\uba70 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \ub3d9\uc791\uc744 \ud655\uc778\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.h3,{id:"\uc900\ube44\ud558\uae30",children:"\uc900\ube44\ud558\uae30"}),"\n",(0,c.jsx)(r.p,{children:"\uba3c\uc800, \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 \uac04\ub2e8\ud558\uac8c \uc694\uccad\uacfc \uc751\ub2f5\uc744 \uc8fc\uace0\ubc1b\uc744 \uc11c\ubc84 2\ub300, Server1\uacfc Server2\ub97c \uc900\ube44\ud569\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(r.p,{children:["\ud074\ub77c\uc774\uc5b8\ud2b8\uac00 Server1\uc73c\ub85c ",(0,c.jsx)(r.code,{children:"/hello"})," \uc694\uccad\uc744 \ubcf4\ub0b4\uba74, Server1\uc740 Server2\ub85c ",(0,c.jsx)(r.code,{children:"/world"})," \uc694\uccad\uc744 \ubcf4\ub0c5\ub2c8\ub2e4.\nServer2\uac00 Server1\uc73c\ub85c \uc751\ub2f5\uc744 \ubcf4\ub0b4\uba74 Server1\uc740 \uadf8 \uc751\ub2f5\uc744 \ub2e4\uc2dc \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uac8c \ubc18\ud658\ud569\ub2c8\ub2e4.\nServer1\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc11c\ubc84\uc774\uba74\uc11c Server2\uc758 \ud074\ub77c\uc774\uc5b8\ud2b8\uc774\uae30\ub3c4 \ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(23306).A+"",width:"840",height:"234"})}),"\n",(0,c.jsx)(r.h4,{id:"server2-\uad6c\ud604-\ucf54\ub4dc",children:"Server2 \uad6c\ud604 \ucf54\ub4dc"}),"\n",(0,c.jsxs)(r.p,{children:["\uc0c1\ub300\uc801\uc73c\ub85c \uad6c\ud604\uc774 \uac04\ub2e8\ud55c, Server1\uc758 \uc751\ub2f5\uc744 \ubc1b\uc744 Server2\uc758 \uad6c\ud604 \ucf54\ub4dc\ubd80\ud130 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4. ",(0,c.jsx)(r.code,{children:"/world"}),"\ub85c \uc804\uc1a1\ub41c \uc694\uccad\uc5d0 \ub300\ud55c \uc751\ub2f5\uc73c\ub85c \uc131\uacf5(200)\uacfc \uc2e4\ud328(500)\ub97c \ubc88\uac08\uc544 \ubc18\ud658\ud558\ub3c4\ub85d \uac04\ub2e8\ud558\uac8c \uad6c\ud604\ud588\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",metastring:'title="Server2Application.java"',children:'@SpringBootApplication\npublic class Server2Application {\n\n    private static final AtomicInteger REQ_CNT = new AtomicInteger();\n\n    public static void main(String[] args) {\n        ServerBuilder sb = Server.builder();\n        sb.http(5008);\n        sb.decorator(LoggingService.newDecorator());\n\n        sb.service("/world", (ctx, res) -> {\n            if (REQ_CNT.addAndGet(1) % 2 == 0) {\n                return HttpResponse.of(HttpStatus.INTERNAL_SERVER_ERROR);\n            }\n            return HttpResponse.of(HttpStatus.OK);\n        });\n\n        Server server = sb.build();\n        CompletableFuture<Void> future = server.start();\n        future.join();\n    }\n}\n'})}),"\n",(0,c.jsx)(r.h4,{id:"server1-\uad6c\ud604-\ucf54\ub4dc",children:"Server1 \uad6c\ud604 \ucf54\ub4dc"}),"\n",(0,c.jsxs)(r.p,{children:["Server1\uc758 \uad6c\ud604 \ucf54\ub4dc\uc785\ub2c8\ub2e4.\nServer2\ub294 ",(0,c.jsx)(r.code,{children:"ServerBuilder"}),"\ub97c \uc774\uc6a9\ud558\uc5ec \uac04\ub2e8\ud558\uac8c \uad6c\ud604\ud55c \ud6c4, Server1\uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc694\uccad\uc744 \ubc1b\uc744 \uc11c\ube44\uc2a4\uc640 Server2\ub85c \uc694\uccad\uc744 \ubcf4\ub0bc \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \ubaa8\ub450 \ube48(bean)\uc73c\ub85c \ub9cc\ub4e4\uc5b4 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",metastring:'title="Server1Application.java"',children:"@SpringBootApplication\n@Import(Server1Context.class)\npublic class Server1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Server1Application.class, args);\n    }\n}\n"})}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{className:"language-java",metastring:'title="Server1Context.java"',children:'@Configuration\npublic class Server1Context {\n\n    @Bean\n    public HttpServiceRegistrationBean httpService(WebClient webClient) {\n        return new HttpServiceRegistrationBean()\n                .setService((ctx, req) -> webClient.get("/world"))\n                .setServiceName("httpService")\n                .setRoute(Route.builder()\n                               .path("/hello")\n                               .methods(HttpMethod.GET)\n                               .build());\n    }\n\n    @Bean\n    public WebClient webClient() {\n        CircuitBreakerStrategy strategy = CircuitBreakerStrategy.onServerErrorStatus();\n\n        // CircuitBreaker \uc124\uc815!!!\n        CircuitBreaker circuitBreaker = CircuitBreaker\n                .builder("test-circuit-breaker")\n                .counterSlidingWindow(Duration.ofSeconds(10))\n                .circuitOpenWindow(Duration.ofSeconds(5))\n                .failureRateThreshold(0.3)\n                .minimumRequestThreshold(5)\n                .trialRequestInterval(Duration.ofSeconds(3))\n                .build();\n\n        return WebClient\n                .builder("http://localhost:5008")\n                .decorator(LoggingClient.newDecorator())\n                .decorator(CircuitBreakerHttpClient.newDecorator(circuitBreaker, strategy))\n                .build();\n    }\n}\n'})}),"\n",(0,c.jsxs)(r.p,{children:["Armeria\uc5d0\uc11c ",(0,c.jsx)(r.code,{children:"CircuitBreaker"}),"\ub97c \uad6c\ud604\ud560 \ub54c \uc8fc\uc758\ud574\uc57c \ud560 \uc810\uc740, \ud074\ub77c\uc774\uc5b8\ud2b8 \uac1d\uccb4\ub294 \uac01\uc790 \uc790\uc2e0\ub9cc\uc758 ",(0,c.jsx)(r.code,{children:"CircuitBreaker"}),"\ub97c \uac00\uc9c4\ub2e4\ub294 \uc810\uc785\ub2c8\ub2e4. \ub9cc\uc57d Server2\ub85c \uc804\uc1a1\ub418\ub294 \ub9e4 \uc694\uccad\ub9c8\ub2e4 \ud074\ub77c\uc774\uc5b8\ud2b8 \uac1d\uccb4\ub97c \uc0c8\ub85c \uc0dd\uc131\ud558\uace0 \uc694\uccad\uc774 \ub05d\ub09c \ud6c4\uc5d0 \uc18c\uba78\ub418\ub294 \ubc29\uc2dd\uc73c\ub85c \uad6c\ud604\ud588\ub2e4\uba74, \uac01 \uac1d\uccb4\uc5d0 \uc5f0\uacb0\ub41c ",(0,c.jsx)(r.code,{children:"CircuitBreaker"}),"\ub294 \uc0ac\uc2e4\uc0c1 \ubb34\uc758\ubbf8\ud574\uc9d1\ub2c8\ub2e4. \ub530\ub77c\uc11c Server2\ub85c \uc694\uccad\uc744 \ubcf4\ub0bc ",(0,c.jsx)(r.code,{children:"WebClient"}),"\ub97c \ube48(bean)\uc73c\ub85c \ub9cc\ub4e4\uc5b4\uc11c Server2\ub85c \uc804\uc1a1\ub418\ub294 \ubaa8\ub4e0 \uc694\uccad\uc5d0 \ub300\ud574 \ub3d9\uc77c\ud55c ",(0,c.jsx)(r.code,{children:"WebClient"})," \uac1d\uccb4\ub97c \uc7ac\uc0ac\uc6a9\ud558\ub3c4\ub85d \uad6c\ud604\ud55c \ud6c4, Armeria\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 ",(0,c.jsx)(r.a,{href:"https://line.github.io/armeria/client-decorator.html",children:"Decorator"}),"\ub97c \uc774\uc6a9\ud574 \uc774 ",(0,c.jsx)(r.code,{children:"WebClient"})," \uac1d\uccb4\uc5d0 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\ub97c \uc801\uc6a9\ud588\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(r.p,{children:["\uc704 \ucf54\ub4dc\uc5d0\uc11c ",(0,c.jsx)(r.code,{children:"CircuitBreaker"}),"\uc5d0 \uc124\uc815\ud55c \uac01 \ud544\ub4dc\ub97c \ud558\ub098\uc529 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(r.ul,{children:["\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"counterSlidingWindow"}),"(10s): \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc5d0\uc11c \uc694\uccad\uc758 \uc131\uacf5/\uc2e4\ud328\uc758 \uc218\ub97c \uce21\uc815\ud558\ub294 \uc2dc\uac04 \uac04\uaca9\uc785\ub2c8\ub2e4. \uc989, \uc704 \ucf54\ub4dc\uc5d0\uc120 10\ucd08 \ub3d9\uc548\uc758 \uc9d1\uacc4\ub97c \ubc14\ud0d5\uc73c\ub85c \uc5b4\ub5a4 \uc0c1\ud0dc\ub85c \uc804\ud658 \ub610\ub294 \uc720\uc9c0\ud560\uc9c0 \ud310\ub2e8\ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"circuitOpenWindow"}),"(5s): \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uac00 ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc720\uc9c0\ub418\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4. \uc704 \ucf54\ub4dc\uc5d0\uc120 ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\uac00 \ub418\uba74 5\ucd08 \ub3d9\uc548 \uc678\ubd80 \uc11c\ubc84\ub85c \uc694\uccad\uc744 \ubcf4\ub0b4\uc9c0 \uc54a\uace0 \ubc14\ub85c \uc5d0\ub7ec(FailFastException)\ub97c \ubc1c\uc0dd\uc2dc\ud0b5\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"failureRateThreshold"}),"(0.3): ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub418\uae30 \uc704\ud55c \uc694\uccad \uc2e4\ud328\uc728\uc785\ub2c8\ub2e4. ",(0,c.jsx)(r.code,{children:"circuitOpenWindow"}),"\uc5d0\uc11c \uc124\uc815\ud55c \uc2dc\uac04 \ub3d9\uc548 0.3(30%) \ube44\uc728 \uc774\uc0c1\uc73c\ub85c \uc694\uccad\uc774 \uc2e4\ud328\ud574\uc57c ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"minimumRequestThreshold"}),"(5): \uce21\uc815\uc5d0 \ud544\uc694\ud55c \uc694\uccad\uc758 \ucd5c\uc18c \uac1c\uc218\uc785\ub2c8\ub2e4. \uc2e4\ud328\uc728\uc774 ",(0,c.jsx)(r.code,{children:"failureRateThreshold"}),"\ubcf4\ub2e4 \ub192\ub2e4\uace0 \ud574\ub3c4, \uadf8 \uac12\uc774 \ucd5c\uc18c 5\uac1c \uc774\uc0c1\uc758 \uc694\uccad\uc5d0 \ub300\ud55c \uacb0\uacfc\uac12\uc77c \ub54c\ub9cc ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(r.li,{children:[(0,c.jsx)(r.code,{children:"trialRequestInterval"}),"(3s): ",(0,c.jsx)(r.code,{children:"HALF_OPEN"})," \uc0c1\ud0dc\ub85c \uc720\uc9c0\ub418\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4. 3\ucd08 \ub3d9\uc548\uc740 ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\uc77c \ub54c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c ",(0,c.jsx)(r.code,{children:"FailFastException"})," \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\ub294 \ud55c\ud3b8, \uc678\ubd80 \uc11c\ubc84\ub85c\ub3c4 \uc694\uccad\uc744 \uc804\uc1a1\ud558\uba70 \uc11c\ubc84\uac00 \uc815\uc0c1\uc73c\ub85c \ub3cc\uc544\uc654\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4. 3\ucd08 \ub3d9\uc548 \uc694\uccad\uc744 \uc804\uc1a1\ud558\uba74\uc11c \uc131\uacf5 \uc751\ub2f5\uc744 \ubc1b\uc73c\uba74 \uc989\uc2dc ",(0,c.jsx)(r.code,{children:"CLOSED"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub418\uace0, \ubaa8\ub450 \uc2e4\ud328\ud558\uba74 \ub2e4\uc2dc ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,c.jsx)(r.h3,{id:"\ud14c\uc2a4\ud2b8",children:"\ud14c\uc2a4\ud2b8"}),"\n",(0,c.jsxs)(r.p,{children:["\uc544\ub798\uc640 \uac19\uc774 \ud130\ubbf8\ub110\uc5d0\uc11c ",(0,c.jsx)(r.a,{href:"https://www.npmjs.com/package/loadtest",children:"loadtest"})," \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc774\uc6a9\ud558\uc5ec \uc9c0\uc18d\uc801\uc73c\ub85c Server1\uc5d0 \uc694\uccad\uc744 \ubcf4\ub0b4\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.pre,{children:(0,c.jsx)(r.code,{children:"$ loadtest http://127.0.0.1:5007/hello --rps 1\n"})}),"\n",(0,c.jsxs)(r.p,{children:["Server1\uc758 \ub85c\uadf8\ub97c \uc0b4\ud3b4\ubcf4\uba74 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \ub3d9\uc791\uc744 \ub208\uc73c\ub85c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc11c\ubc84\uac00 \ucc98\uc74c \uc2e4\ud589\ub420 \ub54c\ub294 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \ucd08\uae30 \uc0c1\ud0dc\uac00 ",(0,c.jsx)(r.code,{children:"CLOSED"}),"\uc785\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(74067).A+"",width:"2780",height:"440"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.em,{children:"03:03:41.830"})," \ucd08\uc5d0 \uce21\uc815\ub41c \uc804\uccb4 5\uac1c\uc758 \uc694\uccad \uc911 \uc2e4\ud328\ud55c \uc694\uccad \uc218\ub294 \ub450 \uac1c\uc774\uace0, \uc2e4\ud328\uc728\uc740 2/5 = 0.4\uc785\ub2c8\ub2e4. \uc2e4\ud328\uc728\uc774 \uc55e\uc11c \uc124\uc815\ud55c 0.3(",(0,c.jsx)(r.code,{children:"failureRateThreshold"}),")\ubcf4\ub2e4 \ud06c\uace0, \uce21\uc815\uc5d0 \uc0ac\uc6a9\ud55c \uc694\uccad \uc218\ub3c4 5(",(0,c.jsx)(r.code,{children:"minimumRequestThreshold"}),") \uc774\uc0c1\uc774\ubbc0\ub85c \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\ub294 ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(90460).A+"",width:"3160",height:"378"})}),"\n",(0,c.jsxs)(r.p,{children:["\uc774\ud6c4 ",(0,c.jsx)(r.em,{children:"03:03:41.830"})," ~ ",(0,c.jsx)(r.em,{children:"03:03:47.824"}),", \uc57d 5\ucd08(",(0,c.jsx)(r.code,{children:"circuitOpenWindow"}),") \uac04 Server2\ub85c \uc694\uccad\uc774 \uc804\uc1a1\ub418\uc9c0 \uc54a\uace0 ",(0,c.jsx)(r.code,{children:"FailFastException"})," \uc5d0\ub7ec\uac00 \uacc4\uc18d \ubc1c\uc0dd\ud569\ub2c8\ub2e4(Server2\uc758 \ub85c\uadf8\ub97c \ubcf4\uba74 \ud574\ub2f9 \uc2dc\uac04\uc5d0 \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uc9c0 \uc54a\uc740 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4)."]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(7973).A+"",width:"2562",height:"448"})}),"\n",(0,c.jsxs)(r.p,{children:[(0,c.jsx)(r.em,{children:"03:03:47.824"})," \ucd08\uc5d0 ",(0,c.jsx)(r.code,{children:"HALF_OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub418\uace0, \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ubcf4\ub0b8 \uc694\uccad\uc774 Server2\ub85c \uc804\uc1a1\ub429\ub2c8\ub2e4. \uc774\ub54c \uc804\uc1a1\ub41c \uc694\uccad\uc774 \uc6b4 \uc88b\uac8c 200 \uc751\ub2f5\uc744 \ubc1b\uc73c\uba74\uc11c ",(0,c.jsx)(r.code,{children:"CLOSED"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(89198).A+"",width:"3164",height:"146"})}),"\n",(0,c.jsxs)(r.p,{children:["\ub2e4\uc2dc ",(0,c.jsx)(r.code,{children:"CLOSED"}),"\uac00 \ub418\uc5b4\uc11c \uc774 \uacfc\uc815\uc744 \ub610 \ubc18\ubcf5\ud569\ub2c8\ub2e4. ",(0,c.jsx)(r.em,{children:"03:03:47.827"})," ~ ",(0,c.jsx)(r.em,{children:"03:03:56.824"}),", \uc57d 10\ucd08(",(0,c.jsx)(r.code,{children:"counterSlidingWindow"}),") \ub3d9\uc548 \uc2e4\ud328\uc728\uc744 \uce21\uc815\ud569\ub2c8\ub2e4. \uc774\ubc88\uc5d0 \uce21\uc815\ud55c \uc2e4\ud328\uc728\uc740 4/8 = 0.5\uc774\ubbc0\ub85c, \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\ub294 \ub2e4\uc2dc ",(0,c.jsx)(r.code,{children:"OPEN"})," \uc0c1\ud0dc\ub85c \uc804\ud658\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(r.p,{children:(0,c.jsx)(r.img,{src:i(79191).A+"",width:"3156",height:"626"})}),"\n",(0,c.jsx)(r.p,{children:"\uc704\uc640 \uac19\uc774 \uac04\ub2e8\ud55c \ud14c\uc2a4\ud2b8\ub97c \ud1b5\ud574 Armeria \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc758 \ub3d9\uc791\uc744 \uc9c1\uc811 \ud655\uc778\ud574 \ubcf4\uba74\uc11c, \uc5ec\ub7ec \uc124\uc815 \uc635\uc158\uc758 \uc758\ubbf8\uc640 \uadf8\uc5d0 \ub530\ub978 \ub3d9\uc791\uc744 \ubcf4\ub2e4 \uc27d\uac8c \uc774\ud574\ud560 \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4. \ub610\ud55c \uac04\ub2e8\ud55c \uc124\uc815\uc73c\ub85c\ub3c4 \uc644\ubcbd\ud788 \ub3d9\uc791\ud558\ub294 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uad6c\ud604\ud560 \uc218 \uc788\ub2e4\ub294 \uc810\ub3c4 \uc54c\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(r.blockquote,{children:["\n",(0,c.jsxs)(r.p,{children:["Armeria \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4\uc5d0 \uad00\ud55c \ubcf4\ub2e4 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,c.jsx)(r.a,{href:"https://armeria.dev/docs/client-circuit-breaker/",children:"https://armeria.dev/docs/client-circuit-breaker/"})," \ub97c \ucc38\uace0\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,c.jsx)(r.h2,{id:"\ub9c8\uce58\uba70",children:"\ub9c8\uce58\uba70"}),"\n",(0,c.jsx)(r.p,{children:"Armeria\uc5d0\uc11c\ub294 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc678\uc5d0\ub3c4 MSA\uc5d0 \ud544\uc694\ud55c \ud074\ub77c\uc774\uc5b8\ud2b8 \uce21 \ub85c\ub4dc \ubc38\ub7f0\uc2f1\uc774\ub098 auto-retry\uc640 \uac19\uc740 \uc5ec\ub7ec \uc720\uc6a9\ud55c \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc2e4\uc81c \uc800\ud76c OpenChat \uc11c\ubc84 \uac1c\ubc1c\uc5d0\ub3c4 Armeria\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub294\ub370\uc694. \ub355\ubd84\uc5d0 \ub9ce\uc740 \uae30\ub2a5\uc744 \ud3b8\ud558\uac8c \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc9c0\uae08 \uc774 \uc21c\uac04\uc5d0\ub3c4 \uac1c\ubc1c\uc790\uc758 \ubaa9\uc18c\ub9ac\uc5d0 \uadc0\ub97c \uae30\uc6b8\uc774\uba70 \uc0c8\ub85c\uc6b4 \uae30\ub2a5\uc744 \ucd94\uac00\ud558\uace0 \uac1c\uc120\ud558\uace0 \uc788\ub294 Armeria \uc624\ud508\uc18c\uc2a4 \uac1c\ubc1c \ud300\uc5d0\uac8c \uac10\uc0ac\uc758 \ub9d0\uc744 \uc804\ud558\uba70 \uc774 \uae00\uc744 \ub9c8\uce69\ub2c8\ub2e4."})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,c.jsx)(r,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},7973:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-5-fb48c4e7a8981c1da7c2dc9413a94d2f.png"},23306:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-2-b3c58daca726cc29671eb155593a051c.png"},28453:(e,r,i)=>{i.d(r,{R:()=>s,x:()=>a});var n=i(96540);const c={},t=n.createContext(c);function s(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),n.createElement(t.Provider,{value:r},e.children)}},68584:e=>{e.exports=JSON.parse('{"permalink":"/blog/ko/2020/04/27/circuit-breakers-armeria","editUrl":"https://github.com/line/armeria/edit/main/site/src/content/blog/ko/2020-04-27-circuit-breakers-armeria.mdx","source":"@site/src/content/blog/ko/2020-04-27-circuit-breakers-armeria.mdx","title":"Armeria\uc758 \uc11c\ud0b7 \ube0c\ub808\uc774\ucee4 \uc0ac\uc6a9\ud574 \ubcf4\uae30","description":"\uc548\ub155\ud558\uc138\uc694.","date":"2020-04-27T00:00:00.000Z","tags":[],"readingTime":5.47,"hasTruncateMarker":true,"authors":[{"name":"\uc8fc\uc2b9\ud658","title":"LINE\uc5d0\uc11c OpenChat \uc11c\ube44\uc2a4\uc758 \ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc744 \ub2f4\ub2f9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","imageURL":"/img/author-seunghwanjoo.jpeg","key":"seunghwanjoo","page":null}],"frontMatter":{"authors":["seunghwanjoo"],"other_languages":{"en":"/blog/2020/07/08/circuit-breakers-armeria"}},"unlisted":false,"prevItem":{"title":"Armeria\ub85c Reactive Streams\uc640 \ub180\uc790! - 1","permalink":"/blog/ko/2020/02/18/reactive-streams-armeria-1"},"nextItem":{"title":"\uc0dd\uc560 \uccab \uc624\ud508 \uc18c\uc2a4 \uae30\uc5ec \uacbd\ud5d8(feat. Armeria)","permalink":"/blog/ko/2019/12/24/my-first-opensource-contribution-to-armeria"}}')},72289:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-1-f70bdace5b6c392763a6f834aac57203.png"},74067:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-3-07759276f457694ff964d39a17233647.png"},79191:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-7-d5c6d32d0e6c79a216971115d5a25552.png"},89198:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-6-26bbfb46bbe9fbc038bbac6a0eb170c2.png"},90460:(e,r,i)=>{i.d(r,{A:()=>n});const n=i.p+"assets/images/circuit-breakers-armeria-4-a2545fecd5a4cb40a6c7f1e9bc606001.png"}}]);