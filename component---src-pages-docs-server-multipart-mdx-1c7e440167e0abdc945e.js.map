{"version":3,"file":"component---src-pages-docs-server-multipart-mdx-1c7e440167e0abdc945e.js","mappings":"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","sources":["webpack://armeria-site/./src/pages/docs/server-multipart.mdx","webpack://armeria-site/./src/layouts/docs.tsx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/armeria/armeria/site/src/layouts/docs.tsx\";\nexport const pageTitle = \"Handling a multipart request\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst Tip = makeShortcode(\"Tip\");\nconst layoutProps = {\n  pageTitle,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"handling-a-multipart-request\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#handling-a-multipart-request\",\n        \"aria-label\": \"handling a multipart request permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Handling a multipart request`}</h1>\n    <h6 {...{\n      \"className\": \"inlinePageToc\",\n      \"role\": \"navigation\"\n    }}>{`Table of contents`}</h6>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#building-a-multipart-request\"\n        }}>{`Building a multipart request`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#sending-a-multipart-request\"\n        }}>{`Sending a multipart request`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#receiving-a-multipart-request\"\n        }}>{`Receiving a multipart request`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#using-typeparam-annotation\"\n        }}>{`Using type://@Param annotation`}</a></li>\n    </ul>\n    <p>{`Armeria provides `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{` encoder and decoder built on top of\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://www.reactive-streams.org/\"\n      }}>{`Reactive Streams`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"building-a-multipart-request\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#building-a-multipart-request\",\n        \"aria-label\": \"building a multipart request permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Building a multipart request`}</h2>\n    <p>{`A `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{` consists of multiple `}<a parentName=\"p\" {...{\n        \"href\": \"typeplural://BodyPart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html\"\n      }}>{`typeplural://BodyPart`}</a>{`.\nEach `}<a parentName=\"p\" {...{\n        \"href\": \"type://BodyPart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html\"\n      }}>{`type://BodyPart`}</a>{` is divided into headers and a body. A `}<a parentName=\"p\" {...{\n        \"href\": \"type://BodyPart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html\"\n      }}>{`type://BodyPart`}</a>{` headers can be created simply\nusing `}<a parentName=\"p\" {...{\n        \"href\": \"type://ContentDisposition:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ContentDisposition.html\"\n      }}>{`type://ContentDisposition`}</a>{`.\n`}<inlineCode parentName=\"p\">{`String`}</inlineCode>{`, `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpData:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpData.html\"\n      }}>{`type://HttpData`}</a>{`, or `}<a parentName=\"p\" {...{\n        \"href\": \"type://StreamMessage:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html\"\n      }}>{`type://StreamMessage`}</a>{` can be set as the body of the `}<a parentName=\"p\" {...{\n        \"href\": \"type://BodyPart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html\"\n      }}>{`type://BodyPart`}</a>{`.`}</p>\n    <Tip mdxType=\"Tip\">\n      <p>{`You can also use `}<a parentName=\"p\" {...{\n          \"href\": \"type://HttpHeaders:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpHeaders.html\"\n        }}>{`type://HttpHeaders`}</a>{` to set complex headers for `}<a parentName=\"p\" {...{\n          \"href\": \"type://BobyPart#headers()\"\n        }}>{`type://BobyPart#headers()`}</a>{`.`}</p>\n    </Tip>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import java.nio.file.Path;\nimport com.linecorp.armeria.common.ContentDisposition;\nimport com.linecorp.armeria.common.multipart.BodyPart;\n\n// Create a 'Content-Disposition' header with the 'name' parameter set to 'name'.\nContentDisposition nameDisposition = \n    ContentDisposition.of(\"form-data\", \"name\");\n// Create a BodyPart with 'Content-Disposition' header and its data.\nBodyPart bodyPart1 = BodyPart.of(nameDisposition, \"Meri Kim\");\n\n// Create a 'Content-Disposition' header with the name parameter set to \"image\", \n// and the filename parameter set to \"profile.png\"\nContentDisposition imageDisposition =\n    ContentDisposition.of(\"form-data\", \"image\", \"profile.png\");\nPath image = Paths.get(\"/path/to/image\");\n// Create a BodyPart with 'Content-Disposition' header and its file.\nBodyPart bodyPart2 = BodyPart.of(imageDisposition, StreamMessage.of(image));\n\n// Create a new multipart with the two body parts.\nMultipart multipart = Multipart.of(bodyPart1, bodyPart2);\n`}</code></pre>\n    <p>{`If we encode and print the `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{` created above,`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`for (HttpData httpData : multipart.toStreamMessage().collect().join()) {\n  System.out.print(httpData.toStringUtf8());\n}\n`}</code></pre>\n    <p>{`we can see how the `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{` is encoded as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`--ArmeriaBoundaryEsbNVr9Z66DAIYIN\ncontent-disposition:form-data; name=\"name\"\ncontent-type:text/plain\n\nMeri Kim\n--ArmeriaBoundaryEsbNVr9Z66DAIYIN\ncontent-disposition:form-data; name=\"image\"; filename=\"profile.png\"\ncontent-type:application/octet-stream\n\n<binary-data>\n--ArmeriaBoundaryEsbNVr9Z66DAIYIN--\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"sending-a-multipart-request\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#sending-a-multipart-request\",\n        \"aria-label\": \"sending a multipart request permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Sending a multipart request`}</h2>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{` created in this way can be converted to an `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpRequest:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html\"\n      }}>{`type://HttpRequest`}</a>{` through\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart#toHttpRequest(String):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html#toHttpRequest(java.lang.String)\"\n      }}>{`type://Multipart#toHttpRequest(String)`}</a>{` and transmitted to a server using a `}<a parentName=\"p\" {...{\n        \"href\": \"type://WebClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html\"\n      }}>{`type://WebClient`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`WebClient client = WebClient.of(\"https://armeria.dev\");\n// Encode a \\`Multipart\\` into an \\`HttpRequest\\`\nHttpRequest request = multipart.toHttpRequest(\"/upload\");\nclient.execute(request).aggregate()...;\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"receiving-a-multipart-request\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#receiving-a-multipart-request\",\n        \"aria-label\": \"receiving a multipart request permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Receiving a multipart request`}</h2>\n    <p>{`On the server side, the multipart request sent from the client can be decoded into a `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{`\nusing `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart#from(HttpRequest):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html#from(com.linecorp.armeria.common.HttpRequest)\"\n      }}>{`type://Multipart#from(HttpRequest)`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`Server.builder()\n      .service((ctx, req) -> {\n        // Decode an \\`HttpRequest\\` into a \\`Multipart\\`\n        Multipart multipart = Multipart.from(req);\n        ...\n      })\n`}</code></pre>\n    <p>{`Since `}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html\"\n      }}>{`type://Multipart`}</a>{` does not have the actual multipart data, you can use\n`}<inlineCode parentName=\"p\">{`Multipart.bodyParts().subscribe(...)`}</inlineCode>{` to read data little by little as needed.\nIf the size of the data is not large, the data can be read after being loaded into memory through\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://Multipart#aggregate():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/Multipart.html#aggregate()\"\n      }}>{`type://Multipart#aggregate()`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`// Use a \\`Subscriber\\` to read the data with backpressure.\nmultipart.bodyParts().subsribe(new Subscriber() {\n   ...\n});\n\n// Read the data after aggregation.\nMultipart.from(req).aggregate()\n         .thenAccept(multipart -> {\n             for (AggregatedBodyPart bodyPart : multipart.bodyParts()) {\n                 String content = bodyPart.contentUtf8();\n                 ...\n             }\n         });\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"using-typeparam-annotation\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#using-typeparam-annotation\",\n        \"aria-label\": \"using typeparam annotation permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<a parentName=\"h2\" {...{\n        \"href\": \"type://@Param:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Param.html\"\n      }}>{`type://@Param`}</a>{` annotation`}</h2>\n    <p>{`In annotated services, a body part content of `}<inlineCode parentName=\"p\">{`multipart/form-data`}</inlineCode>{` can be directly mapped into a `}<inlineCode parentName=\"p\">{`String`}</inlineCode>{`,\n`}<inlineCode parentName=\"p\">{`Path`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`File`}</inlineCode>{`, or `}<a parentName=\"p\" {...{\n        \"href\": \"type://MultipartFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/MultipartFile.html\"\n      }}>{`type://MultipartFile`}</a>{` using the `}<a parentName=\"p\" {...{\n        \"href\": \"type://@Param:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Param.html\"\n      }}>{`type://@Param`}</a>{` annotation.`}</p>\n    <Tip mdxType=\"Tip\">\n      <p>{`Note that a `}<a parentName=\"p\" {...{\n          \"href\": \"type://BodyPart:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html\"\n        }}>{`type://BodyPart`}</a>{` can be converted into a `}<inlineCode parentName=\"p\">{`Path`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`File`}</inlineCode>{` or `}<a parentName=\"p\" {...{\n          \"href\": \"type://MultipartFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/MultipartFile.html\"\n        }}>{`type://MultipartFile`}</a>{` only when\nthe `}<a parentName=\"p\" {...{\n          \"href\": \"type://BodyPart#filename():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html#filename()\"\n        }}>{`type://BodyPart#filename()`}</a>{` and `}<a parentName=\"p\" {...{\n          \"href\": \"type://BodyPart#name():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/multipart/BodyPart.html#name()\"\n        }}>{`type://BodyPart#name()`}</a>{` is specified.`}</p>\n    </Tip>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import java.io.File;\nimport java.nio.file.Path;\n\nimport com.linecorp.armeria.common.MediaTypeNames;\nimport com.linecorp.armeria.common.multipart.MultipartFile;\nimport com.linecorp.armeria.server.annotation.Consumes;\nimport com.linecorp.armeria.server.annotation.Post;\n\n@Consumes(MediaTypeNames.MULTIPART_FORM_DATA)\n@Post(\"/upload\")\npublic HttpResponse upload(\n    @Param String param,\n    @Param File file,\n    @Param Path path,\n    @Param MultipartFile multipartFile) {\n    // Do something with the multipart data\n    ...\n}\n`}</code></pre>\n    <Tip mdxType=\"Tip\">\n      <p><a parentName=\"p\" {...{\n          \"href\": \"type://ServerBuilder#multipartUploadsLocation(Path):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#multipartUploadsLocation(java.nio.file.Path)\"\n        }}>{`type://ServerBuilder#multipartUploadsLocation(Path)`}</a>{` and the files are removed as soon as the request is\nhandled completely by default, i.e. when the `}<a parentName=\"p\" {...{\n          \"href\": \"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html\"\n        }}>{`type://RequestLog`}</a>{` is complete. If you want to persist the\nuploaded file, you can move the uploaded file to another folder or persistence layer before the deletion.`}</p>\n      <p>{`Alternatively, you can disable the automatic deletion of the uploaded files by setting\n`}<a parentName=\"p\" {...{\n          \"href\": \"type://MultipartRemovalStrategy#NEVER:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/MultipartRemovalStrategy.html#NEVER\"\n        }}>{`type://MultipartRemovalStrategy#NEVER`}</a>{` to\n`}<a parentName=\"p\" {...{\n          \"href\": \"type://ServerBuilder#multipartRemovalStrategy(MultipartRemovalStrategy):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#multipartRemovalStrategy(com.linecorp.armeria.server.MultipartRemovalStrategy)\"\n        }}>{`type://ServerBuilder#multipartRemovalStrategy(MultipartRemovalStrategy)`}</a>{`, but please note that you must make\nsure the uploaded files are deleted once they are not in use to avoid the excessive consumption of disk space.`}</p>\n    </Tip>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { RouteComponentProps } from '@reach/router';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport React from 'react';\n\nimport docsIndex from '../pages/docs/toc.json';\nimport MdxLayout from './mdx';\n\ninterface DocsLayoutProps extends RouteComponentProps {\n  pageContext: any;\n  pageTitle: string;\n}\n\nconst DocsLayout: React.FC<DocsLayoutProps> = (props) => {\n  const {\n    allMdx: { nodes: candidateMdxNodes },\n  } = useStaticQuery(graphql`\n    query {\n      allMdx(filter: { fileAbsolutePath: { glob: \"**/src/pages/docs/**\" } }) {\n        nodes {\n          tableOfContents(maxDepth: 1)\n          excerpt(pruneLength: 256, truncate: true)\n          parent {\n            ... on File {\n              sourceInstanceName\n              name\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <MdxLayout\n      {...props}\n      candidateMdxNodes={candidateMdxNodes}\n      index={docsIndex}\n      prefix=\"docs\"\n      pageTitleSuffix=\"Armeria documentation\"\n    />\n  );\n};\n\nexport default DocsLayout;\n"],"names":["pageTitle","_frontmatter","Tip","name","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","Object","assign","mdxType","parentName","isMDXComponent","allMdx","nodes","candidateMdxNodes","useStaticQuery","React","MdxLayout","index","docsIndex","prefix","pageTitleSuffix"],"sourceRoot":""}