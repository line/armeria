"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[6905],{28453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>o});var i=n(96540);const s={},a=i.createContext(s);function t(e){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:r},e.children)}},61237:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"1.6.0","title":"v1.6.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/1.6.0.mdx","sourceDirName":".","slug":"/1.6.0","permalink":"/release-notes/1.6.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/1.6.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2021-04-07T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v1.7.0","permalink":"/release-notes/1.7.0"},"next":{"title":"v1.5.0","permalink":"/release-notes/1.5.0"}}');var s=n(74848),a=n(28453);const t={date:new Date("2021-04-07T00:00:00.000Z")},o="v1.6.0",c={},l=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function h(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{ThankYou:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.header,{children:[(0,s.jsx)(r.h1,{id:"v160",children:"v1.6.0"}),(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"April 7, 2021"})})]}),"\n",(0,s.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now send and handle multipart requests and responses. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/253",children:"#253"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3327",children:"#3327"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'// Send a multipart message.\nWebClient client = WebClient.of("http://example.com/");\nBodyPart part1 = BodyPart.of(ContentDisposition.of("form-data", "username"), "Armeria");\nBodyPart part2 = BodyPart.of(ContentDisposition.of("form-data", "password"), "mypassword");\nMultipart multipart = Multipart.of(part1, part2);\nclient.execute(multipart.toHttpRequest("/login"));\n\n// Handle a multipart message.\nServer.builder()\n      .service("/login", (ctx, req) -> {\n          Multipart multipart = Multipart.from(req);\n          multipart.aggregate().thenApply(aggregated -> {\n              assert aggregated.field("username").contentUtf8().equals("Armeria");\n              assert aggregated.field("password").contentUtf8().equals("mypassword");\n              ...\n          }));\n     });\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Armeria now provides various useful extensions and conversions for Scala. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3395",children:"#3395"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["See ",(0,s.jsx)(r.a,{href:"/docs/advanced/scala",children:"Scala integration"})," for the full features."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now create a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," from a ",(0,s.jsx)(r.code,{children:"Path"})," or a ",(0,s.jsx)(r.code,{children:"File"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3344",children:"#3344"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'Path path = Paths.get("...");\nStreamMessage<HttpData> publisher = StreamMessage.of(path);\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now filter or transform values of a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html",children:"StreamMessage"})," using\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#filter(java.util.function.Predicate)",children:"StreamMessage#filter(Predicate)"})," or ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/StreamMessage.html#map(java.util.function.Function)",children:"StreamMessage#map(Function)"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3351",children:"#3351"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"// Filter.\nStreamMessage<Integer> source = StreamMessage.of(1, 2, 3, 4, 5);\nStreamMessage<Integer> even = source.filter(x -> x % 2 == 0);\n\n// Transform.\nStreamMessage<Integer> source = StreamMessage.of(1, 2, 3, 4, 5);\nStreamMessage<Boolean> isEven = source.map(x -> x % 2 == 0);\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now send a different response depending on the exception. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3209",children:"#3209"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3413",children:"#3413"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"Server.builder().exceptionHandler((ctx, cause) -> {\n    if (cause instanceof RequestTimeoutException) {\n        // The request timed out!\n        return AggregatedHttpResponse.of(...);\n    }\n\n    // Return null to let ExceptionHandler.ofDefault() convert the exception.\n    return null;\n})...\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now convert an exception into an ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RpcResponse.html",children:"RpcResponse"})," in ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/thrift/THttpService.html",children:"THttpService"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3349",children:"#3349"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3383",children:"#3383"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'THttpService.builder()\n            .addService("hello", helloService)\n            .exceptionHandler((ctx, cause) -> {\n                if (cause instanceof IllegalArgumentException) {\n                    return RpcResponse.of(new CustomizedException("Bad Request!"));\n                }\n                ...\n            })\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now set a response timeout and attributes using ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClientRequestPreparation.html",children:"WebClientRequestPreparation"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3347",children:"#3347"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3357",children:"#3357"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'WebClient client = ...;\nclient.prepare()\n      .get("/my-service")\n      .responseTimeout(Duration.ofSeconds(3))\n      .attr(USER_ID, userId)\n      .attr(USER_SECRET, secret)\n      .execute();\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now specify additional error details to a gRPC response when an exception is raised in a gRPC service.\n",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3307",children:"#3307"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3329",children:"#3329"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"GrpcService.builder()\n           .exceptionMapping((cause, metadata) -> {\n               if (throwable instanceof AuthError) {\n                   metadata.put(KEY, toMetadata(cause))\n                   return Status.UNAUTHENTICATED.withCause(cause);\n               }\n               ...\n           })\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now customize the success condition of a metric. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3404",children:"#3404"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3410",children:"#3410"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"MetricCollectingService.builder(...)\n                       .successFunction((context, log) -> {\n                            final int statusCode = log.responseHeaders().status().code();\n                            return (statusCode >= 200 && statusCode < 400) || statusCode == 404;\n                        });\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now fluently build a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/encoding/DecodingClient.html",children:"DecodingClient"})," using the ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/encoding/DecodingClientBuilder.html",children:"DecodingClientBuilder"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3348",children:"#3348"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3372",children:"#3372"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"DecodingClient.builder()\n              .autoFillAcceptEncoding(false)\n              .strictContentEncoding(true)\n              .newDecorator();\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now fluently build an ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html",children:"HttpRequest"})," with a ",(0,s.jsx)(r.code,{children:"Publisher<HttpData>"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3343",children:"#3343"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'StreamMessage<HttpData> publisher = StreamMessage.of(...);\nHttpRequest.builder()\n           .method(HttpMethod.GET)\n           .path("/")\n           .content(MediaType.PLAIN_TEXT_UTF_8, publisher)\n           .build();\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now convert a stream of Protobuf Messages into\n",(0,s.jsx)(r.a,{href:"https://datatracker.ietf.org/doc/rfc7464/",children:"JSON Text sequences"})," using an annotated service. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3394",children:"#3394"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'@Get("/items")\n@ProducesJsonSequences\npublic Publisher<MyProtobufMessage> protobufJsonSeqPublisher() {\n    return StreamMessage.of(MyProtobufMessage.newBuilder()...build(),\n                            MyProtobufMessage.newBuilder()...build());\n}\n\n@Get("/items")\n@ProducesJsonSequences\npublic Stream<MyProtobufMessage> protobufJsonSeqPublisher() {\n    return Stream.of(MyProtobufMessage.newBuilder()...build(),\n                     MyProtobufMessage.newBuilder()...build());\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now customize the default service name of a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html",children:"RequestLog"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3232",children:"#3232"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3366",children:"#3366"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'Server.builder()\n      .defaultServiceNaming(ctx -> {\n          final ServiceConfig config = ctx.config();\n          return config.route().patternString();\n     });\n// For a specific service.\nServer.builder()\n      .route().path("/")\n      .defaultServiceNaming(...)\n      ...\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now check if the current request is matched by any routes or not. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3365",children:"#3365"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3378",children:"#3378"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"ServerBuilder sb = ...\nsb.decorator((delegate, ctx, req) -> {\n    if (ctx.config().route().isFallback()) {\n        // This request is not matched any routes.\n    }\n    return delegate.serve(ctx, req);\n});\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/brave/BraveService.html",children:"BraveService"})," does not trace requests for ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientService.html",children:"TransientService"})," such as\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckService.html",children:"HealthCheckService"})," anymore. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3382",children:"#3382"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["You should specify ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientServiceOption.html#WITH_TRACING",children:"TransientServiceOption#WITH_TRACING"})," if you want to trace them."]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"HealthCheckService.builder()\n                  .transientServiceOptions(WITH_TRACING)\n                  ...\n                  .build();\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now clean up resources by overriding ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/FilteredStreamMessage.html#onCancellation(org.reactivestreams.Subscriber)",children:"FilteredStreamMessage#onCancellation(Subscriber)"}),"\nwhen ",(0,s.jsx)(r.code,{children:"Subscription.cancel()"})," is called. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3375",children:"#3375"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"new MyFilteredHttpResponse(res) {\n    ...\n    @Override\n    protected void onCancellation(Subscriber<? super U> subscriber) {\n        // Clean up resources.\n    }\n}\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now easily set 'cookie' or 'set-cookie' headers. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3388",children:"#3388"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3391",children:"#3391"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'Cookie cookie = Cookie.of("cookie", "value");\nRequestHeaders headers = RequestHeaders.builder(HttpMethod.GET, "/")\n                                       .cookie(cookie)\n                                       .build();\nassert headers.cookies().equals(Cookies.of(cookie));\n\nCookie setCookie1 = ...\nCookie setCookie2 = ...\nResponseHeaders headers = ResponseHeaders.builder(HttpStatus.OK)\n                                         .cookies(setCookie1, setCookie2)\n                                         .build();\nassert headers.cookies().equals(Cookies.of(setCookie1, setCookie2));\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use ",(0,s.jsx)(r.code,{children:"req.root_id"})," ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/BuiltInProperty.html",children:"BuiltInProperty"})," to log the ID of ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestContext.html#root()",children:"RequestContext#root()"}),".\n",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3429",children:"#3429"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3433",children:"#3433"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use Thrift 0.14.0 with the new ",(0,s.jsx)(r.code,{children:"armeria-thrift0.14"})," module. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3470",children:"#3470"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3422",children:"#3422"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use OAuth 2.0 related features with the new ",(0,s.jsx)(r.code,{children:"armeria-oauth2"})," module. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2268",children:"#2268"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/2840",children:"#2840"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://datatracker.ietf.org/doc/rfc7662/",children:"OAuth 2.0 server-side token authorization"})," using\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/auth/oauth2/OAuth2TokenIntrospectionAuthorizer.html",children:"OAuth2TokenIntrospectionAuthorizer"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-4.4",children:"Client credential grants"})," using\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/auth/oauth2/OAuth2ClientCredentialsGrant.html",children:"OAuth2ClientCredentialsGrant"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-4.3",children:"Resource Owner Password Credentials Grant"}),"\nusing ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/auth/oauth2/OAuth2ResourceOwnerPasswordCredentialsGrant.html",children:"OAuth2ResourceOwnerPasswordCredentialsGrant"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://datatracker.ietf.org/doc/rfc7009/",children:"OAuth 2.0 Token Revocation"})," using ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/auth/oauth2/TokenRevocation.html",children:"TokenRevocation"})]}),"\n"]}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsx)(r.p,{children:"OAuth 2.0 features are currently experimental, so you should be careful using the feature."})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can now use ",(0,s.jsx)(r.a,{href:"https://jakarta.ee/specifications/restful-ws/",children:"Jakarta RESTful Web Services"}),"\non top of Armeria with the ",(0,s.jsx)(r.code,{children:"armeria-resteasy"})," module. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3285",children:"#3285"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3296",children:"#3296"})]}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"armeria-resteasy"})," is currently experimental, so you should be careful using the feature."]})}),"\n"]}),"\n"]}),"\n","\n",(0,s.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Various improvements for documentation. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3237",children:"#3237"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3289",children:"#3289"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3361",children:"#3361"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3390",children:"#3390"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3401",children:"#3401"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3427",children:"#3427"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.code,{children:"NullPointerException"})," in ",(0,s.jsx)(r.a,{href:"type://#",children:"HttpResponseDecoder"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3036",children:"#3036"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3407",children:"#3407"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.code,{children:"405 Method Not Allowed"})," when the exact and param path are defined with\ndifferent HTTP methods. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3330",children:"#3330"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3340",children:"#3340"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.code,{children:"Address family not supported by protocol"})," or ",(0,s.jsx)(r.code,{children:"Connection refused"})," error anymore\non certain machines with IPv6 enabled. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3425",children:"#3425"})]}),"\n",(0,s.jsxs)(r.li,{children:["The Unicode characters like emojis in a JSON response are now rendered correctly\nin ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html",children:"DocService"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3396",children:"#3396"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see the wrong response body when the payload violates the protocol or is too large. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3419",children:"#3419"})]}),"\n",(0,s.jsxs)(r.li,{children:["You can now use the Thrift client and service that is generated by\n",(0,s.jsx)(r.a,{href:"https://issues.apache.org/jira/browse/THRIFT-2469",children:(0,s.jsx)(r.code,{children:"java:fullcamel"})})," option of Thrift compiler.\n",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3269",children:"#3269"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3360",children:"#3360"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3369",children:"#3369"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"SmartLifecycle"})," for Armeria server graceful shutdown is only created when the Armeria server is created\nby Spring integration. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3300",children:"#3300"})]}),"\n",(0,s.jsxs)(r.li,{children:["You can now use ",(0,s.jsx)(r.a,{href:"https://scalapb.github.io/docs/sealed-oneofs/",children:"Sealed oneofs"})," message from ScalaPB\nwith JSON for gRPC and annotated services. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3342",children:"#3342"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3394",children:"#3394"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.code,{children:"CancellationException"})," when an ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"})," is fully consumed on server-side.\n",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3387",children:"#3387"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.a,{href:"type://#",children:"ClosedSteamException"})," in Jetty service when it fails to write to an\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"}),". ",(0,s.jsx)(r.code,{children:"EofException"})," is raised instead. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3412",children:"#3412"})]}),"\n",(0,s.jsxs)(r.li,{children:["You no longer see ",(0,s.jsx)(r.code,{children:"IllegalStateException"})," when ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/reactor3/RequestContextHooks.html",children:"RequestContextHooks"})," is enabled. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3441",children:"#3441"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3442",children:"#3442"})]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ArmeriaServerHttpResponse"})," of Spring Webflux integration now correctly propagates\nReactor's ",(0,s.jsx)(r.a,{href:"https://projectreactor.io/docs/core/release/reference/#context",children:(0,s.jsx)(r.code,{children:"Context"})}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3439",children:"#3439"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3443",children:"#3443"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html",children:"ServiceRequestContext"})," is added to the parameter of ",(0,s.jsx)(r.code,{children:"handleMessage"})," in\n",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/protocol/AbstractUnaryGrpcService.html",children:"AbstractUnaryGrpcService"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3403",children:"#3403"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["The return type is also changed to ",(0,s.jsx)(r.code,{children:"CompletionStage"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3409",children:"#3409"})]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"protected abstract CompletionStage<byte[]> handleMessage(\n        ServiceRequestContext ctx, byte[] message);\n\nprotected final CompletionStage<ByteBuf> handleMessage(\n        ServiceRequestContext ctx, ByteBuf message) {...}\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/grpc/GrpcStatusFunction.html",children:"GrpcStatusFunction"})," now extends ",(0,s.jsx)(r.code,{children:"BiFunction<Throwable, Metadata, Status>"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3329",children:"#3329"})]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"numberSteps"})," method in ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/WeightRampingUpStrategyBuilder.html",children:"WeightRampingUpStrategyBuilder"})," is now changed to ",(0,s.jsx)(r.code,{children:"totalSteps"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/3377",children:"#3377"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Bucket4J 4.10.0 \u2192 6.2.0"}),"\n",(0,s.jsxs)(r.li,{children:["Curator 4.3.0 \u2192 5.1.0","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"ZooKeeper 3.5.8 \u2192 3.6.2"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:"Dropwizard 2.0.18 \u2192 2.0.20"}),"\n",(0,s.jsx)(r.li,{children:"Dropwizard Metrics 4.1.17 \u2192 4.1.18"}),"\n",(0,s.jsx)(r.li,{children:"gRPC 1.35.0 \u2192 1.36.1"}),"\n",(0,s.jsx)(r.li,{children:"Jackson 2.12.0 \u2192 2.12.2"}),"\n",(0,s.jsx)(r.li,{children:"java-jwt 3.12.1 \u2192 3.14.0"}),"\n",(0,s.jsx)(r.li,{children:"Jetty 9.4.36 \u2192 9.4.39"}),"\n",(0,s.jsx)(r.li,{children:"Micrometer 1.6.3 \u2192 1.6.5"}),"\n",(0,s.jsxs)(r.li,{children:["Netty 4.1.58 \u2192 4.1.63","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Netty TCNative BoringSSL 2.0.36 \u2192 2.0.38"}),"\n",(0,s.jsx)(r.li,{children:"Netty io_uring transport 0.0.3 \u2192 0.0.5"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["OpenSAML 3.4.5 \u2192 3.4.6","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Shibboleth java-support 7.5.1 \u2192 7.5.2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["Reactor 3.4.2 \u2192 3.4.4","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Reactor Kotlin extensions 1.1.2 \u2192 1.1.3"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:"RxJava 3.0.9 \u2192 3.0.11, 2.2.20 \u2192 2.2.21"}),"\n",(0,s.jsx)(r.li,{children:"ScalaPb 0.10.10 \u2192 0.11.0"}),"\n",(0,s.jsx)(r.li,{children:"Spring Boot 2.4.2 \u2192 2.4.4"}),"\n",(0,s.jsx)(r.li,{children:"Tomcat 9.0.41 \u2192 9.0.44, 8.5.61 \u2192 8.5.64"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,s.jsx)(n,{usernames:["andrey-tpt","anuraaga","ateirney","eisig","eugene70","ghkim3221","hyangtack","heka1024","heowc","hexoul","ikhoon","JunoJunho","kojilin","ks-yim","mauhiz","max904-github","minwoox","nirvanarsc","okue","policeman-kh","probepark","richieyan","selectAll","szeiger","trustin","Waynefn"]})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);