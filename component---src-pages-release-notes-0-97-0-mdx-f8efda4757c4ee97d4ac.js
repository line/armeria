"use strict";(self.webpackChunkarmeria_site=self.webpackChunkarmeria_site||[]).push([[9795],{566:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return d}});var n,r=a(63366),i=(a(67294),a(64983)),s=a(20370),l=["components"],o={},p=(n="ThankYou",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)}),m={_frontmatter:o},c=s.Z;function d(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)(c,Object.assign({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",{className:"date"},"8th December 2019"),(0,i.kt)("h2",{id:"-new-features",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-new-features","aria-label":" new features permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🌟 New features"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"We now have a new immutable cookie API with ",(0,i.kt)("inlineCode",{parentName:"p"},"SameSite")," attribute support, which replaces Netty's cookie API. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/1567"},"#1567")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2286"},"#2286")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Cookie c1 = Cookie.of("foo", "bar")\nCookie c2 = Cookie.builder("alice", "bob")\n                  .domain("foo.com")\n                  .path("/bar")\n                  .maxAge(3600)\n                  .sameSite("Strict")\n                  .build();\n// Encoding\nResponseHeaders resHeaders =\n    ResponseHeaders.builder(HttpStatus.OK)\n                   .add(HttpHeaderNames.SET_COOKIE,\n                        Cookie.toSetCookieHeaders(c1, c2))\n                   .build();\n// Decoding\nCookies cookies =\n    Cookie.fromSetCookieHeaders(\n        resHeaders.getAll(HttpHeaderNames.SET_COOKIE));\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now replace the request headers of ",(0,i.kt)("inlineCode",{parentName:"p"},"HttpRequest")," more conveniently using ",(0,i.kt)("inlineCode",{parentName:"p"},"HttpRequest.withHeaders(RequestHeaders)"),". ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2278"},"#2278")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2283"},"#2283")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'HttpRequest req = HttpRequest.of(HttpMethod.POST, "/post",\n                                 MediaType.PLAIN_TEXT_UTF_8,\n                                 "Hello!");\nRequestHeaders newHeaders = RequestHeaders.of(HttpMethod.PUT, "/put",\n                                              MediaType.PLAIN_TEXT_UTF_8);\nHttpRequest newReq = req.withHeaders(newHeaders);\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"ServiceRequestContext.blockingTaskExecutor()")," is now a ",(0,i.kt)("inlineCode",{parentName:"p"},"ScheduledExecutorService")," instead of ",(0,i.kt)("inlineCode",{parentName:"p"},"ExecutorService"),", which means you can schedule delayed or periodic tasks. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2269"},"#2269")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// A service that sends `PING!` every second.\nHttpService service = (ctx, req) -> {\n    HttpResponse res = HttpResponse.streaming();\n    res.write(ResponseHeaders.of(200));\n    AtomicReference<ScheduledFuture<?>> futureHolder = new AtomicReference<>();\n    futureHolder.set(ctx.blockingTaskExecutor().scheduleWithFixedDelay(() -> {\n        boolean success = res.tryWrite(HttpData.ofUtf8("PING!\\r\\n"));\n        if (!success) {\n            if (futureHolder.get() != null) {\n                futureHolder.get().cancel(false);\n            }\n        }\n    }, 1, TimeUnit.SECONDS));\n    return res;\n};\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now add converters and exception handlers to annotated services more conveniently using the new fluent builder methods. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2242"},"#2242")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},"Server server =\n    Server.builder()\n          .annotatedService().requestConverters(converterA, converterB)\n                             .responseConverters(converterC, converterD)\n                             .exceptionHandlers(handlerA, handlerB)\n                             .build(myAnnotatedService)\n          .build();\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now configure how Armeria decides ",(0,i.kt)("inlineCode",{parentName:"p"},"ServiceRequestContext.clientAddress()")," via ",(0,i.kt)("inlineCode",{parentName:"p"},"ServerBuilder.clientAddressMapper()"),". ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/1631"},"#1631")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2294"},"#2294")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},"Server.builder()\n      .clientAddressMapper(proxiedAddrs -> {\n          InetSocketAddress srcAddr = proxiedAddrs.sourceAddress();\n          List<InetSocketAddress> destAddrs = proxiedAddrs.destinationAddresses();\n          if (destAddrs.isEmpty()) {\n              // No proxy servers involved.\n              return srcAddr;\n          } else {\n              // When there are more than one proxy server involved,\n              // trust only the address given by the last proxy server.\n              return destAddrs.get(destAddrs.size() - 1);\n          }\n      });\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"You can now choose a different SLF4J ",(0,i.kt)("inlineCode",{parentName:"p"},"Logger")," than the default one when using ",(0,i.kt)("inlineCode",{parentName:"p"},"LoggingClient")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"LoggingService"),". ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2220"},"#2220")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2237"},"#2237")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Logger myLogger = LoggerFactory.getLogger(MyService.class);\nServer server =\n    Server.builder()\n          .service("/",\n                   myService.decorate(LoggingService.builder()\n                                                    .logger(myLogger)\n                                                    .newDecorator()))\n          .build();\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"BraveClient")," now adds connection timing information to a span. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2271"},"#2271")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2273"},"#2273")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"connection-acquire.start")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"connection-acquire.end")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dns-resolve.start")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"dns-resolve.end")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"socket-connect.start")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"socket-connect.end")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"connection-reuse.start")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"connection-reuse.end")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"withDeadlineAfter")," is now supported for gRPC client stubs. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2284"},"#2284"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"GrpcService")," now allows controlling whether to respect the ",(0,i.kt)("inlineCode",{parentName:"p"},'"grpc-timeout"')," header sent by a gRPC client. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2284"},"#2284")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Consider disabling this feature via ",(0,i.kt)("inlineCode",{parentName:"li"},"GrpcServiceBuilder.useClientTimeoutHeader()")," in an insecure environment."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"THttpService")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ThriftCallService")," now supports adding more than one Thrift service at the same endpoint. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2164"},"#2164")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2285"},"#2285")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'class MyFooService implements FooService.Iface ... {\n    public void foo() { ... }\n}\n\nclass MyBarService implements BarService.Iface ... {\n    public void bar() { ... }\n}\n\n// "foo" call goes to MyFooService and\n// "bar" call goes to MyBarService.\nServer server =\n    Server.builder()\n          .service("/thrift",\n                   THttpService.builder()\n                               .addService(new MyFooService())\n                               .addService(new MyBarService())\n                               .build())\n          .build();\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"armeria-spring-boot-actuator-autoconfigure")," now supports the official CORS settings. ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2063"},"#2063")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# application.yml\nmanagement.endpoints.web.cors.allowed-origins: https://example.com\nmanagement.endpoints.web.cors.allowed-methods: GET,POST\n")))),(0,i.kt)("h2",{id:"-improvements",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-improvements","aria-label":" improvements permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"📈 Improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Improved routing performance. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2293"},"#2293")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2295"},"#2295")),(0,i.kt)("li",{parentName:"ul"},"The core JAR file is now smaller, by removing unnecessary resources such as web fonts and favicons. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2299"},"#2299")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2300"},"#2300")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"HttpRequest.of(RequestHeaders, Publisher)")," now handles the case where the ",(0,i.kt)("inlineCode",{parentName:"li"},"Publisher")," is actually an ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpRequest"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2278"},"#2278")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2283"},"#2283"))),(0,i.kt)("h2",{id:"-security-fixes",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-security-fixes","aria-label":" security fixes permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🔒 Security fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"(Moderate) ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/security/advisories/GHSA-35fr-h7jr-hh86"},"CWE-113: Improper Neutralization of CRLF Sequences in HTTP Headers ('HTTP Response Splitting')")),(0,i.kt)("li",{parentName:"ul"},"(Low) ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/security/advisories/GHSA-24r8-fm9r-cpj2"},"Multiple timing attack vulnerabilities leading to the recovery of secrets based on the use of non-constant time compare function"))),(0,i.kt)("h2",{id:"️-bug-fixes",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-bug-fixes","aria-label":"️ bug fixes permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🛠️ Bug fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The event loop threads are properly cleaned up when ",(0,i.kt)("inlineCode",{parentName:"li"},"Server")," failed to start. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2288"},"#2288")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Server")," now sends a redirect response correctly for the requests without a trailing slash (",(0,i.kt)("inlineCode",{parentName:"li"},"/"),") even when you bound a fallback service at ",(0,i.kt)("inlineCode",{parentName:"li"},"prefix:/"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2116"},"#2116")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2292"},"#2292")),(0,i.kt)("li",{parentName:"ul"},"Fixed a bug where routing cache did not work as expected, leading suboptimal routing performance. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2293"},"#2293")),(0,i.kt)("li",{parentName:"ul"},"Annotated services now accept only the first ",(0,i.kt)("inlineCode",{parentName:"li"},'"Cookie"')," header when injecting ",(0,i.kt)("inlineCode",{parentName:"li"},"Cookies"),", because multiple ",(0,i.kt)("inlineCode",{parentName:"li"},'"Cookie"')," headers must be prohibited according to RFC 6265. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2286"},"#2286")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GrpcService")," now respects gRPC stub deadline. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2008"},"#2008")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2284"},"#2284"))),(0,i.kt)("h2",{id:"️-deprecations",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-deprecations","aria-label":"️ deprecations permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🏚️ Deprecations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Deprecated ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpRequest.of(HttpRequest, RequestHeaders)")," in favor of\n",(0,i.kt)("inlineCode",{parentName:"li"},"HttpRequest.withHeaders()")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2283"},"#2283")),(0,i.kt)("li",{parentName:"ul"},"Deprecated ",(0,i.kt)("inlineCode",{parentName:"li"},"HttpRequest.of(AggregatedHttpRequest)")," and\n",(0,i.kt)("inlineCode",{parentName:"li"},"HttpResponse.of(AggregatedHttpResponse)")," in favor of\n",(0,i.kt)("inlineCode",{parentName:"li"},"AggregatedHttpRequest.toHttpRequest()")," and\n",(0,i.kt)("inlineCode",{parentName:"li"},"AggregatedHttpResponse.toHttpResponse()"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2283"},"#2283"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"These methods were removed from ",(0,i.kt)("inlineCode",{parentName:"li"},"AggregatedHttpMessage")," some time ago due to ambiguity, but now we are reviving them because we have separate types for requests and responses."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Cookies.copyOf()")," has been deprecated in favor of ",(0,i.kt)("inlineCode",{parentName:"li"},"Cookies.of()"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2286"},"#2286")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AnnotatedServiceBuildingBuilder.requestConverter()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"responseConverter()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"exceptionHandler()")," have been deprecated in favor of ",(0,i.kt)("inlineCode",{parentName:"li"},"requestConverters()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"responseConverters()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"exceptionHandlers()")," respectively. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2242"},"#2242")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Sampler.rateLimited()")," has been deprecated in favor of ",(0,i.kt)("inlineCode",{parentName:"li"},"rateLimiting()"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2122"},"#2122")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2289"},"#2289")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"THttpService.of()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"ofFormats()")," factory methods that require a ",(0,i.kt)("inlineCode",{parentName:"li"},"Map<String, ?>")," have been deprecated. Use ",(0,i.kt)("inlineCode",{parentName:"li"},"THttpService.builder()")," and call ",(0,i.kt)("inlineCode",{parentName:"li"},"THttpService.addService(String, Object)")," multiple times instead. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2285"},"#2285"))),(0,i.kt)("h2",{id:"️-breaking-changes",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-breaking-changes","aria-label":"️ breaking changes permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"☢️ Breaking changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ServerBuilder.blockingTaskExecutor()")," now requires a ",(0,i.kt)("inlineCode",{parentName:"li"},"ScheduledExecutorService")," instead of an ",(0,i.kt)("inlineCode",{parentName:"li"},"ExecutorService"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2269"},"#2269")),(0,i.kt)("li",{parentName:"ul"},"The behavior of automatic redirection for the case of missing trailing slash (",(0,i.kt)("inlineCode",{parentName:"li"},"/"),") has been changed (in a good way). ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2116"},"#2116")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2292"},"#2292"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"For example, previously, when a client sent a request to ",(0,i.kt)("inlineCode",{parentName:"li"},"/docs"),", the following server routed the request to ",(0,i.kt)("inlineCode",{parentName:"li"},"TomcatService"),":",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Server server =\n    Server.builder()\n          .serviceUnder("/docs", new DocService())\n          .serviceUnder("/", TomcatSerivce.forClassPath(...))\n          .build();\n'))),(0,i.kt)("li",{parentName:"ul"},"However, from this release, the request will not be routed to ",(0,i.kt)("inlineCode",{parentName:"li"},"TomcatService")," but the server will issue a redirect response to ",(0,i.kt)("inlineCode",{parentName:"li"},"/docs/"),"."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ProxiedAddresses")," class has been redesigned to handle the case of more than one intermediary proxy server. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/1631"},"#1631")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2294"},"#2294")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Cookies")," now uses Armeria's own ",(0,i.kt)("inlineCode",{parentName:"li"},"Cookie"),". ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2286"},"#2286")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Cookies")," now may contain the cookies with the same name. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2286"},"#2286"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Note that RFC does not prohibit duplicate names at all, so this is correct behavior."))),(0,i.kt)("li",{parentName:"ul"},"Annotated services now accept only the first ",(0,i.kt)("inlineCode",{parentName:"li"},'"Cookie"')," header when decoding cookies. Sending multiple ",(0,i.kt)("inlineCode",{parentName:"li"},'"Cookie"')," headers was a violation of RFC 6265 anyway. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2286"},"#2286")),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"ThriftCallService")," factory method with signature ",(0,i.kt)("inlineCode",{parentName:"li"},"of(Map<String, ? extends Iterable<?>>)")," has been changed to ",(0,i.kt)("inlineCode",{parentName:"li"},"of(Map<String, ? extends Iterable<?>>)")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2285"},"#2285"))),(0,i.kt)("h2",{id:"-dependencies",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-dependencies","aria-label":" dependencies permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"⛓ Dependencies"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Brave 1.3.1"),(0,i.kt)("li",{parentName:"ul"},"Jetty 9.4.22 -> 9.4.24"),(0,i.kt)("li",{parentName:"ul"},"Micrometer 1.3.1 -> 1.3.2"),(0,i.kt)("li",{parentName:"ul"},"Netty TCNative BoringSSL 2.0.27 -> 2.0.26"),(0,i.kt)("li",{parentName:"ul"},"Project Reactor 3.3.0 -> 3.3.1"),(0,i.kt)("li",{parentName:"ul"},"RxJava2 2.2.14 -> 2.2.15"),(0,i.kt)("li",{parentName:"ul"},"Spring Boot 2.1.10 -> 2.2.1"),(0,i.kt)("li",{parentName:"ul"},"Tomcat 9.0.27 -> 9.0.29, 8.5.47 -> 8.5.49")),(0,i.kt)("h2",{id:"-thank-you",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#-thank-you","aria-label":" thank you permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🙇 Thank you"),(0,i.kt)(p,{usernames:["anuraaga","chrsow","heowc","hyangtack","ikhoon","imasahiro","JLLeitschuh","JunoJunho","magnuschatt","minwoox","monorisk","renaudb","sivaalli","stypr","tobias-","trustin"],mdxType:"ThankYou"}))}d.isMDXComponent=!0},20370:function(e,t,a){a(88025);var n=a(1923),r=a(25444),i=a(67294),s=a(55746),l=a(8284),o=a(96759),p=a(46731),m=a(9396),c=n.Z.Title,d=Object.keys(l)[0],h=u(d);function u(e){return e.substring(e.lastIndexOf("/")+1)}t.Z=function(e){var t={},a={},n={root:{"Latest news items":"/news","Latest release notes":"/release-notes","Past news items":"/news/list","Past release notes":"/release-notes/list"},"Recent news items":t,"Recent releases":a};Object.entries(s).forEach((function(e){var a=e[0],n=e[1];t[n]=a})),Object.entries(l).forEach((function(e){var t=e[0],n=e[1];a[n]=t}));var k=(0,m.Z)(e.location),N=e.version||u(k);return N.match(/^[0-9]/)||(N=void 0),i.createElement(p.Z,Object.assign({},e,{candidateMdxNodes:[],index:n,prefix:"release-notes",pageTitle:N?N+" release notes":e.pageTitle,pageTitleSuffix:"Armeria release notes"}),N&&N!==h?i.createElement(o.Ch,null,"You're seeing the release note of an old version. Check out"," ",i.createElement(r.Link,{to:d},"the latest release note"),"."):"",N?i.createElement(c,{id:"release-notes",level:1},i.createElement("a",{href:"#release-notes","aria-label":"release notes permalink",className:"anchor before"},i.createElement("svg",{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},i.createElement("path",{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),N," release notes"):"",e.children)}},55746:function(e){e.exports=JSON.parse('{"/news/20231208-newsletter-6":"Armeria Newsletter vol. 6","/news/20230426-newsletter-5":"Armeria Newsletter vol. 5","/news/20220714-newsletter-4":"Armeria Newsletter vol. 4","/news/20211029-newsletter-3":"Armeria Newsletter vol. 3","/news/20210202-newsletter-2":"Armeria Newsletter vol. 2","/news/20200703-newsletter-1":"Armeria Newsletter vol. 1","/news/20200514-newsletter-0":"Armeria Newsletter vol. 0"}')},8284:function(e){e.exports=JSON.parse('{"/release-notes/1.29.4":"v1.29.4","/release-notes/1.29.3":"v1.29.3","/release-notes/1.29.2":"v1.29.2","/release-notes/1.29.1":"v1.29.1","/release-notes/1.29.0":"v1.29.0","/release-notes/1.28.4":"v1.28.4","/release-notes/1.28.3":"v1.28.3","/release-notes/1.28.2":"v1.28.2","/release-notes/1.28.1":"v1.28.1","/release-notes/1.28.0":"v1.28.0","/release-notes/1.27.3":"v1.27.3","/release-notes/1.27.2":"v1.27.2","/release-notes/1.27.1":"v1.27.1","/release-notes/1.27.0":"v1.27.0","/release-notes/1.26.4":"v1.26.4","/release-notes/1.26.3":"v1.26.3"}')}}]);
//# sourceMappingURL=component---src-pages-release-notes-0-97-0-mdx-f8efda4757c4ee97d4ac.js.map