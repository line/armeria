"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[5325],{28453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>o});var i=n(96540);const s={},a=i.createContext(s);function t(e){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:r},e.children)}},66042:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"1.31.0","title":"v1.31.0","description":"\ud83c\udf1f New features","source":"@site/src/content/release-notes/1.31.0.mdx","sourceDirName":".","slug":"/1.31.0","permalink":"/release-notes/1.31.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/release-notes/1.31.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2024-11-13T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v1.31.1","permalink":"/release-notes/1.31.1"},"next":{"title":"v1.30.3","permalink":"/release-notes/1.30.3"}}');var s=n(74848),a=n(28453);const t={date:new Date("2024-11-13T00:00:00.000Z")},o="v1.31.0",c={},l=[{value:"\ud83c\udf1f New features",id:"-new-features",level:2},{value:"\ud83d\udcc8 Improvements",id:"-improvements",level:2},{value:"\ud83d\udee0\ufe0f Bug fixes",id:"\ufe0f-bug-fixes",level:2},{value:"\u2622\ufe0f Breaking changes",id:"\ufe0f-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47 Thank you",id:"-thank-you",level:2}];function h(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{ThankYou:n}=r;return n||function(e,r){throw new Error("Expected "+(r?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.header,{children:[(0,s.jsx)(r.h1,{id:"v1310",children:"v1.31.0"}),(0,s.jsx)(r.p,{children:(0,s.jsx)(r.em,{children:"November 13, 2024"})})]}),"\n",(0,s.jsx)(r.h2,{id:"-new-features",children:"\ud83c\udf1f New features"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Dynamic TLS Configuration"}),": You can now update TLS configurations dynamically using ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/TlsProvider.html",children:"TlsProvider"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5033",children:"#5033"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5228",children:"#5228"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["You can create a ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/TlsProvider.html",children:"TlsProvider"})," which specifies ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/TlsKeyPair.html",children:"TlsKeyPair"})," dynamically."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'// return a TlsKeyPair for host patterns\nTlsProvider tlsProvider = TlsProvider\n  .builder()\n  .keyPair("*.a.com", TlsKeyPair.of(...))\n  .keyPair("*.b.com", TlsKeyPair.of(...))\n  .build();\n\n// return a TlsKeyPair dynamically\nTlsProvider tlsProvider = hostname -> TlsKeyPair.of(...);\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/TlsProvider.html",children:"TlsProvider"})," can be used for both servers and clients."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"// client-side\nClientFactory\n  .builder()\n  .tlsProvider(tlsProvider);\n\n// server-side\nServer\n  .builder()\n  .tlsProvider(tlsProvider);\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Access to Raw Request Path"}),": You can access the raw request path via ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#rawPath()",children:"ServiceRequestContext#rawPath()"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5931",children:"#5931"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5932",children:"#5932"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["This can be useful when you need to get the original request path sent from the client, even if it's potentially insecure.","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:"ServiceRequestContext ctx = ...;\nString rawPath = ctx.rawPath();\n// rawPath may contain unencoded, invalid or insecure characters.\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Additional Static Factory Methods for ResponseEntity"}),": More static factory methods are added for ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseEntity.html",children:"ResponseEntity"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5954",children:"#5954"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'ResponseEntity<Object> response = ResponseEntity.of(200);\nResponseEntity<String> response = ResponseEntity.of("Hello!");\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Timeout Support for HttpRequest and HttpResponse"}),": You can specify ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html#timeout(java.time.Duration)",children:"HttpRequest#timeout(Duration)"})," or ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html#timeout(java.time.Duration)",children:"HttpResponse#timeout(Duration)"})," to set a timeout\nfor an ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html",children:"HttpRequest"})," or ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html",children:"HttpResponse"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5744",children:"#5744"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5761",children:"#5761"})]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'HttpRequest\n  .streaming(HttpMethod.GET, "/")\n  .timeout(Duration.ofSeconds(1)) // timeout if there is a delay exceeding 1 second between each data chunk\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Nacos Integration for Server Registration and Endpoint Retrieval"}),": You can now register your server to or retrieve ",(0,s.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html",children:"Endpoint"})," from\na ",(0,s.jsx)(r.a,{href:"https://nacos.io/",children:"Nacos"})," registry server. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5365",children:"#5365"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5409",children:"#5409"})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Use ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/nacos/NacosUpdatingListener.html",children:"NacosUpdatingListener"})," to register the ",(0,s.jsx)(r.a,{href:"typeplural://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Server.html",children:"Server"})," to ",(0,s.jsx)(r.a,{href:"https://nacos.io/",children:"Nacos"}),":"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'Server server = ...;\nserver.addListener(\n  NacosUpdatingListener\n    .builder(nacosUri, "my-service")\n    ...\n    .build());\n'})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Use ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/nacos/NacosEndpointGroup.html",children:"NacosEndpointGroup"})," for clients:"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",children:'EndpointGroup group = NacosEndpointGroup.of(nacosUri, "my-service");\nWebClient client = WebClient.of(SessionProtocol.HTTP, group);\n'})}),"\n"]}),"\n"]}),"\n","\n",(0,s.jsx)(r.h2,{id:"-improvements",children:"\ud83d\udcc8 Improvements"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/xds/client/endpoint/XdsEndpointGroup.html",children:"XdsEndpointGroup"})," now supports ",(0,s.jsx)(r.code,{children:"disable_active_health_check"}),". ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5879",children:"#5879"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-bug-fixes",children:"\ud83d\udee0\ufe0f Bug fixes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["DNS resolver now correctly adds search domains for hostnames with trailing dots. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5963",children:"#5963"})]}),"\n",(0,s.jsxs)(r.li,{children:["CORS headers for failed requests are now correctly set even when a custom ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerErrorHandler.html",children:"ServerErrorHandler"})," is configured. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5493",children:"#5493"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5939",children:"#5939"})]}),"\n",(0,s.jsxs)(r.li,{children:["Fixed a bug where ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/AsyncServerInterceptor.html",children:"AsyncServerInterceptor"})," is incompatible with the OpenTelemetry gRPC agent. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5937",children:"#5937"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5938",children:"#5938"})]}),"\n",(0,s.jsxs)(r.li,{children:["The GraalVM native image metadata has been updated to reflect recent code changes. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5946",children:"#5946"})]}),"\n",(0,s.jsxs)(r.li,{children:["Spring Actuator correctly collects metrics when using Spring WebFlux integration. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5882",children:"#5882"})," ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5884",children:"#5884"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"\ufe0f-breaking-changes",children:"\u2622\ufe0f Breaking changes"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["ABI compatibility of ",(0,s.jsx)(r.a,{href:"type://https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseEntity.html#of(com.linecorp.armeria.common.ResponseHeaders)",children:"ResponseEntity#of(ResponseHeaders)"})," has been broken. ",(0,s.jsx)(r.a,{href:"https://github.com/line/armeria/issues/5954",children:"#5954"})]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Brotli4j 1.16.0 \u2192 1.17.0"}),"\n",(0,s.jsx)(r.li,{children:"java-control-plane 1.0.45 \u2192 1.0.46"}),"\n",(0,s.jsx)(r.li,{children:"Eureka 2.0.3 \u2192 2.0.4"}),"\n",(0,s.jsx)(r.li,{children:"GraphQL Kotlin 7.1.4 \u2192 8.2.1"}),"\n",(0,s.jsx)(r.li,{children:"Java gRPC 1.65.1 \u2192 1.68.1"}),"\n",(0,s.jsx)(r.li,{children:"Jackson 2.17.2 \u2192 2.18.1"}),"\n",(0,s.jsxs)(r.li,{children:["Jetty","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"11.0.22 \u2192 11.0.24"}),"\n",(0,s.jsx)(r.li,{children:"12.0.12 \u2192 12.0.14"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:"Kotlin 3.8.0 \u2192 3.8.1"}),"\n",(0,s.jsx)(r.li,{children:"Kotlin coroutines 1.8.1 \u2192 1.9.0"}),"\n",(0,s.jsx)(r.li,{children:"Fabric8 Kubernetes Client 6.13.1 \u2192 6.13.4"}),"\n",(0,s.jsx)(r.li,{children:"Micrometer 1.13.2 \u2192 1.13.6"}),"\n",(0,s.jsx)(r.li,{children:"Micrometer Tracing 1.3.2 \u2192 1.3.5"}),"\n",(0,s.jsx)(r.li,{children:"Netty 4.1.112.Final \u2192 4.1.115.Final"}),"\n",(0,s.jsx)(r.li,{children:"prometheus 1.3.1 \u2192 1.3.2"}),"\n",(0,s.jsx)(r.li,{children:"Protobuf 3.25.1 \u2192 3.25.5"}),"\n",(0,s.jsx)(r.li,{children:"protobuf-jackson 2.5.0 \u2192 2.6.0"}),"\n",(0,s.jsx)(r.li,{children:"Reactor 3.6.8 \u2192 3.6.11"}),"\n",(0,s.jsx)(r.li,{children:"RXJava 3.1.8 \u2192 3.1.9"}),"\n",(0,s.jsx)(r.li,{children:"Sangria 4.1.1 \u2192 4.2.2"}),"\n",(0,s.jsxs)(r.li,{children:["Scala","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"2.12.19 \u2192 2.12.20"}),"\n",(0,s.jsx)(r.li,{children:"2.13.14 \u2192 2.13.15"}),"\n",(0,s.jsx)(r.li,{children:"3.4.2 \u2192 3.6.1"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.li,{children:"Spring 6.1.11 \u2192 6.1.14"}),"\n",(0,s.jsx)(r.li,{children:"Spring Boot 3.3.2 \u2192 3.3.5"}),"\n",(0,s.jsxs)(r.li,{children:["Tomcat","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"9.0.91 \u2192 9.0.96"}),"\n",(0,s.jsx)(r.li,{children:"10.1.26 \u2192 10.1.31"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"-thank-you",children:"\ud83d\ude47 Thank you"}),"\n",(0,s.jsx)(n,{usernames:["Bue-von-hon","JiwonKKang","KarboniteKream","KonaEspresso94","Mina-1316","be-hase","blue-hope","chickenchickenlove","friscoMad","ikhoon","jrhee17","kabigon-sung","minwoox","my4-dev","roderick675","sjy982","trustin","yzfeng2020"]})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);