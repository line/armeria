<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Armeria</title>
        <link>https://armeria.dev</link>
        <lastBuildDate>Wed, 07 Jan 2026 07:09:16 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <language>en</language>
        <copyright>¬© 2015-2026, LY Corporation</copyright>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.35.0]]></title>
            <link>https://armeria.dev/release-notes/1.35.0/</link>
            <guid>https://armeria.dev/release-notes/1.35.0/</guid>
            <pubDate>Wed, 07 Jan 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[Dynamic Athenz Resource Resolution: You can now determine the target resource for Athenz authorization dynamically from the request using AthenzResourceProvider. #6541 // Example 1: Use the request pa...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.34.2]]></title>
            <link>https://armeria.dev/release-notes/1.34.2/</link>
            <guid>https://armeria.dev/release-notes/1.34.2/</guid>
            <pubDate>Tue, 30 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[A bug was fixed where armeria-xds-api wasn&#x27;t compatible with Protobuf 4 runtime since 1.34.0. #6555 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their b...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.34.1]]></title>
            <link>https://armeria.dev/release-notes/1.34.1/</link>
            <guid>https://armeria.dev/release-notes/1.34.1/</guid>
            <pubDate>Thu, 04 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now generate self-signed certificates with one or more Subject Alternative Names. #6534 The xds module no longer brings in dependencies with binary incompatibility. #6532 XdsBootstrap no longe...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.34.0]]></title>
            <link>https://armeria.dev/release-notes/1.34.0/</link>
            <guid>https://armeria.dev/release-notes/1.34.0/</guid>
            <pubDate>Fri, 28 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Model Context Protocol (MCP) Server: You can now build MCP services on top of Armeria using the armeria-ai-mcp module. #6513 #6492 // Create an MCP server transportvar transport = ArmeriaStreamableSer...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.33.4]]></title>
            <link>https://armeria.dev/release-notes/1.33.4/</link>
            <guid>https://armeria.dev/release-notes/1.33.4/</guid>
            <pubDate>Thu, 28 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[All client-side request logs, including those that are aborted concurrently, will now be completed correctly. #6414 The deadlock between Flags and RequestContextUtil static initialization is eliminate...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.33.3]]></title>
            <link>https://armeria.dev/release-notes/1.33.3/</link>
            <guid>https://armeria.dev/release-notes/1.33.3/</guid>
            <pubDate>Thu, 28 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed Athenz access token validation to work with RFC-compliant JWKS. #6393 FileService now correctly handles HEAD method. #6392 #6395 üôá Thank you‚Äã This release was possible thanks to the following c...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.33.2]]></title>
            <link>https://armeria.dev/release-notes/1.33.2/</link>
            <guid>https://armeria.dev/release-notes/1.33.2/</guid>
            <pubDate>Thu, 28 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed HTTP/2 flow control by using a correct stream ID for computing the window size. #6367 #6371 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their brillian...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.33.1]]></title>
            <link>https://armeria.dev/release-notes/1.33.1/</link>
            <guid>https://armeria.dev/release-notes/1.33.1/</guid>
            <pubDate>Thu, 14 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now use @RequiresAthenzRole when armeria.athenz is configured in Spring integration. #6348 // in application.ymlarmeria: athenz: zts-uri: https://athenz.example.com:8443/zts/v1 domains: my-ath...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.33.0]]></title>
            <link>https://armeria.dev/release-notes/1.33.0/</link>
            <guid>https://armeria.dev/release-notes/1.33.0/</guid>
            <pubDate>Wed, 06 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Athenz Integration: You can now use the new armeria-athenz module to easily obtain and validate Athenz tokens for secure service-to-service communication. #6050 #6321 Server-side validation: Use @Requ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.32.5]]></title>
            <link>https://armeria.dev/release-notes/1.32.5/</link>
            <guid>https://armeria.dev/release-notes/1.32.5/</guid>
            <pubDate>Tue, 15 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[The default DNS resolver now correctly performs TCP fallback. #6202 Recipient URIs in SAML assertions are now compared more robustly, reducing the chance of false mismatches. #6199 üôá Thank you‚Äã This ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.32.4]]></title>
            <link>https://armeria.dev/release-notes/1.32.4/</link>
            <guid>https://armeria.dev/release-notes/1.32.4/</guid>
            <pubDate>Tue, 08 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a potential deadlock in RetryingClient caused by an incomplete RequestLog. #5714 Fixed a bug where RequestLog is not completed when the HTTP response is fully consumed on the client. #5714 Handl...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.32.3]]></title>
            <link>https://armeria.dev/release-notes/1.32.3/</link>
            <guid>https://armeria.dev/release-notes/1.32.3/</guid>
            <pubDate>Mon, 17 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a bug where outdated endpoints were not removed in KubernetesEndpointGroup. #6161 Spring integration doesn&#x27;t throw an exception anymore when the port that is less than 0 is specified. #6162...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.32.2]]></title>
            <link>https://armeria.dev/release-notes/1.32.2/</link>
            <guid>https://armeria.dev/release-notes/1.32.2/</guid>
            <pubDate>Fri, 14 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[KubernetesEndpointGroup works properly even when the namespace is specified. #6159 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their brilliant ideas and awe...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.32.1]]></title>
            <link>https://armeria.dev/release-notes/1.32.1/</link>
            <guid>https://armeria.dev/release-notes/1.32.1/</guid>
            <pubDate>Thu, 13 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[The client does not send an RST_STREAM when an UnprocessedRequestException is raised. #6157 KubernetesEndpointGroup.whenReady() is now completed after collecting all endpoints. #6154 The cumulative de...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.32.0]]></title>
            <link>https://armeria.dev/release-notes/1.32.0/</link>
            <guid>https://armeria.dev/release-notes/1.32.0/</guid>
            <pubDate>Wed, 05 Mar 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Load Balancer: You can now create a LoadBalancer using various load balancing strategies to select an element from a list of candidates. #5289 #5779 List&lt;Endpoint&gt; candidates = ...;LoadBalancer....]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.30.3]]></title>
            <link>https://armeria.dev/release-notes/1.30.3/</link>
            <guid>https://armeria.dev/release-notes/1.30.3/</guid>
            <pubDate>Tue, 14 Jan 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Requests with a Content-Length header exceeding the allowed limit can now be rejected early in the request flow, reducing wasted resources and improving efficiency. #5880 #6032 Fixed a bug where a tra...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.31.3]]></title>
            <link>https://armeria.dev/release-notes/1.31.3/</link>
            <guid>https://armeria.dev/release-notes/1.31.3/</guid>
            <pubDate>Wed, 11 Dec 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[ResponseTimeoutMode.FROM_START correctly bounds requests that go through RetryingClient. #6025 Fix the bug where EventLoop is blocked for a long time by ConnectionPoolListener.metricCollecting() when ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.31.2]]></title>
            <link>https://armeria.dev/release-notes/1.31.2/</link>
            <guid>https://armeria.dev/release-notes/1.31.2/</guid>
            <pubDate>Tue, 03 Dec 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a bug where stale endpoints remained when a Kubernetes service was updated. #6012 Fix a bug where weights could unintentionally be set to 0 in ramping-up strategies. #6014 üôá Thank you‚Äã This rel...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.31.1]]></title>
            <link>https://armeria.dev/release-notes/1.31.1/</link>
            <guid>https://armeria.dev/release-notes/1.31.1/</guid>
            <pubDate>Fri, 22 Nov 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a race condition which intermittently prevented RequestLog from completing. #5981 #5986 armeria-grpc no longer exposes protobuf-java 4.x as a compile-time dependency. #5990 #5992 üìà Improvements...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.30.2]]></title>
            <link>https://armeria.dev/release-notes/1.30.2/</link>
            <guid>https://armeria.dev/release-notes/1.30.2/</guid>
            <pubDate>Fri, 22 Nov 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a race condition which intermittently prevented RequestLog from completing. #5981 #5986 Fixed a bug where the original request path is not exposed to ServiceRequestContext. #5931 #5932 You can a...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.31.0]]></title>
            <link>https://armeria.dev/release-notes/1.31.0/</link>
            <guid>https://armeria.dev/release-notes/1.31.0/</guid>
            <pubDate>Wed, 13 Nov 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Dynamic TLS Configuration: You can now update TLS configurations dynamically using TlsProvider #5033 #5228 You can create a TlsProvider which specifies TlsKeyPair dynamically. // return a TlsKeyPair f...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.30.1]]></title>
            <link>https://armeria.dev/release-notes/1.30.1/</link>
            <guid>https://armeria.dev/release-notes/1.30.1/</guid>
            <pubDate>Tue, 10 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a bug where timeout tasks leak when using ResponseTimeoutMode.FROM_START with RetryingClient. #5896 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.30.0]]></title>
            <link>https://armeria.dev/release-notes/1.30.0/</link>
            <guid>https://armeria.dev/release-notes/1.30.0/</guid>
            <pubDate>Mon, 12 Aug 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Outlier Detection for Connections: You can now use OutlierDetection to detect unhealthy connections and close them gracefully. #5751 #5763 OutlierDetectingRule rule = OutlierDetectingRule .builder() ....]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.29.4]]></title>
            <link>https://armeria.dev/release-notes/1.29.4/</link>
            <guid>https://armeria.dev/release-notes/1.29.4/</guid>
            <pubDate>Tue, 30 Jul 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[An annotated service that uses a @Header annotation with the specified value now works correctly. #5841 This is a regression introduced by #5547, affecting 1.29.0 through 1.29.3. üôá Thank you‚Äã This re...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.29.3]]></title>
            <link>https://armeria.dev/release-notes/1.29.3/</link>
            <guid>https://armeria.dev/release-notes/1.29.3/</guid>
            <pubDate>Fri, 26 Jul 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[NullPointerException is no longer raised when GraphQlService handles errors. #5815 #5816 Fixed a regression where a protocol violation error is not handled by ServerErrorHandler.onProtocolViolation() ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.29.2]]></title>
            <link>https://armeria.dev/release-notes/1.29.2/</link>
            <guid>https://armeria.dev/release-notes/1.29.2/</guid>
            <pubDate>Wed, 10 Jul 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Service binding builder methods now correctly return the self-types. #5797 The peeled exception is now correctly passed to GrpcExceptionHandlerFunction.apply() method. #5796 Endpoint selection calls t...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.29.1]]></title>
            <link>https://armeria.dev/release-notes/1.29.1/</link>
            <guid>https://armeria.dev/release-notes/1.29.1/</guid>
            <pubDate>Fri, 28 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[The default GrpcExceptionHandlerFunction now properly handles and returns the correct gRPC Status. #5786 The ExchangeType is now correctly detected for the default WebClient. #5787 A duplicate key exc...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.29.0]]></title>
            <link>https://armeria.dev/release-notes/1.29.0/</link>
            <guid>https://armeria.dev/release-notes/1.29.0/</guid>
            <pubDate>Wed, 12 Jun 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Armeria HTTP/JSON to GRPC transcoding service now supports Custom methods. #5613 rpc Watch(WatchRequest) returns (WatchResponse) { option (google.api.http) = { post: &quot;/v1:watch&quot; // üëàüëàüëà bo...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.28.4]]></title>
            <link>https://armeria.dev/release-notes/1.28.4/</link>
            <guid>https://armeria.dev/release-notes/1.28.4/</guid>
            <pubDate>Mon, 29 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[XdsEndpointGroup now adheres to the LbSubsetFallbackPolicy.NO_FALLBACK policy. #5649 The HttpResponse returned from an HttpService is now correctly recovered from the exception. #5648 Aborted Deferred...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.28.3]]></title>
            <link>https://armeria.dev/release-notes/1.28.3/</link>
            <guid>https://armeria.dev/release-notes/1.28.3/</guid>
            <pubDate>Fri, 26 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[The annotated service with a Kotlin suspend function works correctly even with a nullable parameter. #5638 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.28.2]]></title>
            <link>https://armeria.dev/release-notes/1.28.2/</link>
            <guid>https://armeria.dev/release-notes/1.28.2/</guid>
            <pubDate>Wed, 17 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Unary and response streaming requests are now properly timed out if they fail to receive the body within the designated timeout period. #5572 #5614 üôá Thank you‚Äã This release was possible thanks to th...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.28.1]]></title>
            <link>https://armeria.dev/release-notes/1.28.1/</link>
            <guid>https://armeria.dev/release-notes/1.28.1/</guid>
            <pubDate>Mon, 15 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed bug where CorsService doesn&#x27;t check the Origin header case-insensitively. #5602 ‚õì Dependencies‚Äã Brave 6.0.2 ‚Üí 6.0.3 üôá Thank you‚Äã This release was possible thanks to the following contribut...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.28.0]]></title>
            <link>https://armeria.dev/release-notes/1.28.0/</link>
            <guid>https://armeria.dev/release-notes/1.28.0/</guid>
            <pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now create a Spring HTTP Interface backed by Armeria&#x27;s WebClient. #5370 WebClient webClient = ...;ArmeriaHttpExchangeAdapter adapter = ArmeriaHttpExchangeAdapter.of(webClient);MyService m...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.27.3]]></title>
            <link>https://armeria.dev/release-notes/1.27.3/</link>
            <guid>https://armeria.dev/release-notes/1.27.3/</guid>
            <pubDate>Tue, 26 Mar 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see NullPointerException when creating Thrift clients in a multi-threaded environment. #5497 IllegalReferenceCountException no longer occurs during WebSocket handshake. #5495 When a clie...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.27.2]]></title>
            <link>https://armeria.dev/release-notes/1.27.2/</link>
            <guid>https://armeria.dev/release-notes/1.27.2/</guid>
            <pubDate>Mon, 26 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Armeria&#x27;s SAML integration now rejects unsigned SAML messages by default. CVE-2024-1735 You can set SamlServiceProviderBuilder.signatureRequired() to control whether to accept unsigned SAML messa...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.27.1]]></title>
            <link>https://armeria.dev/release-notes/1.27.1/</link>
            <guid>https://armeria.dev/release-notes/1.27.1/</guid>
            <pubDate>Wed, 07 Feb 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Restored dependency breaking changes in the Brave integration module. #5438 armeria-brave now consistently uses Brave 5. armeria-brave5 and armeria-brave6 modules have been introduced to let users cho...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.27.0]]></title>
            <link>https://armeria.dev/release-notes/1.27.0/</link>
            <guid>https://armeria.dev/release-notes/1.27.0/</guid>
            <pubDate>Tue, 30 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[xDS-based EndpointGroup: You can utilize xDS protocol to create XdsEndpointGroup for service discovery. #5342 #5336 XdsBootstrap bootstrap = XdsBootstrap.of(...);EndpointGroup endpointGroup = XdsEndpo...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.26.4]]></title>
            <link>https://armeria.dev/release-notes/1.26.4/</link>
            <guid>https://armeria.dev/release-notes/1.26.4/</guid>
            <pubDate>Fri, 08 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a bug where a RequestLog isn&#x27;t complete when an HttpResponse is cancelled. #5312 gRPC HTTP/JSON transcoding service now sends 400 Bad Request when the request body is invalid JSON. #5306 #5...]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 6]]></title>
            <link>https://armeria.dev/news/20231208-newsletter-6</link>
            <guid>https://armeria.dev/news/20231208-newsletter-6</guid>
            <pubDate>Fri, 08 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[From the devs]]></description>
            <content:encoded><![CDATA[<video class="hideOnReducedMotion" src="/assets/medias/armeria-f275354e25be493d6b926dc433dd3ac1.m4v" preload="none" autoplay="" muted="" loop="" style="width:282px;height:112px"><img src="https://armeria.dev/assets/images/armeria-9a5f775a301c3145a3ef29a69c0b3dee.gif" loading="lazy" width="282" height="112" alt="Armeria Logo Animation"></video>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20231208-newsletter-6#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">‚ú® We've released several new versions since our last newsletter with a bunch of new exciting features! Here are the highlights between <a class="" href="https://armeria.dev/release-notes/1.24.0">1.24.0</a> and <a class="" href="https://armeria.dev/release-notes/1.26.4">1.26.4</a>.<!-- -->
<ul>
<li class="">WebSocket support</li>
<li class="">Unix domain socket support</li>
<li class="">Out-of-the-box GraalVM native image configuration</li>
<li class="">gRPC Richer Error Model support with <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/grpc/GoogleGrpcExceptionHandlerFunction.html" title="GoogleGrpcExceptionHandlerFunction">GoogleGrpcExceptionHandlerFunction<span class="suffix_sw1f"></span></a></code></li>
</ul>
</li>
</ul></div>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20231208-newsletter-6#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üéôÔ∏è <a href="https://www.youtube.com/watch?v=LbBGUDGXuV8" target="_blank" rel="noopener noreferrer" class=""><strong>The latest in Spring Boot + Armeria integration</strong></a>
<ul>
<li class="">Dive into the synergistic integration of Spring Boot 3 and Armeria in this enlightening webinar by <a href="https://github.com/joshlong" target="_blank" rel="noopener noreferrer" class=""><strong>@joshlong</strong></a> and <a href="https://github.com/trustin" target="_blank" rel="noopener noreferrer" class=""><strong>@trustin</strong></a>. Discover the cutting-edge features and seamless compatibility that make them an unbeatable combination for modern server-side development.</li>
</ul>
</li>
<li class="">‚öôÔ∏è <a href="https://www.youtube.com/watch?v=xEvcG_zNwiw" target="_blank" rel="noopener noreferrer" class=""><strong>Internal workings of an HTTP client</strong></a>
<ul>
<li class="">Think you've mastered how HTTP clients work internally? Join <a href="https://github.com/jrhee17" target="_blank" rel="noopener noreferrer" class=""><strong>@jrhee17</strong></a> at JCConf Taiwan 2023 for an eye-opening exploration into the intricate mechanics of HTTP clients.</li>
</ul>
</li>
<li class="">‚ö° <a href="https://www.youtube.com/watch?v=g_z_Pbjd0v0" target="_blank" rel="noopener noreferrer" class=""><strong>gRPC supercharged with Armeria</strong></a>
<ul>
<li class="">Elevate your gRPC expertise with <a href="https://github.com/trustin" target="_blank" rel="noopener noreferrer" class=""><strong>@trustin</strong></a> as he introduces common microservice patterns and techniques, from client-side load balancing to robust automatic retries and circuit breakers. Learn how you can implement them easily using Armeria's out-of-the-box features.</li>
</ul>
</li>
<li class="">‚ù§Ô∏è‚Äçüî• <strong>A heartfelt thanks to Gradle, Inc</strong>
<ul>
<li class="">Immense gratitude to Gradle, Inc for their donation of the <a href="https://gradle.com/" target="_blank" rel="noopener noreferrer" class="">Gradle Enterprise</a> instance. Their collaboration has been instrumental in exponentially enhancing our build performance. This generosity and partnership are truly invaluable to our community.</li>
</ul>
</li>
</ul></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="customer-highlight">Customer highlight<a href="https://armeria.dev/news/20231208-newsletter-6#customer-highlight" class="hash-link" aria-label="Direct link to Customer highlight" title="Direct link to Customer highlight" translate="no">‚Äã</a></h3>
<div class="noBullet"><ul>
<li class="">üí≤ <strong>Square <a href="https://code.cash.app/" target="_blank" rel="noopener noreferrer" class="">CashApp engineering</a></strong> has adopted Armeria as their microservice framework! Top 3 benefits according to the CashApp team:<!-- -->
<ul>
<li class="">Good docs &amp; responsive community</li>
<li class="">Excellent Kotlin support</li>
<li class="">Outstanding gRPC¬∑HTTP¬∑etc support</li>
</ul>
</li>
<li class="">üôã <a href="https://github.com/line/armeria/discussions/4626" target="_blank" rel="noopener noreferrer" class=""><strong>Who else are using Armeria?</strong></a></li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20231208-newsletter-6#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">ü§î Your opinion means a lot to us. Please let us know what you think about these proposals:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/4792" target="_blank" rel="noopener noreferrer" class="">#4792</a> What would be the sensible default configuration for Armeria's latency metrics?</li>
<li class=""><a href="https://github.com/line/armeria/issues/5161" target="_blank" rel="noopener noreferrer" class="">#5161</a> What features and customizability would you expect from Armeria's rolling updates support?</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20231208-newsletter-6#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üî∞ Want to contribute but not sure where to start from? Try these issues:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/5289" target="_blank" rel="noopener noreferrer" class="">#5289</a> Add <code>EventLoopSchedulerFactory</code></li>
<li class=""><a href="https://github.com/line/armeria/issues/5219" target="_blank" rel="noopener noreferrer" class="">#5219</a> Provide an option to preserve %-encoding in the request path</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20231208-newsletter-6#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20231208-newsletter-6#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/nao0811ta"><img src="https://github.com/nao0811ta.png?size=128" width="64" height="64" alt="@nao0811ta" title="@nao0811ta" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mscheong01"><img src="https://github.com/mscheong01.png?size=128" width="64" height="64" alt="@mscheong01" title="@mscheong01" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/staktrace"><img src="https://github.com/staktrace.png?size=128" width="64" height="64" alt="@staktrace" title="@staktrace" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/richieyan"><img src="https://github.com/richieyan.png?size=128" width="64" height="64" alt="@richieyan" title="@richieyan" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/syleeeee"><img src="https://github.com/syleeeee.png?size=128" width="64" height="64" alt="@syleeeee" title="@syleeeee" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/vkostyukov"><img src="https://github.com/vkostyukov.png?size=128" width="64" height="64" alt="@vkostyukov" title="@vkostyukov" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/geun-son"><img src="https://github.com/geun-son.png?size=128" width="64" height="64" alt="@geun-son" title="@geun-son" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Kyurenpoto"><img src="https://github.com/Kyurenpoto.png?size=128" width="64" height="64" alt="@Kyurenpoto" title="@Kyurenpoto" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/arinchampatidd"><img src="https://github.com/arinchampatidd.png?size=128" width="64" height="64" alt="@arinchampatidd" title="@arinchampatidd" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/russell-yoo"><img src="https://github.com/russell-yoo.png?size=128" width="64" height="64" alt="@russell-yoo" title="@russell-yoo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Dogacel"><img src="https://github.com/Dogacel.png?size=128" width="64" height="64" alt="@Dogacel" title="@Dogacel" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/r3mariano"><img src="https://github.com/r3mariano.png?size=128" width="64" height="64" alt="@r3mariano" title="@r3mariano" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sh-cho"><img src="https://github.com/sh-cho.png?size=128" width="64" height="64" alt="@sh-cho" title="@sh-cho" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/joonhaeng"><img src="https://github.com/joonhaeng.png?size=128" width="64" height="64" alt="@joonhaeng" title="@joonhaeng" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/0lejk4"><img src="https://github.com/0lejk4.png?size=128" width="64" height="64" alt="@0lejk4" title="@0lejk4" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/rhodo"><img src="https://github.com/rhodo.png?size=128" width="64" height="64" alt="@rhodo" title="@rhodo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ks-yim"><img src="https://github.com/ks-yim.png?size=128" width="64" height="64" alt="@ks-yim" title="@ks-yim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/amirhadadi"><img src="https://github.com/amirhadadi.png?size=128" width="64" height="64" alt="@amirhadadi" title="@amirhadadi" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kezhenxu94"><img src="https://github.com/kezhenxu94.png?size=128" width="64" height="64" alt="@kezhenxu94" title="@kezhenxu94" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/himangi-db"><img src="https://github.com/himangi-db.png?size=128" width="64" height="64" alt="@himangi-db" title="@himangi-db" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/aki-s"><img src="https://github.com/aki-s.png?size=128" width="64" height="64" alt="@aki-s" title="@aki-s" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/esperar"><img src="https://github.com/esperar.png?size=128" width="64" height="64" alt="@esperar" title="@esperar" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/be-hase"><img src="https://github.com/be-hase.png?size=128" width="64" height="64" alt="@be-hase" title="@be-hase" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/marcingrzejszczak"><img src="https://github.com/marcingrzejszczak.png?size=128" width="64" height="64" alt="@marcingrzejszczak" title="@marcingrzejszczak" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/babjo"><img src="https://github.com/babjo.png?size=128" width="64" height="64" alt="@babjo" title="@babjo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mauhiz"><img src="https://github.com/mauhiz.png?size=128" width="64" height="64" alt="@mauhiz" title="@mauhiz" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/echo304"><img src="https://github.com/echo304.png?size=128" width="64" height="64" alt="@echo304" title="@echo304" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kojilin"><img src="https://github.com/kojilin.png?size=128" width="64" height="64" alt="@kojilin" title="@kojilin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ta7uw"><img src="https://github.com/ta7uw.png?size=128" width="64" height="64" alt="@ta7uw" title="@ta7uw" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hyperxpro"><img src="https://github.com/hyperxpro.png?size=128" width="64" height="64" alt="@hyperxpro" title="@hyperxpro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/injae-kim"><img src="https://github.com/injae-kim.png?size=128" width="64" height="64" alt="@injae-kim" title="@injae-kim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Bue-von-hon"><img src="https://github.com/Bue-von-hon.png?size=128" width="64" height="64" alt="@Bue-von-hon" title="@Bue-von-hon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/lishiki"><img src="https://github.com/lishiki.png?size=128" width="64" height="64" alt="@lishiki" title="@lishiki" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/bkkanq"><img src="https://github.com/bkkanq.png?size=128" width="64" height="64" alt="@bkkanq" title="@bkkanq" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sindhunaydu"><img src="https://github.com/sindhunaydu.png?size=128" width="64" height="64" alt="@sindhunaydu" title="@sindhunaydu" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ceki"><img src="https://github.com/ceki.png?size=128" width="64" height="64" alt="@ceki" title="@ceki" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/thomasbruggink"><img src="https://github.com/thomasbruggink.png?size=128" width="64" height="64" alt="@thomasbruggink" title="@thomasbruggink" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wreulicke"><img src="https://github.com/wreulicke.png?size=128" width="64" height="64" alt="@wreulicke" title="@wreulicke" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mraasvel"><img src="https://github.com/mraasvel.png?size=128" width="64" height="64" alt="@mraasvel" title="@mraasvel" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/my4-dev"><img src="https://github.com/my4-dev.png?size=128" width="64" height="64" alt="@my4-dev" title="@my4-dev" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ribafish"><img src="https://github.com/ribafish.png?size=128" width="64" height="64" alt="@ribafish" title="@ribafish" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sfc-gh-skabanov"><img src="https://github.com/sfc-gh-skabanov.png?size=128" width="64" height="64" alt="@sfc-gh-skabanov" title="@sfc-gh-skabanov" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mynameisjwlee"><img src="https://github.com/mynameisjwlee.png?size=128" width="64" height="64" alt="@mynameisjwlee" title="@mynameisjwlee" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/yunjoopark"><img src="https://github.com/yunjoopark.png?size=128" width="64" height="64" alt="@yunjoopark" title="@yunjoopark" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Kyoungwoong"><img src="https://github.com/Kyoungwoong.png?size=128" width="64" height="64" alt="@Kyoungwoong" title="@Kyoungwoong" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/yswdqz"><img src="https://github.com/yswdqz.png?size=128" width="64" height="64" alt="@yswdqz" title="@yswdqz" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tomatophobia"><img src="https://github.com/tomatophobia.png?size=128" width="64" height="64" alt="@tomatophobia" title="@tomatophobia" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/haneepark"><img src="https://github.com/haneepark.png?size=128" width="64" height="64" alt="@haneepark" title="@haneepark" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Lincong"><img src="https://github.com/Lincong.png?size=128" width="64" height="64" alt="@Lincong" title="@Lincong" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/AngerM-DD"><img src="https://github.com/AngerM-DD.png?size=128" width="64" height="64" alt="@AngerM-DD" title="@AngerM-DD" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/danicheg"><img src="https://github.com/danicheg.png?size=128" width="64" height="64" alt="@danicheg" title="@danicheg" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/chrisryan10"><img src="https://github.com/chrisryan10.png?size=128" width="64" height="64" alt="@chrisryan10" title="@chrisryan10" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/nhacvuong"><img src="https://github.com/nhacvuong.png?size=128" width="64" height="64" alt="@nhacvuong" title="@nhacvuong" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/runningcode"><img src="https://github.com/runningcode.png?size=128" width="64" height="64" alt="@runningcode" title="@runningcode" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/baezzys"><img src="https://github.com/baezzys.png?size=128" width="64" height="64" alt="@baezzys" title="@baezzys" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/seonwoo960000"><img src="https://github.com/seonwoo960000.png?size=128" width="64" height="64" alt="@seonwoo960000" title="@seonwoo960000" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.26.3]]></title>
            <link>https://armeria.dev/release-notes/1.26.3/</link>
            <guid>https://armeria.dev/release-notes/1.26.3/</guid>
            <pubDate>Fri, 17 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see a NullPointerException when an Endpoint is selected from an EndpointGroup #5302 This bug affects 1.26.2 only. You no longer see an intermittent deadlock when a StreamMessage is being...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.26.2]]></title>
            <link>https://armeria.dev/release-notes/1.26.2/</link>
            <guid>https://armeria.dev/release-notes/1.26.2/</guid>
            <pubDate>Wed, 08 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Armeria now reuses the connections more efficiently when RetryingClient is used in conjunction with client-side load-balancing. Previously, an excessive number of connections were created when request...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.26.1]]></title>
            <link>https://armeria.dev/release-notes/1.26.1/</link>
            <guid>https://armeria.dev/release-notes/1.26.1/</guid>
            <pubDate>Mon, 30 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[HTTP/2 clients do not limit the maximum number of RST frames per minute before the connection is closed. Only 1.26.0 is affected. #5277 ‚ò¢Ô∏è Breaking changes‚Äã Flags.defaultHttp2MaxResetFramesPerMinute()...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.26.0]]></title>
            <link>https://armeria.dev/release-notes/1.26.0/</link>
            <guid>https://armeria.dev/release-notes/1.26.0/</guid>
            <pubDate>Mon, 23 Oct 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Context Path Support: You can now set services/decorators under a context path fluently. #3591 #4802 #5037 #5157 #5260 Server.builder() .baseContextPath(&quot;/api&quot;) .contextPath(&quot;/v1&quot;,...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.25.2]]></title>
            <link>https://armeria.dev/release-notes/1.25.2/</link>
            <guid>https://armeria.dev/release-notes/1.25.2/</guid>
            <pubDate>Fri, 25 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Removed unnecessary debug logs when using Spring integration. #5142 Only 1.25.0, 1.25.1 is affected. üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their brill...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.25.1]]></title>
            <link>https://armeria.dev/release-notes/1.25.1/</link>
            <guid>https://armeria.dev/release-notes/1.25.1/</guid>
            <pubDate>Wed, 23 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[armeria-logback now correctly declares the armeria-logback12 dependency. #5139 Only 1.25.0 is affected. üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their br...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.25.0]]></title>
            <link>https://armeria.dev/release-notes/1.25.0/</link>
            <guid>https://armeria.dev/release-notes/1.25.0/</guid>
            <pubDate>Tue, 22 Aug 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[GraalVM Support: Armeria now provides GraalVM reachability metadata to easily build GraalVM native images. #5005 Micrometer Observation Support: Support for Micrometer Observation is added. Refer to O...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.24.3]]></title>
            <link>https://armeria.dev/release-notes/1.24.3/</link>
            <guid>https://armeria.dev/release-notes/1.24.3/</guid>
            <pubDate>Tue, 25 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Armeria server now strips matrix variables from a request path before finding a matching route. CVE-2023-38493 Previously, when an Armeria decorator is used to decorate a Spring controller served usin...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.24.2]]></title>
            <link>https://armeria.dev/release-notes/1.24.2/</link>
            <guid>https://armeria.dev/release-notes/1.24.2/</guid>
            <pubDate>Wed, 28 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a bug where content preview is not logged when using LoggingService or LoggingClient. #4979 Note that this bug affects 1.24.0 and 1.24.1. üôá Thank you‚Äã This release was possible thanks to the fo...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.24.1]]></title>
            <link>https://armeria.dev/release-notes/1.24.1/</link>
            <guid>https://armeria.dev/release-notes/1.24.1/</guid>
            <pubDate>Wed, 21 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[You can no longer see compilation errors when using TextLogFormatterBuilder.build() and JsonLogFormatterBuilder.build(). #4975 Armeria server does not accept a ClientHello message larger than 4096 byt...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.24.0]]></title>
            <link>https://armeria.dev/release-notes/1.24.0/</link>
            <guid>https://armeria.dev/release-notes/1.24.0/</guid>
            <pubDate>Thu, 15 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Unix Domain Socket Support: You can now use Unix domain socket to serve and send requests which is useful for configuring a service mesh to communicate with a sidecar. #1837 #4846 import com.linecorp....]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 5]]></title>
            <link>https://armeria.dev/news/20230426-newsletter-5</link>
            <guid>https://armeria.dev/news/20230426-newsletter-5</guid>
            <pubDate>Wed, 26 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Announcements]]></description>
            <content:encoded><![CDATA[<video class="hideOnReducedMotion" src="/assets/medias/armeria-f275354e25be493d6b926dc433dd3ac1.m4v" preload="none" autoplay="" muted="" loop="" style="width:282px;height:112px"><img src="https://armeria.dev/assets/images/armeria-9a5f775a301c3145a3ef29a69c0b3dee.gif" loading="lazy" width="282" height="112" alt="Armeria Logo Animation"></video>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="announcements">Announcements<a href="https://armeria.dev/news/20230426-newsletter-5#announcements" class="hash-link" aria-label="Direct link to Announcements" title="Direct link to Announcements" translate="no">‚Äã</a></h2>
<div class="noBullet"><p>We have some announcements to share with you.</p><ul>
<li class="">üì¢ <strong>Discontinuation of virtual office hours</strong>:<!-- -->
<ul>
<li class="">We will transform the existing virtual hours to another form such as quarterly webinar. But we haven't decided how often we hold the webinar or what to cover. Please stay tuned.</li>
</ul>
</li>
<li class="">üôå <strong><a href="https://github.com/line/armeria/discussions/4626" target="_blank" rel="noopener noreferrer" class="">Armeria adopters page</a> and limited goods package</strong>:<!-- -->
<ul>
<li class="">You can now show off how well your service takes advantage of Armeria!</li>
<li class="">Don't forget to request the limited goods packages.
<img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/limited_package-40c26c84a54b39b0917f49245b4b4a98.jpg" width="3000" height="2000" class="img_ev3q"></li>
</ul>
</li>
<li class="">üöõ <strong>Moving to Discord</strong>:<!-- -->
<ul>
<li class="">We decided to move to Discord to preserve all past messages.</li>
<li class="">But no rush! We'll run the both Slack and Discord for a while. Please join <a class="" href="https://armeria.dev/s/discord">our Discord server</a> whenever you're ready.</li>
</ul>
</li>
<li class="">üåü <strong>We're now 4K family members!</strong>
<ul>
<li class="">It's amazing to see the steady growth of stars. Thank y'all!<!-- -->
<a href="https://github.com/line/armeria/stargazers"><img src="https://armeria.dev/img/star-history-20230420.svg" width="720"></a>
</li>
</ul>
</li>
</ul></div>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20230426-newsletter-5#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">‚ú® We've released several new versions since our last newsletter with a bunch of new exciting features! Here are the highlights between <a class="" href="https://armeria.dev/release-notes/1.17.1">1.17.1</a> and <a class="" href="https://armeria.dev/release-notes/1.23.1">1.23.1</a>.<!-- -->
<ul>
<li class="">Resilience4j circuit breaker support</li>
<li class="">Improvements in gRPC support<!-- -->
<ul>
<li class="">Asynchronous ServerInterceptor + Kotlin Coroutine support</li>
<li class="">Improved annotations support</li>
<li class="">Improvements in gRPC HTTP/JSON transcoding</li>
</ul>
</li>
<li class="">Spring Boot 3 support (and dropping Spring Boot 1)</li>
<li class="">Improvements in DocService<!-- -->
<ul>
<li class="">Markdown and Mermaid support for DocService</li>
<li class="">Autocompletion support for gRPC and Thrift <br>
<video class="hideOnReducedMotion" src="/img/docservice-autocomplete.m4v" preload="none" autoplay="" muted="" controls="" loop=""></video>
</li>
</ul>
</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20230426-newsletter-5#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üéì Try out this <a class="" href="https://armeria.dev/docs/tutorials/grpc">guided tutorial for gRPC Service</a>! This super friendly and simple tutorial will guide you to make a blog service just like <a class="" href="https://armeria.dev/docs/tutorials/rest">the previous tutorial for REST services</a>. But this time, you'll try step by step guide including:<!-- -->
<ul>
<li class="">Implement Armeria gRPC service and client</li>
<li class="">Exception handling</li>
<li class="">Invoke gRPC service via DocService</li>
</ul>
</li>
<li class="">üîã Here are some cool open source projects powered by Armeria:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/discussions/4626#discussioncomment-4668166" target="_blank" rel="noopener noreferrer" class="">Thorium Framework</a>
<ul>
<li class="">A Scala 3 microservice framework leveraging on Armeria</li>
</ul>
</li>
<li class=""><a href="https://github.com/line/armeria/discussions/4626#discussioncomment-4863434" target="_blank" rel="noopener noreferrer" class="">Apache SkyWalking</a>
<ul>
<li class="">An application performance monitor tool for distributed systems built on top of Armeria</li>
</ul>
</li>
<li class=""><a href="https://github.com/naver/scavenger" target="_blank" rel="noopener noreferrer" class="">Scavenger</a>
<ul>
<li class="">A runtime dead code analysis tool on top of Armeria</li>
</ul>
</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20230426-newsletter-5#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">ü§î Your opinion means a lot to us. Please let us know what you think about these proposals:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/4314" target="_blank" rel="noopener noreferrer" class="">#4314</a> Provide an easier way to get a <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html" title="ClientRequestContext">ClientRequestContext<span class="suffix_sw1f"></span></a></code></li>
<li class=""><a href="https://github.com/line/armeria/issues/4569" target="_blank" rel="noopener noreferrer" class="">#4569</a> Consider RFC 7807 Problem Details for HTTP APIs as the default response format in REST APIs</li>
<li class=""><a href="https://github.com/line/armeria/issues/4738" target="_blank" rel="noopener noreferrer" class="">#4738</a> Consider a way to make <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/auth/oauth2/OAuth2AuthorizationGrant.html" title="OAuth2AuthorizationGrant">OAuth2AuthorizationGrant<span class="suffix_sw1f"></span></a></code> dynamic when update the grant information needed</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20230426-newsletter-5#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üî∞ Want to contribute but not sure where to start from? Try this issue:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/4797" target="_blank" rel="noopener noreferrer" class="">#4797</a> Contain which file doesn't exist in the response so that user get more clues to distinguish if the file service isn't bound at all or only the file doesn't exist</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20230426-newsletter-5#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20230426-newsletter-5#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/cj848"><img src="https://github.com/cj848.png?size=128" width="64" height="64" alt="@cj848" title="@cj848" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heesuk-ahn"><img src="https://github.com/heesuk-ahn.png?size=128" width="64" height="64" alt="@heesuk-ahn" title="@heesuk-ahn" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ta7uw"><img src="https://github.com/ta7uw.png?size=128" width="64" height="64" alt="@ta7uw" title="@ta7uw" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/SeanWhoCodes"><img src="https://github.com/SeanWhoCodes.png?size=128" width="64" height="64" alt="@SeanWhoCodes" title="@SeanWhoCodes" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/dlvenable"><img src="https://github.com/dlvenable.png?size=128" width="64" height="64" alt="@dlvenable" title="@dlvenable" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ks-yim"><img src="https://github.com/ks-yim.png?size=128" width="64" height="64" alt="@ks-yim" title="@ks-yim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/chanho0912"><img src="https://github.com/chanho0912.png?size=128" width="64" height="64" alt="@chanho0912" title="@chanho0912" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hirakida"><img src="https://github.com/hirakida.png?size=128" width="64" height="64" alt="@hirakida" title="@hirakida" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sullis"><img src="https://github.com/sullis.png?size=128" width="64" height="64" alt="@sullis" title="@sullis" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mitrofmep"><img src="https://github.com/mitrofmep.png?size=128" width="64" height="64" alt="@mitrofmep" title="@mitrofmep" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/takezoe"><img src="https://github.com/takezoe.png?size=128" width="64" height="64" alt="@takezoe" title="@takezoe" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/davin111"><img src="https://github.com/davin111.png?size=128" width="64" height="64" alt="@davin111" title="@davin111" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/chungonn"><img src="https://github.com/chungonn.png?size=128" width="64" height="64" alt="@chungonn" title="@chungonn" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/daniel-itunu"><img src="https://github.com/daniel-itunu.png?size=128" width="64" height="64" alt="@daniel-itunu" title="@daniel-itunu" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/resquivel-squareup"><img src="https://github.com/resquivel-squareup.png?size=128" width="64" height="64" alt="@resquivel-squareup" title="@resquivel-squareup" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Jimexist"><img src="https://github.com/Jimexist.png?size=128" width="64" height="64" alt="@Jimexist" title="@Jimexist" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Yuri999"><img src="https://github.com/Yuri999.png?size=128" width="64" height="64" alt="@Yuri999" title="@Yuri999" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tomatophobia"><img src="https://github.com/tomatophobia.png?size=128" width="64" height="64" alt="@tomatophobia" title="@tomatophobia" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/chris-ryan-square"><img src="https://github.com/chris-ryan-square.png?size=128" width="64" height="64" alt="@chris-ryan-square" title="@chris-ryan-square" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/natsumehu"><img src="https://github.com/natsumehu.png?size=128" width="64" height="64" alt="@natsumehu" title="@natsumehu" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/DasAmpharos"><img src="https://github.com/DasAmpharos.png?size=128" width="64" height="64" alt="@DasAmpharos" title="@DasAmpharos" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/freevie"><img src="https://github.com/freevie.png?size=128" width="64" height="64" alt="@freevie" title="@freevie" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tawAsh1"><img src="https://github.com/tawAsh1.png?size=128" width="64" height="64" alt="@tawAsh1" title="@tawAsh1" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/klurpicolo"><img src="https://github.com/klurpicolo.png?size=128" width="64" height="64" alt="@klurpicolo" title="@klurpicolo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hllee1021"><img src="https://github.com/hllee1021.png?size=128" width="64" height="64" alt="@hllee1021" title="@hllee1021" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Bue-von-hon"><img src="https://github.com/Bue-von-hon.png?size=128" width="64" height="64" alt="@Bue-von-hon" title="@Bue-von-hon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ngyukman"><img src="https://github.com/ngyukman.png?size=128" width="64" height="64" alt="@ngyukman" title="@ngyukman" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/injae-kim"><img src="https://github.com/injae-kim.png?size=128" width="64" height="64" alt="@injae-kim" title="@injae-kim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/seonwoo960000"><img src="https://github.com/seonwoo960000.png?size=128" width="64" height="64" alt="@seonwoo960000" title="@seonwoo960000" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mscheong01"><img src="https://github.com/mscheong01.png?size=128" width="64" height="64" alt="@mscheong01" title="@mscheong01" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hyperxpro"><img src="https://github.com/hyperxpro.png?size=128" width="64" height="64" alt="@hyperxpro" title="@hyperxpro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/cormoran"><img src="https://github.com/cormoran.png?size=128" width="64" height="64" alt="@cormoran" title="@cormoran" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kojilin"><img src="https://github.com/kojilin.png?size=128" width="64" height="64" alt="@kojilin" title="@kojilin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mauhiz"><img src="https://github.com/mauhiz.png?size=128" width="64" height="64" alt="@mauhiz" title="@mauhiz" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/cnabro"><img src="https://github.com/cnabro.png?size=128" width="64" height="64" alt="@cnabro" title="@cnabro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/rhodo"><img src="https://github.com/rhodo.png?size=128" width="64" height="64" alt="@rhodo" title="@rhodo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Lincong"><img src="https://github.com/Lincong.png?size=128" width="64" height="64" alt="@Lincong" title="@Lincong" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/taodo2291"><img src="https://github.com/taodo2291.png?size=128" width="64" height="64" alt="@taodo2291" title="@taodo2291" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/proceane"><img src="https://github.com/proceane.png?size=128" width="64" height="64" alt="@proceane" title="@proceane" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/opus53"><img src="https://github.com/opus53.png?size=128" width="64" height="64" alt="@opus53" title="@opus53" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/policeman-kh"><img src="https://github.com/policeman-kh.png?size=128" width="64" height="64" alt="@policeman-kh" title="@policeman-kh" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/devdynam0507"><img src="https://github.com/devdynam0507.png?size=128" width="64" height="64" alt="@devdynam0507" title="@devdynam0507" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kezhenxu94"><img src="https://github.com/kezhenxu94.png?size=128" width="64" height="64" alt="@kezhenxu94" title="@kezhenxu94" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/nao0811ta"><img src="https://github.com/nao0811ta.png?size=128" width="64" height="64" alt="@nao0811ta" title="@nao0811ta" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Bogyie"><img src="https://github.com/Bogyie.png?size=128" width="64" height="64" alt="@Bogyie" title="@Bogyie" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/dinujoh"><img src="https://github.com/dinujoh.png?size=128" width="64" height="64" alt="@dinujoh" title="@dinujoh" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/echo304"><img src="https://github.com/echo304.png?size=128" width="64" height="64" alt="@echo304" title="@echo304" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wu-sheng"><img src="https://github.com/wu-sheng.png?size=128" width="64" height="64" alt="@wu-sheng" title="@wu-sheng" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Dogacel"><img src="https://github.com/Dogacel.png?size=128" width="64" height="64" alt="@Dogacel" title="@Dogacel" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/vkostyukov"><img src="https://github.com/vkostyukov.png?size=128" width="64" height="64" alt="@vkostyukov" title="@vkostyukov" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/doljae"><img src="https://github.com/doljae.png?size=128" width="64" height="64" alt="@doljae" title="@doljae" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/di-seo"><img src="https://github.com/di-seo.png?size=128" width="64" height="64" alt="@di-seo" title="@di-seo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/yamamichid"><img src="https://github.com/yamamichid.png?size=128" width="64" height="64" alt="@yamamichid" title="@yamamichid" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.23.1]]></title>
            <link>https://armeria.dev/release-notes/1.23.1/</link>
            <guid>https://armeria.dev/release-notes/1.23.1/</guid>
            <pubDate>Sat, 08 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Spring Boot 3 integration modules are correctly published to the Maven repository and included in the BOM. #4814 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.23.0]]></title>
            <link>https://armeria.dev/release-notes/1.23.0/</link>
            <guid>https://armeria.dev/release-notes/1.23.0/</guid>
            <pubDate>Fri, 07 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[DocService now supports auto-completion for gRPC and Thrift services. #4516 Check out this awesome demo video by @Dogacel to learn more. üåü New features‚Äã You can now write a circuit breaker or retry r...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.16.2]]></title>
            <link>https://armeria.dev/release-notes/1.16.2/</link>
            <guid>https://armeria.dev/release-notes/1.16.2/</guid>
            <pubDate>Mon, 20 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Client-side gRPC callback ClientCall.Listener.onHeaders() is now invoked correctly. #4583 #4608 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their brilliant ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.22.1]]></title>
            <link>https://armeria.dev/release-notes/1.22.1/</link>
            <guid>https://armeria.dev/release-notes/1.22.1/</guid>
            <pubDate>Tue, 14 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see a NullPointerException when a StreamMessage is aborted. #4667 gRPC and Protobuf dependencies are downgraded due to an incompatibility with JRE 8. #4666 ‚õì Dependencies‚Äã gRPC Java 1.52...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.22.0]]></title>
            <link>https://armeria.dev/release-notes/1.22.0/</link>
            <guid>https://armeria.dev/release-notes/1.22.0/</guid>
            <pubDate>Thu, 09 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[CircuitBreakerClient integration with Resilience4j&#x27;s circuit breaker is now available. #1469 #4139 Note that armeria-resilience4j2 requires Java 17 or higher. Resilience4jCircuitBreakerMapping ma...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.21.0]]></title>
            <link>https://armeria.dev/release-notes/1.21.0/</link>
            <guid>https://armeria.dev/release-notes/1.21.0/</guid>
            <pubDate>Thu, 22 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now use @RequestTimeout to set a request timeout to annotated services and gRPC services. #4463 #4499 import com.linecorp.armeria.server.annotation.decorator.RequestTimeout;@RequestTimeout(val...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.16.1]]></title>
            <link>https://armeria.dev/release-notes/1.16.1/</link>
            <guid>https://armeria.dev/release-notes/1.16.1/</guid>
            <pubDate>Tue, 06 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Exceptions raised in decorators can now be used to determine whether to retry by RetryingClient. #4558 #4559 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared the...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.20.3]]></title>
            <link>https://armeria.dev/release-notes/1.20.3/</link>
            <guid>https://armeria.dev/release-notes/1.20.3/</guid>
            <pubDate>Thu, 10 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now see HTTP/2 stream error logs at the debug level. #4515 You can now see FieldInfo of parameter types and return types in the debug form without visiting the detail page. #4481 #4484 üõ†Ô∏è Bug...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.20.2]]></title>
            <link>https://armeria.dev/release-notes/1.20.2/</link>
            <guid>https://armeria.dev/release-notes/1.20.2/</guid>
            <pubDate>Mon, 07 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see StacklessClosedChannelException when an incoming HTTP/1.0 or HTTP/1.1 request has a Connection: close header. #4508 Armeria doesn&#x27;t send a bad response with non-empty body anymo...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.20.1]]></title>
            <link>https://armeria.dev/release-notes/1.20.1/</link>
            <guid>https://armeria.dev/release-notes/1.20.1/</guid>
            <pubDate>Tue, 11 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[application/json media type is correctly set for HTTP/JSON-to-gRPC transcoded responses. #4473 #4474 Versions 1.19.0 to 1.20.0 are affected üôá Thank you‚Äã This release was possible thanks to the follow...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.20.0]]></title>
            <link>https://armeria.dev/release-notes/1.20.0/</link>
            <guid>https://armeria.dev/release-notes/1.20.0/</guid>
            <pubDate>Wed, 05 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now handle a GraphQL error using GraphqlErrorHandler. #4435 GraphqlErrorHandler errorHandler = new GraphqlErrorHandler() { @Override public HttpResponse handle(ServiceRequestContext ctx, Execu...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.19.0]]></title>
            <link>https://armeria.dev/release-notes/1.19.0/</link>
            <guid>https://armeria.dev/release-notes/1.19.0/</guid>
            <pubDate>Tue, 13 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now repeatedly aggregate an HttpRequest and HttpResponse when using HttpRequest.aggregate() and HttpResponse.aggregate(). If an HttpRequest or an HttpResponse is aggregated before, the cached ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.18.0]]></title>
            <link>https://armeria.dev/release-notes/1.18.0/</link>
            <guid>https://armeria.dev/release-notes/1.18.0/</guid>
            <pubDate>Mon, 08 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[DocService can now render Markdown and Mermaid formatted documentation for annotated services. #4299 #4304 @Description(value = &quot;### Markdown format&quot;, markup = Markup.MARKDOWN)@Get(&quot;/ma...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.17.2]]></title>
            <link>https://armeria.dev/release-notes/1.17.2/</link>
            <guid>https://armeria.dev/release-notes/1.17.2/</guid>
            <pubDate>Tue, 02 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[CORS requests with query params are handled correctly. #4378 Armeria versions from 1.15.0 to 1.17.1 are affected. üôá Thank you‚Äã This release was possible thanks to the following contributors who share...]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 4]]></title>
            <link>https://armeria.dev/news/20220714-newsletter-4</link>
            <guid>https://armeria.dev/news/20220714-newsletter-4</guid>
            <pubDate>Thu, 14 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[From the devs]]></description>
            <content:encoded><![CDATA[<video class="hideOnReducedMotion" src="/assets/medias/armeria-f275354e25be493d6b926dc433dd3ac1.m4v" preload="none" autoplay="" muted="" loop="" style="width:282px;height:112px"><img src="https://armeria.dev/assets/images/armeria-9a5f775a301c3145a3ef29a69c0b3dee.gif" loading="lazy" width="282" height="112" alt="Armeria Logo Animation"></video>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20220714-newsletter-4#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">‚ú® We've released several new versions since our last newsletter with a bunch of new exciting features!<!-- -->
<ul>
<li class=""><a class="" href="https://armeria.dev/release-notes/1.17.0/">1.17.0</a>
<ul>
<li class="">Easier way to send and receive RESTful APIs</li>
<li class="">Ability to limit the maximum length of Thrift messages</li>
<li class="">Injecting dependencies in annotations</li>
<li class="">Support for Kotlin nullable type (<code>?</code>) in annotated services</li>
</ul>
</li>
<li class=""><a class="" href="https://armeria.dev/release-notes/1.16.0/">1.16.0</a>
<ul>
<li class="">New metrics for TLS handshake results</li>
<li class="">Handling <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Decorator.html" title="Decorator">Decorator<span class="suffix_sw1f"></span></a></code> annotation with <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html" title="GrpcService">GrpcService<span class="suffix_sw1f"></span></a></code> for your gRPC stubs</li>
<li class="">Programmatic <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Flags.html" title="Flags">Flags<span class="suffix_sw1f"></span></a></code> configuration via Java SPI</li>
</ul>
</li>
<li class=""><a class="" href="https://armeria.dev/release-notes/1.15.0/">1.15.0</a>
<ul>
<li class="">Support for gRPC health check protocol</li>
<li class="">Multipart file uploads in annotated services</li>
<li class="">GraphQL support in <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html" title="DocService">DocService<span class="suffix_sw1f"></span></a></code></li>
<li class="">Refactored DNS resolver cache with higher hit ratio and reduced traffic</li>
<li class="">New metrics that help you get alerts before your TLS certificates are expired</li>
</ul>
</li>
<li class=""><a class="" href="https://armeria.dev/release-notes/1.14.0/">1.14.0</a>
<ul>
<li class="">Experimental support for Scala 3</li>
<li class="">Fluent conversion of <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html" title="HttpResponse">HttpResponse<span class="suffix_sw1f"></span></a></code> into a desired type using <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html" title="WebClient">WebClient<span class="suffix_sw1f"></span></a></code></li>
<li class="">Various build options for gRPC using <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/grpc/GrpcClientBuilder.html" title="GrpcClientBuilder">GrpcClientBuilder<span class="suffix_sw1f"></span></a></code></li>
</ul>
</li>
</ul>
</li>
</ul></div>
<div class="noBullet"><ul>
<li class="">üëÇ Armeria team is hosting <a href="https://armeria.dev/community/office-hours/" target="_blank" rel="noopener noreferrer" class="">bi-weekly virtual office hours</a>.<!-- -->
<ul>
<li class="">It was great talking with all of you through the video chat. We hope we can see you again in the near future. :)</li>
</ul>
</li>
</ul></div>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20220714-newsletter-4#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üéì Try out this guided <a class="" href="https://armeria.dev/docs/tutorials/rest">tutorial</a> for REST Service! This super friendly and simple tutorial will guide you to make a blog service, with which you can create, read, update and delete blog posts. In particular, you'll be using these Armeria features:<!-- -->
<ul>
<li class="">Service annotations</li>
<li class="">Request converter</li>
<li class="">Parameter injection</li>
<li class="">Exception handler</li>
<li class="">Blocking task executor</li>
</ul>
</li>
<li class="">ü¶æ MSA(Microservices Architecture): Harder, Better, Faster, Stronger<!-- -->
<ul>
<li class="">In the session, <a href="https://github.com/cnabro" target="_blank" rel="noopener noreferrer" class=""><strong>@cnabro</strong></a> introduces how <a href="https://serieson.naver.com/" target="_blank" rel="noopener noreferrer" class="">Series On</a> migrated their monoliths into microservices using Armeria, gRPC, and GraphQL. He also mentions about how they monitored microservices using <a href="https://zipkin.io/" target="_blank" rel="noopener noreferrer" class="">Zipkin</a> and <a href="https://www.elastic.co/" target="_blank" rel="noopener noreferrer" class="">Elasticsearch</a>.</li>
<li class="">Here are the <a href="https://youtu.be/1TsGYR1dves" target="_blank" rel="noopener noreferrer" class="">Video</a> and <a href="https://speakerdeck.com/line_devday2021/msa-microservices-architecture-harder-better-faster-stronger" target="_blank" rel="noopener noreferrer" class="">Slides</a> (also providing <a href="https://youtu.be/95L-_82N1vg" target="_blank" rel="noopener noreferrer" class="">Korean</a> and <a href="https://youtu.be/pXIdcgchvSU" target="_blank" rel="noopener noreferrer" class="">Japanese</a>)</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20220714-newsletter-4#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">ü§î Your opinion means a lot to us. Please let us know what you think about these proposals:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/4289" target="_blank" rel="noopener noreferrer" class="">#4289</a> Supporting Spring Cloud Gateway integration(also considering <a href="https://github.com/spring-cloud/spring-cloud-gateway/blob/main/spring-cloud-gateway-server/src/main/java/org/springframework/cloud/gateway/config/GatewayAutoConfiguration.java" target="_blank" rel="noopener noreferrer" class="">GatewayAutoConfiguration</a>, <a href="https://github.com/spring-cloud/spring-cloud-gateway/blob/main/spring-cloud-gateway-server/src/main/java/org/springframework/cloud/gateway/config/HttpClientFactory.java" target="_blank" rel="noopener noreferrer" class="">HttpClientFactory</a>, and <a href="https://github.com/reactor/reactor-netty/blob/main/reactor-netty-http/src/main/java/reactor/netty/http/client/HttpClient.java#L101" target="_blank" rel="noopener noreferrer" class="">HttpClient</a>)</li>
<li class=""><a href="https://github.com/line/armeria/issues/4286" target="_blank" rel="noopener noreferrer" class="">#4286</a> Changing the insertion order of <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/ExceptionHandlerFunction.html" title="ExceptionHandlerFunction">ExceptionHandlerFunction<span class="suffix_sw1f"></span></a></code></li>
<li class=""><a href="https://github.com/line/armeria/issues/3820" target="_blank" rel="noopener noreferrer" class="">#3820</a> Providing a way to enable gRPC reflection service and making it enabled by default</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20220714-newsletter-4#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<div class="noBullet"><p>üî∞ Want to contribute but not sure where to start from? Try one of these:</p><ul>
<li class=""><a href="https://github.com/line/armeria/issues/4237" target="_blank" rel="noopener noreferrer" class="">#4237</a> Support for request scoped DataLoader for GraphQL-Java</li>
</ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">GraphqlServiceBuilder</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">GraphqlServiceBuilder</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dataLoaderRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">Function</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ServiceRequestContext</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">DataLoaderRegistry</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dataLoaderRegistrySupplier</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// This method will be mutually exclusive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// with configureDataLoaderRegistry(...)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div><ul>
<li class=""><a href="https://github.com/line/armeria/issues/4347" target="_blank" rel="noopener noreferrer" class="">#4347</a> Show the full stack trace of <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/CompositeException.html" title="CompositeException">CompositeException<span class="suffix_sw1f"></span></a></code> when the system property <code>verboseExceptions</code> is <code>true</code></li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20220714-newsletter-4#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20220714-newsletter-4#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Jsing"><img src="https://github.com/Jsing.png?size=128" width="64" height="64" alt="@Jsing" title="@Jsing" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/pine"><img src="https://github.com/pine.png?size=128" width="64" height="64" alt="@pine" title="@pine" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jupiny"><img src="https://github.com/jupiny.png?size=128" width="64" height="64" alt="@jupiny" title="@jupiny" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mauhiz"><img src="https://github.com/mauhiz.png?size=128" width="64" height="64" alt="@mauhiz" title="@mauhiz" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/devdynam0507"><img src="https://github.com/devdynam0507.png?size=128" width="64" height="64" alt="@devdynam0507" title="@devdynam0507" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/be-hase"><img src="https://github.com/be-hase.png?size=128" width="64" height="64" alt="@be-hase" title="@be-hase" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sleeplesslord"><img src="https://github.com/sleeplesslord.png?size=128" width="64" height="64" alt="@sleeplesslord" title="@sleeplesslord" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wooseongshin"><img src="https://github.com/wooseongshin.png?size=128" width="64" height="64" alt="@wooseongshin" title="@wooseongshin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/LiYing2010"><img src="https://github.com/LiYing2010.png?size=128" width="64" height="64" alt="@LiYing2010" title="@LiYing2010" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/clatisus"><img src="https://github.com/clatisus.png?size=128" width="64" height="64" alt="@clatisus" title="@clatisus" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ta7uw"><img src="https://github.com/ta7uw.png?size=128" width="64" height="64" alt="@ta7uw" title="@ta7uw" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Dogacel"><img src="https://github.com/Dogacel.png?size=128" width="64" height="64" alt="@Dogacel" title="@Dogacel" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/TheWeaVer"><img src="https://github.com/TheWeaVer.png?size=128" width="64" height="64" alt="@TheWeaVer" title="@TheWeaVer" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/natsumehu"><img src="https://github.com/natsumehu.png?size=128" width="64" height="64" alt="@natsumehu" title="@natsumehu" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/aboivin"><img src="https://github.com/aboivin.png?size=128" width="64" height="64" alt="@aboivin" title="@aboivin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/lucasamoroso"><img src="https://github.com/lucasamoroso.png?size=128" width="64" height="64" alt="@lucasamoroso" title="@lucasamoroso" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/icepeppermint"><img src="https://github.com/icepeppermint.png?size=128" width="64" height="64" alt="@icepeppermint" title="@icepeppermint" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/AngerM"><img src="https://github.com/AngerM.png?size=128" width="64" height="64" alt="@AngerM" title="@AngerM" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/litols"><img src="https://github.com/litols.png?size=128" width="64" height="64" alt="@litols" title="@litols" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/AmosDoan"><img src="https://github.com/AmosDoan.png?size=128" width="64" height="64" alt="@AmosDoan" title="@AmosDoan" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ahnyujin"><img src="https://github.com/ahnyujin.png?size=128" width="64" height="64" alt="@ahnyujin" title="@ahnyujin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/freevie"><img src="https://github.com/freevie.png?size=128" width="64" height="64" alt="@freevie" title="@freevie" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/arhont375"><img src="https://github.com/arhont375.png?size=128" width="64" height="64" alt="@arhont375" title="@arhont375" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Jimexist"><img src="https://github.com/Jimexist.png?size=128" width="64" height="64" alt="@Jimexist" title="@Jimexist" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/syleeeee"><img src="https://github.com/syleeeee.png?size=128" width="64" height="64" alt="@syleeeee" title="@syleeeee" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/gurudatta-carbon"><img src="https://github.com/gurudatta-carbon.png?size=128" width="64" height="64" alt="@gurudatta-carbon" title="@gurudatta-carbon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/injae-kim"><img src="https://github.com/injae-kim.png?size=128" width="64" height="64" alt="@injae-kim" title="@injae-kim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/imasahiro"><img src="https://github.com/imasahiro.png?size=128" width="64" height="64" alt="@imasahiro" title="@imasahiro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/doppany"><img src="https://github.com/doppany.png?size=128" width="64" height="64" alt="@doppany" title="@doppany" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/klurpicolo"><img src="https://github.com/klurpicolo.png?size=128" width="64" height="64" alt="@klurpicolo" title="@klurpicolo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ngyukman"><img src="https://github.com/ngyukman.png?size=128" width="64" height="64" alt="@ngyukman" title="@ngyukman" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ks-yim"><img src="https://github.com/ks-yim.png?size=128" width="64" height="64" alt="@ks-yim" title="@ks-yim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kezhenxu94"><img src="https://github.com/kezhenxu94.png?size=128" width="64" height="64" alt="@kezhenxu94" title="@kezhenxu94" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/di-seo"><img src="https://github.com/di-seo.png?size=128" width="64" height="64" alt="@di-seo" title="@di-seo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eisig"><img src="https://github.com/eisig.png?size=128" width="64" height="64" alt="@eisig" title="@eisig" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/woohhan"><img src="https://github.com/woohhan.png?size=128" width="64" height="64" alt="@woohhan" title="@woohhan" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/nvidyala"><img src="https://github.com/nvidyala.png?size=128" width="64" height="64" alt="@nvidyala" title="@nvidyala" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/timothy-xflowpay"><img src="https://github.com/timothy-xflowpay.png?size=128" width="64" height="64" alt="@timothy-xflowpay" title="@timothy-xflowpay" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/r3mariano"><img src="https://github.com/r3mariano.png?size=128" width="64" height="64" alt="@r3mariano" title="@r3mariano" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tokuhirom"><img src="https://github.com/tokuhirom.png?size=128" width="64" height="64" alt="@tokuhirom" title="@tokuhirom" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/chris-ryan-square"><img src="https://github.com/chris-ryan-square.png?size=128" width="64" height="64" alt="@chris-ryan-square" title="@chris-ryan-square" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/lan17"><img src="https://github.com/lan17.png?size=128" width="64" height="64" alt="@lan17" title="@lan17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/techno"><img src="https://github.com/techno.png?size=128" width="64" height="64" alt="@techno" title="@techno" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/policeman-kh"><img src="https://github.com/policeman-kh.png?size=128" width="64" height="64" alt="@policeman-kh" title="@policeman-kh" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hyangtack"><img src="https://github.com/hyangtack.png?size=128" width="64" height="64" alt="@hyangtack" title="@hyangtack" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wasifaleem"><img src="https://github.com/wasifaleem.png?size=128" width="64" height="64" alt="@wasifaleem" title="@wasifaleem" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kojilin"><img src="https://github.com/kojilin.png?size=128" width="64" height="64" alt="@kojilin" title="@kojilin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/alexc-db"><img src="https://github.com/alexc-db.png?size=128" width="64" height="64" alt="@alexc-db" title="@alexc-db" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wooyeong"><img src="https://github.com/wooyeong.png?size=128" width="64" height="64" alt="@wooyeong" title="@wooyeong" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.17.1]]></title>
            <link>https://armeria.dev/release-notes/1.17.1/</link>
            <guid>https://armeria.dev/release-notes/1.17.1/</guid>
            <pubDate>Fri, 08 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[A bug is fixed where Retrofit client calls hang indefinitely #4342 Users who use OkHttp3 3.x.x with Armeria 1.17.0 are affected. üôá Thank you‚Äã This release was possible thanks to the following contrib...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.17.0]]></title>
            <link>https://armeria.dev/release-notes/1.17.0/</link>
            <guid>https://armeria.dev/release-notes/1.17.0/</guid>
            <pubDate>Wed, 06 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now easily send and receive RESTful APIs using RestClient. #4263 Java RestClient restClient = RestClient.of(&quot;...&quot;);CompletableFuture&lt;ResponseEntity&lt;Customer&gt;&gt; response = ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.16.0]]></title>
            <link>https://armeria.dev/release-notes/1.16.0/</link>
            <guid>https://armeria.dev/release-notes/1.16.0/</guid>
            <pubDate>Tue, 19 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Armeria Server now exposes the metrics about TLS handshake results. #4191 armeria_server_tls_handshakes_total{ cipher_suite=&lt;the negotiated TLS cipher suite&gt;, common_name=&lt;the common name in ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.15.0]]></title>
            <link>https://armeria.dev/release-notes/1.15.0/</link>
            <guid>https://armeria.dev/release-notes/1.15.0/</guid>
            <pubDate>Thu, 24 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[gRPC health check protocol Multipart file uploads in annotated services Preliminary GraphQL support in DocService Refactored DNS resolver cache with higher hit ratio and reduced traffic New metrics th...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.14.1]]></title>
            <link>https://armeria.dev/release-notes/1.14.1/</link>
            <guid>https://armeria.dev/release-notes/1.14.1/</guid>
            <pubDate>Fri, 18 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Context of the EndpointGroup is added to the EmptyEndpointGroupException message. #4084 üõ†Ô∏è Bug fixes‚Äã DnsAddressEndpointGroup, DnsServiceEndpointGroup, and DnsTextEndpointGroup now correctly respect ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.14.0]]></title>
            <link>https://armeria.dev/release-notes/1.14.0/</link>
            <guid>https://armeria.dev/release-notes/1.14.0/</guid>
            <pubDate>Thu, 27 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now use Scala 3 for armeria-scala and armeria-scalapb. #3614 #4036 tipScala 3 modules are currently experimental. We&#x27;re looking forward to your feedback. You can now fluently convert an H...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.13.4]]></title>
            <link>https://armeria.dev/release-notes/1.13.4/</link>
            <guid>https://armeria.dev/release-notes/1.13.4/</guid>
            <pubDate>Fri, 03 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Server now aborts the startup process if ServerListener.serverStarting() raises an exception. #3935 #3947 You no longer see an EmptyEndpointGroupException when the entire Endpoints are replaced in a H...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.13.3]]></title>
            <link>https://armeria.dev/release-notes/1.13.3/</link>
            <guid>https://armeria.dev/release-notes/1.13.3/</guid>
            <pubDate>Tue, 23 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see Maximum active streams violated for this endpoint. exception anymore. #3858 #3908 DecodingClient does not raise an exception anymore when duplicated encodings are specified. #3932 #3...]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 3]]></title>
            <link>https://armeria.dev/news/20211029-newsletter-3</link>
            <guid>https://armeria.dev/news/20211029-newsletter-3</guid>
            <pubDate>Fri, 29 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[From the devs]]></description>
            <content:encoded><![CDATA[<video class="hideOnReducedMotion" src="/assets/medias/armeria-f275354e25be493d6b926dc433dd3ac1.m4v" preload="none" autoplay="" muted="" loop="" style="width:282px;height:112px"><img src="https://armeria.dev/assets/images/armeria-9a5f775a301c3145a3ef29a69c0b3dee.gif" loading="lazy" width="282" height="112" alt="Armeria Logo Animation"></video>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20211029-newsletter-3#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üëÇ Armeria team now hosts <a href="https://armeria.dev/community/office-hours/" target="_blank" rel="noopener noreferrer" class="">bi-weekly virtual office hours</a>.<!-- -->
<ul>
<li class="">Please feel free to join in and share your thoughts!</li>
</ul>
</li>
</ul></div>
<div class="noBullet"><ul>
<li class="">‚ú® We released 15 releases since our last newsletter with a bunch of new exciting features!<!-- -->
<ul>
<li class="">HTTP/JSON-to-gRPC transcoding like <a href="https://cloud.google.com/endpoints/docs/grpc/transcoding" target="_blank" rel="noopener noreferrer" class="">Google does</a>,
<em>without</em> any API gateway server</li>
<li class="">GraphQL support with <a href="https://www.graphql-java.com/" target="_blank" rel="noopener noreferrer" class="">GraphQL Java</a> and <a href="https://sangria-graphql.github.io/" target="_blank" rel="noopener noreferrer" class="">Sangria</a>.</li>
<li class="">Immutable <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Cookie.html" title="Cookie">Cookie<span class="suffix_sw1f"></span></a></code> API designed with usability in mind</li>
<li class="">Fully asynchronous OAuth 2.0 module</li>
<li class="">Reactive multipart streaming API</li>
<li class=""><code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html" title="WebClient">WebClient<span class="suffix_sw1f"></span></a></code> can now follow redirects with highly customizable redirect rules.</li>
<li class="">Convenient stream transformation APIs such as <code>map</code>, <code>concat</code>, <code>recover</code> and <code>collect</code></li>
<li class="">Dynamic server reconfiguration with <code><a href="https://armeria.dev/news/20211029-newsletter-3#" title="Server.reconfigure()">Server.reconfigure()<span class="suffix_sw1f"></span></a></code></li>
<li class=""><a class="" href="https://armeria.dev/docs/advanced/scala">Scala integration</a></li>
<li class="">Other numerous API usability improvements</li>
</ul>
</li>
</ul></div>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20211029-newsletter-3#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üéì Did you know you can build a REST API with Armeria?<!-- -->
<ul>
<li class=""><a class="" href="https://armeria.dev/docs/tutorials/rest">Try this guided tutorial</a> by <a href="https://github.com/freevie" target="_blank" rel="noopener noreferrer" class=""><strong>@freevie</strong></a> to learn how to write a REST endpoint with Armeria.</li>
</ul>
</li>
</ul></div>
<div class="noBullet"><ul>
<li class="">üìà <a href="https://engineering.linecorp.com/en/blog/monitoring-prometheus-metrics-from-armeria/" target="_blank" rel="noopener noreferrer" class="">Monitoring Prometheus metrics from Armeria</a></li>
<li class="">üé® <a href="https://engineering.linecorp.com/en/blog/customizing-armeria-metrics/" target="_blank" rel="noopener noreferrer" class="">Customizing Armeria metrics</a>
<ul>
<li class="">In this 2-part article, <a href="https://github.com/jupiny" target="_blank" rel="noopener noreferrer" class=""><strong>@jupiny</strong></a> shows you how you can record the detailed metrics and customize them
in your Armeria service.</li>
</ul>
</li>
</ul></div>
<div class="noBullet"><ul>
<li class="">üíâ Interested in service-level automatic fault injection testing?<!-- -->
<ul>
<li class=""><a href="https://www.youtube.com/watch?v=BhZLHpxQ7mI" target="_blank" rel="noopener noreferrer" class="">Check out this demo video</a> by <a href="https://github.com/cmeiklejohn" target="_blank" rel="noopener noreferrer" class=""><strong>@cmeiklejohn</strong></a> that shows
building an application with Armeria and then using <a href="https://www.youtube.com/watch?v=pyYh-vNspAI" target="_blank" rel="noopener noreferrer" class="">Filibuster (paper accepted to ACM SoCC '21)</a>
for automatically testing the failure scenarios caused by remote services and dependencies.</li>
</ul>
</li>
</ul></div>
<div class="noBullet"><ul>
<li class="">üñ• Looking for a virtual tech conference?<!-- -->
<ul>
<li class=""><a href="https://linedevday.linecorp.com/2021/en/sessions/31/" target="_blank" rel="noopener noreferrer" class="">Register now for the talk</a> by <a href="https://github.com/cnabro" target="_blank" rel="noopener noreferrer" class=""><strong>@cnabro</strong></a> about
his experience building a large scale gRPC and GraphQL service with Armeria on Nov 11th.</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20211029-newsletter-3#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">ü§î Your opinion means a lot to us. Please let us know what you think about these proposals:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/3598" target="_blank" rel="noopener noreferrer" class="">#3598</a> Reconsider the restartability of <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Server.html" title="Server">Server<span class="suffix_sw1f"></span></a></code>.</li>
<li class=""><a href="https://github.com/line/armeria/issues/3700" target="_blank" rel="noopener noreferrer" class="">#3700</a> Should <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html" title="Endpoint">Endpoint<span class="suffix_sw1f"></span></a></code> have optional <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/SessionProtocol.html" title="SessionProtocol">SessionProtocol<span class="suffix_sw1f"></span></a></code> and <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/SerializationFormat.html" title="SerializationFormat">SerializationFormat<span class="suffix_sw1f"></span></a></code>?</li>
<li class=""><a href="https://github.com/line/armeria/issues/3820" target="_blank" rel="noopener noreferrer" class="">#3820</a> Nullable or exception-throwing getters in <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/RequestHeaders.html" title="RequestHeaders">RequestHeaders<span class="suffix_sw1f"></span></a></code></li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20211029-newsletter-3#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<div class="noBullet"><ul>
<li class="">üî∞ Want to contribute but not sure where to start from? Try one of these:<!-- -->
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/2353" target="_blank" rel="noopener noreferrer" class="">#2353</a> Add a gRPC reverse proxy example.</li>
<li class=""><a href="https://github.com/line/armeria/issues/3788" target="_blank" rel="noopener noreferrer" class="">#3788</a> Deprecate <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Cookie.html#builder(java.lang.String,java.lang.String)" title="Cookie.builder(String,String)">Cookie.builder()<span class="suffix_sw1f"></span></a></code> and introduce a method with secure defaults.</li>
</ul>
</li>
</ul></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20211029-newsletter-3#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20211029-newsletter-3#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hyangtack"><img src="https://github.com/hyangtack.png?size=128" width="64" height="64" alt="@hyangtack" title="@hyangtack" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/icepeppermint"><img src="https://github.com/icepeppermint.png?size=128" width="64" height="64" alt="@icepeppermint" title="@icepeppermint" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ks-yim"><img src="https://github.com/ks-yim.png?size=128" width="64" height="64" alt="@ks-yim" title="@ks-yim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hexoul"><img src="https://github.com/hexoul.png?size=128" width="64" height="64" alt="@hexoul" title="@hexoul" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eisig"><img src="https://github.com/eisig.png?size=128" width="64" height="64" alt="@eisig" title="@eisig" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/serajin00"><img src="https://github.com/serajin00.png?size=128" width="64" height="64" alt="@serajin00" title="@serajin00" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sfc-gh-pbennes"><img src="https://github.com/sfc-gh-pbennes.png?size=128" width="64" height="64" alt="@sfc-gh-pbennes" title="@sfc-gh-pbennes" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sunken-kang"><img src="https://github.com/sunken-kang.png?size=128" width="64" height="64" alt="@sunken-kang" title="@sunken-kang" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kojilin"><img src="https://github.com/kojilin.png?size=128" width="64" height="64" alt="@kojilin" title="@kojilin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/dgahn"><img src="https://github.com/dgahn.png?size=128" width="64" height="64" alt="@dgahn" title="@dgahn" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/andrey-tpt"><img src="https://github.com/andrey-tpt.png?size=128" width="64" height="64" alt="@andrey-tpt" title="@andrey-tpt" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mauhiz"><img src="https://github.com/mauhiz.png?size=128" width="64" height="64" alt="@mauhiz" title="@mauhiz" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/alexc-db"><img src="https://github.com/alexc-db.png?size=128" width="64" height="64" alt="@alexc-db" title="@alexc-db" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jupiny"><img src="https://github.com/jupiny.png?size=128" width="64" height="64" alt="@jupiny" title="@jupiny" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kezhenxu94"><img src="https://github.com/kezhenxu94.png?size=128" width="64" height="64" alt="@kezhenxu94" title="@kezhenxu94" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/probepark"><img src="https://github.com/probepark.png?size=128" width="64" height="64" alt="@probepark" title="@probepark" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/JunoJunho"><img src="https://github.com/JunoJunho.png?size=128" width="64" height="64" alt="@JunoJunho" title="@JunoJunho" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/TheWeaVer"><img src="https://github.com/TheWeaVer.png?size=128" width="64" height="64" alt="@TheWeaVer" title="@TheWeaVer" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/vivekkothari"><img src="https://github.com/vivekkothari.png?size=128" width="64" height="64" alt="@vivekkothari" title="@vivekkothari" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/imasahiro"><img src="https://github.com/imasahiro.png?size=128" width="64" height="64" alt="@imasahiro" title="@imasahiro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/richieyan"><img src="https://github.com/richieyan.png?size=128" width="64" height="64" alt="@richieyan" title="@richieyan" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/amitvc"><img src="https://github.com/amitvc.png?size=128" width="64" height="64" alt="@amitvc" title="@amitvc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jasper-vandemalle"><img src="https://github.com/jasper-vandemalle.png?size=128" width="64" height="64" alt="@jasper-vandemalle" title="@jasper-vandemalle" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/szeiger"><img src="https://github.com/szeiger.png?size=128" width="64" height="64" alt="@szeiger" title="@szeiger" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/okue"><img src="https://github.com/okue.png?size=128" width="64" height="64" alt="@okue" title="@okue" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/berry120"><img src="https://github.com/berry120.png?size=128" width="64" height="64" alt="@berry120" title="@berry120" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mynameisjwlee"><img src="https://github.com/mynameisjwlee.png?size=128" width="64" height="64" alt="@mynameisjwlee" title="@mynameisjwlee" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/max904-github"><img src="https://github.com/max904-github.png?size=128" width="64" height="64" alt="@max904-github" title="@max904-github" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hirakida"><img src="https://github.com/hirakida.png?size=128" width="64" height="64" alt="@hirakida" title="@hirakida" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heka1024"><img src="https://github.com/heka1024.png?size=128" width="64" height="64" alt="@heka1024" title="@heka1024" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/fclemonschool"><img src="https://github.com/fclemonschool.png?size=128" width="64" height="64" alt="@fclemonschool" title="@fclemonschool" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/selectAll"><img src="https://github.com/selectAll.png?size=128" width="64" height="64" alt="@selectAll" title="@selectAll" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/policeman-kh"><img src="https://github.com/policeman-kh.png?size=128" width="64" height="64" alt="@policeman-kh" title="@policeman-kh" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/freevie"><img src="https://github.com/freevie.png?size=128" width="64" height="64" alt="@freevie" title="@freevie" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eugene70"><img src="https://github.com/eugene70.png?size=128" width="64" height="64" alt="@eugene70" title="@eugene70" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Waynefn"><img src="https://github.com/Waynefn.png?size=128" width="64" height="64" alt="@Waynefn" title="@Waynefn" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/octo47"><img src="https://github.com/octo47.png?size=128" width="64" height="64" alt="@octo47" title="@octo47" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/haithamgabr"><img src="https://github.com/haithamgabr.png?size=128" width="64" height="64" alt="@haithamgabr" title="@haithamgabr" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wasifaleemdd"><img src="https://github.com/wasifaleemdd.png?size=128" width="64" height="64" alt="@wasifaleemdd" title="@wasifaleemdd" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/nirvanarsc"><img src="https://github.com/nirvanarsc.png?size=128" width="64" height="64" alt="@nirvanarsc" title="@nirvanarsc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/karellen-kim"><img src="https://github.com/karellen-kim.png?size=128" width="64" height="64" alt="@karellen-kim" title="@karellen-kim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/inch772"><img src="https://github.com/inch772.png?size=128" width="64" height="64" alt="@inch772" title="@inch772" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/fantayeneh"><img src="https://github.com/fantayeneh.png?size=128" width="64" height="64" alt="@fantayeneh" title="@fantayeneh" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/m50d"><img src="https://github.com/m50d.png?size=128" width="64" height="64" alt="@m50d" title="@m50d" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ateirney"><img src="https://github.com/ateirney.png?size=128" width="64" height="64" alt="@ateirney" title="@ateirney" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.13.2]]></title>
            <link>https://armeria.dev/release-notes/1.13.2/</link>
            <guid>https://armeria.dev/release-notes/1.13.2/</guid>
            <pubDate>Tue, 26 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed the HTTP content corruption #3894 The corruption occurs when all the following 3 conditions are met: A request or response is streaming, such as using HttpResponse.streaming(); its content is lo...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.13.1]]></title>
            <link>https://armeria.dev/release-notes/1.13.1/</link>
            <guid>https://armeria.dev/release-notes/1.13.1/</guid>
            <pubDate>Wed, 20 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see an IllegalArgumentException when a port-based virtual host and TLS are configured together. #3883 A request content preview is produced properly when a decorator that delays the subs...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.13.0]]></title>
            <link>https://armeria.dev/release-notes/1.13.0/</link>
            <guid>https://armeria.dev/release-notes/1.13.0/</guid>
            <pubDate>Fri, 15 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now customize HTTP/1 header names on the server side using ServerBuilder.http1HeaderNaming(). #3845 #3866 Server.builder() .http1HeaderNaming(Http1HeaderNaming.traditional()); You can now easi...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.12.0]]></title>
            <link>https://armeria.dev/release-notes/1.12.0/</link>
            <guid>https://armeria.dev/release-notes/1.12.0/</guid>
            <pubDate>Thu, 07 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now enable HTTP/JSON to GRPC transcoding in your GrpcService. #3786 GrpcService.builder() .addService(helloService) .enableHttpJsonTranscoding(true) // üëàüëàüëà .build(); tipHTTP/JSON transcodin...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.11.0]]></title>
            <link>https://armeria.dev/release-notes/1.11.0/</link>
            <guid>https://armeria.dev/release-notes/1.11.0/</guid>
            <pubDate>Fri, 27 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now easily check if the system has a working IPv6 stack using SystemInfo.hasIpV6(). #3784 üìà Improvements‚Äã The cost of creating an Endpoint is reduced by cache. #3767 #3772 üõ†Ô∏è Bug fixes‚Äã No m...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.10.0]]></title>
            <link>https://armeria.dev/release-notes/1.10.0/</link>
            <guid>https://armeria.dev/release-notes/1.10.0/</guid>
            <pubDate>Thu, 19 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[A new module armeria-sangria that integrates with Sangria GraphQL is introduced to let you serve a GraphQL request in Scala. #3703 #3704 val schema: Schema[CharacterRepo, Unit] = Schema(Query)Server.b...]]></description>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Customizing Armeria metrics]]></title>
            <link>https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics</link>
            <guid>https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics</guid>
            <pubDate>Wed, 04 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[In my last post, Monitoring Prometheus metrics from Armeria, we took a look at how you can monitor Armeria metrics using Grafana.]]></description>
            <content:encoded><![CDATA[<p>In my last post, <a class="" href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria">Monitoring Prometheus metrics from Armeria</a>, we took a look at how you can monitor Armeria metrics using Grafana.
In this post, I would like to show you how you can customize Armeria metrics to suit your needs.</p>
<!-- -->
<blockquote>
<p>The sample code in this post uses the same sample code from <a class="" href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria">Monitoring Prometheus metrics from Armeria</a>.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="customizing-metrics-prefixes-using-meteridprefixfunction">Customizing metrics prefixes using MeterIdPrefixFunction<a href="https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics#customizing-metrics-prefixes-using-meteridprefixfunction" class="hash-link" aria-label="Direct link to Customizing metrics prefixes using MeterIdPrefixFunction" title="Direct link to Customizing metrics prefixes using MeterIdPrefixFunction" translate="no">‚Äã</a></h2>
<p>In the last post I mentioned that you can customize the default prefix appended to metrics by using the <a href="https://javadoc.io/static/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html#ofDefault(java.lang.String)" target="_blank" rel="noopener noreferrer" class=""><code>MeterIdPrefixFunction#ofDefault</code></a> function.
You can further customize these prefixes by using the <a href="https://javadoc.io/static/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html#andThen(com.linecorp.armeria.common.metric.MeterIdPrefixFunctionCustomizer)" target="_blank" rel="noopener noreferrer" class=""><code>MeterIdPrefixFunction#andThen</code></a> function.</p>
<p>Let's assume you want to add an HTTP method name as your prefix.</p>
<ul>
<li class="">AS-IS: <code>my_http_service</code></li>
<li class="">TO-BE: <code>my_http_service_{HTTP method}</code></li>
</ul>
<p>First you must generate a class that implements <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/metric/MeterIdPrefixFunctionCustomizer.html" target="_blank" rel="noopener noreferrer" class=""><code>MeterIdPrefixFunctionCustomizer</code></a>.
You can add your HTTP method name to your existing <code>MeterIdPrefix</code> in the <code>MeterIdPrefixFunctionCustomizer#apply</code> function.</p>
<p>While doing so, you can use <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/logging/RequestOnlyLog.html#requestHeaders()" target="_blank" rel="noopener noreferrer" class=""><code>RequestLog#requestHeaders</code></a> to get the request's HTTP method name.
Various other information generated while processing a single request gets collected on <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/logging/RequestLog.html" target="_blank" rel="noopener noreferrer" class=""><code>RequestLog</code></a>.
For more information about this, please refer to the <a href="https://armeria.dev/docs/advanced-structured-logging/" target="_blank" rel="noopener noreferrer" class="">Official Armeria documentation</a>.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">MeterIdPrefixFunctionCustomizer.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyMeterIdPrefixFunction</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">MeterIdPrefixFunctionCustomizer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">MeterIdPrefix</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">RequestOnlyLog</span><span class="token plain"> log</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MeterIdPrefix</span><span class="token plain"> meterIdPrefix</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> meterIdPrefix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">method</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Next we insert the class's instance using the <a href="https://javadoc.io/static/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/metric/MeterIdPrefixFunction.html#andThen(com.linecorp.armeria.common.metric.MeterIdPrefixFunctionCustomizer)" target="_blank" rel="noopener noreferrer" class=""><code>MeterIdPrefixFunction#andThen</code></a> function.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ServerBuilder</span><span class="token plain"> sb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">http</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8083</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">meterRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meterRegistry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">annotatedService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/metrics"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MetricCollectingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.http.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                  </span><span class="token comment" style="color:#999988;font-style:italic">// add</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">andThen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyMeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Server</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre></div></div>
<p>After restarting the server, you can see that the HTTP method name has been appended to the front of your metrics.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -s http://localhost:8083/metrics | grep "my_http_service_"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HELP my_http_service_GET_timeouts_total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TYPE my_http_service_GET_timeouts_total counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_timeouts_total{cause="RequestTimeoutException",hostname_pattern="*",http_status="500",method="hello",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_timeouts_total{cause="RequestTimeoutException",hostname_pattern="*",http_status="200",method="hello",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HELP my_http_service_GET_active_requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TYPE my_http_service_GET_active_requests gauge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_active_requests{hostname_pattern="*",method="hello",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre></div></div>
<p>For an alternative method of doing this, you can use lambda expressions that have been introduced in Java 8.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">MeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.http.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">andThen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> log</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prefix</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> prefix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">method</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="customizing-http-api-response-success-predicate">Customizing HTTP API response success predicate<a href="https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics#customizing-http-api-response-success-predicate" class="hash-link" aria-label="Direct link to Customizing HTTP API response success predicate" title="Direct link to Customizing HTTP API response success predicate" translate="no">‚Äã</a></h2>
<p>Armeria's default settings are set to recognize HTTP API response status codes smaller than 100 or larger than 400 as failures.
However, you can use <code>MetricCollectingServiceBuilder#successFunction</code> to customize this predicate.</p>
<p>Let's assume the API has received a 404 status code response.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">MyAnnotatedService.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyAnnotatedService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/hello/{seq}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"seq"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> seq</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seq </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NOT_FOUND</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl http://localhost:8083/hello/5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">404 Not Found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -s http://localhost:8083/metrics | grep "my_http_service_GET_requests_total" | grep "404"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_requests_total{hostname_pattern="*",http_status="404",method="hello",result="success",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_requests_total{hostname_pattern="*",http_status="404",method="hello",result="failure",service="com.example.armeria_prometheus.MyAnnotatedService",} 1.0</span><br></span></code></pre></div></div>
<p>If you wish to change a 404 status code from a failure to a success, get the HTTP status from <a href="https://javadoc.io/static/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/logging/RequestLog.html#responseHeaders()" target="_blank" rel="noopener noreferrer" class=""><code>RequestLog#responseHeaders</code></a> and implement <a href="https://javadoc.io/static/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/server/metric/MetricCollectingServiceBuilder.html#successFunction(java.util.function.BiPredicate)" target="_blank" rel="noopener noreferrer" class=""><code>MetricCollectingServiceBuilder#successFunction</code></a> as follows.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MetricCollectingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.http.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">andThen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyMeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token comment" style="color:#999988;font-style:italic">// add</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">successFunction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> log</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> statusCode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">responseHeaders</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">code</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">statusCode </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> statusCode </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> statusCode </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">404</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre></div></div>
<p>You can see that the test results below show the 404 status code response as a success.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -s http://localhost:8083/metrics | grep "my_http_service_GET_requests_total" | grep "404"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_requests_total{hostname_pattern="*",http_status="404",method="hello",result="success",service="com.example.armeria_prometheus.MyAnnotatedService",} 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_GET_requests_total{hostname_pattern="*",http_status="404",method="hello",result="failure",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="filtering-metrics">Filtering metrics<a href="https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics#filtering-metrics" class="hash-link" aria-label="Direct link to Filtering metrics" title="Direct link to Filtering metrics" translate="no">‚Äã</a></h2>
<p>You can filter out unwanted metrics from your logs by using MeterFilter.
For example, if you wish to remove JVM metrics from your logs, configure <a href="https://www.javadoc.io/doc/io.micrometer/micrometer-core/latest/io/micrometer/core/instrument/config/MeterFilter.html" target="_blank" rel="noopener noreferrer" class=""><code>MeterFilter</code></a> as follows.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">PrometheusMeterRegistry</span><span class="token plain"> meterRegistry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PrometheusMeterRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">PrometheusConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">DEFAULT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        meterRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">meterFilter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterFilter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">denyNameStartsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"jvm"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ServerBuilder</span><span class="token plain"> sb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">http</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8083</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">meterRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meterRegistry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre></div></div>
<p>You can see that all <code>jvm_</code> metrics have been removed.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -s http://localhost:8083/metrics | grep "^jvm"</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="collecting-grpc-metrics">Collecting gRPC metrics<a href="https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics#collecting-grpc-metrics" class="hash-link" aria-label="Direct link to Collecting gRPC metrics" title="Direct link to Collecting gRPC metrics" translate="no">‚Äã</a></h2>
<p>Using Armeria's <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/common/grpc/GrpcMeterIdPrefixFunction.html" target="_blank" rel="noopener noreferrer" class=""><code>GrpcMeterIdPrefixFunction</code></a>, you can collect metrics related to <a href="https://grpc.github.io/grpc/core/md_doc_statuscodes.html" target="_blank" rel="noopener noreferrer" class="">gRPC status codes</a>.
To do this, add armeria-grpc to your dependencies as follows.</p>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">build.gradle</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Armeria</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.linecorp.armeria:armeria:1.8.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.linecorp.armeria:armeria-logback:1.8.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.linecorp.armeria:armeria-grpc:1.8.0"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// add</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>For testing purposes, I've created a simple gRPC service as follows.</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">hello.proto</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">syntax</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"proto3"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> com</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">example</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">armeria_prometheus</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">option</span><span class="token plain"> java_package </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"com.example.armeria_prometheus.grpc"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">HelloService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Hello</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HelloReply</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">message</span><span class="token plain"> </span><span class="token class-name">HelloRequest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">int32</span><span class="token plain"> seq </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">message</span><span class="token plain"> </span><span class="token class-name">HelloReply</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">MyGrpcService.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyGrpcService</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">HelloServiceGrpc</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">HelloServiceImplBase</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HelloRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">StreamObserver</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">HelloReply</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> responseObserver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSeq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">HelloReply</span><span class="token plain"> reply </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">HelloReply</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Success"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseObserver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onNext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseObserver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onCompleted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        responseObserver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Status</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INTERNAL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>I've added the gRPC service created above as a new service.
In order to prevent affecting existing HTTP metric collection, I've applied a <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/server/metric/MetricCollectingService.html" target="_blank" rel="noopener noreferrer" class=""><code>MetricCollectingService</code></a> decorator to each service.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">annotatedService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyAnnotatedService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token class-name">MetricCollectingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.http.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                          </span><span class="token comment" style="color:#999988;font-style:italic">// ... √¨¬É¬ù√´¬û¬µ ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GrpcService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyGrpcService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token class-name">MetricCollectingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GrpcMeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.grpc.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/metrics"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">PrometheusExpositionService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meterRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPrometheusRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre></div></div>
<p>For easier testing, I've added client code that triggers multiple gRPC requests.
Writing client code is also made easier when you're using Armeria.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">RpcClientApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">RpcClientApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RpcClientApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">HelloServiceBlockingStub</span><span class="token plain"> helloService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Clients</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"gproto+http://127.0.0.1:8083/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">HelloServiceBlockingStub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">HelloRequest</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">HelloRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSeq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">HelloReply</span><span class="token plain"> reply </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> helloService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reply</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Error"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Restart your server and run the client code.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -s http://localhost:8083/metrics | grep "my_grpc_service_requests_total"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HELP my_grpc_service_requests_total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TYPE my_grpc_service_requests_total counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_grpc_service_requests_total{grpc_status="13",hostname_pattern="*",http_status="200",method="Hello",result="success",service="com.example.armeria_prometheus.HelloService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_grpc_service_requests_total{grpc_status="13",hostname_pattern="*",http_status="200",method="Hello",result="failure",service="com.example.armeria_prometheus.HelloService",} 34.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_grpc_service_requests_total{grpc_status="0",hostname_pattern="*",http_status="200",method="Hello",result="failure",service="com.example.armeria_prometheus.HelloService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_grpc_service_requests_total{grpc_status="0",hostname_pattern="*",http_status="200",method="Hello",result="success",service="com.example.armeria_prometheus.HelloService",} 66.0</span><br></span></code></pre></div></div>
<p>You can see that the <a href="https://grpc.github.io/grpc/core/md_doc_statuscodes.html" target="_blank" rel="noopener noreferrer" class="">gRPC status code</a> metrics are collected and displayed.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="https://armeria.dev/blog/2021/08/04/customizing-armeria-metrics#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">‚Äã</a></h2>
<p>Armeria also provides features that various users can use for collecting metrics.
I hope many server engineers find these features useful and make their monitoring efforts more productive.</p>]]></content:encoded>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Monitoring Prometheus metrics from Armeria]]></title>
            <link>https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria</link>
            <guid>https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria</guid>
            <pubDate>Fri, 09 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[In this post, we'll be taking a look at how you can monitor Prometheus metrics collected with Armeria.]]></description>
            <content:encoded><![CDATA[<p>In this post, we'll be taking a look at how you can monitor <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer" class="">Prometheus</a> metrics collected with <a href="https://armeria.dev/" target="_blank" rel="noopener noreferrer" class="">Armeria</a>.
For those of you who are trying Armeria for the first time, I will be adding simple practice samples so that you can follow along.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="practice-exercise">Practice exercise<a href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria#practice-exercise" class="hash-link" aria-label="Direct link to Practice exercise" title="Direct link to Practice exercise" translate="no">‚Äã</a></h2>
<p>The practice session was designed on macOS Big Sur.
Let's now take a look at how you should install and configure Gradle, Prometheus, and <a href="https://grafana.com/" target="_blank" rel="noopener noreferrer" class="">Grafana</a> to run the samples, and see what the results are.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-gradle">Configuring Gradle<a href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria#configuring-gradle" class="hash-link" aria-label="Direct link to Configuring Gradle" title="Direct link to Configuring Gradle" translate="no">‚Äã</a></h3>
<p>I've defined the following dependencies on the 'build.gradle' file to collect the Prometheus metrics from the Armeria server.</p>
<div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">build.gradle</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Armeria</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.linecorp.armeria:armeria:1.8.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.linecorp.armeria:armeria-logback:1.8.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Prometheus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation </span><span class="token interpolation-string string" style="color:#e3116c">"io.micrometer:micrometer-registry-prometheus:1.7.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>I've also prepared a simple REST API that responds to a <code>/hello/{seq}</code>GET request with "Success" or "Failure" for the purpose of our exercise.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">MyAnnotatedService.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyAnnotatedService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/hello/{seq}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">hello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@Param</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"seq"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> seq</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seq </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INTERNAL_SERVER_ERROR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">MediaType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">PLAIN_TEXT_UTF_8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Success"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Below is the <code>main()</code> function code for running an Armeria server</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ArmeriaPrometheusApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">PrometheusMeterRegistry</span><span class="token plain"> meterRegistry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PrometheusMeterRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">PrometheusConfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">DEFAULT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Server</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">http</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8083</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">meterRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meterRegistry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">annotatedService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyAnnotatedService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/metrics"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">PrometheusExpositionService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meterRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPrometheusRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MetricCollectingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.http.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CompletableFuture</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> future </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>You must always add <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/server/metric/MetricCollectingService.html" target="_blank" rel="noopener noreferrer" class="">MetricCollectingService</a> as a <code>decorator</code> if you want to collect service metrics. (You can find more on how to do this in the <a href="https://armeria.dev/docs/advanced-metrics/" target="_blank" rel="noopener noreferrer" class="">official Armeria documentation</a>.).
You can customize the default prefix of the metrics by specifying the parameter of the <code>MeterIdPrefixFunction.ofDefault()</code> function.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MyAnnotatedService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token class-name">MetricCollectingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MeterIdPrefixFunction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"my.http.service"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Use <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/server/metric/PrometheusExpositionService.html" target="_blank" rel="noopener noreferrer" class="">PrometheusExpositionService</a> to configure the path to output the Prometheus metrics.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">ArmeriaPrometheusApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/metrics"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">PrometheusExpositionService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">meterRegistry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPrometheusRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Send a request with the <code>/hello</code> API to check if there is a proper response.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl http://localhost:8083/hello/1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ curl http://localhost:8083/hello/3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">500 Internal Server Error</span><br></span></code></pre></div></div>
<p>Also check if a request with the <code>/metrics</code>API properly returns the Prometheus metrics as a response.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -s http://localhost:8083/metrics | grep "my_http_service_requests_total"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HELP my_http_service_requests_total</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># TYPE my_http_service_requests_total counter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_requests_total{hostname_pattern="*",http_status="500",method="hello",result="success",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_requests_total{hostname_pattern="*",http_status="200",method="hello",result="failure",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_requests_total{hostname_pattern="*",http_status="200",method="hello",result="success",service="com.example.armeria_prometheus.MyAnnotatedService",} 1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my_http_service_requests_total{hostname_pattern="*",http_status="500",method="hello",result="failure",service="com.example.armeria_prometheus.MyAnnotatedService",} 1.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-and-configuring-prometheus">Installing and configuring Prometheus<a href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria#installing-and-configuring-prometheus" class="hash-link" aria-label="Direct link to Installing and configuring Prometheus" title="Direct link to Installing and configuring Prometheus" translate="no">‚Äã</a></h3>
<p>First install Prometheus with the <a href="https://brew.sh/index_ko" target="_blank" rel="noopener noreferrer" class="">Homebrew</a> package manager.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew install prometheus</span><br></span></code></pre></div></div>
<p>When the installation process is finished, a file named 'prometheus.yml' is created.
You can use this YAML file to change Prometheus configurations.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ vi $(brew --prefix)/etc/prometheus.yml</span><br></span></code></pre></div></div>
<p>Carefully enter the paths and ports for collecting the Prometheus metrics in the configuration file.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">prometheus.yml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'armeria-prometheus'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metrics_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/metrics'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">static_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'localhost:8083'</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>Once you have made the changes, you must restart the Prometheus service to apply the changed settings.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew services start prometheus</span><br></span></code></pre></div></div>
<p>Prometheus uses the 9090 port by default.
Navigate to <a href="http://localhost:9090/" target="_blank" rel="noopener noreferrer" class="">http://localhost:9090</a> on your browser and you will see the screen shown below.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-1-d761e7cf42bde79256e6b3acd7f73941.png" width="1024" height="317" class="img_ev3q"></p>
<p>Enter "Armeria" into the search field to check if the related metrics have been properly collected from the Prometheus server.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-2-57ec3c55f86df941b1757ef46c971024.png" width="1024" height="388" class="img_ev3q"></p>
<p>Try sending multiple <code>/hello/{seq}</code> API requests and see if the <code>my_http_service_requests_total</code> metric properly increases.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-3-42f66c9e85883a24608a69d73ecc4c0b.png" width="1024" height="475" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-and-configuring-grafana">Installing and configuring Grafana<a href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria#installing-and-configuring-grafana" class="hash-link" aria-label="Direct link to Installing and configuring Grafana" title="Direct link to Installing and configuring Grafana" translate="no">‚Äã</a></h3>
<p>Install and run the Grafana service using Homebrew the same way you installed Prometheus.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew install grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ brew services start grafana</span><br></span></code></pre></div></div>
<p>Grafana uses the 3000 port by default.
Navigate to <a href="http://localhost:3000/" target="_blank" rel="noopener noreferrer" class="">http://localhost:3000</a> on your browser and you will see the login screen shown below.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-4-59a3e9308b0cfcf44a86c758be874099.png" width="1024" height="528" class="img_ev3q"></p>
<p>Don't worry if you have never created an account.
You can enter 'admin' on both the <strong>Email or username</strong> and <strong>Password</strong> field to log in.
As you can probably tell from the name, "admin" is a very basic account, and you will need to create a proper new account when you actually run the service in a real environment.</p>
<p>Enter the path to Prometheus in the <strong>Data Source</strong> field to display the Prometheus metrics as a graph on Grafana.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-5-7ea539d66490a74cd206f210a73f0f84.png" width="840" height="411" class="img_ev3q"></p>
<p>Next, create a dashboard and then add a panel where you can monitor the number of successful and unsuccessful attempts of the <code>/hello/{seq}</code> API.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-6-4c5290f42ab658d351a7c297a4e7fdcb.png" width="1024" height="581" class="img_ev3q"></p>
<p>The queries are as follows.</p>
<ul>
<li class="">200: <code>increase(my_http_service_requests_total{hostname_pattern="*", method="hello", http_status="200", result="success", service="com.example.armeria_prometheus.MyAnnotatedService"}[1m])</code></li>
<li class="">500: <code>increase(my_http_service_requests_total{hostname_pattern="*", method="hello", http_status="500", result="failure", service="com.example.armeria_prometheus.MyAnnotatedService"}[1m])</code></li>
</ul>
<p>The <code>armeria_server_requests_total</code> metric is a <a href="https://prometheus.io/docs/concepts/metric_types/#counter" target="_blank" rel="noopener noreferrer" class="">Counter</a>-type metric that only continues to increase until you reset it.
Because of this, the cumulative amount of times the API call succeeded or failed doesn't provide much insight when monitoring in a real environment.
What you should instead focus on, is how many times it either succeeded or failed in a given time frame .
For this purpose, you can use the <a href="https://prometheus.io/docs/prometheus/latest/querying/functions/#increase" target="_blank" rel="noopener noreferrer" class="">increase()</a> function to express the number of successful and unsuccessful attempts per minute as a graph.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-results">Test results<a href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria#test-results" class="hash-link" aria-label="Direct link to Test results" title="Direct link to Test results" translate="no">‚Äã</a></h3>
<p>Let's now run the client code below to send 100 API requests. (We used Armeria's <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html" target="_blank" rel="noopener noreferrer" class="">WebClient</a>)</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">HttpClientApplication.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">HttpClientApplication</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpClientApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">WebClient</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">WebClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://localhost:8083/"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">AggregatedHttpResponse</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/hello/"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">aggregate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">UTF_8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>You can see the results of calling the <code>/hello/{seq}</code> API being expressed as a beautiful graph on Grafana.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-prometheus-metrics-from-armeria-7-14b9783a6a86ef8e9f99c0251d8c241e.png" width="1024" height="377" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="closing-words">Closing words<a href="https://armeria.dev/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria#closing-words" class="hash-link" aria-label="Direct link to Closing words" title="Direct link to Closing words" translate="no">‚Äã</a></h2>
<p>In this post, we took a look at how you can monitor Prometheus metrics collected from running an Armeria server, using a Grafana dashboard.
Armeria provides various features for collecting metrics, and in our next post we will take a look at how you can customize the metrics you collect from Armeria to your needs.</p>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.9.2]]></title>
            <link>https://armeria.dev/release-notes/1.9.2/</link>
            <guid>https://armeria.dev/release-notes/1.9.2/</guid>
            <pubDate>Fri, 02 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see a ResponseTimeoutException when collecting a large number of messages using HttpRequest.aggregate() and HttpResponse.aggregate(). #3670 Armeria doesn&#x27;t fail to load a class in s...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.9.1]]></title>
            <link>https://armeria.dev/release-notes/1.9.1/</link>
            <guid>https://armeria.dev/release-notes/1.9.1/</guid>
            <pubDate>Thu, 24 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see ClassCastException when EpollChannelOption.TCP_USER_TIMEOUT or IOUringChannelOption.TCP_USER_TIMEOUT is automatically enabled. #3659 ServerPort.hasProtocol() doesn&#x27;t return fals...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.9.0]]></title>
            <link>https://armeria.dev/release-notes/1.9.0/</link>
            <guid>https://armeria.dev/release-notes/1.9.0/</guid>
            <pubDate>Wed, 23 Jun 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[A new module armeria-graphql integrates with GraphQL Java to let you serve GraphQL requests. #3318 #3373 ServerBuilder sb = ...;sb.service(&quot;/graphql&quot;, GraphqlService.builder() .schemaFile(sc...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.8.0]]></title>
            <link>https://armeria.dev/release-notes/1.8.0/</link>
            <guid>https://armeria.dev/release-notes/1.8.0/</guid>
            <pubDate>Fri, 14 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now create a HealthChecker that updates its healthiness periodically. #3392 #3406 HealthChecker.of(() -&gt; { HealthCheckStatus status = ...; UnmodifiableFuture.completedFuture(status);}, Dura...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.7.2]]></title>
            <link>https://armeria.dev/release-notes/1.7.2/</link>
            <guid>https://armeria.dev/release-notes/1.7.2/</guid>
            <pubDate>Fri, 30 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[We fixed the bad POM files in the artifacts distributed via Maven Central. line/gradle-scripts#95 The bad POM started to show up since 1.7.0. You no longer see a NullPointerException when a server sen...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.7.1]]></title>
            <link>https://armeria.dev/release-notes/1.7.1/</link>
            <guid>https://armeria.dev/release-notes/1.7.1/</guid>
            <pubDate>Thu, 29 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You no longer see an incomplete RequestLog on the server-side when a client cancels a request. #3494 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their brill...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.7.0]]></title>
            <link>https://armeria.dev/release-notes/1.7.0/</link>
            <guid>https://armeria.dev/release-notes/1.7.0/</guid>
            <pubDate>Wed, 28 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now monitor the state of all live threads and heap using ManagementService. #3463 // ServerServer.builder() .serviceUnder(&quot;/internal/management/&quot;, ManagementService.of()) ...// Clien...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.6.0]]></title>
            <link>https://armeria.dev/release-notes/1.6.0/</link>
            <guid>https://armeria.dev/release-notes/1.6.0/</guid>
            <pubDate>Wed, 07 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now send and handle multipart requests and responses. #253 #3327 // Send a multipart message.WebClient client = WebClient.of(&quot;http://example.com/&quot;);BodyPart part1 = BodyPart.of(Conte...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.5.0]]></title>
            <link>https://armeria.dev/release-notes/1.5.0/</link>
            <guid>https://armeria.dev/release-notes/1.5.0/</guid>
            <pubDate>Sat, 13 Feb 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now run asynchronous Servlets in JettyService. #3320 #3331 JettyService.builder() .handler(new AbstractHandler() { @Override public void handle(String target, Request baseRequest, HttpServletR...]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 2]]></title>
            <link>https://armeria.dev/news/20210202-newsletter-2</link>
            <guid>https://armeria.dev/news/20210202-newsletter-2</guid>
            <pubDate>Tue, 02 Feb 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[From the devs]]></description>
            <content:encoded><![CDATA[<video class="hideOnReducedMotion" src="/assets/medias/armeria-f275354e25be493d6b926dc433dd3ac1.m4v" preload="none" autoplay="" muted="" loop="" style="width:282px;height:112px"><img src="https://armeria.dev/assets/images/armeria-9a5f775a301c3145a3ef29a69c0b3dee.gif" loading="lazy" width="282" height="112" alt="Armeria Logo Animation"></video>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20210202-newsletter-2#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<p>‚ú® <a class="" href="https://armeria.dev/release-notes/1.4.0/">Armeria 1.4.0</a> has been released.</p>
<ul>
<li class=""><a href="https://consul.io/" target="_blank" rel="noopener noreferrer" class="">Consul</a> service discovery support<!-- -->
<ul>
<li class=""><a class="" href="https://armeria.dev/docs/server/service-registration/#consul-based-service-registration-with-consulupdatinglistener">Consul Registration for Server</a></li>
<li class=""><a class="" href="https://armeria.dev/docs/client/service-discovery/#consul-based-service-discovery-with-consulendpointgroup">Consul Service Discovery for Client</a></li>
</ul>
</li>
<li class="">Protect a fresh node from getting too much traffic suddenly by smoothly ramping up the weight of
<code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html" title="Endpoint">Endpoint<span class="suffix_sw1f">s</span></a></code> in an <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointGroup.html" title="EndpointGroup">EndpointGroup<span class="suffix_sw1f"></span></a></code> using <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelectionStrategy.html#rampingUp()" title="EndpointSelectionStrategy.rampingUp()">EndpointSelectionStrategy.rampingUp()<span class="suffix_sw1f"></span></a></code>.</li>
<li class="">Ability to close a connection after handling a certain number of requests or after a certain period of time,
rather than keeping it open indefinitely.</li>
</ul>
<p>üèÜ We nominated contributors for a reward!</p>
<ul>
<li class="">From the last contributor reward in April 2019 to Armeria 1.3.0 release in December 2020,
Armeria got 63 contributors.</li>
<li class="">Surprisingly, 52 of them were first-time contributors.</li>
<li class="">As a token of appreciation, we've sent a thank you note with a gift.</li>
<li class="">Thanks all for participating with us, and we're looking forward to seeing you keep it up with this year. üòÑ</li>
</ul>
<!-- -->
<div class="react-tweet-theme root_D3qd root_Y6tr"><article class="article_kRZ8"><span class="skeleton_FMR8" style="height:3rem;margin-bottom:0.75rem"></span><span class="skeleton_FMR8" style="height:6rem;margin:0.5rem 0"></span><div style="border-top:var(--tweet-border);margin:0.5rem 0"></div><span class="skeleton_FMR8" style="height:2rem"></span><span class="skeleton_FMR8" style="height:2rem;border-radius:9999px;margin-top:0.5rem"></span></article></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20210202-newsletter-2#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<p>üìù <a href="https://doordash.engineering/2021/01/12/building-a-grpc-client-standard-with-open-source/" target="_blank" rel="noopener noreferrer" class="">Building a gRPC Client Standard with Open Source to Boost Reliability and Velocity</a> | by <a href="https://github.com/haithamgabr" target="_blank" rel="noopener noreferrer" class=""><strong>@haithamgabr</strong></a></p>
<ul>
<li class=""><a href="https://doordash.engineering/" target="_blank" rel="noopener noreferrer" class="">Doordash engineering</a> has adopted Armeria as a gRPC client, using the features
like DNS service discovery, client-side load balancing, and circuit breaker.</li>
</ul>
<p>üé§ <a href="https://spring.io/blog/2021/01/07/a-bootiful-podcast-netty-and-armeria-founder-trustin-lee" target="_blank" rel="noopener noreferrer" class="">A Bootiful Podcast: Netty and Armeria founder Trustin Lee</a> | by <a href="https://github.com/trustin" target="_blank" rel="noopener noreferrer" class=""><strong>@trustin</strong></a> and <a href="https://github.com/joshlong" target="_blank" rel="noopener noreferrer" class=""><strong>@joshlong</strong></a></p>
<ul>
<li class=""><a href="https://github.com/joshlong" target="_blank" rel="noopener noreferrer" class=""><strong>@joshlong</strong></a> interviews Netty and Armeria founder <a href="https://github.com/trustin" target="_blank" rel="noopener noreferrer" class=""><strong>@trustin</strong></a>. As you may notice from this episode,
Trustin is now mainly working on Armeria from <a href="https://databricks.com/" target="_blank" rel="noopener noreferrer" class="">Databricks</a>.</li>
</ul>
<p>üöÄ <a href="https://github.com/http4s/http4s-armeria" target="_blank" rel="noopener noreferrer" class="">http4s-armeria 0.1.0 released</a></p>
<ul>
<li class="">Good news for Scala users; you can now use Armeria as a backend for <a href="https://http4s.org/" target="_blank" rel="noopener noreferrer" class="">http4s</a>.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20210202-newsletter-2#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<p>ü§î Your opinion means a lot to us. Please let us know what you think about these proposals:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/3051" target="_blank" rel="noopener noreferrer" class="">#3051</a> Use context for when the subscriber is created by Reactor, not Publisher</li>
<li class=""><a href="https://github.com/line/armeria/issues/3155" target="_blank" rel="noopener noreferrer" class="">#3155</a> Unify gRPC timeout scheduler between gRPC server and client.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20210202-newsletter-2#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<p>Want to contribute but not sure where to start from? Try one of these:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/3315" target="_blank" rel="noopener noreferrer" class="">#3315</a> Programmatically create a blocking task executor with a custom thread size,
perhaps by adding a new builder method to <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html" title="ServerBuilder">ServerBuilder<span class="suffix_sw1f"></span></a></code> that takes the number of threads.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20210202-newsletter-2#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20210202-newsletter-2#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Ubehebe"><img src="https://github.com/Ubehebe.png?size=128" width="64" height="64" alt="@Ubehebe" title="@Ubehebe" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/imasahiro"><img src="https://github.com/imasahiro.png?size=128" width="64" height="64" alt="@imasahiro" title="@imasahiro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wooyeong"><img src="https://github.com/wooyeong.png?size=128" width="64" height="64" alt="@wooyeong" title="@wooyeong" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/aanrii"><img src="https://github.com/aanrii.png?size=128" width="64" height="64" alt="@aanrii" title="@aanrii" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/joonhaeng"><img src="https://github.com/joonhaeng.png?size=128" width="64" height="64" alt="@joonhaeng" title="@joonhaeng" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tumile"><img src="https://github.com/tumile.png?size=128" width="64" height="64" alt="@tumile" title="@tumile" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/delegacy"><img src="https://github.com/delegacy.png?size=128" width="64" height="64" alt="@delegacy" title="@delegacy" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/richieyan"><img src="https://github.com/richieyan.png?size=128" width="64" height="64" alt="@richieyan" title="@richieyan" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eisig"><img src="https://github.com/eisig.png?size=128" width="64" height="64" alt="@eisig" title="@eisig" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/okue"><img src="https://github.com/okue.png?size=128" width="64" height="64" alt="@okue" title="@okue" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jongmin92"><img src="https://github.com/jongmin92.png?size=128" width="64" height="64" alt="@jongmin92" title="@jongmin92" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kowshikn"><img src="https://github.com/kowshikn.png?size=128" width="64" height="64" alt="@kowshikn" title="@kowshikn" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eonezhang"><img src="https://github.com/eonezhang.png?size=128" width="64" height="64" alt="@eonezhang" title="@eonezhang" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/cj848"><img src="https://github.com/cj848.png?size=128" width="64" height="64" alt="@cj848" title="@cj848" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/wickedev"><img src="https://github.com/wickedev.png?size=128" width="64" height="64" alt="@wickedev" title="@wickedev" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/m50d"><img src="https://github.com/m50d.png?size=128" width="64" height="64" alt="@m50d" title="@m50d" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jorgheymans"><img src="https://github.com/jorgheymans.png?size=128" width="64" height="64" alt="@jorgheymans" title="@jorgheymans" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/TimurKasatkin"><img src="https://github.com/TimurKasatkin.png?size=128" width="64" height="64" alt="@TimurKasatkin" title="@TimurKasatkin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eunchan-kim"><img src="https://github.com/eunchan-kim.png?size=128" width="64" height="64" alt="@eunchan-kim" title="@eunchan-kim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/windmeup"><img src="https://github.com/windmeup.png?size=128" width="64" height="64" alt="@windmeup" title="@windmeup" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/snaiper80"><img src="https://github.com/snaiper80.png?size=128" width="64" height="64" alt="@snaiper80" title="@snaiper80" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/gary-lo"><img src="https://github.com/gary-lo.png?size=128" width="64" height="64" alt="@gary-lo" title="@gary-lo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/arhont375"><img src="https://github.com/arhont375.png?size=128" width="64" height="64" alt="@arhont375" title="@arhont375" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/haithamgabr"><img src="https://github.com/haithamgabr.png?size=128" width="64" height="64" alt="@haithamgabr" title="@haithamgabr" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hexoul"><img src="https://github.com/hexoul.png?size=128" width="64" height="64" alt="@hexoul" title="@hexoul" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mauhiz"><img src="https://github.com/mauhiz.png?size=128" width="64" height="64" alt="@mauhiz" title="@mauhiz" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/progresivoJS"><img src="https://github.com/progresivoJS.png?size=128" width="64" height="64" alt="@progresivoJS" title="@progresivoJS" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/matsumana"><img src="https://github.com/matsumana.png?size=128" width="64" height="64" alt="@matsumana" title="@matsumana" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/codefromthecrypt"><img src="https://github.com/codefromthecrypt.png?size=128" width="64" height="64" alt="@codefromthecrypt" title="@codefromthecrypt" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/xmeng1"><img src="https://github.com/xmeng1.png?size=128" width="64" height="64" alt="@xmeng1" title="@xmeng1" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/policeman-kh"><img src="https://github.com/policeman-kh.png?size=128" width="64" height="64" alt="@policeman-kh" title="@policeman-kh" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/JunoJunho"><img src="https://github.com/JunoJunho.png?size=128" width="64" height="64" alt="@JunoJunho" title="@JunoJunho" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/rickyrattlesnake"><img src="https://github.com/rickyrattlesnake.png?size=128" width="64" height="64" alt="@rickyrattlesnake" title="@rickyrattlesnake" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/cnabro"><img src="https://github.com/cnabro.png?size=128" width="64" height="64" alt="@cnabro" title="@cnabro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/syleeeee"><img src="https://github.com/syleeeee.png?size=128" width="64" height="64" alt="@syleeeee" title="@syleeeee" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/masonshin"><img src="https://github.com/masonshin.png?size=128" width="64" height="64" alt="@masonshin" title="@masonshin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ks-kim"><img src="https://github.com/ks-kim.png?size=128" width="64" height="64" alt="@ks-kim" title="@ks-kim" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/perlun"><img src="https://github.com/perlun.png?size=128" width="64" height="64" alt="@perlun" title="@perlun" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/max904-github"><img src="https://github.com/max904-github.png?size=128" width="64" height="64" alt="@max904-github" title="@max904-github" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kojilin"><img src="https://github.com/kojilin.png?size=128" width="64" height="64" alt="@kojilin" title="@kojilin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/rolandblain"><img src="https://github.com/rolandblain.png?size=128" width="64" height="64" alt="@rolandblain" title="@rolandblain" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/renaudb"><img src="https://github.com/renaudb.png?size=128" width="64" height="64" alt="@renaudb" title="@renaudb" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eugene70"><img src="https://github.com/eugene70.png?size=128" width="64" height="64" alt="@eugene70" title="@eugene70" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/techno"><img src="https://github.com/techno.png?size=128" width="64" height="64" alt="@techno" title="@techno" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/smax48"><img src="https://github.com/smax48.png?size=128" width="64" height="64" alt="@smax48" title="@smax48" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.4.0]]></title>
            <link>https://armeria.dev/release-notes/1.4.0/</link>
            <guid>https://armeria.dev/release-notes/1.4.0/</guid>
            <pubDate>Mon, 01 Feb 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now register/discover your servers to/from Consul using a new armeria-consul module. #194 #2192 #3002 #3281 // RegistrationServer server = ...;server.addListener( ConsulUpdatingListener.builde...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.3.0]]></title>
            <link>https://armeria.dev/release-notes/1.3.0/</link>
            <guid>https://armeria.dev/release-notes/1.3.0/</guid>
            <pubDate>Mon, 30 Nov 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now use io_uring for efficient I/O processing in Linux. #3182 Specify the -Dcom.linecorp.armeria.transportType=io_uring JVM option to enable it. Netty&#x27;s io_uring transport is currently ex...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.2.0]]></title>
            <link>https://armeria.dev/release-notes/1.2.0/</link>
            <guid>https://armeria.dev/release-notes/1.2.0/</guid>
            <pubDate>Thu, 22 Oct 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now bind a GrpcService to a custom route path. #3072 #3083 This is useful if you want to serve an unframed gRPC service with RESTful routes. ServerBuilder sb = ...sb.service(GrpcService.builde...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.1.0]]></title>
            <link>https://armeria.dev/release-notes/1.1.0/</link>
            <guid>https://armeria.dev/release-notes/1.1.0/</guid>
            <pubDate>Tue, 22 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now inject your own MeterIdPrefixFunction when using Armeria Spring Boot integration. #3034 @Beanpublic MeterIdPrefixFunction myMeterIdPrefixFunction() { return MeterIdPrefixFunction.of(&quot;...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v1.0.0]]></title>
            <link>https://armeria.dev/release-notes/1.0.0/</link>
            <guid>https://armeria.dev/release-notes/1.0.0/</guid>
            <pubDate>Fri, 21 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now check whether a RequestContext contains an attribute or not conveniently using RequestContext.hasAttr() and RequestContext.hasOwnAttr(). #3014 You can now specify the default service and l...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.9]]></title>
            <link>https://armeria.dev/release-notes/0.99.9/</link>
            <guid>https://armeria.dev/release-notes/0.99.9/</guid>
            <pubDate>Mon, 03 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now add multiple request timeout callbacks using the following methods: #2937 #2939 ClientRequestContext.whenResponseTimingOut() ClientRequestContext.whenResponseTimedOut() ServiceRequestConte...]]></description>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Using Circuit Breakers with Armeria]]></title>
            <link>https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria</link>
            <guid>https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria</guid>
            <pubDate>Wed, 08 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[What is a circuit breaker?]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-circuit-breaker">What is a circuit breaker?<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#what-is-a-circuit-breaker" class="hash-link" aria-label="Direct link to What is a circuit breaker?" title="Direct link to What is a circuit breaker?" translate="no">‚Äã</a></h2>
<p>Suppose an unexpected failure occurs (For example, a network issue or a server crash) and a remote server is unable to respond to the request.
If so, the client who made the request to the remote server will either wait for a response until a timeout occurs, consume resources, or eventually continue to send unnecessary requests.
And on a Microservice Architecture (MSA), this client can also be a server for other services.
In the end, clients of this server will have the same problem.</p>
<!-- -->
<p>This continuous propagation of failures results in the failure of one remote server having a significant impact on all systems.
The concept that emerged to solve this problem is known as the circuit breaker.</p>
<p>In other words, circuit breakers are a fast method of failing a request from a client to a remote server when the failure rate exceeds a certain threshold, self-diagnosing that there is a problem with the server, and no longer sending unnecessary requests.
Using circuit breakers allows us to avoid the aforementioned problems and minimize the size of failure.</p>
<p>You can read more about the concept of circuit breakers in this article previously posted on the blog: <a class="" href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services">Circuit breakers for distributed services</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="status-of-a-circuit-breaker">Status of a circuit breaker<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#status-of-a-circuit-breaker" class="hash-link" aria-label="Direct link to Status of a circuit breaker" title="Direct link to Status of a circuit breaker" translate="no">‚Äã</a></h2>
<p>A circuit breaker can be in one of the following three states.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-1-f70bdace5b6c392763a6f834aac57203.png" width="1806" height="598" class="img_ev3q"></p>
<ul>
<li class=""><code>CLOSED</code>: The failure rate of the request is lower than the configured threshold. This is the initial and default state.</li>
<li class=""><code>OPEN</code>: The failure rate of the request is beyond the configured threshold. Errors occur immediately without sending the actual request (Fails fast).</li>
<li class=""><code>HALF_OPEN</code>: A status where the response is successful by sending a request once in the middle of the <code>OPEN</code> state. If successful, the state switches back to <code>CLOSED</code>. Upon failure, the state is left <code>OPEN</code>.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="armerias-circuit-breaker">Armeria's circuit breaker<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#armerias-circuit-breaker" class="hash-link" aria-label="Direct link to Armeria's circuit breaker" title="Direct link to Armeria's circuit breaker" translate="no">‚Äã</a></h2>
<p><a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">Armeria</a> is an open-source asynchronous microservice framework based on <a href="https://netty.io/" target="_blank" rel="noopener noreferrer" class="">Netty</a> that is maintained by LINE engineers, which can implement and provide circuit breakers directly.
Let me show you how circuit breakers work with Armeria.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="preparation">Preparation<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#preparation" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation" translate="no">‚Äã</a></h3>
<p>First, let's launch two simple servers (Server1, Server2) to send and receive requests.
Server1 sends a <code>/world</code> request to Server2 when a <code>/hello</code> request is received from the Client.
When you receive a response from Server2, you return the response back to the client.
Server1 is a server, but it is also a client of Server2.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-2-b3c58daca726cc29671eb155593a051c.png" width="840" height="234" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="server2-implementation-code">Server2 implementation code<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#server2-implementation-code" class="hash-link" aria-label="Direct link to Server2 implementation code" title="Direct link to Server2 implementation code" translate="no">‚Äã</a></h4>
<p>First, here is the implementation of Server2 which will receive the response of Server1.
In response to requests coming into <code>/world</code>, success (200) and failure (500) are simply implemented to return.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Server2Application.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Server2Application</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">AtomicInteger</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">REQ_CNT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AtomicInteger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ServerBuilder</span><span class="token plain"> sb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">http</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5008</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LoggingService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">service</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/world"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">REQ_CNT</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addAndGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INTERNAL_SERVER_ERROR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">HttpResponse</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Server</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CompletableFuture</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Void</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> future </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="server1-implementation-code">Server1 implementation code<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#server1-implementation-code" class="hash-link" aria-label="Direct link to Server1 implementation code" title="Direct link to Server1 implementation code" translate="no">‚Äã</a></h4>
<p>Here is the implementation of Server1.
Unlike the simple one using <code>ServerBuilder</code> on Server2, you can find the Service bean that receives requests from the client and the Client bean that sends requests to Server2.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Server1Application.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@SpringBootApplication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Server1Context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Server1Application</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SpringApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Server1Application</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Server1Context.java</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Server1Context</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">HttpServiceRegistrationBean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">httpService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">WebClient</span><span class="token plain"> webClient</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpServiceRegistrationBean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> webClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/world"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setServiceName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"httpService"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setRoute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Route</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">path</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/hello"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">methods</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">GET</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">WebClient</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">webClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CircuitBreakerStrategy</span><span class="token plain"> strategy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">CircuitBreakerStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onServerErrorStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// CircuitBreaker √¨¬Ñ¬§√¨ ¬ï!!!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">CircuitBreaker</span><span class="token plain"> circuitBreaker </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">CircuitBreaker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"test-circuit-breaker"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">counterSlidingWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">circuitOpenWindow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">failureRateThreshold</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">minimumRequestThreshold</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">trialRequestInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">WebClient</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http://localhost:5008"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LoggingClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CircuitBreakerHttpClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newDecorator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">circuitBreaker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> strategy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Pay attention to the fact that a Client object has its own <code>CircuitBreaker</code> when you use <code>CircuitBreaker</code> in Armeria.
In other words, if a new Client object is created for each request to Server2 and is extinguished after the request is completed, the <code>CircuitBreaker</code> connected to the Client would eventually become useless.</p>
<p>Therefore, we need a <code>WebClient</code> bean that sends requests to Server2 to reuse the same <code>WebClient</code> object for the requests to all Server2.
And we can apply <code>CircuitBreaker</code> to the <code>WebClient</code> object using the <a href="https://armeria.dev/docs/client-decorator" target="_blank" rel="noopener noreferrer" class="">Decorator</a> provided by Armeria.</p>
<p>Let's take a look at each field of the <code>CircuitBreaker</code> settings above.</p>
<ul>
<li class=""><code>counterSlidingWindow</code> (10s): The time interval between measuring the number of successful/failed requests in <code>CircuitBreaker</code>. It is used to determine what state to transition or maintain based on a 10-second aggregate.</li>
<li class=""><code>circuitOpenWindow</code>(5s): The duration that <code>CircuitBreaker</code> is kept <code>OPEN</code>. Throws an error right away without asking the external server for 5 seconds once in an <code>OPEN</code> state (<code>FailFastException</code>).</li>
<li class=""><code>failureRateThreshold</code>(0.3): The rate of failure of the request required to switch to an <code>OPEN</code> state. Requests greater than 0.3 (30%) must fail during the <code>circuitOpenWindow</code> time to enter the <code>OPEN</code> state.</li>
<li class=""><code>minimumRequestThreshold</code>(5): Minimum number of requests required for measurement. Even if the failure rate is higher than <code>failureRateThreshold</code>, it must be the result of at least five requests before it becomes <code>OPEN</code>.</li>
<li class=""><code>trialRequestInterval</code>(s): Time to remain in the <code>HALF_OPEN</code> state. For 3 seconds, it throws a <code>FailFastException</code> error as it did when it was <code>OPEN</code>, while sending requests to external servers to check if the server returned to normal. If the response to the request sent in these 3 seconds is successful, it immediately switches to the <code>CLOSED</code> state; if all fails, it goes back to the <code>OPEN</code> state.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="testing">Testing<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" translate="no">‚Äã</a></h3>
<p>Now let's send requests from the terminal to Server1 using the <a href="https://www.npmjs.com/package/loadtest" target="_blank" rel="noopener noreferrer" class="">loadtest</a> library.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ loadtest http://127.0.0.1:5007/hello --rps 1</span><br></span></code></pre></div></div>
<p>The log of Server1 provides information on the behavior of <code>CircuitBreaker</code>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-3-07759276f457694ff964d39a17233647.png" width="2780" height="440" class="img_ev3q"></p>
<p>When the server first started, the initial state of <code>CircuitBreaker</code> was <code>CLOSED</code>.</p>
<p>At 03:03:41.830 - Of the total 5 requests measured, the number of failures was 2, so the failure rate was 2/5 = 0.4.
Thus, the failure rate was greater than the previously set failure rate of 0.3 (<code>failureRateThreshold</code>) and the number of requests used in the measurement was greater than 5 (<code>minimumRequestThreshold</code>), so <code>CircuitBreaker</code> switched to the <code>OPEN</code> state.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-4-a2545fecd5a4cb40a6c7f1e9bc606001.png" width="3160" height="378" class="img_ev3q"></p>
<p>From 03:03:41.830 to 03:03:47.824 - <code>FailFastException</code> errors continued to occur during subsequent periods, in approximately 5 seconds (<code>circuitOpenWindow</code>). (If you check the logs on Server2, you can see that the request was not received at that time.)</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-5-fb48c4e7a8981c1da7c2dc9413a94d2f.png" width="2562" height="448" class="img_ev3q"></p>
<p>At 03:03:47.824 - the transition is made to the <code>HALF_OPEN</code> state, where requests from clients were actually sent to Server2.
At this point, the transmitted request luckily received a 200 response and then <code>CircuitBreaker</code> switched to the <code>CLOSED</code> state.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-6-26bbfb46bbe9fbc038bbac6a0eb170c2.png" width="3164" height="146" class="img_ev3q"></p>
<p>This process is repeated again because it is <code>CLOSED</code> again.
From 03:03:47.827 to 03:03:56.824 - The failure rate was measured for approximately 10 seconds (<code>counterSlidingWindow</code>), and the failure rate measured this time was 4/8 = 0.5, so <code>CircuitBreaker</code> switched back to the <code>OPEN</code> state.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-armeria-7-d5c6d32d0e6c79a216971115d5a25552.png" width="3156" height="626" class="img_ev3q"></p>
<p>We've taken a look at Armeria's circuit breaker in action with the simple test above.
I hope you now have a better understanding of what the various configurations and operations are for, and how easy it is to implement a circuit breaker client for yourself.</p>
<blockquote>
<p>For more information on Armeria's circuit breakers, please take a look at the <a href="https://line.github.io/armeria/client-circuit-breaker.html" target="_blank" rel="noopener noreferrer" class="">official Armeria documentation on circuit breakers</a>.</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="https://armeria.dev/blog/2020/07/08/circuit-breakers-armeria#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">‚Äã</a></h2>
<p>Armeria provides several features useful to running an MSA in addition to circuit breakers.
These features include client-side load balancing and auto-retry.
We use Armeria ourselves in our own OpenChat server development, and are enjoying the many benefits its features bring to our daily work.
I dedicate this post to the open-source Armeria development team who are working day and night to make requested features a reality.</p>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.8]]></title>
            <link>https://armeria.dev/release-notes/0.99.8/</link>
            <guid>https://armeria.dev/release-notes/0.99.8/</guid>
            <pubDate>Tue, 07 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now use ClientRequestContext to build a complex RetryRule and CircuitBreakerRule. #2851 RetryRuleWithContent.&lt;RpcResponse&gt;builder() .onServerErrorStatus() // Now it&#x27;s the BiPredicat...]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 1]]></title>
            <link>https://armeria.dev/news/20200703-newsletter-1</link>
            <guid>https://armeria.dev/news/20200703-newsletter-1</guid>
            <pubDate>Fri, 03 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[<img]]></description>
            <content:encoded><![CDATA[<img class="hideOnReducedMotion" src="https://i.imgur.com/iZf8DeG.gif" loading="lazy" width="250" height="159">
<p>Do you remember we once told you Armeria 1.0.0 will be out around the end of 2019? It's already 50% past
2020, COVID-19 still strays around the city, and we have yet a few issues in our ever-growing backlog for
the next release. Nevertheless, I feel like 1.0.0 is really close this time.
<a href="https://en.wiktionary.org/wiki/as%C3%AD_es_la_vida" target="_blank" rel="noopener noreferrer" class="">As√≠ es la vida!</a> üòÖ ‚Äî <a href="https://github.com/trustin" target="_blank" rel="noopener noreferrer" class=""><strong>@trustin</strong></a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20200703-newsletter-1#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<ul>
<li class="">We now have our own domain, <a href="https://armeria.dev/" target="_blank" rel="noopener noreferrer" class="">armeria.dev</a>! üåü</li>
<li class=""><a class="" href="https://armeria.dev/release-notes/0.99.8">Armeria 0.99.8</a>, <a class="" href="https://armeria.dev/release-notes/0.99.7">0.99.7</a> and <a class="" href="https://armeria.dev/release-notes/0.99.6">0.99.6</a>
have been released.<!-- -->
<ul>
<li class="">New <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRule.html" title="CircuitBreakerRule">CircuitBreakerRule<span class="suffix_sw1f"></span></a></code> and <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerRuleWithContent.html" title="CircuitBreakerRuleWithContent">CircuitBreakerRuleWithContent<span class="suffix_sw1f"></span></a></code> API let you define a complex
circuit breaking policy conveniently.</li>
<li class="">You can now specify the maximum lifespan of server-side connections using
<code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#maxConnectionAge(java.time.Duration)" title="ServerBuilder.maxConnectionAge(Duration)">ServerBuilder.maxConnectionAge()<span class="suffix_sw1f"></span></a></code>. This is useful when you have to deal with a load
balancer without HTTP/2 support.</li>
<li class="">Service discovery and registration for
<a href="https://curator.apache.org/docs/service-discovery/" target="_blank" rel="noopener noreferrer" class="">Curator Service Discovery</a> and
<a href="http://stevenskelton.ca/finagle-serverset-clusters-using-zookeeper/" target="_blank" rel="noopener noreferrer" class="">Finagle ServerSets</a>.</li>
<li class=""><a href="https://scalapb.github.io/" target="_blank" rel="noopener noreferrer" class="">ScalaPB</a> support with
<a href="https://github.com/line/armeria/tree/main/examples/grpc-scala" target="_blank" rel="noopener noreferrer" class="">a fully working example</a>.</li>
</ul>
</li>
</ul>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20200703-newsletter-1#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<ul>
<li class=""><a href="https://engineering.linecorp.com/en/blog/reactive-streams-armeria-1/" target="_blank" rel="noopener noreferrer" class="">Using Reactive Streams with Armeria - Part 1</a>
and <a href="https://engineering.linecorp.com/en/blog/reactive-streams-armeria-2/" target="_blank" rel="noopener noreferrer" class="">Part 2</a>
<ul>
<li class=""><a href="https://github.com/ikhoon" target="_blank" rel="noopener noreferrer" class=""><strong>@ikhoon</strong></a> introduces the basic concepts of Reactive Streams, and explains how you can use Reactive Streams
with Armeria, including the details about:<!-- -->
<ul>
<li class="">How to handle backpressure - observer pattern, push method and pull method</li>
<li class="">How Reactive Streams API works - <code>Publisher</code>, <code>Subscriber</code>, and <code>Subscription</code></li>
<li class="">How to interoperate between different Reactive Streams impls, such as Reactor and RxJava</li>
<li class="">Cool Armeria features that help you implement a microservice</li>
</ul>
</li>
</ul>
</li>
<li class=""><a href="https://sookiwi.com/posts/tech/2019/11/17/LINE-Bot-API-with-Armeria/" target="_blank" rel="noopener noreferrer" class="">LINE Bot API with Armeria</a>
<ul>
<li class=""><a href="https://github.com/carlsagan21" target="_blank" rel="noopener noreferrer" class=""><strong>@carlsagan21</strong></a> shows how his team uses Armeria for Thrift and gRPC services in an Envoy-based service mesh.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20200703-newsletter-1#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<p>Your opinion means a lot to us. Please let us know what you think about these proposals:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/2793" target="_blank" rel="noopener noreferrer" class="">#2793</a> Which nullness annotation library should we use?
Stick to JSR-305, or use <a href="https://github.com/JetBrains/java-annotations/" target="_blank" rel="noopener noreferrer" class="">JetBrains Java annotations</a>?</li>
<li class=""><a href="https://github.com/line/armeria/issues/2862" target="_blank" rel="noopener noreferrer" class="">#2862</a> Should <code>PooledAggregatedHttp{Request,Response}</code> extend <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/util/SafeCloseable.html" title="SafeCloseable">SafeCloseable<span class="suffix_sw1f"></span></a></code>?
What's the best way to handle reference-counted objects and their access?</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20200703-newsletter-1#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<p>Want to contribute but not sure where to start from? Try one of these:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/1934" target="_blank" rel="noopener noreferrer" class="">#1934</a> <code>:examples:static-files:test</code> fails when a home directory has <code>index.html</code>.</li>
<li class=""><a href="https://github.com/line/armeria/issues/2119" target="_blank" rel="noopener noreferrer" class="">#2119</a> Override new <code>CompletableFuture</code> methods in Java 12 for <code>ContextAwareFuture</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20200703-newsletter-1#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20200703-newsletter-1#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/okue"><img src="https://github.com/okue.png?size=128" width="64" height="64" alt="@okue" title="@okue" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eonezhang"><img src="https://github.com/eonezhang.png?size=128" width="64" height="64" alt="@eonezhang" title="@eonezhang" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/gary-lo"><img src="https://github.com/gary-lo.png?size=128" width="64" height="64" alt="@gary-lo" title="@gary-lo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/matsumana"><img src="https://github.com/matsumana.png?size=128" width="64" height="64" alt="@matsumana" title="@matsumana" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/joonhaeng"><img src="https://github.com/joonhaeng.png?size=128" width="64" height="64" alt="@joonhaeng" title="@joonhaeng" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jongmin92"><img src="https://github.com/jongmin92.png?size=128" width="64" height="64" alt="@jongmin92" title="@jongmin92" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/andrey-tpt"><img src="https://github.com/andrey-tpt.png?size=128" width="64" height="64" alt="@andrey-tpt" title="@andrey-tpt" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hexoul"><img src="https://github.com/hexoul.png?size=128" width="64" height="64" alt="@hexoul" title="@hexoul" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/sokangmin"><img src="https://github.com/sokangmin.png?size=128" width="64" height="64" alt="@sokangmin" title="@sokangmin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/codefromthecrypt"><img src="https://github.com/codefromthecrypt.png?size=128" width="64" height="64" alt="@codefromthecrypt" title="@codefromthecrypt" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/imasahiro"><img src="https://github.com/imasahiro.png?size=128" width="64" height="64" alt="@imasahiro" title="@imasahiro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/huydx"><img src="https://github.com/huydx.png?size=128" width="64" height="64" alt="@huydx" title="@huydx" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/cbornet"><img src="https://github.com/cbornet.png?size=128" width="64" height="64" alt="@cbornet" title="@cbornet" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/max904-github"><img src="https://github.com/max904-github.png?size=128" width="64" height="64" alt="@max904-github" title="@max904-github" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hueneburg"><img src="https://github.com/hueneburg.png?size=128" width="64" height="64" alt="@hueneburg" title="@hueneburg" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/amitvc"><img src="https://github.com/amitvc.png?size=128" width="64" height="64" alt="@amitvc" title="@amitvc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/kojilin"><img src="https://github.com/kojilin.png?size=128" width="64" height="64" alt="@kojilin" title="@kojilin" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.7]]></title>
            <link>https://armeria.dev/release-notes/0.99.7/</link>
            <guid>https://armeria.dev/release-notes/0.99.7/</guid>
            <pubDate>Mon, 22 Jun 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now specify the maximum lifespan of server-side connections using ServerBuilder.maxConnectionAge(). This is useful when you have to deal with a load balancer without HTTP/2 support. #2747 #279...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.6]]></title>
            <link>https://armeria.dev/release-notes/0.99.6/</link>
            <guid>https://armeria.dev/release-notes/0.99.6/</guid>
            <pubDate>Thu, 28 May 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[New CircuitBreakerRule and CircuitBreakerRuleWithContent API let you define a complex circuit breaking policy conveniently. #2726 CircuitBreakerRule myRule = CircuitBreakerRule.of( // A failure if an ...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.5]]></title>
            <link>https://armeria.dev/release-notes/0.99.5/</link>
            <guid>https://armeria.dev/release-notes/0.99.5/</guid>
            <pubDate>Thu, 14 May 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Added Server.blockUntilShutdown() which lets you wait for a Server to close. #2659 Server server = Server.builder()...build();server.start().join();// Returns when server.close() or closeAsync() is ca...]]></description>
        </item>
        <item>
            <category>Newsletter</category>
            <title><![CDATA[Armeria Newsletter vol. 0]]></title>
            <link>https://armeria.dev/news/20200514-newsletter-0</link>
            <guid>https://armeria.dev/news/20200514-newsletter-0</guid>
            <pubDate>Thu, 14 May 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[From the devs]]></description>
            <content:encoded><![CDATA[<video class="hideOnReducedMotion" src="/assets/medias/armeria-f275354e25be493d6b926dc433dd3ac1.m4v" preload="none" autoplay="" muted="" loop="" style="width:282px;height:112px"><img src="https://armeria.dev/assets/images/armeria-9a5f775a301c3145a3ef29a69c0b3dee.gif" loading="lazy" width="282" height="112" alt="Armeria Logo Animation"></video>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-devs">From the devs<a href="https://armeria.dev/news/20200514-newsletter-0#from-the-devs" class="hash-link" aria-label="Direct link to From the devs" title="Direct link to From the devs" translate="no">‚Äã</a></h2>
<ul>
<li class=""><a href="https://armeria.dev/" target="_blank" rel="noopener noreferrer" class="">Our brand new web site</a> is now available! ü¶Ñ<!-- -->
<ul>
<li class=""><a href="https://armeria.dev/docs" target="_blank" rel="noopener noreferrer" class="">Official documentation</a> that looks better</li>
<li class=""><a href="https://armeria.dev/community/articles" target="_blank" rel="noopener noreferrer" class="">Fascinating articles and slides</a> from our community</li>
<li class=""><a href="https://armeria.dev/community" target="_blank" rel="noopener noreferrer" class="">Contributor manual</a> for your next participation</li>
</ul>
</li>
<li class=""><a class="" href="https://armeria.dev/release-notes/0.99.5">Armeria 0.99.5</a> has been released.<!-- -->
<ul>
<li class="">New <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryRule.html" title="RetryRule">RetryRule<span class="suffix_sw1f"></span></a></code> API that allows convenient construction of complex retry policy</li>
<li class=""><a href="https://spring.io/guides/gs/service-registration-and-discovery/" target="_blank" rel="noopener noreferrer" class="">Eureka service discovery</a> support</li>
<li class=""><a href="https://github.com/grpc/grpc-kotlin" target="_blank" rel="noopener noreferrer" class=""><code>grpc-kotlin</code></a> support</li>
</ul>
</li>
</ul>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-the-community">From the community<a href="https://armeria.dev/news/20200514-newsletter-0#from-the-community" class="hash-link" aria-label="Direct link to From the community" title="Direct link to From the community" translate="no">‚Äã</a></h2>
<ul>
<li class=""><a href="https://engineering.linecorp.com/en/blog/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019/" target="_blank" rel="noopener noreferrer" class="">Monitoring a Spring Boot app in Kubernetes ‚Äì What I learned from Devoxx Belgium 2019</a>
<ul>
<li class=""><a href="https://github.com/nirvanarsc" target="_blank" rel="noopener noreferrer" class=""><strong>@nirvanarsc</strong></a> shows how he ran his Armeria-based Spring Boot application using Docker and Kubernetes.</li>
</ul>
</li>
<li class=""><a href="https://speakerdeck.com/line_developers/lesson-learned-from-the-adoption-of-armeria-to-lines-authentication-system" target="_blank" rel="noopener noreferrer" class="">Lessons learned from the adoption of Armeria to LINE's authentication system</a>
<ul>
<li class=""><a href="https://github.com/imasahiro" target="_blank" rel="noopener noreferrer" class=""><strong>@imasahiro</strong></a> tells about his successful migration from a home-grown HTTP/2 server based on Netty 4.1.0.Beta8 (!) to Armeria.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="we-need-your-comments">We need your comments<a href="https://armeria.dev/news/20200514-newsletter-0#we-need-your-comments" class="hash-link" aria-label="Direct link to We need your comments" title="Direct link to We need your comments" translate="no">‚Äã</a></h2>
<p>Your opinion means a lot to us. Please let us know what you think about these proposals:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/2148" target="_blank" rel="noopener noreferrer" class="">#2148</a> Provide a way to build an HTTP client request fluently</li>
<li class=""><a href="https://github.com/line/armeria/issues/2364" target="_blank" rel="noopener noreferrer" class="">#2364</a> Split <code><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html" title="WebClient">WebClient<span class="suffix_sw1f"></span></a></code> into blocking / async versions?</li>
<li class=""><a href="https://github.com/line/armeria/issues/2629" target="_blank" rel="noopener noreferrer" class="">#2629</a> Context-awareness of <code>ServiceRequestContext.blockingTaskExecutor()</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="good-first-issues">Good first issues<a href="https://armeria.dev/news/20200514-newsletter-0#good-first-issues" class="hash-link" aria-label="Direct link to Good first issues" title="Direct link to Good first issues" translate="no">‚Äã</a></h2>
<p>Want to contribute but not sure where to start from? Try one of these:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/issues/1810" target="_blank" rel="noopener noreferrer" class="">#1810</a> <code>String</code>-based headers/content sanitizer implementation</li>
<li class=""><a href="https://github.com/line/armeria/issues/1934" target="_blank" rel="noopener noreferrer" class="">#1934</a>&nbsp;<code>:examples:static-files:test</code> fails when a home directory has <code>index.html</code>.</li>
<li class=""><a href="https://github.com/line/armeria/issues/2119" target="_blank" rel="noopener noreferrer" class="">#2119</a> Override new <code>CompletableFuture</code> methods in Java 12 for <code>RequestContextAwareCompletableFuture</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stay-tuned">Stay tuned<a href="https://armeria.dev/news/20200514-newsletter-0#stay-tuned" class="hash-link" aria-label="Direct link to Stay tuned" title="Direct link to Stay tuned" translate="no">‚Äã</a></h2>
<p>Sign up for our newsletters to keep up-to-date with new releases and useful tips!</p>
<div style="max-width:320px;margin-top:0.5rem"><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="thank-you">Thank you!<a href="https://armeria.dev/news/20200514-newsletter-0#thank-you" class="hash-link" aria-label="Direct link to Thank you!" title="Direct link to Thank you!" translate="no">‚Äã</a></h2>
<p>Since our last newsletter, we received awesome contributions from the following contributors:</p><div class="wrapper_zMWL" style="width:0px;height:0px"><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/jrhee17"><img src="https://github.com/jrhee17.png?size=128" width="64" height="64" alt="@jrhee17" title="@jrhee17" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/imasahiro"><img src="https://github.com/imasahiro.png?size=128" width="64" height="64" alt="@imasahiro" title="@imasahiro" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/renaudb"><img src="https://github.com/renaudb.png?size=128" width="64" height="64" alt="@renaudb" title="@renaudb" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/andrewoma"><img src="https://github.com/andrewoma.png?size=128" width="64" height="64" alt="@andrewoma" title="@andrewoma" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/gary-lo"><img src="https://github.com/gary-lo.png?size=128" width="64" height="64" alt="@gary-lo" title="@gary-lo" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/max904-github"><img src="https://github.com/max904-github.png?size=128" width="64" height="64" alt="@max904-github" title="@max904-github" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/trustin"><img src="https://github.com/trustin.png?size=128" width="64" height="64" alt="@trustin" title="@trustin" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/eonezhang"><img src="https://github.com/eonezhang.png?size=128" width="64" height="64" alt="@eonezhang" title="@eonezhang" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/minwoox"><img src="https://github.com/minwoox.png?size=128" width="64" height="64" alt="@minwoox" title="@minwoox" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hexoul"><img src="https://github.com/hexoul.png?size=128" width="64" height="64" alt="@hexoul" title="@hexoul" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/KarboniteKream"><img src="https://github.com/KarboniteKream.png?size=128" width="64" height="64" alt="@KarboniteKream" title="@KarboniteKream" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/tobias-"><img src="https://github.com/tobias-.png?size=128" width="64" height="64" alt="@tobias-" title="@tobias-" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/hueneburg"><img src="https://github.com/hueneburg.png?size=128" width="64" height="64" alt="@hueneburg" title="@hueneburg" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/heowc"><img src="https://github.com/heowc.png?size=128" width="64" height="64" alt="@heowc" title="@heowc" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/shakuzen"><img src="https://github.com/shakuzen.png?size=128" width="64" height="64" alt="@shakuzen" title="@shakuzen" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/anuraaga"><img src="https://github.com/anuraaga.png?size=128" width="64" height="64" alt="@anuraaga" title="@anuraaga" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ikhoon"><img src="https://github.com/ikhoon.png?size=128" width="64" height="64" alt="@ikhoon" title="@ikhoon" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/Charliocat"><img src="https://github.com/Charliocat.png?size=128" width="64" height="64" alt="@Charliocat" title="@Charliocat" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/ghkim3221"><img src="https://github.com/ghkim3221.png?size=128" width="64" height="64" alt="@ghkim3221" title="@ghkim3221" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/syleeeee"><img src="https://github.com/syleeeee.png?size=128" width="64" height="64" alt="@syleeeee" title="@syleeeee" loading="lazy"></a></span><span style="transition:0s 0s all ease;transform:none" class="avatar_ddz8"><a href="https://github.com/mono0x"><img src="https://github.com/mono0x.png?size=128" width="64" height="64" alt="@mono0x" title="@mono0x" loading="lazy"></a></span></div>]]></content:encoded>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Let's Play with Reactive Streams on Armeria - Part 2]]></title>
            <link>https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2</link>
            <guid>https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2</guid>
            <pubDate>Wed, 06 May 2020 11:00:00 GMT</pubDate>
            <description><![CDATA[In the first part of this blog post, we took a look at the basic concepts of Reactive Streams.]]></description>
            <content:encoded><![CDATA[<p>In the <a class="" href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1">first part of this blog post</a>, we took a look at the basic concepts of Reactive Streams.
In part 2 of this blog post, I'd like to tell you about how we use Reactive Streams with Armeria.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="whats-armeria">What‚Äôs Armeria?<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#whats-armeria" class="hash-link" aria-label="Direct link to What‚Äôs Armeria?" title="Direct link to What‚Äôs Armeria?" translate="no">‚Äã</a></h2>
<p>Armeria is an open-source asynchronous HTTP/2, RPC, REST client/server library based on Java 8, Netty, Thrift, and gRPC.
While Armeria is a lightweight microservices framework, its capabilities is comparable to existing full stack web frameworks.</p>
<p>Let's first take a look at some prerequisite knowledge for setting up a Reactive Streams server on Armeria.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="supported-protocols">Supported protocols<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#supported-protocols" class="hash-link" aria-label="Direct link to Supported protocols" title="Direct link to Supported protocols" translate="no">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-1-b8df78267813bd6db4a7146dc18e2f91.png" width="3030" height="1468" class="img_ev3q"></p>
<p>Armeria supports both HTTP/1 and HTTP/2, and these protocols both support <a href="https://simple.wikipedia.org/wiki/Cleartext" target="_blank" rel="noopener noreferrer" class="">cleartext</a> and TLS (Transport Layer Security) cryptographic protocols.
To ensure compatibility between HTTP/1 and HTTP/2, Armeria supports both HTTP/2's connection preface and HTTP/1's upgrade request.</p>
<p>Furthermore, gRPC and Thrift works with both HTTP/1 and HTTP/2 on Armeria.
This is a unique feature of Armeria. gRPC normally doesn't support HTTP/1 and Thrift normally doesn't support HTTP/2.
However, Armeria's wide array of support allows it to be used in a variety of business environments.
In Linux environments, Armeria supports JNI-based (Java Native Interface) socket IOs and BoringSSL-based TLS to allow better performance during production.</p>
<p>Let's take a closer look at Armeria along with some sample code.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-closer-look-at-armeria">A closer look at Armeria<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#a-closer-look-at-armeria" class="hash-link" aria-label="Direct link to A closer look at Armeria" title="Direct link to A closer look at Armeria" translate="no">‚Äã</a></h3>
<p>Armeria is a user-friendly API with simple and easy-to-use code.
You only need to write the following five lines if you want to run a "Hello world" server.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Build your own server under 5 lines.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .service(‚Äú/‚Äú, (ctx, req) -&gt; HttpResponse.of(‚ÄúHello, World!‚Äù))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.start();</span><br></span></code></pre></div></div>
<p>The ability to easily run servers is a core feature for running separate business components on independent servers in a microservices environment.</p>
<p>Armeria also allows you to simplify server architecture.
You don't need to run <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/sidecar" target="_blank" rel="noopener noreferrer" class="">sidecar patterns</a> such as Nginx or static web servers such as Apache httpd to use HTTPS or HTTP/2.
As mentioned, Armeria supports JNI-based socket IOs and BoringSSL in Linux environments, making it relatively less prone to performance impact.
You can also <a href="https://line.github.io/armeria/docs/server-http-file" target="_blank" rel="noopener noreferrer" class="">serve static files</a> such as JS, CSS, or images.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .https(8443) // HTTPS support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .tlsSelfSigned()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .service(‚Äú/‚Äú, (ctx, req) -&gt; HttpResponse.of(‚ÄúHello, World!‚Äù))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server.start();</span><br></span></code></pre></div></div>
<p>You no longer need to add network hops with Armeria, allowing you to reduce points of failure, use resources more efficiently, simplify architecture, monitor activity, and dynamically expand your servers.</p>
<p>There's even more.
Armeria comes with built-in annotation that lets you use its features even more easily.
For example, you can easily write routing code by setting <code>hello</code> as a prefix, and <code>name</code> as a path variable like the code below (For more information on using annotations, refer to <a href="https://armeria.dev/docs/server-annotated-service" target="_blank" rel="noopener noreferrer" class="">official Armeria documentation</a>).</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.Get;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.Param;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.PathPrefix;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use built-in annotations for mapping path and parameter injection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PathPrefix(‚Äú/hello‚Äù)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class HelloService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   @Get(‚Äú/:name‚Äù)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public String hello(@Param String name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return String.format(‚ÄúHello, %s!‚Äù, name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Armeria also comes with special features that allow you to serve multiple RPC protocols simultaneously.
You can provide REST API, gRPC, and Thrift on a single server, allowing you to flexibly adapt to any business requirements or architecture changes.
The single port design enables you to efficiently use resources, minimize unnecessary exposure, and reduce potential maintenance costs. <a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#footnotes" class="">[1]</a></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .service(‚Äú/hello/rest‚Äù, (ctx, req) -&gt; HttpResponse.of(‚ÄúHello, world!‚Äù))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .service(‚Äú/hello/thrift‚Äù, THttpService.of(new ThriftHelloService()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .service(‚Äú/hello/grpc‚Äù, GrpcService.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      .addService(new GrpcHelloService())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   .build();</span><br></span></code></pre></div></div>
<p>Enterprise software developers would all agree that they've spent countless hours coming up with ways to efficiently process authentication and logging.
With Armeria, you can put those worries aside.
You can use a separate <a href="https://armeria.dev/docs/server-decorator" target="_blank" rel="noopener noreferrer" class="">decorator</a> to manage this <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" target="_blank" rel="noopener noreferrer" class="">separation of concerns</a>.<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#footnotes" class="">[2]</a></p>
<p>If you wish to add an additional decorator, you can always manually implement and bind one to a specific path or service.
For example, <code>AuthService</code>in the figure below only calls the service when a <code>request</code> includes authentication info, and returns a "401 unauthorized" error if not.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-2-651dfe37d84cf70fa56b6314072fc869.png" width="3316" height="1652" class="img_ev3q"></p>
<p>Next, let's take a look at how Armeria works with Reactive Streams.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="http2-streams-inside-armeria">HTTP/2 streams inside Armeria<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#http2-streams-inside-armeria" class="hash-link" aria-label="Direct link to HTTP/2 streams inside Armeria" title="Direct link to HTTP/2 streams inside Armeria" translate="no">‚Äã</a></h3>
<p>As the name suggests, "streams" need to maintain a connection and let data constantly flow.
If there is only one opening while everywhere else is closed, it will lead to an overload.
Armeria uses the back pressure feature of Reactive Streams to dynamically control data flow inside servers.
Also, back pressure that utilizes <a href="https://tools.ietf.org/html/rfc7540#section-5.2" target="_blank" rel="noopener noreferrer" class="">HTTP/2 stream flow control</a> using <a href="https://http2.github.io/http2-spec/#WINDOW_UPDATE" target="_blank" rel="noopener noreferrer" class="">WINDOW_UPDATE</a> allows you to dynamically connect the Armeria server with your services and repositories from subnetwork layers.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-3-19c9d7f507f0cc7efb072673431792ff.png" width="3336" height="1792" class="img_ev3q"></p>
<p>If converting your service's server to an Armeria Reactive server is difficult at the moment, you could use an Armeria Reactive proxy server by following the sample code and <a href="https://github.com/line/armeria-examples/tree/master/proxy-server" target="_blank" rel="noopener noreferrer" class="">instructions available on the repository</a>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Use Armeria‚Äôs async &amp; reactive HTTP/2 client.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var client = HttpClient.of(‚Äúh2c://backend‚Äù);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .http(8080)          // Forward all requests reactively</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .service(‚Äúprefix:/‚Äú, (ctx, req) -&gt; client.execute(req))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<p>With an Armeria proxy server at the forefront, you can keep your server safe from any external threats on the internet.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-4-d1176606f39d7cc2951b0a21a74b80c6.png" width="2310" height="716" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="consolidating-reactive-streams-and-armeria">Consolidating Reactive Streams and Armeria<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#consolidating-reactive-streams-and-armeria" class="hash-link" aria-label="Direct link to Consolidating Reactive Streams and Armeria" title="Direct link to Consolidating Reactive Streams and Armeria" translate="no">‚Äã</a></h2>
<p>If you create an Armeria server with direct support of Reactive Streams, even more features are available to you.
Let's take a closer look at how you can use Reactive Streams on Armeria, and some details about the built-in publisher.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="armeria-http-response-publisher">Armeria HTTP response publisher<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#armeria-http-response-publisher" class="hash-link" aria-label="Direct link to Armeria HTTP response publisher" title="Direct link to Armeria HTTP response publisher" translate="no">‚Äã</a></h3>
<p>Responses on Armeria are comprised of <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpHeaders.html" target="_blank" rel="noopener noreferrer" class="">HttpHeaders</a> and <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpData.html" target="_blank" rel="noopener noreferrer" class="">HttpData</a>.
I will explain how you can convert an RxJava <a href="http://reactivex.io/RxJava/javadoc/io/reactivex/Observable.html" target="_blank" rel="noopener noreferrer" class="">Observable</a> to an Armeria <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html" target="_blank" rel="noopener noreferrer" class="">HttpResponse</a> step-by-step.</p>
<p>Once your data is ready, wrap <code>dataStream</code>with <code>HttpData</code> using the <code>Observable map</code> operator.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 1. Fetch data from Reactive Streams Publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;String&gt; dataStream = Observable.just(‚Äúa‚Äù, ‚Äúb‚Äù, ‚Äúc‚Äù, ‚Äúd‚Äù, ‚Äúe‚Äù);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. Convert string to Armeria HttpData</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;HttpData&gt; httpDataStream = dataStream.map(HttpData::ofUtf8);</span><br></span></code></pre></div></div>
<p>Once you have a confirmed response and a response header, combine it with the <code>httpDataStream</code> prepared above using the <code>concat</code> operator.
This will complete a connected stream from <code>HttpHeaders</code>to <code>HttpData</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 3. Prepare response headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ResponseHeaders httpHeaders = ResponseHeaders.of(HttpStatus.OK);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 4. Concat http header and body stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;HttpObject&gt; responseStream = Observable.concat(Observable.just(httpHeaders), httpDataStream);</span><br></span></code></pre></div></div>
<p>Convert the completed stream to a Reactive Streams <a href="https://www.baeldung.com/rxjava-2-flowable" target="_blank" rel="noopener noreferrer" class="">Flowable</a> using the <code>Observable</code> <code>toFlowable</code> function, and wrap it with Armeria's <code>HttpResponse</code> to complete the conversion.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 5. Convert Observable to Armeria Response Stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse response = HttpResponse.of(responseStream.toFlowable(BackpressureStrategy.BUFFER));</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="armerias-built-in-publisher">Armeria's built-in publisher<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#armerias-built-in-publisher" class="hash-link" aria-label="Direct link to Armeria's built-in publisher" title="Direct link to Armeria's built-in publisher" translate="no">‚Äã</a></h3>
<p>The steps above may seem too complicated or boring.
That's why Armeria provides a built-in publisher for <a href="https://tools.ietf.org/html/rfc7464" target="_blank" rel="noopener noreferrer" class="">JSON Text Sequences(RFC 7464)</a>, the standard way of sending stream data on the web, and <a href="https://en.wikipedia.org/wiki/Server-sent_events" target="_blank" rel="noopener noreferrer" class="">Server-sent events</a>, the HTML5 standard.
This publisher will allow you to send Reactive Streams on the web more easily.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Fetch data from Reactive Streams Publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Publisher&lt;String&gt; dataStream = Flux.just(‚Äúa‚Äù, ‚Äúb‚Äù, ‚Äúc‚Äù, ‚Äúd‚Äù, ‚Äúe‚Äù);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Convert Publisher to JSON Text Sequences with Armeria HttpResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// with ‚Äúapplication/json-seq‚Äù MIME type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse httpResponse = JsonTextSequences.fromPublisher(dataStream);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Convert Publisher to Server-sent Events with Armeria HttpResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// with ‚Äútext/event-stream‚Äù MIME type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse httpResponse = ServerSentEvents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .fromPublisher(dataStream, SeverSentEvent::ofData);</span><br></span></code></pre></div></div>
<p>RxJava consolidation support is available for those looking to use the built-in publisher even more easily.
Add the <code>@ProduceJsonSequence</code> annotation to the annotated service and return <code>Observable</code> for automatic conversion on Armeria to the protocols mentioned above.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.reactivex.Observable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.ProducesJsonSequences;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RxJavaService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Get(‚Äú/json-streaming‚Äù)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Generate JSON Text Sequences</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @ProducesJsonSequences</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Observable&lt;String&gt; json() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          // Just return RxJava Observable!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Observable.just(‚Äúa‚Äù, ‚Äúb‚Äù, ‚Äúc‚Äù);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre></div></div>
<p>Encoding a JSON text string with 'JsonTextSequences' will add a separator and line feed to the beginning and end respectively.
Depending on the protocol, different operations are required when sending data through HTTP/1 or HTTP/2.
Armeria automatically finds the appropriate format according to the currently connected protocol.
JSON data is divided inside the <a href="https://http2.github.io/http2-spec/#DATA" target="_blank" rel="noopener noreferrer" class="">Data frame</a> for HTTP/2, and <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding" target="_blank" rel="noopener noreferrer" class="">chunked transfer encoding</a> is used for HTTP/1.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-5-b047c88a956d6aea2e8163ea08fd3590.png" width="3278" height="1818" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="migrating-spring-webflux">Migrating Spring WebFlux<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#migrating-spring-webflux" class="hash-link" aria-label="Direct link to Migrating Spring WebFlux" title="Direct link to Migrating Spring WebFlux" translate="no">‚Äã</a></h2>
<p>Armeria supports various libraries and frameworks.
If you are already using <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html" target="_blank" rel="noopener noreferrer" class="">Spring WebFlux</a> to use Reactive Streams, you only need to <a href="https://armeria.dev/docs/advanced-spring-webflux-integration" target="_blank" rel="noopener noreferrer" class="">add</a><code>armeria-spring-boot-webflux-starter</code><a href="https://armeria.dev/docs/advanced-spring-webflux-integration" target="_blank" rel="noopener noreferrer" class="">to your dependencies</a> to complete migration to Armeria.
You can replace <a href="https://github.com/reactor/reactor-netty" target="_blank" rel="noopener noreferrer" class="">Reactor-Netty</a>, a WebFlux network layer, with Armeria's Reactive engine with this way.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-6-0408b3405e56818eebd1d7b8471bbc75.png" width="3120" height="1346" class="img_ev3q"></p>
<p>You may be thinking to yourself "Shouldn't I just use WebFlux if I only want to replace the engine?" What advantages are there to going through the process above?</p>
<p>You can add Armeria features to Spring with <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/spring/ArmeriaServerConfigurator.html" target="_blank" rel="noopener noreferrer" class="">ArmeriaServerConfigurator</a> if you replace your engine, allowing you to use unique Armeria features that aren't normally available on Spring.
For example, you can add gRPC and Thrift features to a REST API Spring WebFlux server, and serve it through the same single port.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ArmeriaConfiguration {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Configure the server by providing an ArmeriaServerConfigurator bean.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public ArmeriaServerConfigurator armeriaServerConfigurator() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       // Customize the server using the given ServerBuilder. For example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       return builder -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // Add DocService that enables you to send gRPC and Thrift requests from web browser.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.serviceUnder(‚Äú/docs‚Äù, new DocService());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // Log every message which the server receives and responds.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.decorator(LoggingService.newDecorator());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // Write access log after completing a request.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.accessLogWriter(AccessLogWriter.combined(), false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           // You can also bind asynchronous RPC services such as Thrift and gRPC:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.service(THttpService.of(‚Ä¶));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           builder.service(GrpcService.builder()‚Ä¶build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The decorator features mentioned above are also available, to make your service more feature-rich.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="support-for-grpc-streams">Support for gRPC streams<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#support-for-grpc-streams" class="hash-link" aria-label="Direct link to Support for gRPC streams" title="Direct link to Support for gRPC streams" translate="no">‚Äã</a></h2>
<p><a href="https://grpc.io/docs/tutorials/basic/java/#server-side-streaming-rpc" target="_blank" rel="noopener noreferrer" class="">gRPC supports streams</a> through <a href="https://grpc.github.io/grpc-java/javadoc/io/grpc/stub/StreamObserver.html" target="_blank" rel="noopener noreferrer" class="">StreamObserver</a>, and you can easily convert to gRPC's StreamObserver with Reactive Streams.
Let's take a look at the example below.</p>
<p>First, decide how to send and receive data using protobuf, and define your interface.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">syntax = ‚Äúproto3‚Äù;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package users;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">option java_package = ‚Äúusers‚Äù;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Returns all user information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc getAllUsers(UserRequest) returns (stream User) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Push to stream of users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpc pushToUsers(stream User) returns (Result) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>In order to send emails and push messages to all users, you must first look up the information of all users.
If there are too many users, it may be difficult to send the data at once.
In cases like this, you can build a stream server that returns large amounts of user information on gRPC by following the instructions below.</p>
<ol>
<li class="">Use ProjectReactor's <code>Flux</code>as a publisher to look up data on the repository in the format of a stream.</li>
<li class="">Convert to gRPC <code>StreamObservser</code> and send the data to an external location.</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Implement interfaces generated by gRPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public final class UserServiceImpl extends UserServiceImplBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void getAllUsers(UserRequest request, StreamObserver&lt;User&gt; responseObserver) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final Flux&lt;User&gt; userPublisher = userRepo.findAll();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        publisher.subscribe(responseObserver::onNext,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            responseObserver::onError,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            responseObserver::onCompleted);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><code>StreamObserver</code>, like Reactive Streams, has <code>onNext</code>, <code>onError</code>, <code>onCompleted</code> functions that can be matched and linked to APIs.</p>
<p>This time let's think how you would receive the data containing all user information.
For this demonstration I will be using <code>Processor</code>. <code>Processor</code> doesn't have separate API, and simply inherits <code>Subscriber</code>and <code>Publisher</code>.
You can use <code>Processor</code> to easily subscribe to data, and publish the subscribed data easily.
You can send new user info that was received through <code>StreamObserver's</code> <code>onNext using Processor's onNext</code> function, and can further perform additional tasks by resubscribing.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public StreamObserver&lt;User&gt; pushToUsers(StreamObserver&lt;Result&gt; responseObserver) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Processor&lt;User, User&gt; processor = EmitterProcessor.create();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Publisher&lt;User&gt; publisher = processor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Subscriber&lt;User&gt; subscriber = processor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Push one-by-one by subscribing publisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return new StreamObserver&lt;User&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // subscribe user data √¢¬Ä¬®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override public void onNext(User user) { processor.onNext(user); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override public void onError(Throwable throwable) { processor.onError(throwable); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override public void onCompleted() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseObserver.onNext(Result.newBuilder().setStatus(200).build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            responseObserver.onCompleted();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Let's run the gRPC code that we wrote on Armeria.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.Server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.grpc.GrpcService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Add your grpc service to Armeria GrpcService</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var grpcService = GrpcService.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             .addService(new UserServiceImpl())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var server = Server.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .http(8080)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .serviceUnder(‚Äú/grpc‚Äù, grpcService)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .serviceUnder(‚Äú/docs‚Äù, new DocService())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .build();</span><br></span></code></pre></div></div>
<p>With a stream server like this, you can stream large amounts of data using only a small amount of memory.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="armeria-features-for-microservices">Armeria features for microservices<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#armeria-features-for-microservices" class="hash-link" aria-label="Direct link to Armeria features for microservices" title="Direct link to Armeria features for microservices" translate="no">‚Äã</a></h2>
<p>Using Reactive Streams through Armeria allows you to easily handle large amounts of data and traffic.
RPC allows your microservices to communicate with each other more easily as well.</p>
<p>In addition, here are some more features catered towards microservices:</p>
<ul>
<li class="">Kubernetes-type DNS (Domain Name System) and <a href="https://armeria.dev/docs/advanced-zookeeper" target="_blank" rel="noopener noreferrer" class="">service discovery with ZooKeeper</a> for easily locating servers in a cloud environment.</li>
<li class="">Client-side load-distribution for searched services during communication with the server. Fewer points of failure.</li>
<li class="">Direct server diagnosis with non-<a href="https://www.nginx.com/resources/glossary/layer-7-load-balancing/" target="_blank" rel="noopener noreferrer" class="">L7</a> clients.</li>
<li class="">Automatic access logging to Kafka without the need to access distributed servers.</li>
<li class="">Easy transfer of metrics to application monitoring tools such as Netflix's Atlas and Prometheus through Micrometer's filters.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-2-7-da8c2428f8f86f6212efef177ca57d88.png" width="3076" height="1428" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">‚Äã</a></h2>
<p>Through parts 1 and 2 of this blog post, we took a look at Reactive Streams and Armeria.
Armeria allows you to build an asynchronous server that is safe, less prone to failure, and can harness the high performance of Reactive Streams, while also supporting RPC and HTTP/2.</p>
<p>The features mentioned in this blog post aren't everything there is to Armeria.
For more information on what Armeria can do for you, refer to the <a href="https://armeria.dev/" target="_blank" rel="noopener noreferrer" class="">official website</a> and the following sources.</p>
<ul>
<li class="">GitHub: <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">line/armeria</a></li>
<li class="">Twitter: <a href="https://twitter.com/armeria_project" target="_blank" rel="noopener noreferrer" class="">@armeria_project</a></li>
<li class="">Chat: <a href="https://armeria.dev/s/discord" target="_blank" rel="noopener noreferrer" class="">Discord</a></li>
<li class=""><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/index.html" target="_blank" rel="noopener noreferrer" class="">API documentation</a>, <a href="https://armeria.dev/release-notes/" target="_blank" rel="noopener noreferrer" class="">release notes</a></li>
<li class="">Armeria examples: <a href="https://github.com/line/armeria-examples" target="_blank" rel="noopener noreferrer" class="">line/armeria-examples</a></li>
</ul>
<hr>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="footnotes">Footnotes<a href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2#footnotes" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes" translate="no">‚Äã</a></h4>
<ol>
<li class="">Refer to <a href="https://armeria.dev/docs/server-grpc" target="_blank" rel="noopener noreferrer" class="">Running a gRPC service</a> and <a href="https://armeria.dev/docs/server-thrift" target="_blank" rel="noopener noreferrer" class="">Running a Thrift service</a>.</li>
<li class="">For more information on the various decorators provided with Armeria, refer to the Armeria and Javadoc official documentation.<!-- -->
<ul>
<li class=""><a href="https://armeria.dev/docs/server-decorator" target="_blank" rel="noopener noreferrer" class="">Decorating a service</a></li>
<li class=""><a href="https://armeria.dev/docs/client-decorator" target="_blank" rel="noopener noreferrer" class="">Decorating a client</a></li>
<li class="">Check Direct Known Subsclasses on <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/SimpleDecoratingHttpService.html" target="_blank" rel="noopener noreferrer" class="">SimpleDecoratingHttpService</a> and <a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/SimpleDecoratingClient.html" target="_blank" rel="noopener noreferrer" class="">SimpleDecoratingClient</a></li>
</ul>
</li>
</ol>]]></content:encoded>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Let's Play with Reactive Streams on Armeria - Part 1]]></title>
            <link>https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1</link>
            <guid>https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1</guid>
            <pubDate>Wed, 06 May 2020 10:00:00 GMT</pubDate>
            <description><![CDATA[What is Reactive Streams?]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-reactive-streams">What is Reactive Streams?<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#what-is-reactive-streams" class="hash-link" aria-label="Direct link to What is Reactive Streams?" title="Direct link to What is Reactive Streams?" translate="no">‚Äã</a></h2>
<p>In this post, I'd like to introduce the basic concept of Reactive Streams, and how to use Reactive Streams with Armeria, the open-source asynchronous HTTP/2, RPC, REST client/server library.
Let's begin by examining what Reactive Streams is.</p>
<p>The <a href="http://reactive-streams.org/" target="_blank" rel="noopener noreferrer" class="">official homepage of Reactive Streams</a> defines it as follows.</p>
<blockquote>
<p>Reactive Streams is a standard for asynchronous data processing in a streaming fashion with non-blocking back pressure.</p>
</blockquote>
<p>Let's take a closer look at what they mean by "processing in a streaming fashion," "asynchronous," "back pressure," and "standard."</p>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="stream-processing">Stream processing<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#stream-processing" class="hash-link" aria-label="Direct link to Stream processing" title="Direct link to Stream processing" translate="no">‚Äã</a></h3>
<p>The figure below compares traditional data processing against stream processing.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-1-2f25791f2d6557baebc7d095eda17c7d.png" width="3342" height="1882" class="img_ev3q"></p>
<p>The traditional method of data processing depicted on the left requires the payload to be stored on an application's memory once there is a data processing request.
Any additional data that may be required must also be looked up and stored on memory.
The problem with this method is that all data that is received or looked up must all be stored on the application's memory in order to generate a response message.
If the size of the required data is larger than the available memory, an "out of memory" error will occur.
Even if a single request doesn't cause an "out of memory" error, there are many instances while operating a service where there will be many requests coming in at once.
When there are multiple requests occurring simultaneously, it will trigger a large amount of GC (garbage collection) in a short amount of time, leading to the server failing to respond normally.</p>
<p>On the other hand, you can use the stream processing method to process large amounts of data even with a small amount of system memory.
With stream processing, you can create a pipeline that subscribes to any incoming data, processes the data, and then publishes it.
Server processing data with this method will be able to process large amounts of data elastically.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="asynchronous-method">Asynchronous method<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#asynchronous-method" class="hash-link" aria-label="Direct link to Asynchronous method" title="Direct link to Asynchronous method" translate="no">‚Äã</a></h3>
<p>Let's compare the asynchronous method with the synchronous method.
The figure below depicts the processes of both methods.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-2-f4e515c6966123761077255924895887.png" width="3344" height="1876" class="img_ev3q"></p>
<p>In the synchronous method, a request sent by the client is blocked until the server sends a response.
Being "blocked" means that the current thread cannot perform another task and must wait.
If two requests are sent to servers A and B, the request must receive a response from server A before it can move on to server B.
However, with the asynchronous method, the current thread is not blocked and can perform other tasks while waiting for a response.
The thread can be used for other tasks after sending a request to server A, or send a separate request to server B.
The advantages of the asynchronous method compared to the synchronous method are as follows.</p>
<ul>
<li class="">Fast speed - You can get quicker response speeds by sending two requests simultaneously.</li>
<li class="">Less resources used - You can process more requests with less threads as threads can perform tasks in parallel without being blocked.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="back-pressure">Back pressure<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#back-pressure" class="hash-link" aria-label="Direct link to Back pressure" title="Direct link to Back pressure" translate="no">‚Äã</a></h3>
<p>Before we go into more detail about "back pressure," let's take a look into the <a href="http://reactivex.io/documentation/observable.html" target="_blank" rel="noopener noreferrer" class="">observer patten</a>, push method, and pull method made famous by <a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener noreferrer" class="">RxJava</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="push-method">Push method<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#push-method" class="hash-link" aria-label="Direct link to Push method" title="Direct link to Push method" translate="no">‚Äã</a></h4>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-3-f90a82d7c69e036ae62f224a2fff1c57.png" width="2040" height="1002" class="img_ev3q"></p>
<p>In an observer pattern, a publisher transfers data by pushing it to a subscriber.
A subscriber is not concerned with what state the subscriber is in, and is only concerned with transferring data.
If the publisher sends 100 messages in the span of 1 second, and the subscriber can only process 10 messages in 1 second, what will happen?
The subscriber will have to store the pending events in a queue.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-4-e144d9d9e9c035b0f776f6d81465a871.png" width="2656" height="1158" class="img_ev3q"></p>
<p>The amount of memory allotted to the server is limited.
If 100 messages per second is sent to the server, the buffer will fill up instantly.
What would happen if the buffer runs out and causes an overflow?
Let's see what would happen to a static buffer and a variable-length buffer.</p>
<ul>
<li class="">Static buffer: Newly received messages are rejected. Rejected messages will send requests again, which will cause additional processing load on the network and CPU.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-5-5271512498a52243394d8a9ba2e15c3a.png" width="2684" height="1358" class="img_ev3q"></p>
<ul>
<li class="">Variable-length buffer: The server will crash with an "out of memory" error while trying to store the events. While you might think "who would make it like this?", the data structure of Java <code>list</code>s are variable-length. For example, when querying for a large amount of data with SQL, DBMS is the publisher and your servers become subscribers. When your servers attempt to store all the data in a <code>list</code> data structure, it will trigger a large amount of GC, preventing your server from responding normally.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-6-93355b83286fefdd6b5dac13f0e5957a.png" width="2694" height="1328" class="img_ev3q"></p>
<p>How can we solve this problem?
Could we solve it by having the publisher only send an amount of messages that the subscriber can handle?
This is the fundamental workings behind back pressure.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="pull-method">Pull method<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#pull-method" class="hash-link" aria-label="Direct link to Pull method" title="Direct link to Pull method" translate="no">‚Äã</a></h4>
<p>With the pull method, a subscriber that can process 10 operations at a time will only request 10 operations to the publisher.
The publisher can then send the requested amount, and the subscriber is safe from any "out of memory" errors.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-7-23bbdc8de88d80bfb99c448b495dcbcd.png" width="2558" height="1082" class="img_ev3q"></p>
<p>Furthermore, if the same subscriber is currently processing 8 operations, it can request 2 more operations so that the number of messages do not exceed the limits of what it can process.
With the pull method, subscribers have the freedom to choose the size of the data they receive.
The method that allows subscribers to dynamically pull data requests within their capacity is what back pressure is.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="standardization">Standardization<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#standardization" class="hash-link" aria-label="Direct link to Standardization" title="Direct link to Standardization" translate="no">‚Äã</a></h3>
<p>Reactive Streams is a standardized API.
Here we'll talk about why standardization was necessary and how it became standardized.</p>
<p>Development for Reactive Streams first started in 2013 by engineers from Netflix, Pivotal, and Lightbend.
Netflix is responsible for the development of RxJava, Pivotal for WebFlux, and Lightbend for Akka, an implemntation of distributed processing actor models.
What these companies had in common was that they all required streaming APIs.
However streams are only meaningful if they combine and flow organically.
For data to flow uninterrupted, these different companies needed to use shared specifications, or in other words, they needed standardization.</p>
<p>During April, 2015, Reactive Streams has released its <a href="https://www.reactive-streams.org/announce-1.0.0" target="_blank" rel="noopener noreferrer" class="">1.0.0</a> specifications that can be used on JVM.
In September, 2017, Java 9 added <a href="https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/Flow.html" target="_blank" rel="noopener noreferrer" class="">Flow API</a>, which includes the API, specs, and pull method of Reactive Streams and packaged it under <code>java.util.concurrent</code>.
Reactive Streams, which was a shared effort between community members and a few companies, has been officially recognized and added as an official part of Java.
Three months later, Reactive Streams released an adapter that is compatible with Flow, allowing existing libraries to be used.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-8-d9ff99c821b42b8a7ed40882fcd3f69e.png" width="3318" height="1846" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactive-streams-api">Reactive Streams API<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#reactive-streams-api" class="hash-link" aria-label="Direct link to Reactive Streams API" title="Direct link to Reactive Streams API" translate="no">‚Äã</a></h2>
<p>Reactive Streams may look complex and daunting on the surface, but its internals are made up of a combination of simple APIs.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public interface Publisher&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void subscribe(Subscriber&lt;? super T&gt; s);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Subscriber&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void onSubscribe(Subscription s);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void onNext(T t);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void onError(Throwable t);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void onComplete();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface Subscription {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void request(long n);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   public void cancel();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<ul>
<li class=""><code>Publishers</code> only have a <code>subscribe</code> API that allows <code>subscribers</code> to subscribe.</li>
<li class=""><code>Subscribers</code> have <code>onNext</code> for processing received data, <code>onError</code> for processing errors, <code>onComplete</code> for completing tasks, and <code>onSubscribe</code> API for subscribing with parameters.</li>
<li class="">For <code>subscription</code>, there is a <code>request</code> API for requesting data and a <code>cancel</code> API for cancelling subscriptions.</li>
</ul>
<p>Now let's take a look at how the API above is used in Reactive Streams.</p>
<ol>
<li class="">A <code>subscriber</code> uses the <code>subscribe</code> function to request a subscription to the <code>publisher</code>.</li>
<li class="">The <code>publisher</code> uses the <code>onSubscribe</code> function to send the <code>subscription</code> to the <code>subscriber</code>.</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-9-17e45a561c31ba0d7cc7c5e6846d91fa.png" width="3332" height="1860" class="img_ev3q"></p>
<ol start="3">
<li class="">The <code>subscription</code> now acts as a medium between a <code>subscriber</code> and <code>publisher</code>. <code>Subscribers</code> do not directly request data from <code>publishers</code>. Requests are sent to <code>publishers</code> using the <code>request</code> function of the <code>subscription</code>.</li>
<li class="">The <code>publisher</code>, using <code>subscription</code>, sends data with <code>onNext</code>, <code>onComplete</code> for completed tasks, and <code>onError</code> for errors.</li>
<li class="">The <code>subscriber</code>, <code>publisher</code>, and <code>subscription</code> all form an organic connection, communicating with each other; starting from <code>subscribe</code> all the way to <code>onComplete</code>. This completes the back pressure structure.</li>
</ol>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-10-ed725f58b4ed0796a63fd72e5956a7b2.png" width="3328" height="1866" class="img_ev3q"></p>
<p>So back pressure seems useful, but how do you actually use it?
The interface you see above is all of Reactive Streams API available on its official <a href="https://github.com/reactive-streams/reactive-streams-jvm/tree/master/api/src/main/java/org/reactivestreams" target="_blank" rel="noopener noreferrer" class="">GitHub repo</a>.
There isn't a separate implementation that you can use.</p>
<p>Then can you implement it by yourself?
You can in fact implement a <code>publisher</code> interface and generate a <code>subscription</code> using the rules above.
However, this is not all.
Reactive Streams comes with its own <a href="https://github.com/reactive-streams/reactive-streams-jvm#specification" target="_blank" rel="noopener noreferrer" class="">specifications</a>, and unlike a simple interface, these specifications present rules that must be followed during implementation.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-11-297565955f64bff427a1d12928ce5fc3.png" width="2866" height="1582" class="img_ev3q"></p>
<p>Once you follow the specifications and have an implementation, you can validate it using a tool called <a href="https://github.com/reactive-streams/reactive-streams-jvm/tree/master/tck" target="_blank" rel="noopener noreferrer" class="">Reactive Streams TCK</a>.
Unless you're a skilled expert in the field, it's difficult to have an implementation that satisfies all of the given rules.
The <code>publisher</code> in particular is especially difficult to implement.
For example, here's an <a href="https://github.com/reactor/reactor-core/issues/482" target="_blank" rel="noopener noreferrer" class="">issue</a> posted on the GitHub repo of <a href="https://projectreactor.io/" target="_blank" rel="noopener noreferrer" class="">Project Reactor</a>, one of the more well known Reactive Streams implementations.
The user in question is having difficulty in connecting their <code>publisher</code> to Flux.
The reply from Project Reactor was basically "don't." In my opinion, it's okay to do something like this in a pet project for study purposes.
You should not, however, use unverified code in an actual service.
Instead, you should create a <code>publisher</code> using a constructor function such as <code>Flux.create()</code>.
It's better off to use an existing, validated implementation when using Reactive Streams, rather than creating one yourself.
So what are some implementations that you could use?</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="reactive-streams-implementations-and-interoperability">Reactive Streams implementations and interoperability<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#reactive-streams-implementations-and-interoperability" class="hash-link" aria-label="Direct link to Reactive Streams implementations and interoperability" title="Direct link to Reactive Streams implementations and interoperability" translate="no">‚Äã</a></h2>
<p>There are <a href="https://en.wikipedia.org/wiki/Reactive_Streams#Adoption" target="_blank" rel="noopener noreferrer" class="">various Reactive Streams implementations</a> that you can use.
Each implementation has its own quirks and characteristics, so you should find one that fits your needs.</p>
<ul>
<li class="">If you only need stream computing processing you could use <a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener noreferrer" class="">RxJava</a>, <a href="https://github.com/reactor/reactor-core" target="_blank" rel="noopener noreferrer" class="">Reactor Core</a>, or <a href="https://doc.akka.io/docs/akka/current/stream/index.html" target="_blank" rel="noopener noreferrer" class="">Akka Streams</a>.</li>
<li class="">If you want to look up data in repositories using Reactive Streams, you could use <a href="http://reactivemongo.org/" target="_blank" rel="noopener noreferrer" class="">ReactiveMongo</a> or <a href="http://scala-slick.org/" target="_blank" rel="noopener noreferrer" class="">Slick</a>.</li>
<li class="">If you need something connected to web programming you could use <a href="https://line.github.io/armeria/" target="_blank" rel="noopener noreferrer" class="">Armeria</a>, <a href="https://vertx.io/" target="_blank" rel="noopener noreferrer" class="">Vert.x</a>, <a href="https://www.playframework.com/" target="_blank" rel="noopener noreferrer" class="">Play Framework</a>, or <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux" target="_blank" rel="noopener noreferrer" class="">Spring WebFlux</a>.</li>
</ul>
<p>All these different implementations can communicate each other through Reactive Streams.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="interoperating-reactive-streams">Interoperating Reactive Streams<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#interoperating-reactive-streams" class="hash-link" aria-label="Direct link to Interoperating Reactive Streams" title="Direct link to Interoperating Reactive Streams" translate="no">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/reactive-streams-armeria-1-12-d033d15e15c32b4597b72cf8fc3bc910.png" width="3204" height="1398" class="img_ev3q"></p>
<p><code>Observable</code> in RxJava can be converted to Aremeria's <code>HttpResponse</code> or Project Reactor's <code>Flux</code> through Reactive Streams.
MongoDB's <code>DataPublisher</code> can stream compute through Akka Streams' <code>Source</code>.</p>
<p>For example, let's say you're looking up data and computing on MongoDB and then sending it as an HTTP response.
Using Reactive Streams to look up data on MongoDB will return publishers that can be subscribed to.
Unless a subscriber sends a request through a subscription, any actual data is not transferred.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Initiate MongoDB FindPublisher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FindPublisher&lt;Document&gt; mongoDBUsers = mongodbCollection.find();</span><br></span></code></pre></div></div>
<p>As you can see in the code below, using <code>Observable's fromPublisher</code>, you can connect to <code>MongoDB's FindPublisher</code>.
Using the <code>map</code> operator allows you to extract the <code>age</code> field from the results.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// MongoDB FindPublisher -&gt; RxJava Observable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Observable&lt;Integer&gt; rxJavaAllAges =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Observable.fromPublisher(mongoDBUsers)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              .map(document -&gt; document.getInteger(‚Äúage‚Äù));</span><br></span></code></pre></div></div>
<p>Since <code>RxJava's Observable</code> is implemented in an observer pattern, converting it for Reactive Streams requires the use of the <code>toFlowable</code> function as you can see in the code below.
After the conversion, you can connect <code>RxJava's Flowable</code> and <code>Flux</code> using the <code>from</code> function.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// RxJava Observable -&gt; Reactor Flux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flux&lt;HttpData&gt; fluxHttpData =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Flux.from(rxJavaAllAges.toFlowable(BackpressureStrategy.DROP))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .map(age -&gt; HttpData.ofAscii(age.toString()));</span><br></span></code></pre></div></div>
<p>To use Flux data structure in HTTP responses, you must append an HTTP header to the front of the data.
You can then call <code>HttpResponse.of</code> to connect it with Flux and then use it as an HTTP response for Armeria.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Reactor Flux -&gt; Armeria HttpResponse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HttpResponse.of(Flux.concat(httpHeaders, fluxHttpData));</span><br></span></code></pre></div></div>
<p>As previously mentioned, it's important to note that unlike typical <code>iterators</code>, any computing has not occurred yet in this process.
We have only illustrated how the data will be sent to the <code>subscriber</code>.
With Reactive Streams, data transfer must not begin until a <code>subscriber</code> specifically requests it.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="https://armeria.dev/blog/2020/05/06/reactive-streams-armeria-1#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">‚Äã</a></h2>
<p>In this post, we took a look at Reactive Streams and its implementations, and how they interoperate.
You must use back pressure on HTTP requests on responses if you want to use Reactive Streams in web programming.
To achieve this you must be able to appropriately adapt to the traffic that flows in.
In the next post we will be looking at how we use Reactive Streams with Armeria to do this!</p>
<p><a class="" href="https://armeria.dev/blog/2020/07/03/reactive-streams-armeria-2">Let‚Äôs Play with Reactive Streams on Armeria ‚Äì Part 2</a></p>
<p>The features mentioned in this blog post aren't everything there is to Armeria.
For more information on what Armeria can do for you, refer to the <a href="https://armeria.dev/" target="_blank" rel="noopener noreferrer" class="">official website</a> and the following sources.</p>
<ul>
<li class="">GitHub: <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">line/armeria</a></li>
<li class="">Twitter: <a href="https://twitter.com/armeria_project" target="_blank" rel="noopener noreferrer" class="">@armeria_project</a></li>
<li class="">Slack: <a href="https://armeria.dev/s/slack" target="_blank" rel="noopener noreferrer" class="">Armeria</a></li>
<li class=""><a href="https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/index.html" target="_blank" rel="noopener noreferrer" class="">API documentation</a></li>
<li class="">Armeria examples: <a href="https://github.com/line/armeria-examples" target="_blank" rel="noopener noreferrer" class="">line/armeria-examples</a></li>
</ul>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.4]]></title>
            <link>https://armeria.dev/release-notes/0.99.4/</link>
            <guid>https://armeria.dev/release-notes/0.99.4/</guid>
            <pubDate>Mon, 20 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[ConcurrencyLimitingClient now disables the limit when maxConcurrency is Integer.MAX_VALUE. #2667 üõ†Ô∏è Bug fixes‚Äã Fixed a memory leak where a HEAD request is not cleaned up properly in a certain case. #...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.3]]></title>
            <link>https://armeria.dev/release-notes/0.99.3/</link>
            <guid>https://armeria.dev/release-notes/0.99.3/</guid>
            <pubDate>Tue, 14 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Added RetryStrategy.onException() #2652 Armeria clients can now send an OPTIONS * HTTP/1 request as an alternative to an HTTP/2 PING frame. #2636 This feature is disabled by default and you can enable...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.2]]></title>
            <link>https://armeria.dev/release-notes/0.99.2/</link>
            <guid>https://armeria.dev/release-notes/0.99.2/</guid>
            <pubDate>Tue, 31 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Dropwizard 2.0.2 -&gt; 2.0.5 Retrofit 2.8.0 -&gt; 2.8.1 Spring Boot 2.2.5.RELEASE -&gt; 2.2.6.RELEASE Zookeeper 3.6.0 -&gt; 3.5.7 üôá Thank you‚Äã This release was possible thanks to the following contri...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.1]]></title>
            <link>https://armeria.dev/release-notes/0.99.1/</link>
            <guid>https://armeria.dev/release-notes/0.99.1/</guid>
            <pubDate>Tue, 31 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[The response is not encoded anymore at EncodingSerivce when the HTTP status indicates the content is empty. #2631 ‚õì Dependencies‚Äã Micrometer 1.4.0 -&gt; 1.3.6 üôá Thank you‚Äã This release was possible t...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.99.0]]></title>
            <link>https://armeria.dev/release-notes/0.99.0/</link>
            <guid>https://armeria.dev/release-notes/0.99.0/</guid>
            <pubDate>Mon, 30 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now make your client connect via a SOCKS 4, SOCKS 5 or HTTP CONNECT proxy server. #2321 #2496 ClientFactory.builder() .proxyConfig(ProxyConfig.socks4(socksProxyServer.address())) .build(); You...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.7]]></title>
            <link>https://armeria.dev/release-notes/0.98.7/</link>
            <guid>https://armeria.dev/release-notes/0.98.7/</guid>
            <pubDate>Tue, 17 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Fixed a bug where an exception is not wrapped by UnprocessedRequestException in a certain case. #2594 üôá Thank you‚Äã This release was possible thanks to the following contributors who shared their bril...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.6]]></title>
            <link>https://armeria.dev/release-notes/0.98.6/</link>
            <guid>https://armeria.dev/release-notes/0.98.6/</guid>
            <pubDate>Mon, 16 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Added TextFormatter.socketAddress() and inetAddress() that convert a SocketAddress or an InetAddress into a String without repeating an IP address twice. #2591 üìà Improvements‚Äã RequestContext.toString...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.5]]></title>
            <link>https://armeria.dev/release-notes/0.98.5/</link>
            <guid>https://armeria.dev/release-notes/0.98.5/</guid>
            <pubDate>Sat, 14 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now use UUID as a parameter in your annotated service. #2573 #2577 public class MyAnnotatedService { @Get(&quot;/user/by-uuid/{uuid}&quot;) public User findUserByUuid(@Param UUID uuid) { ... }...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.4]]></title>
            <link>https://armeria.dev/release-notes/0.98.4/</link>
            <guid>https://armeria.dev/release-notes/0.98.4/</guid>
            <pubDate>Fri, 06 Mar 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[HealthCheckService does not leak the event loop tasks it scheduled anymore. #2557 ServiceRequestContext.setRequestTimeout() and ClientRequestContext.setResponseTimeout() now schedules a timeout correc...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.3]]></title>
            <link>https://armeria.dev/release-notes/0.98.3/</link>
            <guid>https://armeria.dev/release-notes/0.98.3/</guid>
            <pubDate>Tue, 25 Feb 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[RequestContextExporter and RequestContextExportingAppender for Logback can now export the current request ID into MDC. #2511 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;configu...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.2]]></title>
            <link>https://armeria.dev/release-notes/0.98.2/</link>
            <guid>https://armeria.dev/release-notes/0.98.2/</guid>
            <pubDate>Tue, 18 Feb 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now specify any client options when building with ArmeriaRetrofitBuilder, because it extends AbstractClientOptionsBuilder. #2483 Retrofit retrofit = ArmeriaRetrofit.builder(&quot;http://exampl...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.1]]></title>
            <link>https://armeria.dev/release-notes/0.98.1/</link>
            <guid>https://armeria.dev/release-notes/0.98.1/</guid>
            <pubDate>Wed, 12 Feb 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[FileService does not warn about blocking operations anymore. #2473 #2478 HealthCheckedEndpointGroup does not fail to check the healthiness of old Armeria servers anymore. #2474 ‚õì Dependencies‚Äã Brave 5...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.98.0]]></title>
            <link>https://armeria.dev/release-notes/0.98.0/</link>
            <guid>https://armeria.dev/release-notes/0.98.0/</guid>
            <pubDate>Wed, 12 Feb 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[This release contains more breaking changes and deprecations than usual, which were necessary for the preparation of 1.0 release and the long term evolution of our API after 1.0. We&#x27;d like to apo...]]></description>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019]]></title>
            <link>https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019</link>
            <guid>https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019</guid>
            <pubDate>Mon, 23 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[This November, accompanied by 3 other members of the Shop team, I attended Devoxx Belgium 2019, held in Antwerp, Belgium - the birthplace of Devoxx and most populous city of Belgium.]]></description>
            <content:encoded><![CDATA[<p>This November, accompanied by 3 other members of the Shop team, I attended Devoxx Belgium 2019, held in Antwerp, Belgium - the birthplace of Devoxx and most populous city of Belgium.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-1-8e22983a2492a8731c34a80e445decc8.jpg" width="1024" height="682" class="img_ev3q"></p>
<!-- -->
<p><a href="https://en.wikipedia.org/wiki/Devoxx" target="_blank" rel="noopener noreferrer" class="">Devoxx</a> is a developer community conference series started in 2001 which quickly grew to become one of the largest vendor-independent Java conferences in the world.
Today, Devoxx conferences are also held in France, Poland, Ukraine, Morocco, and the UK.</p>
<p>Devoxx Belgium took place in "Kinepolis," one of the largest cinemas in Europe.
The speakers' video and slides were projected on the huge cinema screens in 4K using the available THX audio setup.
The view was great!</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-2-4530f6955b4607b56de009631379926e.jpg" width="1024" height="768" class="img_ev3q"> <img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-3-cebba6c5f750b3fb1e59c6d953ef9de0.jpg" width="1024" height="768" class="img_ev3q"> <img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-4-a9a269fb31331861032e096fc80bd0b2.jpg" width="768" height="1024" class="img_ev3q"></p>
<p>In this blog post, I'd like to present a small hands-on example on monitoring a Spring Boot application in Kubernetes using what I learned at Devoxx.
In particular, I'd like to talk about:</p>
<ul>
<li class="">Preparing a Spring Boot application</li>
<li class="">Installing Docker and Kubernetes</li>
<li class="">Building a Docker image</li>
<li class="">Deploying to Kubernetes</li>
<li class="">Monitoring our application inside Kubernetes</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitoring-example---spring-boot-application-in-kubernetes">Monitoring Example - Spring Boot application in Kubernetes<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#monitoring-example---spring-boot-application-in-kubernetes" class="hash-link" aria-label="Direct link to Monitoring Example - Spring Boot application in Kubernetes" title="Direct link to Monitoring Example - Spring Boot application in Kubernetes" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-preparing-a-spring-boot-application">1. Preparing a Spring Boot application<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#1-preparing-a-spring-boot-application" class="hash-link" aria-label="Direct link to 1. Preparing a Spring Boot application" title="Direct link to 1. Preparing a Spring Boot application" translate="no">‚Äã</a></h3>
<p>For this example, I'm going to use a sample "Hello World" Spring Boot application that uses <a href="https://line.github.io/armeria/" target="_blank" rel="noopener noreferrer" class="">Armeria</a>.
On the Shop team we use Armeria to develop high-performance asynchronous microservices that use HTTP/2 as a session layer protocol.
I want to use Armeria in this example to show how you can expose a custom metrics endpoint and have Prometheus pull metrics from it.
Examples on how to get started with Armeria are available on <a href="https://github.com/line/armeria-examples" target="_blank" rel="noopener noreferrer" class="">Armeria's GitHub repo</a>.
The source code for this example is on <a href="https://github.com/nirvanarsc/k8s-monitoring-sample" target="_blank" rel="noopener noreferrer" class="">GitHub</a>.
I've only tested the code on macOS.</p>
<p>I have set up a <a href="https://github.com/nirvanarsc/k8s-monitoring-sample/blob/master/src/main/java/com/github/nirvanarsc/k8s/monitoring/sample/service/GreetingService.java#L17" target="_blank" rel="noopener noreferrer" class="">gRPC Service</a> and an <a href="https://github.com/nirvanarsc/k8s-monitoring-sample/blob/master/src/main/java/com/github/nirvanarsc/k8s/monitoring/sample/service/SampleService.java#L11" target="_blank" rel="noopener noreferrer" class="">HTTP Service</a> which we can call by navigating to <code>/internal/docs</code>.
DocService is a single-page web application that comes out of the box with Armeria listing all of our services and allowing us to call test them.
More about it can be found on <a href="https://line.github.io/armeria/server-docservice.html" target="_blank" rel="noopener noreferrer" class="">Armeria's official documentation</a>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-5-72863d1657c6923548295bdf10de5dba.png" width="1024" height="753" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-installing-docker--kubernetes">2. Installing Docker &amp; Kubernetes<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#2-installing-docker--kubernetes" class="hash-link" aria-label="Direct link to 2. Installing Docker &amp; Kubernetes" title="Direct link to 2. Installing Docker &amp; Kubernetes" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker">Docker<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker" translate="no">‚Äã</a></h4>
<p>Before we get started with Kubernetes, we need to install <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer" class="">Docker</a>.
If you are just getting started with Docker, I found the official <a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener noreferrer" class="">quickstart guide</a> useful.
We're going to use a public registry to push our application image to, so please <a href="https://hub.docker.com/signup" target="_blank" rel="noopener noreferrer" class="">register</a> and login to Docker through the GUI or by running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker login</span><br></span></code></pre></div></div>
<p>There seems to be some confusion online regarding the user name you should use when prompted to login.
Do not use your email!
Use the Docker ID you chose when signing up.
You can find your Docker ID in the upper right corner after logging in to <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="">Docker Hub</a>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-6-0e05f0c7e2d267e4fa64b2789b2d3ca9.png" width="1024" height="458" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes">Kubernetes<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#kubernetes" class="hash-link" aria-label="Direct link to Kubernetes" title="Direct link to Kubernetes" translate="no">‚Äã</a></h4>
<p>Okay now let's install Kubernetes.
For this example, we're just going to enable Kubernetes inside Docker.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-7-1a01abcfce3208d0c00906f8e1305be5.png" width="1024" height="845" class="img_ev3q"></p>
<p>Alternatives to docker-desktop for running a local Kubernetes cluster include:</p>
<ul>
<li class=""><a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener noreferrer" class="">minikube</a></li>
<li class=""><a href="https://github.com/kubernetes-sigs/kind" target="_blank" rel="noopener noreferrer" class="">kind</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-building-an-image">3. Building an Image<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#3-building-an-image" class="hash-link" aria-label="Direct link to 3. Building an Image" title="Direct link to 3. Building an Image" translate="no">‚Äã</a></h3>
<p>If you've got this far you should be able to run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl cluster-info</span><br></span></code></pre></div></div>
<p>and see something similar to the following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes master is running at https://kubernetes.docker.internal:6443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KubeDNS is running at https://kubernetes.docker.internal:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.</span><br></span></code></pre></div></div>
<p>So far so good.
Now let's build a docker image for our Spring Boot app.
All we need to do is write a Docker file and run a Docker daemon, while watching out for the best-practices for Docker.
Perhaps following the first part of this <a href="https://spring.io/guides/topicals/spring-boot-docker/" target="_blank" rel="noopener noreferrer" class="">guide</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="jib">Jib<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#jib" class="hash-link" aria-label="Direct link to Jib" title="Direct link to Jib" translate="no">‚Äã</a></h4>
<p>Or we can just jib it. <a href="https://github.com/GoogleContainerTools/jib" target="_blank" rel="noopener noreferrer" class="">Jib</a> is a tool developed by Google that helps you build Docker images for your Java applications without a Docker daemon - and without deep mastery of Docker best-practices.
All we need to do is to add the following to our build.gradle file.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugins {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id 'com.google.cloud.tools.jib' version '1.8.0'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jib.to.image = 'docker_id/image_name'</span><br></span></code></pre></div></div>
<p>In this example we're using a public docker registry but jib can be configured to upload images to a private registry.
More on that in <a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-gradle-plugin#authentication-methods" target="_blank" rel="noopener noreferrer" class="">Jib's official documentation</a>.</p>
<p>After we have configured the jib plugin, building our Docker image is as simple as running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./gradlew jib</span><br></span></code></pre></div></div>
<p>If all is well after logging in to <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="">Docker Hub</a> you should see your image on top.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-8-df9a37f4de7dd4d36a83f18a48efe014.png" width="1024" height="522" class="img_ev3q"></p>
<p>The url for your image should be of the form <code>docker.io/docker_id/image_name</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-deploying-to-kubernetes">4. Deploying to Kubernetes<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#4-deploying-to-kubernetes" class="hash-link" aria-label="Direct link to 4. Deploying to Kubernetes" title="Direct link to 4. Deploying to Kubernetes" translate="no">‚Äã</a></h3>
<p>Next, let's deploy our image to Kubernetes.
To do this, we need to write YAML configuration files, and as you can see in these tutorials from <a href="https://developer.ibm.com/tutorials/yaml-basics-and-usage-in-kubernetes/" target="_blank" rel="noopener noreferrer" class="">IBM</a> and <a href="https://www.mirantis.com/blog/introduction-to-yaml-creating-a-kubernetes-deployment/" target="_blank" rel="noopener noreferrer" class="">Mirantis</a>, writing even a basic .yaml file correctly can be a daunting task.
However, there is a very easy way to get started, which I found out at Ray Tsang's session <a href="https://www.youtube.com/watch?v=c16oOeTfFXM" target="_blank" rel="noopener noreferrer" class="">"Best Practices to Spring to Kubernetes Easier and Faster"</a> at Devoxx.
Instead of doing something like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-app --image docker.io/nirvanarsc/my-app</span><br></span></code></pre></div></div>
<p>We should add the <code>--dry-run</code> option like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-app --image docker.io/nirvanarsc/my-app --dry-run -oyaml</span><br></span></code></pre></div></div>
<p>Which will print the YAML configuration necessary for a Deployment with the specified image as follows.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - image: docker.io/nirvanarsc/my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: {}</span><br></span></code></pre></div></div>
<p>The only thing I will modify here is to increase the replicas from 1 to 3. (Set the number of instances of our app to 3)<br>
<!-- -->In the exact same way, we can get an initial configuration for our service.
Running the following for example,</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create service clusterip my-app --tcp=8080:8080 --dry-run -oyaml</span><br></span></code></pre></div></div>
<p>prints this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: 8080-8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    targetPort: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type: ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loadBalancer: {}</span><br></span></code></pre></div></div>
<p>Let's save both of these configuration to their own files.
Create a folder named "k8s" and execute:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-app --image docker.io/nirvanarsc/my-app --dry-run -oyaml &gt; k8s/deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create service clusterip my-app --tcp=8080:8080 --dry-run -oyaml &gt; k8s/service.yaml</span><br></span></code></pre></div></div>
<p>Now deploying our app is as simple as running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f k8s</span><br></span></code></pre></div></div>
<p>To access our application we will need to allow external traffic into our Kubernetes cluster.</p>
<p>This article will not be addressing Ingress/LoadBalancer/NodePort.
Perhaps <a href="https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0" target="_blank" rel="noopener noreferrer" class="">this article on Medium</a> is a good overview on that subject.</p>
<p>Instead, we will just forward a local port to a port on the cluster like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward svc/my-app 8080:8080</span><br></span></code></pre></div></div>
<p>Now we can access our <code>internal/docs</code> endpoint and our <code>internal/metrics</code> endpoint at <code>http://localhost:8080</code>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-9-72863d1657c6923548295bdf10de5dba.png" width="1024" height="753" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-10-8c715e5f0e93caec07cf919acc75c4a1.png" width="1024" height="522" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-monitoring-our-application-inside-kubernetes">5. Monitoring our application inside Kubernetes<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#5-monitoring-our-application-inside-kubernetes" class="hash-link" aria-label="Direct link to 5. Monitoring our application inside Kubernetes" title="Direct link to 5. Monitoring our application inside Kubernetes" translate="no">‚Äã</a></h3>
<p>Finally, we can talk about monitoring.
First a few words about Prometheus and Grafana.</p>
<p>Prometheus is a monitoring and alerting system.
It was originally built by SoundCloud in 2012, but has since been open sourced and now is part of the CNCF.
It is inspired by Google's BorgMon - one of Google's internal monitoring technologies used to monitor services running on Borg.
Borg is Google's internal cluster scheduler, which in turn inspired Kubernetes.
So Prometheus and Kubernetes have both been inspired by complementary technologies inside Google.</p>
<p>Grafana is an open source analytics and monitoring system.
Prometheus and Grafana have become basically the de facto monitoring solution.
Grafana should not be confused with Kibana, which runs on top of Elasticsearch and is used to analyze log messages.
On the Shop team we also use Prometheus with Grafana as our monitoring solution.</p>
<p>It is possible to have an external instance of Prometheus discover and pull metrics from our Application inside Kubernetes, but for this example I'm going to install an instance of Prometheus and Grafana inside the cluster and have Prometheus discover our Application and scrape metrics from it.</p>
<p>To install Prometheus and Grafana in our cluster we're going to use <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer" class="">Helm</a>.
Helm is a package manager for Kubernetes.
Think of it like npm/apt for Kubernetes.
Check out the <a href="https://helm.sh/docs/intro/quickstart/" target="_blank" rel="noopener noreferrer" class="">official documentation on getting started</a> if you have the time, but for this example, all the configuration we're going to need is:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew install helm</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo add stable https://kubernetes-charts.storage.googleapis.com/</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-prometheus">Installing Prometheus<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#installing-prometheus" class="hash-link" aria-label="Direct link to Installing Prometheus" title="Direct link to Installing Prometheus" translate="no">‚Äã</a></h4>
<p>We can install Prometheus in our cluster by running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm install my-prometheus stable/prometheus</span><br></span></code></pre></div></div>
<p>Which should output something like:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: my-prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Thu Dec  5 15:29:58 2019</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST SUITE: None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Prometheus server can be accessed via port 80 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-prometheus-server.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get the Prometheus server URL by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export POD_NAME=$(kubectl get pods --namespace default -l "app=prometheus,component=server" -o jsonpath="{.items[0].metadata.name}")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9090</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Prometheus alertmanager can be accessed via port 80 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-prometheus-alertmanager.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get the Alertmanager URL by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export POD_NAME=$(kubectl get pods --namespace default -l "app=prometheus,component=alertmanager" -o jsonpath="{.items[0].metadata.name}")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9093</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Prometheus PushGateway can be accessed via port 9091 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-prometheus-pushgateway.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get the PushGateway URL by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export POD_NAME=$(kubectl get pods --namespace default -l "app=prometheus,component=pushgateway" -o jsonpath="{.items[0].metadata.name}")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9091</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For more information on running Prometheus, visit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://prometheus.io/</span><br></span></code></pre></div></div>
<p>Now if we also run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ export POD_NAME=$(kubectl get pods --namespace default -l "app=prometheus,component=server" -o jsonpath="{.items[0].metadata.name}")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9090</span><br></span></code></pre></div></div>
<p>We should be able to access the Prometheus server at <code>localhost:9090</code></p>
<p>But if we navigate to status/targets, we will see that Prometheus fails to discover our application.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-11-3177aada7f7d631978ce2302a70b6277.png" width="1024" height="646" class="img_ev3q"></p>
<p>There's two ways to fix this.
First we can use an <a href="https://github.com/helm/charts/blob/master/stable/prometheus/values.yaml#L1316" target="_blank" rel="noopener noreferrer" class="">additional argument</a> when installing the Prometheus chart through Helm -<br>
<!-- -->We can create a file <code>extraScrapeConfigs.yaml</code> with the following settings</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">extraScrapeConfigs: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: 'armeria-metrics'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scrape_interval: 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics_path: /internal/metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes_sd_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - role: endpoints</span><br></span></code></pre></div></div>
<p>And then we need to update our Prometheus chart config by running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade --install my-prometheus --set-file extraScrapeConfigs=prometheus/extraScrapeConfigs.yaml stable/prometheus</span><br></span></code></pre></div></div>
<p>However I suggest we modify our <code>deployment.yaml</code> file by adding the following config allowing Prometheus to pull metrics from our app:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spec.template.metadata.annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus.io/scrape: "true"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus.io/port: "8080"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus.io/path: /internal/metrics</span><br></span></code></pre></div></div>
<p>So our <code>deployment.yaml</code> file should look like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      annotations:                               ### here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prometheus.io/scrape: "true"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prometheus.io/port: "8080"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prometheus.io/path: /internal/metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - image: docker.io/nirvanarsc/my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: {}</span><br></span></code></pre></div></div>
<p>And we need to re-deploy our app with the updated configuration:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete deploy/my-app svc/my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward svc/my-app 8080:8080</span><br></span></code></pre></div></div>
<p>If we navigate to status/targets now, we should see the 3 pods of our application.
We should also be able to query our metrics.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-12-a952350f9bf8708b17939060074def86.png" width="1024" height="665" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-13-382dd088b3f97b0c8f38724aa7d7c150.png" width="1024" height="396" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-grafana">Installing Grafana<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#installing-grafana" class="hash-link" aria-label="Direct link to Installing Grafana" title="Direct link to Installing Grafana" translate="no">‚Äã</a></h4>
<p>Lastly, we can install Grafana and visualize our metrics.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm install my-grafana stable/grafana</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: my-grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Thu Dec  5 16:03:33 2019</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Get your 'admin' user password by running:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   kubectl get secret --namespace default my-grafana -o jsonpath="{.data.admin-password}" | base64 --decode ; echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   my-grafana.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Get the Grafana URL to visit by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     export POD_NAME=$(kubectl get pods --namespace default -l "app=grafana,release=my-grafana" -o jsonpath="{.items[0].metadata.name}")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     kubectl --namespace default port-forward $POD_NAME 3000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Login with the password from step 1 and the username: admin</span><br></span></code></pre></div></div>
<p>Following the instructions above we should be able to log in to Grafana at <code>localhost:3000</code>.
Then we can add Prometheus as a data source and create a dashboard with our applications metrics.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-14-20c6d4e2bf109eed0aeac970ff02e6f7.png" width="1024" height="723" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-15-aeb013ee4a1911f79afdcc680a01e887.png" width="1024" height="317" class="img_ev3q"></p>
<p>And that's it!
We have successfully used Prometheus and Grafana to build a dashboard visualizing our app's metrics.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">‚Äã</a></h2>
<p>Getting started with Kubernetes can be quite challenging.
I think there are 3 main reasons for that:</p>
<ul>
<li class="">Writing a good YAML file is difficult</li>
<li class="">Knowledge of networking is required</li>
<li class="">There are a lot of small interconnected components such as Docker, Pods, Services, and ReplicaSets</li>
</ul>
<p>I hope this blog post will make it a little easier for you to begin development on Kubernetes.</p>
<p>Happy coding!</p>
<hr>
<p>A list of the Devoxx sessions about Kubernetes I found most useful:</p>
<ul>
<li class=""><a href="https://www.youtube.com/watch?v=c16oOeTfFXM" target="_blank" rel="noopener noreferrer" class="">Best Practices to Spring to Kubernetes Easier and Faster by Ray Tsang - YouTube</a></li>
<li class=""><a href="https://www.youtube.com/watch?v=YYJ4RZFw4j8" target="_blank" rel="noopener noreferrer" class="">Develop and Deploy to Kubernetes like a Googler by David Gageot - YouTube</a></li>
<li class=""><a href="https://www.youtube.com/watch?v=YiXf4Pqyl0A" target="_blank" rel="noopener noreferrer" class="">Helm your way with Kubernetes by Ana Maria Mihalceanu - YouTube</a></li>
<li class=""><a href="https://www.youtube.com/watch?v=dId543PzSsU" target="_blank" rel="noopener noreferrer" class="">Crash course in Kubernetes monitoring by Robert Munteanu - YouTube</a></li>
</ul>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.97.0]]></title>
            <link>https://armeria.dev/release-notes/0.97.0/</link>
            <guid>https://armeria.dev/release-notes/0.97.0/</guid>
            <pubDate>Sun, 08 Dec 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[We now have a new immutable cookie API with SameSite attribute support, which replaces Netty&#x27;s cookie API. #1567 #2286 Cookie c1 = Cookie.of(&quot;foo&quot;, &quot;bar&quot;)Cookie c2 = Cookie.bu...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.96.0]]></title>
            <link>https://armeria.dev/release-notes/0.96.0/</link>
            <guid>https://armeria.dev/release-notes/0.96.0/</guid>
            <pubDate>Sat, 23 Nov 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[The type signature of clients and services has been greatly simplified. Note that this involves various breaking changes unfortunately. See the &#x27;Breaking changes&#x27; section for the details. #2...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.95.0]]></title>
            <link>https://armeria.dev/release-notes/0.95.0/</link>
            <guid>https://armeria.dev/release-notes/0.95.0/</guid>
            <pubDate>Sat, 26 Oct 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now bind multiple paths to an annotated service easily using @Path. #1822 #1870 @Get@Post@Path(&quot;/a&quot;)@Path(&quot;/b&quot;)public String myAwesomeServcie(...) {...} You can now make an...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.94.0]]></title>
            <link>https://armeria.dev/release-notes/0.94.0/</link>
            <guid>https://armeria.dev/release-notes/0.94.0/</guid>
            <pubDate>Fri, 04 Oct 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now decorate multiple services by path mapping. See the documentation for more information. #582 #2040 #2057 ServerBuilder sb = new ServerBuilder();// Register vipService and memberService und...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.93.0]]></title>
            <link>https://armeria.dev/release-notes/0.93.0/</link>
            <guid>https://armeria.dev/release-notes/0.93.0/</guid>
            <pubDate>Thu, 26 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now create a Sampler from a specification string such as random=0.1 and rate-limited=10. #2108 This is going to be useful when you want to make the sampling policy of Brave{Client,Server} or L...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.92.0]]></title>
            <link>https://armeria.dev/release-notes/0.92.0/</link>
            <guid>https://armeria.dev/release-notes/0.92.0/</guid>
            <pubDate>Mon, 23 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now easily get the request URI using RequestHeaders.uri() and HttpRequest.uri(). #2092 RequestHeaders headers = RequestHeaders.of(HttpMethod.GET, &quot;/foo&quot;, HttpHeaderNames.SCHEME, &quo...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.91.0]]></title>
            <link>https://armeria.dev/release-notes/0.91.0/</link>
            <guid>https://armeria.dev/release-notes/0.91.0/</guid>
            <pubDate>Fri, 06 Sep 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can specify the maximum number of event loops to handle connections. #1886 ClientFactoryBuilder builder = ...;builder.maxNumEventLoopsPerEndpoint(5); // Assign 5 event loops for endpoints. 1 is us...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.90.3]]></title>
            <link>https://armeria.dev/release-notes/0.90.3/</link>
            <guid>https://armeria.dev/release-notes/0.90.3/</guid>
            <pubDate>Wed, 21 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[HealthCheckedEndpointGroup does not report healthy endpoints as unhealthy anymore. #2004 UnaryGrpcClient now handles gRPC status in HTTP trailer correctly. #1998 byte[] or HttpData returned by an anno...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.90.2]]></title>
            <link>https://armeria.dev/release-notes/0.90.2/</link>
            <guid>https://armeria.dev/release-notes/0.90.2/</guid>
            <pubDate>Wed, 14 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[This release updates Netty from 4.1.38 to 4.1.39 to address the HTTP/2 security issues found in its previous versions. Please upgrade as soon as possible if your application serves the traffic from un...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.90.1]]></title>
            <link>https://armeria.dev/release-notes/0.90.1/</link>
            <guid>https://armeria.dev/release-notes/0.90.1/</guid>
            <pubDate>Mon, 12 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Armeria does not fail to initialize SSLContext anymore when JRE does not support TLSv1.3 and OpenSSL support is missing. #1984 #1986 HealthCheckedEndpointGroup does not fail with ConcurrentModificatio...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.90.0]]></title>
            <link>https://armeria.dev/release-notes/0.90.0/</link>
            <guid>https://armeria.dev/release-notes/0.90.0/</guid>
            <pubDate>Mon, 12 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now send an HTTP request to an absolute URI, which means you don&#x27;t need to create different HttpClients for different hosts. #1143 #1343 #1961 HttpClient client = HttpClient.of(); // No b...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.89.1]]></title>
            <link>https://armeria.dev/release-notes/0.89.1/</link>
            <guid>https://armeria.dev/release-notes/0.89.1/</guid>
            <pubDate>Mon, 12 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[RetryingClient now respects the Endpoint selection order, which was broken since 0.89.0. #1973 #1974 Edit this page]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.89.0]]></title>
            <link>https://armeria.dev/release-notes/0.89.0/</link>
            <guid>https://armeria.dev/release-notes/0.89.0/</guid>
            <pubDate>Mon, 29 Jul 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now specify decorators for all services in a Server in a functional way. #1882 #1900 ServerBuilder sb = new ServerBuilder();sb.service(...);// After:sb.decorator((delegate, ctx, req) -&gt; { ....]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.88.0]]></title>
            <link>https://armeria.dev/release-notes/0.88.0/</link>
            <guid>https://armeria.dev/release-notes/0.88.0/</guid>
            <pubDate>Wed, 03 Jul 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[ClientRequestContext.current() and ServiceRequestContext.current() have been added so you don&#x27;t need to downcast RequestContext to ClientRequestContext or ServiceRequestContext. It also makes sur...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.87.0]]></title>
            <link>https://armeria.dev/release-notes/0.87.0/</link>
            <guid>https://armeria.dev/release-notes/0.87.0/</guid>
            <pubDate>Thu, 13 Jun 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now jump to a service method quickly using a go-to form in a DocService debug page. #1815 From this release, TLSv1.3 is enabled by default. #1779 Route replaces PathMapping. #1789 ServerBuilde...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.81.1]]></title>
            <link>https://armeria.dev/release-notes/0.81.1/</link>
            <guid>https://armeria.dev/release-notes/0.81.1/</guid>
            <pubDate>Fri, 31 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[The percent-encoding of the characters such as # and / are now preserved correctly. #1805 Thank you‚Äã This release was possible thanks to the following contributors who shared their brilliant ideas and...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.86.0]]></title>
            <link>https://armeria.dev/release-notes/0.86.0/</link>
            <guid>https://armeria.dev/release-notes/0.86.0/</guid>
            <pubDate>Fri, 17 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[The request body is injected automatically in annotated HTTP service when the parameter type is byte[], HttpData, String or CharSequence regardless of the content-type header. #1584, #1745 You can now...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.85.0]]></title>
            <link>https://armeria.dev/release-notes/0.85.0/</link>
            <guid>https://armeria.dev/release-notes/0.85.0/</guid>
            <pubDate>Fri, 17 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now bind your Service to a certain HTTP method or enable HTTP content-type negotiation very easily with the new ServerBuilder.route() method. #1737 ServerBuilder sb = new ServerBuilder();sb.ro...]]></description>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Make your GitHub contributions calendar greener (featuring Armeria Sprint)!]]></title>
            <link>https://armeria.dev/blog/2019/05/14/armeria-sprint-1</link>
            <guid>https://armeria.dev/blog/2019/05/14/armeria-sprint-1</guid>
            <pubDate>Tue, 14 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Hi, there!]]></description>
            <content:encoded><![CDATA[<p>Hi, there!
Do any of you need to make lots and lots of commits to turn your <a href="https://help.github.com/en/articles/viewing-contributions-on-your-profile#contributions-calendar" target="_blank" rel="noopener noreferrer" class="">GitHub contribution calendar</a> into a pastureland?
If that's the case, I proudly present Armeria Sprint!
Let me give you some ideas on what Armeria Sprint is and share reviews from our enthusiastic participants.</p>
<p>You've probably come across a sprint at technical conferences such as <a href="https://us.pycon.org/2019/community/sprints/" target="_blank" rel="noopener noreferrer" class="">PyCON Development Sprints</a> before.
Or, you might just find the term, sprint, familiar because it appears in Agile software development.
You might still wonder, "What is an open source sprint anyway?
What's up with Armeria Sprint?"</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/armeria-sprint-1-1-86145b7d89389da073b2ac3d87ee8787.png" width="1276" height="172" class="img_ev3q"></p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-an-open-source-sprint">What is an open source sprint?<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#what-is-an-open-source-sprint" class="hash-link" aria-label="Direct link to What is an open source sprint?" title="Direct link to What is an open source sprint?" translate="no">‚Äã</a></h2>
<p>An open source sprint is a time dedicated for those who want to contribute to open source projects to come together and concentrate on coding. (Please refer to the <a class="" href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria">previous posting</a> to find more about open source contributions.) It could vary but sprints are usually scheduled as a one-day event where all participants meet up in the morning to decide who is doing what (among open issues) and spend the rest of the day "coding away".</p>
<p>There are usually two types of participants, mentors and mentees.
Those who have contributed to the selected open source project before take up a mentor role while new comers with a lot of passion for the project are mentees.
For the Armeria Sprint, we were honored to have our three Armeria maintainers as mentors.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-sprint-for">What is a sprint for?<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#what-is-a-sprint-for" class="hash-link" aria-label="Direct link to What is a sprint for?" title="Direct link to What is a sprint for?" translate="no">‚Äã</a></h3>
<p>Even if you have passion for open source projects, the reality is that it is not always easy to find time for it.
Or, sometimes you have so many questions about an open source project but you simply don't know where to find answers.
Moreover, it is conventional wisdom that two are better than one.
Open source sprints are an opportunity for those of you who have a heart for open source projects but could not find time in the past or for those of you who just want to give it a try for the first time.</p>
<p>New contributors and their contributions fuel the growth of the open source community, making it more vibrant.
Even for mentors, when they interact and communicate with different participants, they will be able to understand what has been an entry barrier for new contributors.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview-of-armeria-sprint">Overview of Armeria Sprint<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#overview-of-armeria-sprint" class="hash-link" aria-label="Direct link to Overview of Armeria Sprint" title="Direct link to Overview of Armeria Sprint" translate="no">‚Äã</a></h2>
<p>This year's Armeria Sprint was open to LINE developers only.
We opened up only a few seats to achieve the optimum ratio of mentors to mentees.
Quite surprisingly, these seats were filled up in a flash with more applicants on the waiting list!
This alone testified to fully charged passion of all applicants.
What an enthusiasm!
The Armeria Sprint was scheduled for two days: two hours of welcome session on the first day and four hours of development sprint on the second day.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="welcome-session">Welcome session<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#welcome-session" class="hash-link" aria-label="Direct link to Welcome session" title="Direct link to Welcome session" translate="no">‚Äã</a></h3>
<p>The welcome session was kicked off with a brief introduction of all participants.
After breaking the ice, the participants touched upon the following topics.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="must-reads-before-open-source-contribution">Must-reads before open source contribution<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#must-reads-before-open-source-contribution" class="hash-link" aria-label="Direct link to Must-reads before open source contribution" title="Direct link to Must-reads before open source contribution" translate="no">‚Äã</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="contributing">Contributing<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#contributing" class="hash-link" aria-label="Direct link to Contributing" title="Direct link to Contributing" translate="no">‚Äã</a></h4>
<p><a href="https://github.com/line/armeria/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="">This document</a> explains how you can contribute to the Armeria project together with a set of rules to comply with when doing so.
The summary of key points is provided under <a href="https://github.com/line/armeria/blob/master/CONTRIBUTING.md#checklist-for-your-pull-request" target="_blank" rel="noopener noreferrer" class="">Checklist for your pull request</a>.
It can help you save time for code review.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="contributor-license-agreement-cla">Contributor License Agreement (CLA)<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#contributor-license-agreement-cla" class="hash-link" aria-label="Direct link to Contributor License Agreement (CLA)" title="Direct link to Contributor License Agreement (CLA)" translate="no">‚Äã</a></h4>
<p>You might have seen this type of <a href="https://cla-assistant.io/line/armeria" target="_blank" rel="noopener noreferrer" class="">agreement</a> before but considered it did not concern you.
Open source projects usually ask you to sign the CLA before you start your contribution.
The following bullet points summarize the content of the CLA (Note that it can vary by project.):</p>
<ul>
<li class="">
<p>The purpose of the CLA is to protect the project and its contributors and users.</p>
</li>
<li class="">
<p>Signing the CLA will constitute an agreement to go open source on your contributions in the same terms as the Armeria project.</p>
</li>
<li class="">
<p>Your contributions will be accepted as they are, and you will not be held accountable for any bug or flaw in your contributions.</p>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="code-of-conduct">Code of Conduct<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#code-of-conduct" class="hash-link" aria-label="Direct link to Code of Conduct" title="Direct link to Code of Conduct" translate="no">‚Äã</a></h4>
<p>Contributors are expected to follow the <a href="https://github.com/line/armeria/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="">Code of Conduct</a>, which provides a guideline to foster an open and welcoming environment.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-allocation">Task allocation<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#task-allocation" class="hash-link" aria-label="Direct link to Task allocation" title="Direct link to Task allocation" translate="no">‚Äã</a></h4>
<p>The main purpose of the welcome session was to decide on who is going to do what.
First, the participants went through the <a href="https://github.com/line/armeria/issues?q=is%3Aopen+is%3Aissue+label%3Agood-first-issue" target="_blank" rel="noopener noreferrer" class="">good-first-issues</a> with more detailed elaboration on each issue by the mentors.
They explained about the background and history of each issue and relevant technical requirements and background knowledge to resolve the issue.</p>
<p>When you find an issue you want to work on, don't hesitate to leave a comment such as "I am working on this" or "I'll handle this issue" so that you don't redundantly work on the same issue with others.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-development-environment">Configuring development environment<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#configuring-development-environment" class="hash-link" aria-label="Direct link to Configuring development environment" title="Direct link to Configuring development environment" translate="no">‚Äã</a></h4>
<p>After everyone picked an issue, they went step by step to set up the development environment (Check out <a href="https://github.com/line/armeria/blob/master/CONTRIBUTING.md#setting-up-your-ide" target="_blank" rel="noopener noreferrer" class="">Setting up your IDE</a>).</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/armeria-sprint-1-2-083b5bebb1c751fbb46e8b72bc4a7c2d.jpg" width="2002" height="1280" class="img_ev3q"></p>
<p>The participants did a little activity while configuring development environment like "lay down your water bottle when you're done with fork &amp; clone".</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sprint-results">Sprint results<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#sprint-results" class="hash-link" aria-label="Direct link to Sprint results" title="Direct link to Sprint results" translate="no">‚Äã</a></h3>
<p>Here are the pull requests opened during the Armeria Sprint:</p>
<ul>
<li class=""><a href="https://github.com/line/armeria/pull/1742" target="_blank" rel="noopener noreferrer" class="">#1742</a> Allow using wildcards with RequestContextExportingAppender</li>
<li class=""><a href="https://github.com/line/armeria/pull/1743" target="_blank" rel="noopener noreferrer" class="">#1743</a> Provide a way to create a client with an Endpoint rather than with a URI</li>
<li class=""><a href="https://github.com/line/armeria/pull/1744" target="_blank" rel="noopener noreferrer" class="">#1744</a> Show armeria version in doc service</li>
<li class=""><a href="https://github.com/line/armeria/pull/1745" target="_blank" rel="noopener noreferrer" class="">#1745</a> Enable to convert JSON format request to String</li>
<li class=""><a href="https://github.com/line/armeria/pull/1747" target="_blank" rel="noopener noreferrer" class="">#1747</a> Introduce 'export-as-curl' button to a debug request window</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/armeria-sprint-1-3-e6687888fa70e93961043304b6092178.jpeg" width="4032" height="3024" class="img_ev3q"></p>
<p>Don't worry!
Your "secret identity" is protected, Armeria Sprinters!</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/armeria-sprint-1-4-cc4f6442e399cee4c1ac98a48b7e8a1f.jpeg" width="3452" height="2233" class="img_ev3q"></p>
<p>Keep those sticky fingers away from the precious laptops!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="reviews">Reviews<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#reviews" class="hash-link" aria-label="Direct link to Reviews" title="Direct link to Reviews" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="feedback-from-armeria-sprint-participants">Feedback from Armeria Sprint participants<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#feedback-from-armeria-sprint-participants" class="hash-link" aria-label="Direct link to Feedback from Armeria Sprint participants" title="Direct link to Feedback from Armeria Sprint participants" translate="no">‚Äã</a></h4>
<ul>
<li class="">I especially liked that there was someone I could easily reach out for questions. Moreover, everyone respected each other. I hope there will more opportunities like this so that I can overcome my hesitation toward open source projects.</li>
<li class="">Well, I think I was kind of "tricked by my mentor" because the issue I picked sounded much easier when he explained it. (LOL) Still, it was quite a positive experience for me to make contributions to an open source project.</li>
<li class="">If you are developer, you would have dreamt of open source contributions, at least once. It was a good start for me.</li>
<li class="">When I actually got to it, it was only a few lines of code. But, I had a lot to think about before making it happen.</li>
<li class="">Mentors made open issues quite easy to understand, but it took some time for me to understand the existing code. If we were given an overall view on the code or structure of Armeria in advance, it could have been easier to approach the issue.</li>
<li class="">I've given it a few tries to contribute to open source projects in the past, but to no avail. This time, I could make it happen because there were mentors around for guidance.</li>
<li class="">My team is using Armeria. Even if I sometimes felt a need for new things, I was reluctant to make changes on my own. After this Sprint, I think I'll be able to take the initiative in making contributions. I'll study the code more to prepare myself.</li>
<li class="">I found it a little bit difficult to handle the issue. But, it was a good opportunity for me to learn the basics.</li>
<li class="">I was almost done, but we ran out of time before I could open a pull request. I'll finish it up and open a pull request soon.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="feedback-from-armeria-sprint-mentors">Feedback from Armeria Sprint mentors<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#feedback-from-armeria-sprint-mentors" class="hash-link" aria-label="Direct link to Feedback from Armeria Sprint mentors" title="Direct link to Feedback from Armeria Sprint mentors" translate="no">‚Äã</a></h4>
<ul>
<li class="">To those who find it difficult to approach open source development, it all begins with leaving your problem solving ideas as a comment on the issue. Don't sweat it and ask questions! Your questions are a big help for us, too.</li>
<li class="">It was a great opportunity for me to realize that there were so many developers out there who were interested in open source development. I was very proud to serve as a mentor for this event. (Don't forget to star the repository!)</li>
<li class="">I was a little nervous because this was the first Sprint ever. But, all my worries were groundless. I'd like to thank all the participants for taking it so seriously. Even though the first Armeria Sprint is over for now, you can always leave a comment or a question on the GitHub and Slack.</li>
<li class="">We made a big progress by opening pull requests today. But, I dare say it's only a start. Your coding skills will evolve further through code reviews. Don't give up until your code is merged.</li>
<li class="">It was a very meaningful experience to meet up with contributors face to face. I wish there will be more events like this one.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="wrapping-up">Wrapping up<a href="https://armeria.dev/blog/2019/05/14/armeria-sprint-1#wrapping-up" class="hash-link" aria-label="Direct link to Wrapping up" title="Direct link to Wrapping up" translate="no">‚Äã</a></h2>
<p>Thank you all for your hard work during the Armeria Sprint!
We hope this was a time of mutual growth and everyone enjoyed the Sprint.
We'll come back with a more rewarding event next time.</p>
<p>Before I go away, this was the first Sprint I've organized, and I'd like to express my gratitude to the authors of the following guides as they helped me to make my first-time Sprint a success:</p>
<ul>
<li class=""><a href="https://github.com/drud/sprint_guide" target="_blank" rel="noopener noreferrer" class="">Open Source Contribution Sprint Guide by DRUD</a></li>
<li class=""><a href="https://opensourceevents.github.io/" target="_blank" rel="noopener noreferrer" class="">Th</a><a href="https://opensourceevents.github.io/" target="_blank" rel="noopener noreferrer" class="">e In-Person Event Handbook by opensource-events</a></li>
</ul>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.84.0]]></title>
            <link>https://armeria.dev/release-notes/0.84.0/</link>
            <guid>https://armeria.dev/release-notes/0.84.0/</guid>
            <pubDate>Tue, 23 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now access the detailed timing information for the connection attempts made by Armeria via RequestLog API, including DNS lookup and socket connect time. #1692 HttpClient client = new HttpClien...]]></description>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Thank you for contributing to Armeria!]]></title>
            <link>https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria</link>
            <guid>https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria</guid>
            <pubDate>Tue, 16 Apr 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Hello to the readers!]]></description>
            <content:encoded><![CDATA[<p>Hello to the readers!
I'd like to share with you the first ever Armeria Contributor Reward Event and how it went.
For this posting, I'm not going to elaborate on the technical aspects of Armeria.
To learn more about its technology and features, please visit the <a href="https://line.github.io/armeria" target="_blank" rel="noopener noreferrer" class="">official website for Armeria</a>.</p>
<p>The <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">Armeria</a> project was initially developed by LINE but went to open source later.
Even though the project was initiated by LINE, Armeria is where it is now thanks to participation from many passionate contributors.
That is why we organized this Armeria Contributor Reward Event, to express our gratitude to all of the contributors.</p>
<p>Let me first give a quick summary of what open source contribution is.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-open-source-contribution">What is open source contribution?<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#what-is-open-source-contribution" class="hash-link" aria-label="Direct link to What is open source contribution?" title="Direct link to What is open source contribution?" translate="no">‚Äã</a></h2>
<p>When a new project is launched at a company, the project team is formed with participants from different areas such as development, planning, business and design.
The same applies to open source projects as open source projects can deliver good results when people with different backgrounds, not only programmers but also testers, marketers, designers and technical writers, work together.
Some think, in the narrow sense, you contribute to open source only when your code is merged.
However, as open source projects are not all about programming, as I mentioned earlier, all kinds of contributions matter for the growth and sustainability of open source projects.
For example, you are an open source contributor if you bring in more contributors by giving presentations on an open source project, if you donate your talent of writing for documentation, if you offer new ideas to resolve an issue, if you report a bug or if you help out with a logo or UI design.</p>
<p>So, why does each and every contributor count in the world of open source?
Why can't it be controlled solely by a project owner?</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-contribute-to-open-source---from-project-owners-perspective">Why contribute to open source? - from project owner's perspective<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#why-contribute-to-open-source---from-project-owners-perspective" class="hash-link" aria-label="Direct link to Why contribute to open source? - from project owner's perspective" title="Direct link to Why contribute to open source? - from project owner's perspective" translate="no">‚Äã</a></h3>
<p>When I talk to people who create open source projects, they tend to have a belief that projects are yet to be perfected and they can make them better with user feedback. <a href="https://en.wikipedia.org/wiki/Eric_S._Raymond" target="_blank" rel="noopener noreferrer" class="">Eric S.
Raymond</a>, a well-known open source software advocate, wrote about open source software development models in his essay, <a href="https://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar" target="_blank" rel="noopener noreferrer" class="">The Cathedral and the Bazaar</a>.
The point he wants to make is: the more contributors including users are, the better software becomes.</p>
<p>Let's say you own a restaurant and sell your signature menu.
Everyone almost always has a different voice about the same menu.
Some might say it tastes just right for them while others could find it too sweet, too spicy or too salty.
Or, some might have an idea of perfect plating for your signature menu.
There could also be someone who knows how to better design a menu to highlight your signature dish.
What if they have a channel to give their feedback right away or even make changes themselves?
Such collaborated efforts and ideas could make your restaurant a more attractive place.
People might line up outside your beautiful restaurant to enjoy the upgraded signature menu.</p>
<p>Open source software development is fueled by user feedback.
If you choose to go open source but ignore user feedback, users will gradually stop using the software.
Then, the software will eventually lose its purpose as a product.
On the other hand, trying to handle every single feedback on your own is problematic too.
Especially if there is too much feedback.
You will naturally get more feedback when more contributors participate.
It will become more difficult for you to respond to increasing feedback all by yourself, and when you fail to do so, it will result in deteriorating quality and loss of users.
In the end, the open source software will become obsolete.</p>
<p>Smooth communications between the project owner and users are essential to open source development based on user feedback.
Quick reflection of feedback will lead to more participation, creating a virtuous cycle of users actively participating as developers.
Such a virtuous cycle will sustain the open source community for the project.</p>
<p>All this is from the perspective of project owners.
Now, let's look at it from a contributor's perspective.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-contribute-to-open-source---from-contributors-perspective">Why contribute to open source? - from contributor's perspective<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#why-contribute-to-open-source---from-contributors-perspective" class="hash-link" aria-label="Direct link to Why contribute to open source? - from contributor's perspective" title="Direct link to Why contribute to open source? - from contributor's perspective" translate="no">‚Äã</a></h3>
<p>First of all, you as a contributor can make requests to an open source project directly and immediately.
When there is an active community for the open source project, you will get replies in no time from other users or the maintainer.
Wouldn't it make your open source life easier if you can get an answer to your questions quickly?
If there is something you want to change, you can do it yourself, instead of waiting for someone to do it for you.
You can also receive feedback on the changes you made.
Records of everyone's participation is shared publicly at the open source community.
This record can act as a portfolio and serve as a strong and effective self promotion, even more so than the coding tests you have to take in applying for jobs.</p>
<p>Did any of you out there stand on the sidelines because you thought that open source projects were only for highly skilled programmers?
Why don't you revisit those open source projects you have been following and contribute?
I'd suggest to start with the issue list of a project, especially with the issues tagged with 'good-first-issue', 'first-timers-only' or 'help-wanted'?</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="armeria-contributor-reward">Armeria Contributor Reward<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#armeria-contributor-reward" class="hash-link" aria-label="Direct link to Armeria Contributor Reward" title="Direct link to Armeria Contributor Reward" translate="no">‚Äã</a></h2>
<p>The purpose of the Armeria Contributor Reward Event was to express our gratitude to the contributors and interact with them.
Since the Armeria project was open to people around the globe, main communications channel was via texts or replies.
We've always felt that "LGTM (Looks Good To Me)" or ":thumbsup:?" weren't enough to express our gratitude.
This time, we have reached out to individual contributors by email and sent a small gift.</p>
<p>We also created an event banner, using the <a href="https://help.github.com/articles/personalizing-your-profile/#changing-your-profile-picture" target="_blank" rel="noopener noreferrer" class="">GitHub profile pictures</a> of all contributors.
Isn't it an adorable pink banner just like the logo of Armeria?</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/thank-you-for-contributing-to-armeria-1-3f3df0d2b8c505b2e22a7d0c13a5bd23.png" width="1000" height="333" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="participation-by-contributors">Participation by contributors<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#participation-by-contributors" class="hash-link" aria-label="Direct link to Participation by contributors" title="Direct link to Participation by contributors" translate="no">‚Äã</a></h3>
<p>GitHub provides a <a href="https://github.com/line/armeria/graphs/contributors" target="_blank" rel="noopener noreferrer" class="">graph</a> on contributions.
The following is a summary of what the graph tells you.
Up until now, more than 60 contributors made more than 1,350 commits, adding about 457,000 lines and deleting 257,500 lines.
The numbers tell how active our contributors have been.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/thank-you-for-contributing-to-armeria-2-fcb1737125e1ea66099c22a8139ee5f9.png" width="1093" height="309" class="img_ev3q"></p>
<p>Let's take a closer look on more specific contributions from the contributors.</p>
<ul>
<li class="">Your contribution led Armeria's annotated service to a whole new level.</li>
<li class="">Your Retrofit integration module was one of the greatest additions in Armeria's history.</li>
<li class="">HTTP redirection is now easier than ever with Armeria thanks to your contribution.</li>
<li class="">Your work on implementing the high quality circuit breaker in Armeria is considered as an all-time legend.</li>
<li class="">Your optimization of weighted round-robin load balancing algorithm was very clever idea that it was worth of a prize.</li>
<li class="">We appreciate your initial groundwork, especially on the client-side, which made today's Armeria.</li>
<li class="">Thank you for promoting Armeria to the developer communities and we appreciate your contribution to the project!</li>
<li class="">Your documentation clean-up made us look way better than ever.</li>
<li class="">Your help with fixing the bug made Armeria more stable than ever.</li>
<li class="">Although your part was small, your dedication saved many of our days.</li>
</ul>
<p>On top of this, many contributors made contributions in various ways.
We sent a thank-you note to each and every one of them.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="interview-with-anuraaga">Interview with @anuraaga<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#interview-with-anuraaga" class="hash-link" aria-label="Direct link to Interview with @anuraaga" title="Direct link to Interview with @anuraaga" translate="no">‚Äã</a></h3>
<p>As the <a href="https://github.com/line/armeria/graphs/contributors" target="_blank" rel="noopener noreferrer" class="">Insights tab</a> on GitHub shows, it was <a href="https://github.com/line/armeria/commits?author=anuraaga" target="_blank" rel="noopener noreferrer" class="">@anuraaga</a> who made the most contributions except for the project owners.
We took this opportunity to interview @anuraaga to share his thoughts.</p>
<p><strong>Q.
Could you please introduce yourself briefly?</strong></p>
<p>A.
I'm Anuraag, many call me Rag.
I am a software engineer, and I have worked on many large-scale server-side projects.
I got to know Armeria when I was working at LINE in the LINE Shop team √¢¬Ä¬î it was a really great coincidence that when I joined the team and wanted a full-featured RPC framework to replace legacy <a href="https://thrift.apache.org/" target="_blank" rel="noopener noreferrer" class="">Thrift</a> libraries, <a href="https://github.com/trustin" target="_blank" rel="noopener noreferrer" class="">@trustin</a>(Trustin, the project owner) had just started working on the Armeria project to provide that.
Since then, even after leaving LINE, I have been using Armeria in all my projects and continue to contribute what I can to the project.</p>
<p><strong>Q.
How do you use Armeria?
Do you use it at work?</strong></p>
<p>A.
I use Armeria for all my server-side needs, for work and personal needs.
My company, <a href="https://www.infostellar.net/" target="_blank" rel="noopener noreferrer" class="">Infostellar</a>, is building out global network infrastructure for satellite communications, and this means transferring lots of data, in addition to usual needs of an API.
Our architecture follows a standard service-based one, with many servers running on <a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer" class="">Kubernetes</a>, each exposing a <a href="https://grpc.io/" target="_blank" rel="noopener noreferrer" class="">gRPC</a> API using Armeria.
We also have a web frontend, which is also powered by Armeria's static file serving functionality and support for gRPC-Web.</p>
<p>Aside from work, Armeria is also my go-to for personal projects on the weekends.
I'm glad I can use Armeria effectively in all sizes of projects as it just satisfies the use cases I need :)</p>
<p><strong>Q.
What do you think is the best part of Armeria?</strong></p>
<p>A.
I think Armeria's strongest point is the focus on developer productivity.
Trustin has really created the project to satisfy the needs of all developers, and it means lots of flexibility, while also showcasing best practices and ensuring developers don't miss out on modern trends such as asynchronous programming.
I have seen other frameworks or libraries where the maintainers take a very theoretical approach, which often results in the library being harder to use for developers because it focuses on what the maintainers want to see in a library, not what the developers need in a library.
I think Armeria's focus on developer needs, including providing full support in a Slack channel, allows it to be useful to a large spectrum of developers, not just a small segment.</p>
<p>I also want to say that I really appreciate that Armeria is the most flexible server framework I've seen √¢¬Ä¬î being able to serve gRPC, static files, metrics, DocService, and any other content all on the same TCP port is a big achievement!</p>
<p><strong>Q.
Have you experienced any difficulties in participating in Armeria development?</strong></p>
<p>A.
Armeria development has been very smooth for me.
The documentation and IDE(Integrated Development Environment) settings setup is easy to follow and PRs (Pull Requests) go smoothly thanks to the pleasant reviewers.
For a little while, I did feel that releases were happening slowly, and I've even had to once deploy a snapshot with a bugfix that was merged but not released for some time.
Lately, though, it seems releases are happening much more frequently and I haven't felt this at all. :)</p>
<p>One small point, which I guess is hard to change, is I do find myself having trouble getting whitespace formatting right even with the imported code settings √¢¬Ä¬î it's especially embarrassing seeing Trustin fix some whitespace issues in future PRs when he notices the ones I missed. ;) Using an automatic formatter would remove one thing to worry about during development.</p>
<p><strong>Q.
Do you have any plans for or expectations from the project?</strong></p>
<p>A.
I personally plan to continue to use Armeria, contributing code when I find a new feature that may be useful, etc.
Actually this is a good point; I'm not clear on what are the project's expectations for itself.
There are many feature requests, often using a limited scope of technology √¢¬Ä¬î <a href="https://github.com/line/armeria/issues/194" target="_blank" rel="noopener noreferrer" class="">adding support</a> for more service discovery mechanisms is a recent one that reminded me of this, another being whether to natively support spring security or not.
I imagine it's not in Armeria's scope to support every single technology in the world, and wonder how to draw the line.</p>
<p><strong>Q.
What do you think about open source or open source contribution?</strong></p>
<p>A.
I love open source!
I think it creates useful technology for all the developers out there, but also creates strong communities and I am really surprised but happy to have made many friends through open source.
I hope to get to meet many more people through continued open source activities and encourage anyone that has some free time to just send a PR to their favorite repository.</p>
<p><strong>Q.
Any other comments?</strong></p>
<p>A.
I am excited that this event happened √¢¬Ä¬î it's great to see a focus on expanding open source from a leading company like LINE.
It's easy for companies to just put out some source code, but not easy to actually support the ecosystem itself.
Thanks a lot for helping to build the open source community!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="closing">Closing<a href="https://armeria.dev/blog/2019/04/16/thank-you-for-contributing-to-armeria#closing" class="hash-link" aria-label="Direct link to Closing" title="Direct link to Closing" translate="no">‚Äã</a></h2>
<p>Armeria is planning a range of programs to reach out to more users and contributors.
We will share the news on upcoming events via <a href="https://engineering.linecorp.com/ko/blog/" target="_blank" rel="noopener noreferrer" class="">LINE Engineering blog</a> and <a href="https://line-armeria.slack.com/join/shared_invite/enQtNjIxNDU1ODU1MTI2LTgwMzk0MzVhOGRhZjJiY2ExODc0MzNhYzIxZDFlYjM5OGRjNTE1MzYzYzQ4MzNhNGY2ZDM0NThhMTRmZmQ3ZjQ" target="_blank" rel="noopener noreferrer" class="">official Slack</a> like we always do.</p>
<p>Moreover, LINE is looking for programmers for <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">Armeria</a> and <a href="https://github.com/line/centraldogma" target="_blank" rel="noopener noreferrer" class="">Central Dogma</a>.
Please check out the following job posting for more information.</p>
<ul>
<li class=""><a href="https://recruit.linepluscorp.com/lineplus/career/detail/20002599" target="_blank" rel="noopener noreferrer" class="">Open position: common framework and platform software development</a> - Korea</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.83.0]]></title>
            <link>https://armeria.dev/release-notes/0.83.0/</link>
            <guid>https://armeria.dev/release-notes/0.83.0/</guid>
            <pubDate>Fri, 29 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now configure TLS for Armeria server when using armeria-spring-boot-autoconfigure. #1663 # Your application.ymlarmeria: ports: - port: 8080 protocols: HTTP - ip: 127.0.0.1 port: 8081 protocols...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.82.0]]></title>
            <link>https://armeria.dev/release-notes/0.82.0/</link>
            <guid>https://armeria.dev/release-notes/0.82.0/</guid>
            <pubDate>Tue, 19 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[You can now include or exclude service methods using DocServiceFilter when building a DocService. See our documentation for more information. #1609 ServerBuilder sb = new ServerBuilder();...sb.service...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.81.0]]></title>
            <link>https://armeria.dev/release-notes/0.81.0/</link>
            <guid>https://armeria.dev/release-notes/0.81.0/</guid>
            <pubDate>Fri, 08 Mar 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[A user now can generate cache-control header value programmatically. #1615 HttpHeaders headers = HttpHeaders.of();HttpFileBuilder fileBuilder = HttpFileBuilder.of(...);HttpFileServiceBuilder fileServi...]]></description>
        </item>
        <item>
            <category>Release Notes</category>
            <title><![CDATA[v0.80.0]]></title>
            <link>https://armeria.dev/release-notes/0.80.0/</link>
            <guid>https://armeria.dev/release-notes/0.80.0/</guid>
            <pubDate>Tue, 19 Feb 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[A user now can see the content of HTTP request/response in logs. #1574 ServerBuilder sb = new ServerBuilder();// Enables previewing the content with the maximum length of 100 for textual contents.sb.c...]]></description>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Making a basic server with Java & Armeria]]></title>
            <link>https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria</link>
            <guid>https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria</guid>
            <pubDate>Thu, 13 Sep 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[As some of you know already, LINE has been actively open-sourcing projects including Armeria and Central Dogma.]]></description>
            <content:encoded><![CDATA[<p>As some of you know already, LINE has been actively open-sourcing projects including <a href="https://line.github.io/armeria/" target="_blank" rel="noopener noreferrer" class="">Armeria</a> and <a href="https://line.github.io/centraldogma/" target="_blank" rel="noopener noreferrer" class="">Central Dogma</a>.
Today, I'd like to share a bit about Armeria and setting up a simple web server using Armeria.
To follow the instructions, you need to have Java and IntelliJ IDEA installed, which can be downloaded from the following links:</p>
<ul>
<li class=""><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener noreferrer" class="">Java Development Kit</a></li>
<li class=""><a href="https://www.jetbrains.com/idea/" target="_blank" rel="noopener noreferrer" class="">IntelliJ IDEA</a></li>
</ul>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-a-project">Create a project<a href="https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria#create-a-project" class="hash-link" aria-label="Direct link to Create a project" title="Direct link to Create a project" translate="no">‚Äã</a></h2>
<p>Let us begin by creating a project.
First, run IntelliJ IDEA and click the <strong>Create New Project</strong> button.
The New Project dialog pops up.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-1-f9cd4bd82d79b146a04372e6c3cf26af.png" width="1332" height="964" class="img_ev3q"></p>
<p>On the New Project dialog, click the <strong>Gradle</strong> menu from the left panel, and then check the box for <strong>Java</strong>, and click the Next button.
The dialog displays the fields required for project configuration.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-2-80eb84c42349487c987a7dbb286e610e.png" width="806" height="487" class="img_ev3q"></p>
<p>Configure the fields as instructed below.</p>
<ul>
<li class=""><strong>GroupId</strong>: We will skip this field. This field is optional anyway.</li>
<li class=""><strong>ArtifactId</strong>: Enter a name to represent your project. For this post, I named it 'hello-armeria'.</li>
<li class=""><strong>Version</strong>: Use the default value already in the input field.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-3-133fca86fc557e3340b69025921d2f63.png" width="806" height="487" class="img_ev3q"></p>
<p>Once you are done with filling in, click the <strong>Next</strong> button.
Continue with the rest of the step until you see the <strong>Finish</strong> button.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configure-gradle">Configure Gradle<a href="https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria#configure-gradle" class="hash-link" aria-label="Direct link to Configure Gradle" title="Direct link to Configure Gradle" translate="no">‚Äã</a></h2>
<p>Once a project is created, open the <code>build.gradle</code> file, which you can find from the <strong>Project</strong> panel on the left-hand side.
You will see a few lines of code like below.
Add the line marked with comments I've left, and save the file.
This makes Gradle automatically configure ‚Äî download and build ‚Äî the Armeria library for you.
It may take sometime for the process to be completed.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugins {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id 'java'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version '1.0-SNAPSHOT'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sourceCompatibility = 1.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">repositories {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Add the following line of code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // &lt;Group Name&gt;:&lt;Artifact Id&gt;:&lt;Version&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile "com.linecorp.armeria:armeria:0.71.1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="hello-armeria">Hello Armeria!<a href="https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria#hello-armeria" class="hash-link" aria-label="Direct link to Hello Armeria!" title="Direct link to Hello Armeria!" translate="no">‚Äã</a></h2>
<p>Now, let's make a class.
Go to <strong>src &gt; main</strong>, right-click on <strong>java</strong>, and click <strong>New &gt; Java Class</strong>.
We'll name the class <code>ServerMain.java</code> and make it print, <code>"Hello, Armeria!"</code>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-4-0abee9bb88f848a5ee8ee433185ae2c7.png" width="678" height="509" class="img_ev3q"></p>
<p>First, we will create an instance of the <code>ServerBuilder</code> class and run the server, in the following steps:</p>
<ol>
<li class="">Set the port using the <code>http()</code> method.</li>
<li class="">Configure the server with the <code>service()</code> method.</li>
<li class="">Create an instance of <code>Server</code>.</li>
<li class="">Call the <code>start()</code> method.</li>
</ol>
<p>Here is the actual code:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.common.HttpResponse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.common.HttpStatus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.common.MediaType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.Server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.ServerBuilder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.concurrent.CompletableFuture;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ServerMain {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServerBuilder sb = new ServerBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb.http(8080);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb.service("/hello", (ctx, res) -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpResponse.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                HttpStatus.OK,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MediaType.HTML_UTF_8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "&lt;h1&gt;Hello Armeria...!&lt;/h1&gt;"));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Server server = sb.build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompletableFuture&lt;Void&gt; future = server.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future.join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>To those who are unfamiliar with IntelliJ IDEA, here is a little tip on importing classes.
When you enter the name of a class in your code and the class needs to be imported ‚Äî in our case, <code>ServerBuilder</code> and <code>HttpResponse</code> ‚Äî press <strong>ALT + Enter</strong>.
You will see the context menu with options available for the given class.
Select <strong>Import class</strong> from the menu which will automatically add an import statement for the specified class on the file.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-5-57f6c382db621a5320ffec9a350c821d.png" width="522" height="223" class="img_ev3q"></p>
<p>Note that if you select the <strong>Import class</strong> option on <code>MediaType</code>, available options are as follows:</p>
<ul>
<li class=""><code>MediaType (com.google.common.net)</code></li>
<li class=""><code>MediaType (com.linecorp.armeria.common)</code></li>
</ul>
<p>Since we are using Armeria, select <code>com.linecorp.armeria.common</code>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-6-f0515b31fdeb8dae7c16535963042dd1.png" width="1030" height="203" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-a-web-server-for-starters">Run a web server for starters<a href="https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria#run-a-web-server-for-starters" class="hash-link" aria-label="Direct link to Run a web server for starters" title="Direct link to Run a web server for starters" translate="no">‚Äã</a></h2>
<p>To run a web server from IntelliJ IDEA, go to <strong>Run &gt; Run &lt;file_name&gt;</strong>.
You may see warnings on SLF4J (a library for printing out logs) that it cannot find a suitable logger implementation, but that's not important at the moment.
Let's focus on getting our Armeria server up and running.Open a web browser, enter the URL, <a href="http://127.0.0.1:8080/hello" target="_blank" rel="noopener noreferrer" class="">http://127.0.0.1:8080/hello</a>, and you will be greeted with <code>"Hello, Armeria...!"</code>.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-7-a72df7033eb694ec9d3aa68da72e7ac9.png" width="576" height="246" class="img_ev3q"></p>
<p>So, that was it!
Making a web server with Java couldn't be simpler than this, right?
You've only seen the tip of the iceberg; there is much more to Armeria than this.
Just to show you a little bit more, let's move onto routing, the most basic and the core feature of web servers.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="routing">Routing<a href="https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria#routing" class="hash-link" aria-label="Direct link to Routing" title="Direct link to Routing" translate="no">‚Äã</a></h2>
<p>Create a Java class and name it <code>CustomService</code> or any other name you like.
Copy and paste the following code in the class.
In addition to <code>HttpResponse.of()</code>, I've added annotations for routing.
To keep things simple, I did not add this configuration in the <code>build.gradle</code> file, but instead, passed a parameter, <code>@Param("number") int number</code>.
You can enter parameters like <code>@Param int number</code>, if you add <code>-parameters</code> in the compile option for <code>build.gradle</code>.</p>
<p>Using annotations, we set up routing; set <code>methodA()</code> to be called via <code>GET "/"</code>.
Likewise, <code>methodB()</code> is to be called via <code>GET "/page/&lt;number&gt;"</code>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.common.HttpResponse;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.common.HttpStatus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.common.MediaType;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.Get;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.annotation.Param;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CustomService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Get("/")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HttpResponse methodA() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return HttpResponse.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpStatus.OK,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MediaType.HTML_UTF_8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "&lt;h1&gt;Hello Custom Service...!&lt;/h1&gt;");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Get("/page/:number")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HttpResponse methodB(@Param("number") int number) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return HttpResponse.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpStatus.OK,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MediaType.HTML_UTF_8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "&lt;h1&gt;Hello %d...!&lt;/h1&gt;", number);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The next step is to modify our class, <code>ServerMain</code>.
We need to pass the instance of the <code>CustomService</code> class.
To do so, call the <code>annotatedService()</code> method and pass the instance as the parameter.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.Server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.linecorp.armeria.server.ServerBuilder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.concurrent.CompletableFuture;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ServerMain {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ServerBuilder sb = new ServerBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb.http(8080);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sb.annotatedService(new CustomService());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Server server = sb.build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CompletableFuture&lt;Void&gt; future = server.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future.join();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-again">Run again!<a href="https://armeria.dev/blog/2018/09/13/making-a-basic-server-with-java-armeria#run-again" class="hash-link" aria-label="Direct link to Run again!" title="Direct link to Run again!" translate="no">‚Äã</a></h2>
<p>Now run the code and open <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener noreferrer" class="">http://127.0.0.1:8080/</a>.
You will see <code>"Hello Custom Service...!"</code> printed on the page.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-8-0e388a130c6e1da91fa599abe2292ab3.png" width="576" height="246" class="img_ev3q"></p>
<p>This time, add <code>/page/10</code> to the URL to make it <a href="http://127.0.0.1:8080/page/10" target="_blank" rel="noopener noreferrer" class="">http://127.0.0.1:8080/page/10</a>, and open the page.
You will see <code>"Hello 10...!"</code> instead.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-9-14d6092166514d80e35de57af09e460d.png" width="603" height="246" class="img_ev3q"></p>
<p>Using Armeria, implementing routing is a piece of cake!
Today, we've looked through the most basic way of using Armeria.
Armeria supports serving static files, running and calling Thrift services, structured logging with Kafka and many others.
Visit the <a href="https://line.github.io/armeria/" target="_blank" rel="noopener noreferrer" class="">official Armeria site</a> and the <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="">GitHub repository</a> to learn more about Armeria.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/making-a-basic-server-with-java-armeria-10-719b12466c159ea32a06306171e69614.png" width="1552" height="1012" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Applying CircuitBreaker to Channel Gateway]]></title>
            <link>https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway</link>
            <guid>https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway</guid>
            <pubDate>Thu, 04 Aug 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Before reading]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="before-reading">Before reading<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#before-reading" class="hash-link" aria-label="Direct link to Before reading" title="Direct link to Before reading" translate="no">‚Äã</a></h2>
<p>If you have yet to read the introductory article to circuit breakers, I recommend you read the following article first: <a class="" href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services">Circuit Breakers for distributed services</a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="applying-circuitbreaker-to-channel-gateway">Applying CircuitBreaker to Channel Gateway<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#applying-circuitbreaker-to-channel-gateway" class="hash-link" aria-label="Direct link to Applying CircuitBreaker to Channel Gateway" title="Direct link to Applying CircuitBreaker to Channel Gateway" translate="no">‚Äã</a></h2>
<p>Channel Gateway servers provide various LINE server features to content providers.
This is why Channel Gateway servers are highly affected by the servers they are connected to, with the effects easily spreading across all Channel Gateway servers.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/applying-circuitbreaker-to-channel-gateway-1-537a3aa178c1835906c7a42d541dac55.png" width="870" height="328" class="img_ev3q"></p>
<!-- -->
<p>It was when I was struggling to think of a solution to this problem that I first heard about circuit breakers.
Circuit breakers seem to be what I was looking for since they are able to detect a problem in certain servers, blocking all requests that the server would have otherwise received.
With that in mind, I decided to apply circuit breakers on Channel Gateway.</p>
<p>While I could have implemented my own circuit breakers on Channel Gateway, there were already excellent circuit breakers on <a href="http://line.github.io/armeria" target="_blank" rel="noopener noreferrer" class="">Armeria</a>.
Armeria enables you to set various options on circuit breakers when you implement them using <code>CircuitBreakerBuilder</code>, generating your own <code>CircuitBreaker</code> object as a result.
I was able to easily apply a customized circuit breaker on Channel Gateway thanks to this system.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="annotation-for-circuitbreaker">Annotation for CircuitBreaker<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#annotation-for-circuitbreaker" class="hash-link" aria-label="Direct link to Annotation for CircuitBreaker" title="Direct link to Annotation for CircuitBreaker" translate="no">‚Äã</a></h2>
<p>I was able to apply <code>CircuitBreaker</code> to the talk-channel-gateway source code with a <code>@CircuitBreakable</code> annotation.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@CircuitBreakable(CircuitBreakerGroup.HBASE_CLIENT_USER_SETTINGS)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ChannelSettings findBy(String mid) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>If applied like the example above, <code>CircuitBreaker</code> opens and closes depending on the results gathered while monitoring the successful/failed call attempts on the findBy() method.
HBASE_CLIENT_USER_SETTINGS is used to specify the groups grouped by <code>CircuitBreaker</code>, calculating the group's percentage of failed calls out of the successful calls on methods, and opening and closing along with <code>CircuitBreaker</code>.
You can change the options for <code>CircuitBreaker</code> with the enum object called <code>CircuitBreakerGroup</code> as shown below.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public enum CircuitBreakerGroup implements ExceptionFilter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SAMPLE_DEFAULT {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SAMPLE_API {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected ExceptionFilter exceptionFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return cause -&gt; !(cause instanceof AuthenticationException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              || cause instanceof ApiPermissionException</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              || cause instanceof ImproperRequestException);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HBASE_CLIENT_CHANNEL_MATRIX {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HBASE_CLIENT_USER_SETTINGS {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected ExceptionFilter exceptionFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return cause -&gt; true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CircuitBreaker circuitBreaker(CircuitBreakerListener listener) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new `CircuitBreakerBuilder`(name()).exceptionFilter(exceptionFilter())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                .listener(listener)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean shouldDealWith(Throwable throwable) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return exceptionFilter().shouldDealWith(throwable);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>I used a customized <code>ExceptionFilter</code> on Channel Gateway, while other options were kept at their default values from Armeria.
You can change options to your needs by modifying the <code>circuitBreaker()</code> method.</p>
<p>The default Armeria settings are set to identify any exception as a failure.
However, Channel Gateway also treats any unauthorized accesses as exceptions, and there needed to be a distinction between these and the relevant exceptions.
That's why I had to customize <code>ExceptionFilter</code>.
I also added an event listener for Channel Gateway so that logs would be recorded each time a change is detected in <code>CircuitBreaker</code>.</p>
<p>The groups applied to annotations can be specified using the enum object, and you can set different settings for each group when implementing the enum object.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementing-proceed-for-circuitbreaker">Implementing proceed() for CircuitBreaker<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#implementing-proceed-for-circuitbreaker" class="hash-link" aria-label="Direct link to Implementing proceed() for CircuitBreaker" title="Direct link to Implementing proceed() for CircuitBreaker" translate="no">‚Äã</a></h2>
<p>The <code>proceed()</code> code for the <a href="https://en.wikipedia.org/wiki/aspectj" target="_blank" rel="noopener noreferrer" class="">Aspect</a> object is as shown below.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class CircuitBreakerAspect implements Ordered {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Map&amp;lt;CircuitBreakerGroup, CircuitBreaker&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    circuitBreakers = new EnumMap&amp;lt;&gt;(CircuitBreakerGroup.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostConstruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void initialize() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final CircuitBreakerListener listener = new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CircuitBreakerListenerImpl(circuitBreakerLogger);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (CircuitBreakerGroup group : CircuitBreakerGroup.values()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            circuitBreakers.put(group, group.circuitBreaker(listener));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object proceed(final ProceedingJoinPoint pjp, final CircuitBreakable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    circuitBreakable) throws Throwable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final CircuitBreakerGroup group = circuitBreakable.value();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final CircuitBreaker circuitBreaker = circuitBreakers.get(group);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (circuitBreaker.canRequest()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            final Object result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                result = pjp.proceed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Throwable e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (group.shouldDealWith(e)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    circuitBreaker.onFailure(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    circuitBreaker.onSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            circuitBreaker.onSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw CircuitBreakerException.circuitBroken();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The code itself is quite simple.
If <code>CircuitBreaker</code> is open through <code>CircuitBreaker.canRequest()</code>, an exception occurs.
If not, the method is called normally.
If the result of the call caused an exception, and the exception is identified as a failure, <code>CircuitBreaker</code> is notified that it's a failure.
If not, <code>CircuitBreaker</code> is notified that it's a success.</p>
<p>For you information, the actual code has code related to IMON Logger1 to check if <code>CircuitBreaker</code> is working as intended.
I omitted that feature from this article to focus more on <code>CircuitBreaker</code> only.</p>
<p><em>1 IMON Logger: IMON is a system LINE engineers use to monitor various company services.
IMON Logger collects the statistics and logs from these services and sends them to IMON.</em></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="methods-used-to-change-settings-for-circuitbreaker">Methods used to change settings for CircuitBreaker<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#methods-used-to-change-settings-for-circuitbreaker" class="hash-link" aria-label="Direct link to Methods used to change settings for CircuitBreaker" title="Direct link to Methods used to change settings for CircuitBreaker" translate="no">‚Äã</a></h2>
<p><code>CircuitBreakerBuilder</code> provides many methods that you can use to build your own customized <code>CircuitBreaker</code>.
While I recommend using the default settings, here are some details for each setting to help you get a better idea about them.</p>
<table><thead><tr><th>Method</th><th>Parameter</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>failureRateThreshold</td><td>double</td><td>0.8</td><td>This is the failure rate used to determine whether CircuitBreaker should open or not. If the failure rate (during the duration of <code>counterSlidingWindow</code>) is higher than this value, CircuitBreaker opens. The default value is set to open CircuitBreaker if the failure rate is above 80%. In other words, CircuitBreaker opens if the success rate is below 20%.</td></tr><tr><td>minimumRequestThreshold</td><td>long</td><td>10</td><td>The minimum amount of call requests required to determine whether CircuitBreaker should open or not. If the number of requests (during the duration of <code>counterSlidingWindow</code>) is lower than this value, CircuitBreaker does not change its status.</td></tr><tr><td>circuitOpenWindow</td><td>Duration</td><td>10 seconds</td><td>The amount of time CircuitBreaker stays open before going into the half-open state. After CircuitBreaker has been open for the duration of <code>circuitOpenWindow</code>, CircuitBreaker will change its state to half-open and test requests again.</td></tr><tr><td>circuitOpenWindowMillis</td><td>long</td><td>10000</td><td></td></tr><tr><td>trialRequestInterval</td><td>Duration</td><td>3 seconds</td><td>The amount of time before a request is reattempted in the half-open state when the request does not get a closed response. If there is a response during <code>trialRequestInterval</code>, CircuitBreaker will change its state to open or closed depending on the result. If CircuitBreaker goes into the open state, the request will be reattempted after <code>circuitOpenWindow</code>. If the request does not get a response during <code>trialRequestInterval</code>, it will be reattempted.</td></tr><tr><td>trialRequestIntervalMillis</td><td>long</td><td>3000</td><td></td></tr><tr><td>counterSlidingWindow</td><td>Duration</td><td>20 seconds</td><td>Recent <code>counterSlidngWindow</code> values are used to determine whether CircuitBreaker should open or not. The default value is set to only recognize the requests received in the last 20 seconds.</td></tr><tr><td>counterSlidingWindowMillis</td><td>long</td><td>20000</td><td></td></tr><tr><td>counterUpdateInterval</td><td>Duration</td><td>1 second</td><td>CircuitBreaker stores request results through <code>SlidingWindowCounter</code>, and <code>counterUpdateInterval</code> is the unit of time stored. The default value is set to keep records per each second. An example of this would look like this: 20 second(s) before = Success 20, Failure 0 / 19 second(s) before = Success 25, Failure 1 / ... / 1 second(s) before = Success 21, Failure 0. The failure rate is calculated using these records from the duration of counterSlidingWindow.</td></tr><tr><td>counterUpdateIntervalMillis</td><td>long</td><td>1000</td><td></td></tr><tr><td>exceptionFilter</td><td>ExceptionFilter</td><td>cause -&gt; true</td><td>An object that returns whether or not an exception is identified as a failure. The default value is set to identify all exceptions as failures.</td></tr><tr><td>listener</td><td>CircuitBreakerListener</td><td></td><td>A listener that receives events whenever the state of CircuitBreaker changes, when <code>counterUpdateInterval</code> expires, or when an open CircuitBreaker rejects a request.</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="closing-words">Closing words<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#closing-words" class="hash-link" aria-label="Direct link to Closing words" title="Direct link to Closing words" translate="no">‚Äã</a></h2>
<p>Up until recently, whenever there was a problem somewhere in Channel Gateway the damage was already done by the time we could actually do something about it.
A partial outage could cause the entire thread to be full, eventually affecting all services.
Now that we have <code>CircuitBreaker</code> blocking the problematic parts from the rest of the system, we have a wider time window to work with.</p>
<p>To wrap up this article, I'd like to go through how <code>CircuitBreaker</code> works step by step.</p>
<ul>
<li class="">The initial state of <code>CircuitBreaker</code> is <em>Closed</em>.</li>
<li class=""><em>Closed</em>: Depending on <code>ExceptionFilter</code> settings, the following will happen after a request is processed.<!-- -->
<ul>
<li class="">If the result is a success, it will be logged as a success and the state changes to <em>Closed</em>.</li>
<li class="">If the result is a failure, the requests during the duration of <code>counterSlidingWindow</code> are checked and<!-- -->
<ul>
<li class="">If requests are more than <code>minimumRequestThreshold</code>, and the failure rate is above <code>failureRateThreshold</code>, the state changes to <em>Open</em>.</li>
<li class="">If not, the state remains <em>Closed</em>.</li>
</ul>
</li>
</ul>
</li>
<li class=""><em>Open</em>: After the duration of <code>circuitOpenWindow</code> passes, the state changes to <em>Half-Open</em>.</li>
<li class=""><em>Half-Open</em>: Depending on <code>ExceptionFilter</code> settings, the following will happen after processing the first request received.<!-- -->
<ul>
<li class="">If the result is a success, the state changes to <em>Closed</em>.</li>
<li class="">If the result is a failure, the state changes to <em>Open</em>.</li>
<li class="">If there is no response during the duration of <code>trialRequestInterval</code>, a branch will occur depending on the result of the first request received during the <em>Half-Open</em> state.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="about-the-author">About the author<a href="https://armeria.dev/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway#about-the-author" class="hash-link" aria-label="Direct link to About the author" title="Direct link to About the author" translate="no">‚Äã</a></h2>
<p>Shin, Jong Hun: I don't like being inconvenienced.
One of the focal points of my work is to reduce these inconveniences so I have more time to focus on what matters.
I think that's why I like programming.
Although I can't really figure out why I seem to be getting busier with time...</p>]]></content:encoded>
        </item>
        <item>
            <category>Blog</category>
            <title><![CDATA[Circuit breakers for distributed services]]></title>
            <link>https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services</link>
            <guid>https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services</guid>
            <pubDate>Sun, 24 Jul 2016 00:00:00 GMT</pubDate>
            <description><![CDATA[Hello, my name is Ono and I'm a LINE engineer.]]></description>
            <content:encoded><![CDATA[<p>Hello, my name is Ono and I'm a LINE engineer.
In this blog post, I'd like to talk about "circuit breakers" which we use with our LINE servers.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-a-circuit-breaker">What is a Circuit Breaker?<a href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services#what-is-a-circuit-breaker" class="hash-link" aria-label="Direct link to What is a Circuit Breaker?" title="Direct link to What is a Circuit Breaker?" translate="no">‚Äã</a></h2>
<p>The backend server systems for various web services and apps including LINE consist of networks that have several services connected with each other through APIs and RPCs.</p>
<p>What would happen if one of these networks suddenly failed to respond?
The downed services would be blocked until they time-out, and all other services that rely on the blocked service would start a chain reaction of failures.
If no one has been keeping an eye on the entire network, it will take a long time to figure out which service is the root cause.</p>
<p><img decoding="async" loading="lazy" alt="-BG-" src="https://armeria.dev/assets/images/circuit-breakers-for-distributed-services-1-5bb7df69bbea59e475a05522088cd493.png" width="537" height="141" class="img_ev3q"></p>
<!-- -->
<p>These chain reaction failures should be prevented at all costs.
At the least, the core features must be protected from these failures.
To achieve that, we must block off access to the downed service before it affects another.</p>
<p><img decoding="async" loading="lazy" alt="-BG-" src="https://armeria.dev/assets/images/circuit-breakers-for-distributed-services-2-94100185efcea1b197617840a9c6a288.png" width="537" height="140" class="img_ev3q"></p>
<p>Circuit breakers are used to automate this whole process.</p>
<p>[<a href="http://martinfowler.com/bliki/CircuitBreaker.html" target="_blank" rel="noopener noreferrer" class="">http://martinfowler.com/bliki/CircuitBreaker.html</a>]</p>
<p>The in-depth details behind the system can be found in the post above by Martin Fowler, but I'll keep it brief here.</p>
<p>A circuit breaker is a system that automatically blocks off access when the number of failed remote access attempts exceeds the failure rate.</p>
<p>Circuit breakers can be seen as state machines.
They can automatically detect failures and determine when they're restored by continuously updating access success and failure events.</p>
<p><img decoding="async" loading="lazy" src="https://armeria.dev/assets/images/circuit-breakers-for-distributed-services-3-706b943b1852878bf1209d68ac7ca623.png" width="749" height="182" class="img_ev3q"></p>
<p>Below are details for each state and their conditions.</p>
<p><strong>CLOSED</strong><br>
<!-- -->Initial state.
All accesses are treated normally.</p>
<p><strong>OPEN</strong><br>
<!-- -->The state changes to OPEN once the number of failures exceeds the failure rate.
All accesses are blocked off (fail fast).</p>
<p><strong>HALF_OPEN</strong><br>
<!-- -->After a certain amount of time in the OPEN state, it changes into the HALF_OPEN state.
If an attempted access succeeds, the state changes to CLOSED.
If access fails, the state changes to OPEN.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="circuit-breakers-for-armeria">Circuit breakers for Armeria<a href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services#circuit-breakers-for-armeria" class="hash-link" aria-label="Direct link to Circuit breakers for Armeria" title="Direct link to Circuit breakers for Armeria" translate="no">‚Äã</a></h2>
<p><a href="http://line.github.io/armeria/" target="_blank" rel="noopener noreferrer" class="">Armeria</a> is an asynchronous Thrift client/server library based on Netty, released as a LINE open source project.
One of Armeria's many key features is its ability to expand features using decorators.</p>
<p>Starting with version 0.13.0 of Armeria, it is possible to add circuit breakers using decorators.</p>
<p>Below is an example of initializing a Thrift client using a circuit breaker.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Iface helloClient = new ClientBuilder("tbinary+http://127.0.0.1:8080/hello")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     .decorator(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      CircuitBreakerClient.newDecorator(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          new CircuitBreakerBuilder("hello").build()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     .build(Iface.class);</span><br></span></code></pre></div></div>
<p>Easy, right?</p>
<p>Below is the code for calling this Thrift client.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    helloClient.hello("line");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (TException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // error handling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (FailFastException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // fallback code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>As you can see in the example above, when the circuit breaker detects a failure, the Thrift client will send a FailFastException, running the appropriate fallback code.
It can be used in the same way for an asynchronous client.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helloClient.hello("line", new AsyncMethodCallback() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void onComplete(Object response) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // response handling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void onError(Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     if (e instanceof TException) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         // error handling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     } else if (e instanceof FailFastException) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         // fallback code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="grouping">Grouping<a href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services#grouping" class="hash-link" aria-label="Direct link to Grouping" title="Direct link to Grouping" translate="no">‚Äã</a></h2>
<p>In the example above, a single circuit breaker was allocated for each Thrift service.
In this case, if a single method causes a problem in a service, all other methods will be blocked when the circuit breaker becomes active.
This would only spread the failure to more parts, and isn't something that is recommended.</p>
<p>That's why Armeria lets its users group the range of circuit breaker instances in a variety of ways.</p>
<p>Below are the grouping conditions.</p>
<p><strong>Per Host</strong><br>
<!-- -->A single circuit breaker is allocated for each remote host.</p>
<p><strong>Per Method</strong><br>
<!-- -->A single circuit breaker is allocated for each method.</p>
<p><strong>Per Host and Method</strong><br>
<!-- -->A single circuit breaker is allocated each method in each host.</p>
<p><img decoding="async" loading="lazy" alt="-BG-" src="https://armeria.dev/assets/images/circuit-breakers-for-distributed-services-4-4ae96ba1d797e52c0fc3b3f1f3909775.png" width="684" height="279" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="failure-rate">Failure Rate<a href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services#failure-rate" class="hash-link" aria-label="Direct link to Failure Rate" title="Direct link to Failure Rate" translate="no">‚Äã</a></h2>
<p>When using circuit breakers, it's important to clearly define the conditions for a failure.</p>
<p>Failures in Armeria are when the number of failed requests (failure rate) exceeds the <em>Failure Rate Threshold</em>.</p>
<p>However, in cases where there are too few requests, (such as right after launching) the failure rate will be too irregular and the system may incorrectly assess the situation as a failure.
To resolve this, you can set a <em>Minimum Request Threshold</em> so that the system only begins to detect failures when the number of requests is at least at a certain amount.</p>
<p>The duration of the time where detection begins can also be adjusted with the <em>Sliding Window</em>.</p>
<p>The correlation between the failure rate and the sliding window can be seen in the figure below.</p>
<p><img decoding="async" loading="lazy" alt="-BG-" src="https://armeria.dev/assets/images/circuit-breakers-for-distributed-services-5-2ff3131f0701105e189fa5953d2d9c1e.png" width="585" height="277" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitoring">Monitoring<a href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services#monitoring" class="hash-link" aria-label="Direct link to Monitoring" title="Direct link to Monitoring" translate="no">‚Äã</a></h2>
<p>You can monitor the status of circuit breakers by adding a listener.</p>
<p>Below is sample code using a listener based on Dropwizard Metrics provided by Armeria.
You can implement listeners that match your customized monitoring system.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MetricRegistry registry = new MetricRegistry();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Iface helloClient = new ClientBuilder("tbinary+http://127.0.0.1:8080/hello")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .decorator(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CircuitBreakerClient.newDecorator(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          new CircuitBreakerBuilder("hello")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .listener(new DropwizardMetricsCircuitBreakerListener(registry, "hello"))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       .build(Iface.class);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-armerias-circuit-breaker-independently">Using Armeria's circuit breaker independently<a href="https://armeria.dev/blog/2016/07/24/circuit-breakers-for-distributed-services#using-armerias-circuit-breaker-independently" class="hash-link" aria-label="Direct link to Using Armeria's circuit breaker independently" title="Direct link to Using Armeria's circuit breaker independently" translate="no">‚Äã</a></h2>
<p>Up to this point, I've talked about how you can combine the Armeria thrift client and circuit breaker package, but it's also possible to use the circuit breaker package independently.</p>
<p>When using the circuit breaker package independently, keep the following 3 APIs in mind.</p>
<p><strong>CircuitBreaker#canRequest()</strong><br>
<!-- -->Checks the status of the circuit breaker.
If the circuit is blocked off, the returned value will be "false."</p>
<p><strong>CircuitBreaker#onSuccess()</strong><br>
<!-- -->Records successful access attempts to a service.</p>
<p><strong>CircuitBreaker#onFailure() or CircuitBreaker#onFailure(Throwable t)</strong><br>
<!-- -->Records failed access attempts to a service.</p>
<p>In the sample code below, canRequest() checks the status of the circuit and runs remote service access if there are no problems detected.
Depending on the result, the API will call onSuccess or onFailure.</p>
<p>The trigger condition for this sample was set to "whether or not exceptions were detected," but you can change the condition to whatever fits your needs.
For example, you can make it so that it counts as an error if remote service access took a certain amount of time even if there were no exceptions detected.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (circuitBreaker.canRequest()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       // remote service access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       circuitBreaker.onSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       circuitBreaker.onFailure(e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // fail fast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This concludes my introduction to the circuit breaker feature in Armeria.</p>
<p>In a future post, I plan to give you some real-life use cases from inside LINE.</p>]]></content:encoded>
        </item>
    </channel>
</rss>