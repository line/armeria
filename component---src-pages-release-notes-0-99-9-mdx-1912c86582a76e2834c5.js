"use strict";(self.webpackChunkarmeria_site=self.webpackChunkarmeria_site||[]).push([[3297],{30797:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return h}});var r,i=a(63366),n=(a(67294),a(64983)),o=a(20370),l=["components"],s={},p=(r="ThankYou",function(e){return console.warn("Component "+r+" was not imported, exported, or provided by MDXProvider as global scope"),(0,n.kt)("div",e)}),m={_frontmatter:s},c=o.Z;function h(e){var t=e.components,a=(0,i.Z)(e,l);return(0,n.kt)(c,Object.assign({},m,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",{className:"date"},"3rd August 2020"),(0,n.kt)("h2",{id:"-new-features",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#-new-features","aria-label":" new features permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🌟 New features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now add multiple request timeout callbacks using the following methods: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2937"},"#2937")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2939"},"#2939")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ClientRequestContext#whenResponseTimingOut():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#whenResponseTimingOut()"},"type://ClientRequestContext#whenResponseTimingOut()")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ClientRequestContext#whenResponseTimedOut():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#whenResponseTimedOut()"},"type://ClientRequestContext#whenResponseTimedOut()")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ServiceRequestContext#whenRequestTimingOut():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#whenRequestTimingOut()"},"type://ServiceRequestContext#whenRequestTimingOut()")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ServiceRequestContext#whenRequestTimedOut():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#whenRequestTimedOut()"},"type://ServiceRequestContext#whenRequestTimedOut()")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now specify multiple decorators with a single call when building a service binding fluently. ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2889"},"#2889")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'Server.builder()\n      .route().get("/hello")\n              .decorators(firstDecorator,\n                          secondDecorator,\n                          thirdDecorator)\n              .build(helloService)\n      .build();\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now specify whether the entire annotated service methods have to run in a ",(0,n.kt)("inlineCode",{parentName:"p"},"blockingTaskExecutor"),".\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2923"},"#2923")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2925"},"#2925")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'Server.builder()\n      .annotatedService().pathPrefix("/my_service")\n                         .useBlockingTaskExecutor(true)\n                         .build(myService);\n\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can also specify the ",(0,n.kt)("a",{parentName:"p",href:"type://@Blocking:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Blocking.html"},"type://@Blocking")," annotation on a class. It was previously allowed only on methods.\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2915"},"#2915")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'@Blocking\npublic class MyBlockingAnnotatedService {\n    @Get\n    public String delayed() throws Exception {\n        Thread.sleep(1000);\n        return "slept a second";\n    }\n}\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now bind an annotated service method to the prefix path by specifying no path. ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2708"},"#2708")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2853"},"#2853")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'public class MyAnnotatedService {\n    @Get\n    public String withoutSlash() {\n        return "without slash";\n    }\n\n    @Get("/")\n    public String withSlash() {\n        return "with slash";\n    }\n}\n\nServer server =\n    Server.builder()\n          .http(8080)\n          .annotatedService("/prefix", new MyAnnotatedService())\n          .build();\nserver.start().join();\n\nassert "without slash".equals(\n    WebClient.of().get("http://127.0.0.1:8080/prefix")\n             .aggregate().toStringUtf8());\n\nassert "with slash".equals(\n    WebClient.of().get("http://127.0.0.1:8080/prefix/")\n             .aggregate().toStringUtf8());\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now send and receive ",(0,n.kt)("inlineCode",{parentName:"p"},"grpc-web-text")," messages in gRPC, as well as ",(0,n.kt)("inlineCode",{parentName:"p"},"grpc-web+proto")," and\n",(0,n.kt)("inlineCode",{parentName:"p"},"grpc-web+json"),". ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2938"},"#2938")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2955"},"#2955")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'MyGrpcServiceStub client =\n    Clients.newClient("gproto-web-text+h2c://example.com",\n                      MyGrpcServiceStub.class);\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now send a request via an HAPROXY server preserving the original source and destination addresses.\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2589"},"#2589")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2907"},"#2907")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'ClientFactory factory =\n    ClientFactory.builder()\n                 .proxyConfig(ProxyConfig.haproxy(haproxyServerAddr))\n                 .build();\n\nWebClient client =\n    WebClient.builder()\n             .factory(factory)\n             .build();\n\n// Send an HTTP request to example.com via an HAPROXY server,\n// preserving the source address by using HAPROXY protocol.\nclient.get("http://example.com/").aggregate().join();\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"You can now use different ",(0,n.kt)("a",{parentName:"p",href:"type://ProxyConfig:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/proxy/ProxyConfig.html"},"type://ProxyConfig")," for different ",(0,n.kt)("a",{parentName:"p",href:"typeplural://Endpoint:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html"},"typeplural://Endpoint")," using\n",(0,n.kt)("a",{parentName:"p",href:"type://ProxyConfigSelector:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/proxy/ProxyConfigSelector.html"},"type://ProxyConfigSelector"),". ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2752"},"#2752")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-java"},'ProxyConfigSelector mySelector = (protocol, endpoint) -> {\n    // Send the requests to *.foo.com via a SOCKS5 server.\n    if (endpoint.host().endsWith(".foo.com")) {\n        return ProxyConfig.socks5(socksServerAddr);\n    }\n    // Send the requests to *.bar.com via a HAPROXY server.\n    if (endpoint.host().endsWith(".bar.com")) {\n        return ProxyConfig.haproxy(haproxyServerAddr);\n    }\n    return ProxyConfig.direct();\n};\n\nClientFactory factory =\n    ClientFactory.builder()\n                 .proxyConfig(mySelector)\n                 .build();\n'))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Added ",(0,n.kt)("a",{parentName:"p",href:"type://Route#patternString():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html#patternString()"},"type://Route#patternString()")," which can be used as a simple human-readable description of\na ",(0,n.kt)("a",{parentName:"p",href:"type://Route:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html"},"type://Route"),". ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2932"},"#2932")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2933"},"#2933"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"type://HttpData:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpData.html"},"type://HttpData")," now extends ",(0,n.kt)("inlineCode",{parentName:"p"},"AutoCloseable")," and provides various methods useful when using\n",(0,n.kt)("a",{parentName:"p",href:"type://SubscriptionOption#WITH_POOLED_OBJECTS:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/stream/SubscriptionOption.html#WITH_POOLED_OBJECTS"},"type://SubscriptionOption#WITH_POOLED_OBJECTS"),". ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2892"},"#2892")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Note that this feature is only for the advanced users who want to reduce the number of memory copies\nin a performance-sensitive environment."),(0,n.kt)("li",{parentName:"ul"},"See ",(0,n.kt)("a",{parentName:"li",href:"type://PooledObjects:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/unsafe/PooledObjects.html"},"type://PooledObjects")," for more information.")))),(0,n.kt)("h2",{id:"-improvements",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#-improvements","aria-label":" improvements permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"📈 Improvements"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"We now use the following ",(0,n.kt)("a",{parentName:"li",href:"https://errorprone.info/"},"Google Error Prone")," annotations which might be useful\nif you use Error Prone already or your static analysis tool supports them: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2876"},"#2876")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2908"},"#2908"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"@CheckReturnValue")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"@FormatMethod")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"@FormatString")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"@MustBeClosed")))),(0,n.kt)("li",{parentName:"ul"},"You can now specify the connection ping interval less than 10 seconds, which was previously impossible. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2944"},"#2944")),(0,n.kt)("li",{parentName:"ul"},"Improved the load distribution of client requests by randomizing how we choose the initial event loop,\nwhich may reduce the error rate in a certain situation. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2941"},"#2941")),(0,n.kt)("li",{parentName:"ul"},"Improved the performance of ",(0,n.kt)("a",{parentName:"li",href:"type://Endpoint#toString():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html#toString()"},"type://Endpoint#toString()"),". ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2906"},"#2906"))),(0,n.kt)("h2",{id:"️-bug-fixes",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-bug-fixes","aria-label":"️ bug fixes permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🛠️ Bug fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ClientRequestContext#currentOrNull():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#currentOrNull()"},"type://ClientRequestContext#currentOrNull()")," and ",(0,n.kt)("a",{parentName:"li",href:"type://ServiceRequestContext#currentOrNull():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#currentOrNull()"},"type://ServiceRequestContext#currentOrNull()")," don't throw\nan ",(0,n.kt)("inlineCode",{parentName:"li"},"IllegalStateException")," anymore but return ",(0,n.kt)("inlineCode",{parentName:"li"},"null")," when the current context type mismatches. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2962"},"#2962")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://Endpoint#parse(String):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html#parse(java.lang.String)"},"type://Endpoint#parse(String)")," doesn't fail anymore when given with an authority with a userInfo part.\n",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2869"},"#2869")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2893"},"#2893")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"req.serviceName")," in ",(0,n.kt)("a",{parentName:"li",href:"type://BuiltInProperties"},"type://BuiltInProperties")," has been renamed to ",(0,n.kt)("inlineCode",{parentName:"li"},"req.service_name")," for the consistency\nwith other property names. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2958"},"#2958")),(0,n.kt)("li",{parentName:"ul"},"We now handle an HTTP/2 request with a ",(0,n.kt)("inlineCode",{parentName:"li"},"Host")," header properly, matching the behavior of HAPROXY. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2877"},"#2877")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2878"},"#2878")),(0,n.kt)("li",{parentName:"ul"},"You can now send an HTTPS request via an HTTPS CONNECT proxy server (double encryption). ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2887"},"#2887")),(0,n.kt)("li",{parentName:"ul"},"Fixed the buffer leaks in the following places: 😱 ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2891"},"#2891")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2892"},"#2892")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2951"},"#2951"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://RetryingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html"},"type://RetryingClient")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://CircuitBreakerClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html"},"type://CircuitBreakerClient")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"DefaultDnsNameResolver")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"DefaultStreamMessageDuplicator")))),(0,n.kt)("li",{parentName:"ul"},"You are now disallowed to set a ",(0,n.kt)("inlineCode",{parentName:"li"},":status")," header when building an ",(0,n.kt)("inlineCode",{parentName:"li"},"HttpFile"),", because it will make\n",(0,n.kt)("inlineCode",{parentName:"li"},"FileService")," misbehave. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2926"},"#2926"),"."),(0,n.kt)("li",{parentName:"ul"},"Fixed an ",(0,n.kt)("inlineCode",{parentName:"li"},"IllegalReferenceCountException")," when content preview is turned on. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2905"},"#2905")),(0,n.kt)("li",{parentName:"ul"},"gRPC-Web trailers are now compressed and decompressed properly. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2930"},"#2930")),(0,n.kt)("li",{parentName:"ul"},"Fixed the compatibility issues with ",(0,n.kt)("inlineCode",{parentName:"li"},"grpc-kotlin")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2947"},"#2947")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2950"},"#2950")),(0,n.kt)("li",{parentName:"ul"},"You can now use the graceful shutdown properties when integration with Spring Boot 1. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2954"},"#2954")),(0,n.kt)("li",{parentName:"ul"},"You can now use ",(0,n.kt)("a",{parentName:"li",href:"type://DocServiceConfigurator:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/spring/DocServiceConfigurator.html"},"type://DocServiceConfigurator")," when integrating with Spring Boot 2. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2960"},"#2960")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://MetricCollectingService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/metric/MetricCollectingService.html"},"type://MetricCollectingService")," now decorates all services if the ",(0,n.kt)("inlineCode",{parentName:"li"},"armeria.enableMetrics")," property is set\nwhen integrating with Spring Boot. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2873"},"#2873")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2898"},"#2898"))),(0,n.kt)("h2",{id:"️-deprecations",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-deprecations","aria-label":"️ deprecations permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🏚️ Deprecations"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"All option constants in ",(0,n.kt)("a",{parentName:"li",href:"type://ClientOption:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientOption.html"},"type://ClientOption")," and ",(0,n.kt)("a",{parentName:"li",href:"type://ClientFactoryOption:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactoryOption.html"},"type://ClientFactoryOption")," have been moved to\n",(0,n.kt)("a",{parentName:"li",href:"type://ClientOptions:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientOptions.html"},"type://ClientOptions")," and ",(0,n.kt)("a",{parentName:"li",href:"type://ClientFactoryOptions:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactoryOptions.html"},"type://ClientFactoryOptions")," respectively. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2928"},"#2928")),(0,n.kt)("li",{parentName:"ul"},"Various implementation classes have been deprecated in favor of static factory methods: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2875"},"#2875")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2890"},"#2890"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://MetricCollectingCircuitBreakerListener"},"type://MetricCollectingCircuitBreakerListener")," → ",(0,n.kt)("a",{parentName:"li",href:"type://CircuitBreakerListener#metricCollecting(MeterRegistry):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerListener.html#metricCollecting(io.micrometer.core.instrument.MeterRegistry)"},"type://CircuitBreakerListener#metricCollecting(MeterRegistry)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://RateLimitingThrottlingStrategy"},"type://RateLimitingThrottlingStrategy")," → ",(0,n.kt)("a",{parentName:"li",href:"type://ThrottlingStrategy#rateLimiting(double):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/throttling/ThrottlingStrategy.html#rateLimiting(double)"},"type://ThrottlingStrategy#rateLimiting(double)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ConnectionPoolLoggingListener"},"type://ConnectionPoolLoggingListener")," → ",(0,n.kt)("a",{parentName:"li",href:"type://ConnectionPoolListener#logging():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ConnectionPoolListener.html#logging()"},"type://ConnectionPoolListener#logging()")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://StickyEndpointSelectionStrategy"},"type://StickyEndpointSelectionStrategy")," → ",(0,n.kt)("a",{parentName:"li",href:"type://EndpointSelectionStrategy#sticky(ToLongFunction):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointSelectionStrategy.html#sticky(java.util.function.ToLongFunction)"},"type://EndpointSelectionStrategy#sticky(ToLongFunction)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://TTextProtocol"},"type://TTextProtocol")," → ",(0,n.kt)("a",{parentName:"li",href:"type://TTextProtocolFactory#getProtocol(TTransport):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/thrift/text/TTextProtocolFactory.html#getProtocol(org.apache.thrift.transport.TTransport)"},"type://TTextProtocolFactory#getProtocol(TTransport)")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://Route#meterTag()"},"type://Route#meterTag()")," and ",(0,n.kt)("a",{parentName:"li",href:"type://Route#loggerName()"},"type://Route#loggerName()")," have been deprecated in favor of\n",(0,n.kt)("a",{parentName:"li",href:"type://Route#patternString():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html#patternString()"},"type://Route#patternString()"),". ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2933"},"#2933")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"type://ClientRequestContext#responseTimeoutHandler()"},"type://ClientRequestContext#responseTimeoutHandler()"),",\n",(0,n.kt)("a",{parentName:"li",href:"type://ClientRequestContext#setResponseTimeoutHandler(Runnable)"},"type://ClientRequestContext#setResponseTimeoutHandler(Runnable)"),",\n",(0,n.kt)("a",{parentName:"li",href:"type://ServiceRequestContext#requestTimeoutHandler()"},"type://ServiceRequestContext#requestTimeoutHandler()")," and\n",(0,n.kt)("a",{parentName:"li",href:"type://ServiceRequestContext#setRequestTimeoutHandler(Runnable)"},"type://ServiceRequestContext#setRequestTimeoutHandler(Runnable)")," have been deprecated in favor of\n",(0,n.kt)("a",{parentName:"li",href:"type://ClientRequestContext#whenResponseTimedOut():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientRequestContext.html#whenResponseTimedOut()"},"type://ClientRequestContext#whenResponseTimedOut()")," and\n",(0,n.kt)("a",{parentName:"li",href:"type://ServiceRequestContext#whenRequestTimedOut():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#whenRequestTimedOut()"},"type://ServiceRequestContext#whenRequestTimedOut()"),". ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2939"},"#2939"))),(0,n.kt)("h2",{id:"️-breaking-changes",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#%EF%B8%8F-breaking-changes","aria-label":"️ breaking changes permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"☢️ Breaking changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Added ",(0,n.kt)("inlineCode",{parentName:"li"},"final")," to the various classes and methods so that a user doesn't extend them beyond the devs'\nintention. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2927"},"#2927")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"com.linecorp.armeria.common.util.NonNullByDefault")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"UnstableApi")," have been moved to\n",(0,n.kt)("inlineCode",{parentName:"li"},"com.linecorp.armeria.common.annotation"),". ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2890"},"#2890")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"KeyedCircuitBreakerMapping")," and its inner class are now package-private. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2890"},"#2890"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Use the static factory methods in ",(0,n.kt)("a",{parentName:"li",href:"type://CircuitBreakerMapping:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerMapping.html"},"type://CircuitBreakerMapping"),"."))),(0,n.kt)("li",{parentName:"ul"},"A ",(0,n.kt)("inlineCode",{parentName:"li"},"Host")," header isn't automatically translated into the ",(0,n.kt)("inlineCode",{parentName:"li"},":authority")," header anymore, so that you can preserve\nthe original headers when writing a proxy server with Armeria. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2877"},"#2877")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2878"},"#2878")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"req.serviceName")," in ",(0,n.kt)("a",{parentName:"li",href:"type://BuiltInProperties"},"type://BuiltInProperties")," has been renamed to ",(0,n.kt)("inlineCode",{parentName:"li"},"req.service_name")," for the consistency\nwith other property names. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2958"},"#2958")),(0,n.kt)("li",{parentName:"ul"},"Various classes and methods that were previously deprecated have been removed. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2926"},"#2926")),(0,n.kt)("li",{parentName:"ul"},"The new ",(0,n.kt)("inlineCode",{parentName:"li"},"Pooled*")," API introduced in the previous release has been reverted due to design and performance\nissues. ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2882"},"#2882")," ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2892"},"#2892"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"See ",(0,n.kt)("a",{parentName:"li",href:"type://PooledObjects:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/unsafe/PooledObjects.html"},"type://PooledObjects")," for the new API."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ClientFactoryOption.PROXY_CONFIG")," has been replaced with ",(0,n.kt)("a",{parentName:"li",href:"type://ClientFactoryOptions#PROXY_CONFIG_SELECTOR:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactoryOptions.html#PROXY_CONFIG_SELECTOR"},"type://ClientFactoryOptions#PROXY_CONFIG_SELECTOR"),".\n",(0,n.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/2752"},"#2752"))),(0,n.kt)("h2",{id:"-dependencies",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#-dependencies","aria-label":" dependencies permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"⛓ Dependencies"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Bouncy Castle 1.65.01 → 1.66"),(0,n.kt)("li",{parentName:"ul"},"Brave 5.12.3 → 5.12.4"),(0,n.kt)("li",{parentName:"ul"},"Dropwizard 2.0.10 → 2.0.12, 1.3.23 → 1.3.24"),(0,n.kt)("li",{parentName:"ul"},"Dropwizard Metrics 4.1.9 → 4.1.11"),(0,n.kt)("li",{parentName:"ul"},"gRPC 1.30.2 → 1.31.0"),(0,n.kt)("li",{parentName:"ul"},"Jackson 2.11.1 → 2.11.2"),(0,n.kt)("li",{parentName:"ul"},"Jetty 9.4.30 → 9.4.31"),(0,n.kt)("li",{parentName:"ul"},"Micrometer 1.5.2 → 1.5.3, 1.3.10 → 1.3.11"),(0,n.kt)("li",{parentName:"ul"},"Netty 4.1.50 → 4.1.51",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"netty-tcnative-boringssl-static 2.0.30 → 2.0.31"))),(0,n.kt)("li",{parentName:"ul"},"Reactor 3.3.7 → 3.3.8"),(0,n.kt)("li",{parentName:"ul"},"RxJava 3.0.4 → 3.0.5"),(0,n.kt)("li",{parentName:"ul"},"Spring Boot 2.3.1 → 2.3.2"),(0,n.kt)("li",{parentName:"ul"},"Tomcat 9.0.36 → 9.0.37, 8.5.56 → 8.5.57"),(0,n.kt)("li",{parentName:"ul"},"Shaded dependencies:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"completable-futures 0.3.2 → 0.3.3"),(0,n.kt)("li",{parentName:"ul"},"fastutil 8.3.1 → 8.4.0")))),(0,n.kt)("h2",{id:"-thank-you",style:{position:"relative"}},(0,n.kt)("a",{parentName:"h2",href:"#-thank-you","aria-label":" thank you permalink",className:"anchor before"},(0,n.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🙇 Thank you"),(0,n.kt)(p,{usernames:["anuraaga","codefromthecrypt","ghkim3221","heowc","ikhoon","imasahiro","jrhee17","KarboniteKream","kojilin","m50d","mauhiz","matsumana","minwoox","okue","smax48","tobias-","trustin"],mdxType:"ThankYou"}))}h.isMDXComponent=!0},20370:function(e,t,a){a(88025);var r=a(1923),i=a(25444),n=a(67294),o=a(55746),l=a(8284),s=a(96759),p=a(46731),m=a(9396),c=r.Z.Title,h=Object.keys(l)[0],u=d(h);function d(e){return e.substring(e.lastIndexOf("/")+1)}t.Z=function(e){var t={},a={},r={root:{"Latest news items":"/news","Latest release notes":"/release-notes","Past news items":"/news/list","Past release notes":"/release-notes/list"},"Recent news items":t,"Recent releases":a};Object.entries(o).forEach((function(e){var a=e[0],r=e[1];t[r]=a})),Object.entries(l).forEach((function(e){var t=e[0],r=e[1];a[r]=t}));var k=(0,m.Z)(e.location),N=e.version||d(k);return N.match(/^[0-9]/)||(N=void 0),n.createElement(p.Z,Object.assign({},e,{candidateMdxNodes:[],index:r,prefix:"release-notes",pageTitle:N?N+" release notes":e.pageTitle,pageTitleSuffix:"Armeria release notes"}),N&&N!==u?n.createElement(s.Ch,null,"You're seeing the release note of an old version. Check out"," ",n.createElement(i.Link,{to:h},"the latest release note"),"."):"",N?n.createElement(c,{id:"release-notes",level:1},n.createElement("a",{href:"#release-notes","aria-label":"release notes permalink",className:"anchor before"},n.createElement("svg",{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},n.createElement("path",{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),N," release notes"):"",e.children)}},55746:function(e){e.exports=JSON.parse('{"/news/20231208-newsletter-6":"Armeria Newsletter vol. 6","/news/20230426-newsletter-5":"Armeria Newsletter vol. 5","/news/20220714-newsletter-4":"Armeria Newsletter vol. 4","/news/20211029-newsletter-3":"Armeria Newsletter vol. 3","/news/20210202-newsletter-2":"Armeria Newsletter vol. 2","/news/20200703-newsletter-1":"Armeria Newsletter vol. 1","/news/20200514-newsletter-0":"Armeria Newsletter vol. 0"}')},8284:function(e){e.exports=JSON.parse('{"/release-notes/1.29.4":"v1.29.4","/release-notes/1.29.3":"v1.29.3","/release-notes/1.29.2":"v1.29.2","/release-notes/1.29.1":"v1.29.1","/release-notes/1.29.0":"v1.29.0","/release-notes/1.28.4":"v1.28.4","/release-notes/1.28.3":"v1.28.3","/release-notes/1.28.2":"v1.28.2","/release-notes/1.28.1":"v1.28.1","/release-notes/1.28.0":"v1.28.0","/release-notes/1.27.3":"v1.27.3","/release-notes/1.27.2":"v1.27.2","/release-notes/1.27.1":"v1.27.1","/release-notes/1.27.0":"v1.27.0","/release-notes/1.26.4":"v1.26.4","/release-notes/1.26.3":"v1.26.3"}')}}]);
//# sourceMappingURL=component---src-pages-release-notes-0-99-9-mdx-1912c86582a76e2834c5.js.map