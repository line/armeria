{"version":3,"file":"component---src-pages-docs-server-grpc-mdx-cd4e68674ec4fe3930a0.js","mappings":"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","sources":["webpack://armeria-site/./src/pages/docs/server-grpc.mdx","webpack://armeria-site/./src/layouts/docs.tsx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/armeria/armeria/site/src/layouts/docs.tsx\";\nexport const pageTitle = \"Running a gRPC service\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst Tip = makeShortcode(\"Tip\");\nconst layoutProps = {\n  pageTitle,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"running-a-grpc-service\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#running-a-grpc-service\",\n        \"aria-label\": \"running a grpc service permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Running a gRPC service`}</h1>\n    <h6 {...{\n      \"className\": \"inlinePageToc\",\n      \"role\": \"navigation\"\n    }}>{`Table of contents`}</h6>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#grpcservice\"\n          }}>{`GrpcService`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#decorating-a-grpcservice\"\n          }}>{`Decorating a GrpcService`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#grpc-web\"\n          }}>{`gRPC-Web`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#unframed-requests\"\n          }}>{`Unframed requests`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#blocking-service-implementation\"\n          }}>{`Blocking service implementation`}</a></p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#using-typeblocking-annotation\"\n            }}>{`Using type://@Blocking annotation`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#wrapping-a-service-with-typeservicerequestcontextblockingtaskexecutor\"\n            }}>{`Wrapping a service with type://ServiceRequestContext#blockingTaskExecutor()`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#using-typegrpcservicebuilderuseblockingtaskexecutorboolean\"\n            }}>{`Using type://GrpcServiceBuilder#useBlockingTaskExecutor(boolean)`}</a></li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#exception-propagation\"\n          }}>{`Exception propagation`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#server-reflection\"\n          }}>{`Server Reflection`}</a></p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"#see-also\"\n          }}>{`See also`}</a></p>\n      </li>\n    </ul>\n    <Tip mdxType=\"Tip\">\n      <p>{`Visit `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/line/armeria-examples\"\n        }}>{`armeria-examples`}</a>{` to find a fully working example.`}</p>\n    </Tip>\n    <p>{`Let's assume we have the following `}<a parentName=\"p\" {...{\n        \"href\": \"https://grpc.io/\"\n      }}>{`gRPC`}</a>{` service definition:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-protobuf\"\n      }}>{`syntax = \"proto3\";\n\npackage grpc.hello;\n\noption java_package = \"com.example.grpc.hello\";\n\nservice HelloService {\n  rpc Hello (HelloRequest) returns (HelloReply) {}\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string message = 1;\n}\n`}</code></pre>\n    <p>{`The Protobuf compiler will produce some Java code under the `}<inlineCode parentName=\"p\">{`com.example.grpc.hello`}</inlineCode>{` package.\nThe most noteworthy one is `}<inlineCode parentName=\"p\">{`HelloServiceGrpc.java`}</inlineCode>{` which defines the base service class we will implement:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`public class HelloServiceGrpc {\n    ...\n    public static abstract class HelloServiceImplBase implements BindableService {\n        public void hello(HelloRequest req, StreamObserver<HelloReply> responseObserver) {\n            asyncUnimplementedUnaryCall(METHOD_HELLO, responseObserver);\n        }\n        ...\n    }\n    ...\n}\n`}</code></pre>\n    <p>{`Our implementation would look like the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`public class MyHelloService extends HelloServiceGrpc.HelloServiceImplBase {\n    @Override\n    public void hello(HelloRequest req, StreamObserver<HelloReply> responseObserver) {\n        HelloReply reply = HelloReply.newBuilder()\n                                     .setMessage(\"Hello, \" + req.getName() + '!')\n                                     .build();\n        responseObserver.onNext(reply);\n        responseObserver.onCompleted();\n    }\n}\n`}</code></pre>\n    <Tip mdxType=\"Tip\">\n      <p>{`It is recommended to use the build plugin as explained in\n`}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/grpc/grpc-java/blob/master/README.md#download\"\n        }}>{`the gRPC-Java README`}</a>{` rather than\nrunning `}<inlineCode parentName=\"p\">{`protoc`}</inlineCode>{` manually.`}</p>\n    </Tip>\n    <h2 {...{\n      \"id\": \"grpcservice\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#grpcservice\",\n        \"aria-label\": \"grpcservice permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><inlineCode parentName=\"h2\">{`GrpcService`}</inlineCode></h2>\n    <p>{`Once you've finished the implementation of the service, you need to build a `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{` using\na `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcServiceBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html\"\n      }}>{`type://GrpcServiceBuilder`}</a>{` and add it to the `}<a parentName=\"p\" {...{\n        \"href\": \"type://ServerBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html\"\n      }}>{`type://ServerBuilder`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.server.Server;\nimport com.linecorp.armeria.server.ServerBuilder;\n\nServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .build());\n...\nServer server = sb.build();\nserver.start();\n`}</code></pre>\n    <Tip mdxType=\"Tip\">\n      <p>{`We bound the `}<a parentName=\"p\" {...{\n          \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n        }}>{`type://GrpcService`}</a>{` without specifying any path. It is because `}<a parentName=\"p\" {...{\n          \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n        }}>{`type://GrpcService`}</a>{`\nimplements `}<a parentName=\"p\" {...{\n          \"href\": \"type://HttpServiceWithRoutes:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpServiceWithRoutes.html\"\n        }}>{`type://HttpServiceWithRoutes`}</a>{`, which dynamically provides `}<a parentName=\"p\" {...{\n          \"href\": \"typeplural://Route:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html\"\n        }}>{`typeplural://Route`}</a>{` by itself.`}</p>\n    </Tip>\n    <Tip mdxType=\"Tip\">\n      <p><a parentName=\"p\" {...{\n          \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n        }}>{`type://GrpcService`}</a>{` supports `}<a parentName=\"p\" {...{\n          \"href\": \"https://grpc.io/\"\n        }}>{`gRPC`}</a>{`, `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md\"\n        }}>{`gRPC-Web`}</a>{` and `}<a parentName=\"p\" {...{\n          \"href\": \"https://developers.google.com/protocol-buffers/docs/proto3#json\"\n        }}>{`Protobuf-JSON`}</a>{` by default.\nIf you don't want your `}<a parentName=\"p\" {...{\n          \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n        }}>{`type://GrpcService`}</a>{` support all those formats, specify the formats you want\nusing `}<a parentName=\"p\" {...{\n          \"href\": \"type://GrpcServiceBuilder#supportedSerializationFormats(Iterable):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#supportedSerializationFormats(java.lang.Iterable)\"\n        }}>{`type://GrpcServiceBuilder#supportedSerializationFormats(Iterable)`}</a>{`.`}</p>\n    </Tip>\n    <h2 {...{\n      \"id\": \"decorating-a-grpcservice\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#decorating-a-grpcservice\",\n        \"aria-label\": \"decorating a grpcservice permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Decorating a `}<inlineCode parentName=\"h2\">{`GrpcService`}</inlineCode></h2>\n    <p>{`Unlike a usual Armeria service, `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{` implements a special interface called\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpServiceWithRoutes:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpServiceWithRoutes.html\"\n      }}>{`type://HttpServiceWithRoutes`}</a>{`. Therefore, it is recommended to decorate a `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{` by specifying\ndecorator functions as extra parameters rather than using `}<inlineCode parentName=\"p\">{`Service.decorate()`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.server.logging.LoggingService;\n\nServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .addService(new MySecondHelloService())\n                      .build(),\n           LoggingService.newDecorator());\n...\nServer server = sb.build();\nserver.start();\n`}</code></pre>\n    <Tip mdxType=\"Tip\">\n      <p>{`See `}<a parentName=\"p\" {...{\n          \"href\": \"/docs/server-decorator#decorating-servicewithroutes\"\n        }}>{`Decorating `}<inlineCode parentName=\"a\">{`ServiceWithRoutes`}</inlineCode></a>{` for more information\nabout `}<a parentName=\"p\" {...{\n          \"href\": \"type://HttpServiceWithRoutes:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/HttpServiceWithRoutes.html\"\n        }}>{`type://HttpServiceWithRoutes`}</a>{`.`}</p>\n    </Tip>\n    <p>{`The above decorator decorates all services. If you want to decorate only a specific service, you need to specify\nthe decorators when you add the service to the `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcServiceBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html\"\n      }}>{`type://GrpcServiceBuilder`}</a>{`,\nor use the `}<a parentName=\"p\" {...{\n        \"href\": \"type://@Decorator:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Decorator.html\"\n      }}>{`type://@Decorator`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`GrpcService.builder()\n           .addService(new MyHelloService(),\n                       List.of(new FirstDecorator(), new SecondDecorator())) // ðŸ‘ˆðŸ‘ˆðŸ‘ˆ\n           .build()\n\n// Or, use the @Decorator directly to the service or method.\n@Decorator(ThirdDecorator.class) // ðŸ‘ˆðŸ‘ˆðŸ‘ˆ\nclass MyHelloService extends MyHelloServiceBase {\n\n    @Decorator(FourthDecorator.class) // ðŸ‘ˆðŸ‘ˆðŸ‘ˆ\n    @Override\n    public void sayHello(HelloRequest request, StreamObserver<HelloResponse> responseObserver) {\n        ...\n    }\n}\n`}</code></pre>\n    <p>{`As you might have noticed already, the decorators will be applied in the order of\n`}<inlineCode parentName=\"p\">{`FirstDecorator`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`SecondDecorator`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`ThirdDecorator`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`FourthDecorator`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"grpc-web\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#grpc-web\",\n        \"aria-label\": \"grpc web permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><inlineCode parentName=\"h2\">{`gRPC-Web`}</inlineCode></h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{` supports the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md\"\n      }}>{`gRPC-Web`}</a>{` protocol,\na small modification to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://grpc.io/\"\n      }}>{`gRPC`}</a>{` wire format that can be used from a browser.\nUse the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/grpc/grpc-web\"\n      }}>{`gRPC-Web-Client`}</a>{` to access the service from a browser.`}</p>\n    <Tip mdxType=\"Tip\">\n      <p><a parentName=\"p\" {...{\n          \"href\": \"https://github.com/grpc/grpc-web\"\n        }}>{`gRPC-Web-Client`}</a>{` does not support client-side\n(or bi-directional) streaming yet but only server-side streaming.\nSee `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/grpc/grpc-web/issues/24\"\n        }}>{`here`}</a>{` for more information.`}</p>\n    </Tip>\n    <p>{`If the origin of the Javascript and API server are different, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/grpc/grpc-web\"\n      }}>{`gRPC-Web-Client`}</a>{` first sends `}<inlineCode parentName=\"p\">{`preflight`}</inlineCode>{`\nrequests by the HTTP `}<inlineCode parentName=\"p\">{`OPTIONS`}</inlineCode>{` method, in order to determine whether the actual request is safe to send\nin terms of CORS. Armeria provides `}<a parentName=\"p\" {...{\n        \"href\": \"type://CorsService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/cors/CorsService.html\"\n      }}>{`type://CorsService`}</a>{` to handle this requests, so you need to decorate it when\nyou build a `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.common.grpc.protocol.GrpcHeaderNames;\nimport com.linecorp.armeria.server.cors.CorsService;\nimport com.linecorp.armeria.server.cors.CorsServiceBuilder;\n\nServerBuilder sb = Server.builder();\n...\nfinal CorsServiceBuilder corsBuilder =\n        CorsService.builder(\"http://foo.com\")\n                   .allowRequestMethods(HttpMethod.POST) // Allow POST method.\n                   // Allow Content-type and X-GRPC-WEB headers.\n                   .allowRequestHeaders(HttpHeaderNames.CONTENT_TYPE,\n                                        HttpHeaderNames.of(\"X-GRPC-WEB\"))\n                   // Expose trailers of the HTTP response to the client.\n                   .exposeHeaders(GrpcHeaderNames.GRPC_STATUS,\n                                  GrpcHeaderNames.GRPC_MESSAGE,\n                                  GrpcHeaderNames.ARMERIA_GRPC_THROWABLEPROTO_BIN);\n\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .build(),\n           corsBuilder.newDecorator(),\n           LoggingService.newDecorator());\n...\nServer server = sb.build();\nserver.start();\n`}</code></pre>\n    <p>{`Please refer to `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/server-cors\"\n      }}>{`Configuring CORS`}</a>{` for more information.`}</p>\n    <h2 {...{\n      \"id\": \"unframed-requests\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#unframed-requests\",\n        \"aria-label\": \"unframed requests permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Unframed requests`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{` supports serving unary RPC methods (no streaming request or response) without `}<a parentName=\"p\" {...{\n        \"href\": \"https://grpc.io/\"\n      }}>{`gRPC`}</a>{`\nwire format framing. This can be useful for gradually migrating an existing HTTP POST based API to `}<a parentName=\"p\" {...{\n        \"href\": \"https://grpc.io/\"\n      }}>{`gRPC`}</a>{`.\nAs `}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcService.html\"\n      }}>{`type://GrpcService`}</a>{` supports both binary protobuf and `}<a parentName=\"p\" {...{\n        \"href\": \"https://developers.google.com/protocol-buffers/docs/proto3#json\"\n      }}>{`Protobuf-JSON`}</a>{`, either legacy protobuf\nor JSON APIs can be used.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`ServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .enableUnframedRequests(true)\n                      .build());\n...\nServer server = sb.build();\nserver.start();\n`}</code></pre>\n    <p>{`This service's unary methods can be accessed from any HTTP client at e.g., URL `}<inlineCode parentName=\"p\">{`/grpc.hello.HelloService/Hello`}</inlineCode>{`\nwith Content-Type `}<inlineCode parentName=\"p\">{`application/protobuf`}</inlineCode>{` for binary protobuf POST body or `}<inlineCode parentName=\"p\">{`application/json; charset=utf-8`}</inlineCode>{`\nfor JSON POST body.`}</p>\n    <h2 {...{\n      \"id\": \"blocking-service-implementation\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#blocking-service-implementation\",\n        \"aria-label\": \"blocking service implementation permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Blocking service implementation`}</h2>\n    <p>{`Unlike upstream gRPC-Java, Armeria does not run service logic in a separate thread pool by default. If your\nservice implementation requires blocking, run the individual blocking logic in a thread pool,\nannotate the gRPC services or methods with a `}<a parentName=\"p\" {...{\n        \"href\": \"type://@Blocking:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Blocking.html\"\n      }}>{`type://@Blocking`}</a>{` annotation, wrap the entire service implementation in\n`}<inlineCode parentName=\"p\">{`ServiceRequestContext.current().blockingTaskExecutor().submit()`}</inlineCode>{`, or set\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://GrpcServiceBuilder#useBlockingTaskExecutor(boolean):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#useBlockingTaskExecutor(boolean)\"\n      }}>{`type://GrpcServiceBuilder#useBlockingTaskExecutor(boolean)`}</a>{` so the above happens automatically for\nall service methods and lifecycle callbacks.`}</p>\n    <h3 {...{\n      \"id\": \"using-typeblocking-annotation\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#using-typeblocking-annotation\",\n        \"aria-label\": \"using typeblocking annotation permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<a parentName=\"h3\" {...{\n        \"href\": \"type://@Blocking:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Blocking.html\"\n      }}>{`type://@Blocking`}</a>{` annotation`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`// You can apply the @Blocking annotation at the class level\n// so all methods are executed by ServiceRequestContext.current().blockingTaskExecutor().\n@Blocking // ðŸ‘ˆ\nclass MyBlockingGrpcServiceImpl extends MyGrpcServiceImplBase {\n\n    public void blockingCall1(...) {\n        // Perform a long-running task.\n        ...\n    }\n\n    public void blockingCall2(...) {\n        // Perform a long-running task.\n        ...\n    }\n}\n\nclass MyGrpcServiceImpl extends MyGrpcServiceImplBase {\n\n    //  The method will be executed by ServiceRequestContext.current().blockingTaskExecutor().\n    @Blocking // ðŸ‘ˆ\n    public void blockingCall(...) {\n        // Perform a long-running task.\n        ...\n    }\n\n    public void nonBlockingCall(...) {\n        ...\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"wrapping-a-service-with-typeservicerequestcontextblockingtaskexecutor\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#wrapping-a-service-with-typeservicerequestcontextblockingtaskexecutor\",\n        \"aria-label\": \"wrapping a service with typeservicerequestcontextblockingtaskexecutor permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Wrapping a service with `}<a parentName=\"h3\" {...{\n        \"href\": \"type://ServiceRequestContext#blockingTaskExecutor():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html#blockingTaskExecutor()\"\n      }}>{`type://ServiceRequestContext#blockingTaskExecutor()`}</a></h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.common.RequestContext;\nimport com.linecorp.armeria.server.ServiceRequestContext;\n\npublic class MyHelloService extends HelloServiceGrpc.HelloServiceImplBase {\n    @Override\n    public void hello(HelloRequest req, StreamObserver<HelloReply> responseObserver) {\n        ServiceRequestContext.current().blockingTaskExecutor().submit(() -> {\n            // Perform a long-running task.\n\n            HelloReply reply = HelloReply.newBuilder()\n                                         .setMessage(\"Hello, \" + req.getName() + '!')\n                                         .build();\n            responseObserver.onNext(reply);\n            responseObserver.onCompleted();\n        });\n    }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"using-typegrpcservicebuilderuseblockingtaskexecutorboolean\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#using-typegrpcservicebuilderuseblockingtaskexecutorboolean\",\n        \"aria-label\": \"using typegrpcservicebuilderuseblockingtaskexecutorboolean permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<a parentName=\"h3\" {...{\n        \"href\": \"type://GrpcServiceBuilder#useBlockingTaskExecutor(boolean):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/grpc/GrpcServiceBuilder.html#useBlockingTaskExecutor(boolean)\"\n      }}>{`type://GrpcServiceBuilder#useBlockingTaskExecutor(boolean)`}</a></h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`ServerBuilder sb = Server.builder();\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      // All service methods will be run within\n                      // the blocking executor.\n                      .useBlockingTaskExecutor(true) // ðŸ‘ˆ\n                      .build());\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"exception-propagation\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#exception-propagation\",\n        \"aria-label\": \"exception propagation permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Exception propagation`}</h2>\n    <p>{`It can be very useful to enable `}<a parentName=\"p\" {...{\n        \"href\": \"type://Flags#verboseResponses():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/Flags.html#verboseResponses()\"\n      }}>{`type://Flags#verboseResponses()`}</a>{` in your server by specifying the\n`}<inlineCode parentName=\"p\">{`-Dcom.linecorp.armeria.verboseResponses=true`}</inlineCode>{` system property, which will automatically return\ninformation about an exception thrown in the server to gRPC clients. Armeria clients will automatically\nconvert it back into an exception for structured logging, etc. This response will include information about\nthe actual source code in the server - make sure it is safe to send such potentially sensitive information\nto all your clients before enabling this flag!`}</p>\n    <p>{`See more details at `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/client-grpc\"\n      }}>{`Client gRPC`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"server-reflection\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#server-reflection\",\n        \"aria-label\": \"server reflection permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Server Reflection`}</h2>\n    <p>{`Armeria supports gRPC server reflection - just add an instance of `}<inlineCode parentName=\"p\">{`ProtoReflectionService`}</inlineCode>{` to your server.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import io.grpc.protobuf.services.ProtoReflectionService;\n\nServerBuilder sb = Server.builder();\n...\nsb.service(GrpcService.builder()\n                      .addService(new MyHelloService())\n                      .addService(ProtoReflectionService.newInstance())\n                      .build());\n...\nServer server = sb.build();\nserver.start();\n`}</code></pre>\n    <p>{`For more information, see the official `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/grpc/grpc-java/blob/master/documentation/server-reflection-tutorial.md\"\n      }}>{`gRPC Server Reflection tutorial`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"see-also\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#see-also\",\n        \"aria-label\": \"see also permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`See also`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/docs/client-grpc\"\n        }}>{`Client gRPC`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { RouteComponentProps } from '@reach/router';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport React from 'react';\n\nimport docsIndex from '../pages/docs/toc.json';\nimport MdxLayout from './mdx';\n\ninterface DocsLayoutProps extends RouteComponentProps {\n  pageContext: any;\n  pageTitle: string;\n}\n\nconst DocsLayout: React.FC<DocsLayoutProps> = (props) => {\n  const {\n    allMdx: { nodes: candidateMdxNodes },\n  } = useStaticQuery(graphql`\n    query {\n      allMdx(filter: { fileAbsolutePath: { glob: \"**/src/pages/docs/**\" } }) {\n        nodes {\n          tableOfContents(maxDepth: 1)\n          excerpt(pruneLength: 256, truncate: true)\n          parent {\n            ... on File {\n              sourceInstanceName\n              name\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <MdxLayout\n      {...props}\n      candidateMdxNodes={candidateMdxNodes}\n      index={docsIndex}\n      prefix=\"docs\"\n      pageTitleSuffix=\"Armeria documentation\"\n    />\n  );\n};\n\nexport default DocsLayout;\n"],"names":["name","pageTitle","_frontmatter","Tip","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent","candidateMdxNodes","useStaticQuery","allMdx","nodes","index","docsIndex","prefix","pageTitleSuffix"],"sourceRoot":""}