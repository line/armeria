"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[7596],{15953:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"0.91.0","title":"v0.91.0","description":"New features","source":"@site/src/content/release-notes/0.91.0.mdx","sourceDirName":".","slug":"/0.91.0","permalink":"/release-notes/0.91.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site/src/content/release-notes/0.91.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2019-09-06T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.92.0","permalink":"/release-notes/0.92.0"},"next":{"title":"v0.90.3","permalink":"/release-notes/0.90.3"}}');var r=i(74848),t=i(28453);const o={date:new Date("2019-09-06T00:00:00.000Z")},a="v0.91.0",l={},c=[{value:"New features",id:"new-features",level:2},{value:"Improvements",id:"improvements",level:2},{value:"Bug fixes",id:"bug-fixes",level:2},{value:"Breaking changes",id:"breaking-changes",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Thank you",id:"thank-you",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.header,{children:[(0,r.jsx)(n.h1,{id:"v0910",children:"v0.91.0"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"September 6, 2019"})})]}),"\n",(0,r.jsx)(n.h2,{id:"new-features",children:"New features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can specify the maximum number of event loops to handle connections. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1886",children:"#1886"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'ClientFactoryBuilder builder = ...;\nbuilder.maxNumEventLoopsPerEndpoint(5); // Assign 5 event loops for endpoints. 1 is used by default.\nbuilder.maxNumEventLoopsPerHttp1Endpoint(10); // Assign 10 event loops for HTTP/1.1 endpoints. 1 is used by default.\n// You can set a customized function.\nbuilder.maxNumEventLoopsFunction(endpoint -> {\n    if (endpoint.equals(Endpoint.of("foo.com"))) {\n        return 5;\n    }\n    if (endpoint.host().contains("bar.com")) {\n        return Integer.MAX_VALUE; // The value will be clamped at the number of event loops.\n    }\n    return -1; // Should return 0 or a negative value to use the default value.\n});\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now implement your own ",(0,r.jsx)(n.code,{children:"EventLoopScheduler"})," which schedules ",(0,r.jsx)(n.code,{children:"EventLoop"}),"s those handle connections. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1886",children:"#1886"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now see Armeria modules and their versions in DocService. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/685",children:"#685"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1744",children:"#1744"}),"\n",(0,r.jsx)(n.img,{src:"https://user-images.githubusercontent.com/17493311/63525374-9038e900-c538-11e9-8f6e-819497cd5b0c.png",alt:"version"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now easily combine ",(0,r.jsx)(n.code,{children:"EndpointGroup"}),"s and ",(0,r.jsx)(n.code,{children:"Endpoint"}),"s. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1897",children:"#1897"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1939",children:"#1939"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Endpoint foo = ...;\nEndpoint bar = ...;\nDynamicEndpointGroup group1 = ...;\nDynamicEndpointGroup group2 = ...;\nEndpointGroup composite = EndpointGroup.of(foo, bar, group1, group2);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can use the ",(0,r.jsx)(n.a,{href:"https://pdfs.semanticscholar.org/e575/e12ef56bcd889ce09516dd702ec1422816b6.pdf",children:"Fibonacci backoff"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1968",children:"#1968"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1979",children:"#1979"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Backoff backoff = Backoff.fibonacci(100 /* initial delay millis */,\n                                    10000 /* max delay millis */);\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now reuse the configuration of existing Armeria client when creating an Armeria Retrofit client and ",(0,r.jsx)(n.code,{children:"HealthCheckedEndpointGroup"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2019",children:"#2019"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2020",children:"#2020"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"HttpClient myClient = ...;\nArmeriaRetrofitBuilder builder = new ArmeriaRetrofitBuilder();\n// Use the same settings and decorators with `myClient` when sending requests.\nbuilder.clientOptions(myClient.options());\n\nHealthCheckedEndpointGroupBuilder builder2 = new HealthCheckedEndpointGroupBuilder();\nbuilder2.clientOptions(myClient.options());\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can unwrap a ",(0,r.jsx)(n.code,{children:"Client"})," and bring the decorating client instance via ",(0,r.jsx)(n.code,{children:"Unwrappable.as()"})," or ",(0,r.jsx)(n.code,{children:"ClientFactory.unwrap()"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1883",children:"#1883"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2018",children:"#2018"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2029",children:"#2029"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"HttpClient client = new HttpClientBuilder()\n    .decorator(LoggingClient.newDecorator())\n    .build();\nLoggingClient unwrapped = client.as(LoggingClient.class).get();\nLoggingClient unwrapped2 = clientFactory.unwrap(client, LoggingClient.class).get();\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can now easily retrieve the port number of the running server. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1956",children:"#1956"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1967",children:"#1967"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"ServerBuilder sb = new ServerBuilder();\nServer server = sb.http(0) // Use an ephemeral port.\n                  .build();\n...\nint port = server.activeLocalPort();\n"})}),"\n"]}),"\n"]}),"\n","\n",(0,r.jsx)(n.h2,{id:"improvements",children:"Improvements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The delay calculation performance in ",(0,r.jsx)(n.code,{children:"ExponentialBackoff"})," is improved. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1983",children:"#1983"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now run all ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria-examples",children:"Armeria examples"})," using ",(0,r.jsx)(n.code,{children:"gradle run"})," or ",(0,r.jsx)(n.code,{children:"gradle bootRun"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1988",children:"#1988"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"bug-fixes",children:"Bug fixes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You no longer see a warning message when the connection is closed before the current session protocol is detected. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2043",children:"#2043"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2048",children:"#2048"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ByteBufHttpData"})," does not leak anymore when an exception is raised by a client-side decorator. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2034",children:"#2034"})]}),"\n",(0,r.jsxs)(n.li,{children:["You no longer see a ",(0,r.jsx)(n.code,{children:"NullPointerException"})," when the remote server requires a protocol downgrade. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2010",children:"#2010"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2021",children:"#2021"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Only one HTTP/2 connection is made per endpoint by default. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1886",children:"#1886"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Previously, an Armeria client made as many connections as the number of event loops for each endpoint. Now, it creates only one connection per endpoint so one ",(0,r.jsx)(n.code,{children:"EventLoop"})," handles all requests. Because of that, you may see performance degradation. If you want it to work as before, specify ",(0,r.jsx)(n.code,{children:"maxNumEventLoopsPerEndpoint"})," with the number of event loops in ",(0,r.jsx)(n.code,{children:"ClientFactoryBuilder"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["We now use ",(0,r.jsx)(n.a,{href:"https://www.baeldung.com/spring-maven-bom",children:"Maven Boms(Bill of Materials)"})," for Jackson, Brave and Netty"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Brave 5.6.10 -> 5.7.0"}),"\n",(0,r.jsx)(n.li,{children:"Guava 28.0-jre -> 28.1-jre"}),"\n",(0,r.jsx)(n.li,{children:"Jackson 2.9.9 -> 2.9.9.20190807"}),"\n",(0,r.jsx)(n.li,{children:"net.shibboleth.utilities 7.3.0 -> 7.5.0"}),"\n",(0,r.jsx)(n.li,{children:"OpenSAML 3.3.0 -> 3.4.3"}),"\n",(0,r.jsx)(n.li,{children:"Reactivestreams 1.0.2 -> 1.0.3"}),"\n",(0,r.jsx)(n.li,{children:"Reactor 3.2.11.RELEASE -> 3.2.12.RELEASE"}),"\n",(0,r.jsx)(n.li,{children:"RxJava2 2.2.11 -> 2.2.12"}),"\n",(0,r.jsx)(n.li,{children:"Spring boot 2.1.7.RELEASE -> 2.1.8.RELEASE"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"thank-you",children:"Thank you"}),"\n",(0,r.jsx)(i,{usernames:["anuraaga","codefromthecrypt","delegacy","hexoul","ho9science","ikhoon","imasahiro","jyblue","KangWooJin","kojilin","mauhiz","minwoox","thinkgruen","trustin","Untaek","zacscoding"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(96540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);