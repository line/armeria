"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[4524],{6354:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-7-14b9783a6a86ef8e9f99c0251d8c241e.png"},20571:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-6-4c5290f42ab658d351a7c297a4e7fdcb.png"},28453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>o});var n=t(96540);const s={},i=n.createContext(s);function a(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(i.Provider,{value:r},e.children)}},38916:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-1-d761e7cf42bde79256e6b3acd7f73941.png"},42240:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-5-7ea539d66490a74cd206f210a73f0f84.png"},78388:e=>{e.exports=JSON.parse('{"permalink":"/blog/ko/2021/06/28/monitoring-prometheus-metrics-from-armeria","editUrl":"https://github.com/line/armeria/edit/main/site/src/content/blog/ko/2021-06-28-monitoring-prometheus-metrics-from-armeria.mdx","source":"@site/src/content/blog/ko/2021-06-28-monitoring-prometheus-metrics-from-armeria.mdx","title":"Armeria\uc5d0\uc11c Prometheus \uc9c0\ud45c \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","description":"\uc2dc\uc791\ud558\uba70","date":"2021-06-28T00:00:00.000Z","tags":[],"readingTime":4.41,"hasTruncateMarker":true,"authors":[{"name":"\uc8fc\uc2b9\ud658","title":"LINE\uc5d0\uc11c OpenChat \uc11c\ube44\uc2a4\uc758 \ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc744 \ub2f4\ub2f9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.","imageURL":"/img/author-seunghwanjoo.jpeg","key":"seunghwanjoo","page":null}],"frontMatter":{"authors":["seunghwanjoo"],"other_languages":{"en":"/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria"}},"unlisted":false,"prevItem":{"title":"Armeria \uc9c0\ud45c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\uae30","permalink":"/blog/ko/2021/07/15/customizing-armeria-metrics"},"nextItem":{"title":"Armeria\ub85c Reactive Streams\uc640 \ub180\uc790! - 2","permalink":"/blog/ko/2020/02/19/reactive-streams-armeria-2"}}')},93567:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-2-57ec3c55f86df941b1757ef46c971024.png"},97065:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-4-59a3e9308b0cfcf44a86c758be874099.png"},97238:(e,r,t)=>{t.d(r,{A:()=>n});const n=t.p+"assets/images/monitoring-prometheus-metrics-from-armeria-3-42f66c9e85883a24608a69d73ecc4c0b.png"},97504:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>l});var n=t(78388),s=t(74848),i=t(28453);const a={authors:["seunghwanjoo"],other_languages:{en:"/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria"}},o="Armeria\uc5d0\uc11c Prometheus \uc9c0\ud45c \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30",c={authorsImageUrls:[void 0]},l=[{value:"\uc2dc\uc791\ud558\uba70",id:"\uc2dc\uc791\ud558\uba70",level:2},{value:"\uc2e4\uc2b5",id:"\uc2e4\uc2b5",level:2},{value:"Gradle \uc124\uc815",id:"gradle-\uc124\uc815",level:3},{value:"Prometheus \uc124\uce58 \ubc0f \uc124\uc815",id:"prometheus-\uc124\uce58-\ubc0f-\uc124\uc815",level:3},{value:"Grafana \uc124\uce58 \ubc0f \uc124\uc815",id:"grafana-\uc124\uce58-\ubc0f-\uc124\uc815",level:3},{value:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc",id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc",level:3},{value:"\ub9c8\uce58\uba70",id:"\ub9c8\uce58\uba70",level:2}];function m(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"\uc2dc\uc791\ud558\uba70",children:"\uc2dc\uc791\ud558\uba70"}),"\n",(0,s.jsxs)(r.p,{children:["\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 ",(0,s.jsx)(r.a,{href:"https://armeria.dev/",children:"Armeria"}),"\uc5d0\uc11c \uc218\uc9d1\ud55c ",(0,s.jsx)(r.a,{href:"https://prometheus.io/",children:"Prometheus"})," \uc9c0\ud45c\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\nArmeria\ub97c \ucc98\uc74c \uc0ac\uc6a9\ud574 \ubcf4\uc2dc\ub294 \ubd84\ub4e4\ub3c4 \uc27d\uac8c \ub530\ub77c \ud560 \uc218 \uc788\ub3c4\ub85d \uac04\ub2e8\ud55c \uc2e4\uc2b5 \uc608\uc81c\uc640 \ud568\uaed8 \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4."]}),"\n","\n",(0,s.jsx)(r.h2,{id:"\uc2e4\uc2b5",children:"\uc2e4\uc2b5"}),"\n",(0,s.jsxs)(r.p,{children:["\uc2e4\uc2b5\uc740 macOS Big Sur \ud658\uacbd\uc5d0\uc11c \uc9c4\ud589\ud588\uc2b5\ub2c8\ub2e4. \uc2e4\uc2b5\uc744 \uc9c4\ud589\ud558\uae30 \uc704\ud574 Gradle\uacfc Prometheus, ",(0,s.jsx)(r.a,{href:"https://grafana.com/",children:"Grafana"}),"\ub97c \uc5b4\ub5bb\uac8c \uc124\uce58\ud558\uace0 \uc124\uc815\ud588\ub294\uc9c0 \ud568\uaed8 \uc54c\uc544\ubcf4\uace0, \ud14c\uc2a4\ud2b8 \uacb0\uacfc\ub97c \ud655\uc778\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.h3,{id:"gradle-\uc124\uc815",children:"Gradle \uc124\uc815"}),"\n",(0,s.jsx)(r.p,{children:"Armeria \uc11c\ubc84\uc758 Prometheus \uc9c0\ud45c\ub97c \uc218\uc9d1\ud558\uae30 \uc704\ud574 'build.gradle' \ud30c\uc77c\uc5d0 \uc544\ub798\uc640 \uac19\uc740 \ub514\ud39c\ub358\uc2dc\ub97c \uc815\uc758\ud588\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-groovy",metastring:'title="build.gradle"',children:'dependencies {\n\n    // Armeria\n    implementation "com.linecorp.armeria:armeria:1.8.0"\n    implementation "com.linecorp.armeria:armeria-logback:1.8.0"\n\n    // Prometheus\n    implementation "io.micrometer:micrometer-registry-prometheus:1.7.0"\n\n    // ...\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["\ub610\ud55c \uc2e4\uc2b5\uc744 \uc704\ud574 \uc544\ub798\uc640 \uac19\uc774 ",(0,s.jsx)(r.code,{children:"/hello/{seq}"}),"\ub85c GET \uc694\uccad\uc744 \uc804\uc1a1\ud558\uba74 \uc131\uacf5 \ud639\uc740 \uc2e4\ud328\ub85c \uc751\ub2f5\ud558\ub294 \uac04\ub2e8\ud55c REST API\ub97c \ud558\ub098 \uc900\ube44\ud588\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",metastring:'title="MyAnnotatedService.java"',children:'public class MyAnnotatedService {\n\n    @Get("/hello/{seq}")\n    public HttpResponse hello(@Param("seq") int seq) {\n        if (seq % 3 == 0) {\n            return HttpResponse.of(HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n        return HttpResponse.of(HttpStatus.OK, MediaType.PLAIN_TEXT_UTF_8, "Success");\n    }\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["\uc544\ub798\ub294 Armeria \uc11c\ubc84\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud55c ",(0,s.jsx)(r.code,{children:"main()"})," \ud568\uc218 \ucf54\ub4dc\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",metastring:'title="ArmeriaPrometheusApplication.java"',children:'public class ArmeriaPrometheusApplication {\n\n    public static void main(String[] args) {\n        PrometheusMeterRegistry meterRegistry = new PrometheusMeterRegistry(PrometheusConfig.DEFAULT);\n        Server server = Server\n                .builder()\n                .http(8083)\n                .meterRegistry(meterRegistry)\n                .annotatedService(new MyAnnotatedService())\n                .service("/metrics", PrometheusExpositionService.of(meterRegistry.getPrometheusRegistry()))\n                .decorator(MetricCollectingService.builder(MeterIdPrefixFunction.ofDefault("my.http.service"))\n                                                  .newDecorator())\n                .build();\n\n        CompletableFuture<Void> future = server.start();\n        future.join();\n    }\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["\uc11c\ube44\uc2a4 \uc9c0\ud45c\ub97c \uc218\uc9d1\ud558\uae30 \uc704\ud574\uc11c\ub294 \ubc18\ub4dc\uc2dc \uc544\ub798\uc640 \uac19\uc774 ",(0,s.jsx)(r.a,{href:"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/server/metric/MetricCollectingService.html",children:"MetricCollectingService"}),"\ub97c ",(0,s.jsx)(r.code,{children:"decorator"}),"\ub85c \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4(\uc790\uc138\ud55c \ubc29\ubc95\uc740 ",(0,s.jsx)(r.a,{href:"https://armeria.dev/docs/advanced-metrics/",children:"\uacf5\uc2dd \ubb38\uc11c"}),"\ub97c \ucc38\uace0\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4). ",(0,s.jsx)(r.code,{children:"MeterIdPrefixFunction.ofDefault()"})," \ud568\uc218\uc758 \uc778\uc790 \uac12\uc744 \uc774\uc6a9\ud558\uba74 \uc9c0\ud45c\uc758 \uae30\ubcf8 \ud504\ub9ac\ud53d\uc2a4 \uc774\ub984\uc744 \uc6d0\ud558\ub294 \ub300\ub85c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",metastring:'title="ArmeriaPrometheusApplication.java"',children:'.decorator(new MyAnnotatedService(),\n           MetricCollectingService.builder(MeterIdPrefixFunction.ofDefault("my.http.service"))\n                                  .newDecorator())\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.a,{href:"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/1.8.0/com/linecorp/armeria/server/metric/PrometheusExpositionService.html",children:"PrometheusExpositionService"}),"\ub97c \uc774\uc6a9\ud574 Prometheus \uc9c0\ud45c\ub97c \ub178\ucd9c\ud560 \uacbd\ub85c\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",metastring:'title="ArmeriaPrometheusApplication.java"',children:'.service("/metrics", PrometheusExpositionService.of(meterRegistry.getPrometheusRegistry()))\n'})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"/hello"})," API\ub97c \uc694\uccad\ud574 \uc751\ub2f5\uc774 \uc798 \uc624\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"$ curl http://localhost:8083/hello/1\nSuccess\n\n$ curl http://localhost:8083/hello/3\n500 Internal Server Error\n"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"/metrics"}),"\ub85c \uc694\uccad\ud588\uc744 \ub54c Prometheus \uc9c0\ud45c\uac00 \uc751\ub2f5\uc73c\ub85c \uc798 \uc804\ub2ec\ub418\ub294\uc9c0\ub3c4 \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:'$ curl -s http://localhost:8083/metrics | grep "my_http_service_requests_total"\n# HELP my_http_service_requests_total\n# TYPE my_http_service_requests_total counter\nmy_http_service_requests_total{hostname_pattern="*",http_status="500",method="hello",result="success",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0\nmy_http_service_requests_total{hostname_pattern="*",http_status="200",method="hello",result="failure",service="com.example.armeria_prometheus.MyAnnotatedService",} 0.0\nmy_http_service_requests_total{hostname_pattern="*",http_status="200",method="hello",result="success",service="com.example.armeria_prometheus.MyAnnotatedService",} 1.0\nmy_http_service_requests_total{hostname_pattern="*",http_status="500",method="hello",result="failure",service="com.example.armeria_prometheus.MyAnnotatedService",} 1.0\n'})}),"\n",(0,s.jsx)(r.h3,{id:"prometheus-\uc124\uce58-\ubc0f-\uc124\uc815",children:"Prometheus \uc124\uce58 \ubc0f \uc124\uc815"}),"\n",(0,s.jsxs)(r.p,{children:["\uba3c\uc800 ",(0,s.jsx)(r.a,{href:"https://brew.sh/index_ko",children:"Homebrew"})," \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800\ub85c Prometheus\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"$ brew install prometheus\n"})}),"\n",(0,s.jsx)(r.p,{children:"\uc124\uce58\uac00 \uc644\ub8cc\ub418\uba74 \uae30\ubcf8\uc801\uc73c\ub85c 'prometheus.yml'\uc774\ub77c\ub294 \ud30c\uc77c\uc774 \ud558\ub098 \uc0dd\uc131\ub429\ub2c8\ub2e4. \uc774 YAML \ud30c\uc77c\uc744 \uc774\uc6a9\ud574 Prometheus \uc124\uc815\uc744 \ubcc0\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"$ vi $(brew --prefix)/etc/prometheus.yml\n"})}),"\n",(0,s.jsx)(r.p,{children:"\uc124\uc815 \ud30c\uc77c\uc5d0 Prometheus \uc9c0\ud45c\ub97c \uc218\uc9d1\ud560 \uc218 \uc788\ub294 \uacbd\ub85c\uc640 \ud3ec\ud2b8\ub97c \uc815\ud655\ud558\uac8c \uae30\uc785\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",metastring:'title="prometheus.yml"',children:"global:\n  scrape_interval: 10s\n\nscrape_configs:\n  - job_name: 'armeria-prometheus'\n    metrics_path: '/metrics'\n    static_configs:\n      - targets: ['localhost:8083']\n"})}),"\n",(0,s.jsx)(r.p,{children:"\ubcc0\uacbd\ud55c \ud6c4\uc5d0 Prometheus \uc11c\ube44\uc2a4\ub97c \uc7ac\uc2dc\uc791\ud574\uc57c \ubcc0\uacbd\ub41c \uc124\uc815\uc774 \uc801\uc6a9\ub429\ub2c8\ub2e4."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"$ brew services start prometheus\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Prometheus\uac00 \uc0ac\uc6a9\ud558\ub294 \uae30\ubcf8 \ud3ec\ud2b8\ub294 ",(0,s.jsx)(r.code,{children:"9090"}),"\uc785\ub2c8\ub2e4. \uc6f9 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c ",(0,s.jsx)(r.code,{children:"http://localhost:9090"})," \uc8fc\uc18c\ub85c \uc811\uc18d\ud558\uba74 \uc544\ub798 \ud654\uba74\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(38916).A+"",width:"1024",height:"317"})}),"\n",(0,s.jsx)(r.p,{children:"\uc140\ub809\ud2b8 \ubc15\uc2a4\ub97c \ud074\ub9ad\ud574 Armeria \uad00\ub828 \uc9c0\ud45c\uac00 Prometheus \uc11c\ubc84\uc5d0\uc11c \uc798 \uc218\uc9d1\ub410\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(93567).A+"",width:"1024",height:"388"})}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"/hello/{seq}"})," API\ub97c \uba87 \ubc88 \uc694\uccad\ud55c \ub4a4 ",(0,s.jsx)(r.code,{children:"my_http_service_requests_total"})," \uc9c0\ud45c\uac00 \uc798 \uc99d\uac00\ud558\ub294\uc9c0 \uadf8\ub798\ud504\uc5d0\uc11c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(97238).A+"",width:"1024",height:"475"})}),"\n",(0,s.jsx)(r.h3,{id:"grafana-\uc124\uce58-\ubc0f-\uc124\uc815",children:"Grafana \uc124\uce58 \ubc0f \uc124\uc815"}),"\n",(0,s.jsx)(r.p,{children:"Prometheus\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c Grafana\ub3c4 Homebrew\ub85c \uc124\uce58\ud55c \ud6c4 \uc11c\ube44\uc2a4\ub97c \uc2dc\uc791\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"$ brew install grafana\n$ brew services start grafana\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Grafana\uc758 \uae30\ubcf8 \ud3ec\ud2b8\ub294 ",(0,s.jsx)(r.code,{children:"3000"}),"\uc785\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c ",(0,s.jsx)(r.code,{children:"http://localhost:3000"})," \uc8fc\uc18c\ub85c \uc811\uc18d\ud558\uba74 \uc544\ub798 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub97c \ub9cc\ub098\uac8c \ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(97065).A+"",width:"1024",height:"528"})}),"\n",(0,s.jsxs)(r.p,{children:["'\uacc4\uc815\uc744 \ub9cc\ub4e0 \uc801\uc774 \uc5c6\ub294\ub370...?'\ub77c\uace0 \ub2f9\ud669\ud558\uc9c0 \ub9c8\uc2dc\uace0 \uce68\ucc29\ud558\uac8c ",(0,s.jsx)(r.strong,{children:"Email or username"}),"\uacfc ",(0,s.jsx)(r.strong,{children:"Password"}),"\uc5d0 'admin'\uc744 \uc785\ub825\ud558\uba74 \ub85c\uadf8\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub984\uc5d0\uc11c \uc54c \uc218 \uc788\ub4ef\uc774 admin\uc740 \uae30\ubcf8 \uacc4\uc815\uc774\ubbc0\ub85c \uc2e4\uc81c \uc11c\ube44\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud560 \ub54c\ub294 \ubcf4\uc548\uc744 \uc704\ud574 \ubc18\ub4dc\uc2dc \uacc4\uc815\uc744 \uc0c8\ub85c \ub9cc\ub4e4\uc5b4\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(r.p,{children:["Grafana\uc5d0\uc11c Prometheus \uba54\ud2b8\ub9ad\uc744 \uadf8\ub798\ud504\ub85c \ud45c\uc2dc\ud560 \uc218 \uc788\ub3c4\ub85d, \uc55e\uc5d0\uc11c \uc124\uc815\ud55c Prometheus \uacbd\ub85c\ub97c ",(0,s.jsx)(r.strong,{children:"Data Source"}),"\ub85c \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(42240).A+"",width:"840",height:"411"})}),"\n",(0,s.jsxs)(r.p,{children:["\ub2e4\uc74c\uc73c\ub85c \ub300\uc2dc\ubcf4\ub4dc\ub97c \ud558\ub098 \uc0dd\uc131\ud55c \ud6c4, ",(0,s.jsx)(r.code,{children:"/hello/{seq}"})," API\uc758 \uc131\uacf5\uacfc \uc2e4\ud328 \ud69f\uc218\ub97c \ubaa8\ub2c8\ud130\ub9c1\ud560 \uc218 \uc788\ub294 \ud328\ub110\uc744 \ud558\ub098 \uc0dd\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(20571).A+"",width:"1024",height:"581"})}),"\n",(0,s.jsx)(r.p,{children:"\ucffc\ub9ac\ub294 \uc544\ub798\uc640 \uac19\uc774 \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["200: ",(0,s.jsx)(r.code,{children:'increase(my_http_service_requests_total{hostname_pattern="*", method="hello", http_status="200", result="success", service="com.example.armeria_prometheus.MyAnnotatedService"}[1m])'})]}),"\n",(0,s.jsxs)(r.li,{children:["500: ",(0,s.jsx)(r.code,{children:'increase(my_http_service_requests_total{hostname_pattern="*", method="hello", http_status="500", result="failure", service="com.example.armeria_prometheus.MyAnnotatedService"}[1m])'})]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["\uc5ec\uae30\uc11c ",(0,s.jsx)(r.code,{children:"armeria_server_requests_total"})," \uc9c0\ud45c\ub294 ",(0,s.jsx)(r.a,{href:"https://prometheus.io/docs/concepts/metric_types/#counter",children:"Counter"}),"\ub77c\ub294 \uc9c0\ud45c \uc720\ud615\uc73c\ub85c \ub2e8\uc21c\ud788 \ub204\uc801\ub418\uba70 \uacc4\uc18d \uc99d\uac00\ud558\ub294 \uac12\uc785\ub2c8\ub2e4. \uc2e4\uc81c API \ubaa8\ub2c8\ud130\ub9c1\uc5d0\uc11c\ub294 \uc774 API\uac00 \ud604\uc7ac\uae4c\uc9c0 \uc5bc\ub9c8\ub098 \ub9ce\uc774 \uc131\uacf5 \ud639\uc740 \uc2e4\ud328\ud588\ub290\ub0d0\ub294 \ub204\uc801\uac12\ubcf4\ub2e4\ub294, \uc2dc\uac04\ubcc4 \uc131\uacf5\uacfc \uc2e4\ud328 \ud69f\uc218\uac00 \ub354 \uc758\ubbf8 \uc788\uc744 \uac83\uc785\ub2c8\ub2e4. \uc774\uc5d0 ",(0,s.jsx)(r.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/#increase",children:"increase()"})," \ud568\uc218\ub97c \uc0ac\uc6a9\ud574\uc11c \ub9e4 1\ubd84 \ub3d9\uc548\uc758 \uc131\uacf5\uacfc \uc2e4\ud328 \ud69f\uc218\ub97c \uadf8\ub798\ud504\ub85c \ub098\ud0c0\ub0c8\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.h3,{id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc",children:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc"}),"\n",(0,s.jsxs)(r.p,{children:["\uc774\uc81c \uc544\ub798 \ud074\ub77c\uc774\uc5b8\ud2b8 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud574 API \uc694\uccad\uc744 100\ubc88 \ubcf4\ub0b4\uaca0\uc2b5\ub2c8\ub2e4(Armeria\uc758 ",(0,s.jsx)(r.a,{href:"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/WebClient.html",children:"WebClient"}),"\ub97c \uc0ac\uc6a9\ud588\uc2b5\ub2c8\ub2e4)."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-java",metastring:'title="HttpClientApplication.java"',children:'public class HttpClientApplication {\n\n    private static final Logger logger = LoggerFactory.getLogger(HttpClientApplication.class);\n\n    public static void main(String[] args) {\n        WebClient client = WebClient.of("http://localhost:8083/");\n        for (int i = 0; i < 100; i++) {\n            AggregatedHttpResponse res = client.get("/hello/" + i).aggregate().join();\n            logger.info(res.content(StandardCharsets.UTF_8));\n        }\n    }\n}\n'})}),"\n",(0,s.jsxs)(r.p,{children:["Grafana\uc5d0\uc11c ",(0,s.jsx)(r.code,{children:"/hello/{seq}"})," API\uc758 \uc131\uacf5\uacfc \uc2e4\ud328 \ud69f\uc218\uac00 \uc544\ub984\ub2f5\uac8c \uadf8\ub798\ud504\ub85c \ud45c\uc2dc\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{src:t(6354).A+"",width:"1024",height:"377"})}),"\n",(0,s.jsx)(r.h2,{id:"\ub9c8\uce58\uba70",children:"\ub9c8\uce58\uba70"}),"\n",(0,s.jsx)(r.p,{children:"\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 Armeria \uc11c\ubc84\ub97c \uc2e4\ud589\ud574\uc11c \uc218\uc9d1\ud55c Prometheus \uc9c0\ud45c\uc640 Grafana \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc774\uc6a9\ud574 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcf4\uc558\uc2b5\ub2c8\ub2e4.\nArmeria\uc5d0\uc11c\ub294 \ud604\uc7ac \uc9c0\ud45c \uc218\uc9d1\uacfc \uad00\ub828\ud55c \ub2e4\uc591\ud55c \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c \uae00\uc5d0\uc11c\ub294 \uc774 \uae30\ub2a5\uc744 \uc774\uc6a9\ud574 Armeria\uc5d0\uc11c \uc218\uc9d1\ub41c \uc9c0\ud45c\ub97c \ub0b4 \uc785\ub9db\uc5d0 \ub9de\uac8c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}}}]);