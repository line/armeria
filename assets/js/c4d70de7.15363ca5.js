"use strict";(globalThis.webpackChunkarmeria_site=globalThis.webpackChunkarmeria_site||[]).push([[197],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(96540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},74368:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"0.95.0","title":"v0.95.0","description":"\ud83e\udd73 New features","source":"@site/src/content/release-notes/0.95.0.mdx","sourceDirName":".","slug":"/0.95.0","permalink":"/release-notes/0.95.0","draft":false,"unlisted":false,"editUrl":"https://github.com/line/armeria/edit/main/site-new/src/content/release-notes/0.95.0.mdx","tags":[],"version":"current","frontMatter":{"date":"2019-10-26T00:00:00.000Z"},"sidebar":"defaultSidebar","previous":{"title":"v0.96.0","permalink":"/release-notes/0.96.0"},"next":{"title":"v0.94.0","permalink":"/release-notes/0.94.0"}}');var r=s(74848),t=s(28453);const a={date:new Date("2019-10-26T00:00:00.000Z")},c="v0.95.0",l={},h=[{value:"\ud83e\udd73 New features",id:"-new-features",level:2},{value:"\ud83d\udcaa Improvements",id:"-improvements",level:2},{value:"\ud83d\udc7b Bug fixes",id:"-bug-fixes",level:2},{value:"\ud83d\udeab Breaking changes",id:"-breaking-changes",level:2},{value:"\u26d3 Dependencies",id:"-dependencies",level:2},{value:"\ud83d\ude47\u200d\u2642\ufe0f Thank you",id:"\ufe0f-thank-you",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{ThankYou:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ThankYou",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.header,{children:[(0,r.jsx)(n.h1,{id:"v0950",children:"v0.95.0"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"October 26, 2019"})})]}),"\n",(0,r.jsx)(n.h2,{id:"-new-features",children:"\ud83e\udd73 New features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You can now bind multiple paths to an annotated service easily using ",(0,r.jsx)(n.code,{children:"@Path"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1822",children:"#1822"})," ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1870",children:"#1870"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Get\n@Post\n@Path("/a")\n@Path("/b")\npublic String myAwesomeServcie(...) {...}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["You can now make an annotated service run from ",(0,r.jsx)(n.code,{children:"blockingTaskExecutor"})," by attaching ",(0,r.jsx)(n.code,{children:"@Blocking"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2078",children:"#2078"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2187",children:"#2187"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Get("/myHeavyTask")\n@Blocking\npublic HttpResponse reallyHeavyComputation(...) {...}\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Armeria server now adds ",(0,r.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc7231#section-7.4.2",children:(0,r.jsx)(n.code,{children:"Server"})})," and\n",(0,r.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc7231#section-7.1.1.2",children:(0,r.jsx)(n.code,{children:"Date"})})," headers to responses by default.\n",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2137",children:"#2137"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2188",children:"#2188"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you do not want that behavior, you should call:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Server.builder()\n      .service(...)\n      .disableServerHeader()\n      .disableDateHeader()\n      .build();\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["You can now configure a Caffeine cache spec for ",(0,r.jsx)(n.code,{children:"HttpFileService"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/916",children:"#916"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2142",children:"#2142"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'HttpFileServiceBuilder.forClassPath("/")\n                      .entryCacheSpec("maximumSize=512")\n                      .build()\n'})}),"\n","Or, using JVM option:\n",(0,r.jsx)(n.code,{children:"-Dcom.linecorp.armeria.fileServiceCache=maximumSize=1024,expireAfterAccess=600s"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now see the Armeria version in the metric. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2179",children:"#2179"})]}),"\n"]}),"\n","\n",(0,r.jsx)(n.h2,{id:"-improvements",children:"\ud83d\udcaa Improvements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Armeria server startup time is reduced to 80 percent when TLS is not used. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1645",children:"#1645"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2184",children:"#2184"})]}),"\n",(0,r.jsxs)(n.li,{children:["The performance of getting HTTP timestamps is improved by caching the values every second. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2196",children:"#2196"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"HttpTimestampSupplier.currentTime()"})," to take advantage of it."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["The performance of finding service is improved by not making an unused ",(0,r.jsx)(n.code,{children:"Map"})," in ",(0,r.jsx)(n.code,{children:"RouteResult"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2153",children:"#2153"})]}),"\n",(0,r.jsxs)(n.li,{children:["The performance of gRPC call is improved by using the singleton HTTP headers when a service does not create a new HTTP headers. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2152",children:"#2152"})]}),"\n",(0,r.jsxs)(n.li,{children:["The performance of making metric ",(0,r.jsx)(n.code,{children:"Tag"}),"s is improved by adding ",(0,r.jsx)(n.code,{children:"Tag"}),"s in ascending order. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2150",children:"#2150"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2163",children:"#2163"})]}),"\n",(0,r.jsxs)(n.li,{children:["We now have favicon in our ",(0,r.jsx)(n.code,{children:"DocService"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2186",children:"#2186"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-bug-fixes",children:"\ud83d\udc7b Bug fixes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ServerHttpRequest.getRemoteAddress()"})," now returns proper address. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2208",children:"#2208"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now see descriptive error messages when ",(0,r.jsx)(n.code,{children:"sslContext"})," is not configured properly. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/1844",children:"#1844"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2124",children:"#2124"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now build ",(0,r.jsx)(n.code,{children:"(Request|Response)Headers"})," multiple times using builders. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2190",children:"#2190"}),", ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2193",children:"#2193"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Previously, it raised ",(0,r.jsx)(n.code,{children:"ClassCastException"})," if ",(0,r.jsx)(n.code,{children:"build()"})," is called twice."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"NoRequestContextException"})," is not raised anymore if you configure the name of the non-request thread.","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'RequestContextCurrentTraceContext.builder()\n                                 .nonRequestThread("RMI TCP Connection")\n                                 .build()\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"NullPointerException"})," is not raised anymore in ",(0,r.jsx)(n.code,{children:"Http1ClientCodec"})," when the server sends multiple responses for one request. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2210",children:"#2210"})]}),"\n",(0,r.jsxs)(n.li,{children:["You can now see the access logs when the method of a request is not allowed and there are no services that match the path. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2159",children:"#2159"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-breaking-changes",children:"\ud83d\udeab Breaking changes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["All annotated services are run from ",(0,r.jsx)(n.code,{children:"EventLoop"})," by default. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2187",children:"#2187"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Previously, if the return type is neither ",(0,r.jsx)(n.code,{children:"HttpResponse"})," nor ",(0,r.jsx)(n.code,{children:"CompletableFuture"}),", annotated services are run from ",(0,r.jsx)(n.code,{children:"blockingTaskExecutor"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ServerBuilder.tls()"})," now throws a checked ",(0,r.jsx)(n.code,{children:"SSLException"}),". ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2124",children:"#2124"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ServerBuilder.sslContext()"})," methods are completely removed. ",(0,r.jsx)(n.a,{href:"https://github.com/line/armeria/issues/2124",children:"#2124"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-dependencies",children:"\u26d3 Dependencies"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Brave 5.7.0 -> 5.8.0"}),"\n",(0,r.jsx)(n.li,{children:"Dropwizard 4.1.0 -> 4.1.1"}),"\n",(0,r.jsx)(n.li,{children:"gRPC 1.24.0 -> 1.24.1"}),"\n",(0,r.jsx)(n.li,{children:"Netty 4.1.42 -> 4.1.43"}),"\n",(0,r.jsx)(n.li,{children:"org.bouncycastle 1.63 -> 1.64"}),"\n",(0,r.jsx)(n.li,{children:"Prometheus 0.7.0 -> 0.8.0"}),"\n",(0,r.jsx)(n.li,{children:"RxJava2 2.2.12 -> 2.2.13"}),"\n",(0,r.jsx)(n.li,{children:"Spring Boot 2.1.8 -> 2.1.9"}),"\n",(0,r.jsxs)(n.li,{children:["Tomcat","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"9.0.26 -> 9.0.27"}),"\n",(0,r.jsx)(n.li,{children:"8.5.43 -> 8.5.47"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"ZooKeeper 3.5.5 -> 3.5.6"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-thank-you",children:"\ud83d\ude47\u200d\u2642\ufe0f Thank you"}),"\n",(0,r.jsx)(s,{usernames:["anuraaga","codefromthecrypt","eunchan-kim","heowc","hirakida","ikhoon","imasahiro","jyblue","kojilin","matsumana","minwoox","mumgmangmange","rcsalome","taejs","trustin"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);