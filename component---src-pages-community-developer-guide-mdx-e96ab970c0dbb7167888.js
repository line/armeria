"use strict";(self.webpackChunkarmeria_site=self.webpackChunkarmeria_site||[]).push([[8452],{65832:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return s},default:function(){return k},pageTitle:function(){return o}});var n=t(63366),i=(t(67294),t(64983)),r=t(64326),l=["components"],o="Developer guide",s={},p=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",a)}},c=p("Tip"),h=p("Tabs"),u=p("TabPane"),m={pageTitle:o,_frontmatter:s},d=r.Z;function k(e){var a=e.components,t=(0,n.Z)(e,l);return(0,i.kt)(d,Object.assign({},m,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"developer-guide",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h1",href:"#developer-guide","aria-label":"developer guide permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Developer guide"),(0,i.kt)("h6",{className:"inlinePageToc",role:"navigation"},"Table of contents"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#build-requirements"},"Build requirements"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#how-to-build"},"How to build"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#contributor-license-agreement"},"Contributor license agreement"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#setting-up-your-ide"},"Setting up your IDE"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#configure--parameters-javac-option"},"Configure -parameters javac option"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#always-make-the-build-pass"},"Always make the build pass"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#add-copyright-header"},"Add copyright header"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#add-javadoc"},"Add Javadoc"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#check-the-warnings-from-the-inspection-profile"},"Check the warnings from the inspection profile"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#avoid-redundancy"},"Avoid redundancy"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#use-public-only-when-necessary"},"Use public only when necessary"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#organize"},"Organize"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#check-null"},"Check null")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#use-nullable"},"Use @Nullable")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#avoid-redundant-null-checks"},"Avoid redundant null checks")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#use-meaningful-exception-messages"},"Use meaningful exception messages"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#validate"},"Validate")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#use-guavas-preconditions-if-possible"},"Use Guava's Preconditions if possible")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#prefer-jdk-api"},"Prefer JDK API"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#prefer-early-return-style"},"Prefer early-return style"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#prefer-moreobjectstostringhelper"},"Prefer MoreObjects.toStringHelper()"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#think-aesthetics"},"Think aesthetics"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#use-junit-5-instead-of-junit-4-for-testing"},"Use JUnit 5 instead of JUnit 4 for testing"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#use-assertj-instead-of-junits-assertion-api"},"Use AssertJ instead of JUnit's assertion API"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#how-to-write-pull-request-description"},"How to write pull request description")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#motivation"},"Motivation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#modifications"},"Modifications")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#result"},"Result")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"#integrating-with-gradle-enterprise"},"Integrating with Gradle Enterprise")))),(0,i.kt)("h2",{id:"build-requirements",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#build-requirements","aria-label":"build requirements permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Build requirements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"OpenJDK 17 or its derivative, such as ",(0,i.kt)("a",{parentName:"li",href:"https://adoptium.net/"},"Temurin"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Consider using a version manager for convenient installation of JDK, such as\n",(0,i.kt)("a",{parentName:"li",href:"https://asdf-vm.com/"},"asdf")," and ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/shyiko/jabba"},"jabba"),".")))),(0,i.kt)("h2",{id:"how-to-build",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#how-to-build","aria-label":"how to build permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"How to build"),(0,i.kt)("p",null,"We use ",(0,i.kt)("a",{parentName:"p",href:"https://gradle.org/"},"Gradle")," to build Armeria.\nThe following command will compile Armeria, run tests and generate JARs:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ ./gradlew --parallel build\n")),(0,i.kt)("h2",{id:"contributor-license-agreement",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#contributor-license-agreement","aria-label":"contributor license agreement permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Contributor license agreement"),(0,i.kt)("p",null,"When you are sending a pull request and it's a non-trivial change beyond fixing typos, please sign\n",(0,i.kt)("a",{parentName:"p",href:"https://cla-assistant.io/line/armeria"},"the ICLA (individual contributor license agreement)"),". Please\n",(0,i.kt)("a",{parentName:"p",href:"mailto:dl_oss_dev@linecorp.com"},"contact us")," if you need the CCLA (corporate contributor license agreement)."),(0,i.kt)("h2",{id:"setting-up-your-ide",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#setting-up-your-ide","aria-label":"setting up your ide permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Setting up your IDE"),(0,i.kt)("p",null,"You can import Armeria into your IDE (",(0,i.kt)("a",{parentName:"p",href:"https://www.jetbrains.com/idea/"},"IntelliJ IDEA")," or ",(0,i.kt)("a",{parentName:"p",href:"https://www.eclipse.org/"},"Eclipse"),") as a Gradle project."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"IntelliJ IDEA - See ",(0,i.kt)("a",{parentName:"li",href:"https://www.jetbrains.com/help/idea/gradle.html#gradle_import_project_start"},"Importing Project from Gradle Model")),(0,i.kt)("li",{parentName:"ul"},"Eclipse - Use ",(0,i.kt)("a",{parentName:"li",href:"https://marketplace.eclipse.org/content/buildship-gradle-integration"},"Buildship Gradle Integration"))),(0,i.kt)(c,{mdxType:"Tip"},"IntelliJ IDEA is our primary IDE for developing Armeria."),(0,i.kt)("p",null,"Before importing the project, run the ",(0,i.kt)("inlineCode",{parentName:"p"},"generateSources")," task to generate some source files:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ ./gradlew --parallel -PnoLint generateSources\n")),(0,i.kt)(c,{mdxType:"Tip"},(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"-PnoLint")," disables running lint tools such as Checkstyle and ESLint to save build time.")),(0,i.kt)("p",null,"After importing the project, import the IDE settings as well:"),(0,i.kt)(h,{mdxType:"Tabs"},(0,i.kt)(u,{tab:"IntelliJ IDEA",key:"idea",mdxType:"TabPane"},(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/raw/main/settings/intellij_idea/settings.jar"},(0,i.kt)("inlineCode",{parentName:"a"},"settings.jar"))," -\nSee ",(0,i.kt)("a",{parentName:"li",href:"https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html#7a4f08b8"},"Import settings from a ZIP archive"),"."),(0,i.kt)("li",{parentName:"ul"},"Make sure to use 'LINE OSS' code style and inspection profile.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("inlineCode",{parentName:"li"},"Preferences")," > ",(0,i.kt)("inlineCode",{parentName:"li"},"Editors")," > ",(0,i.kt)("inlineCode",{parentName:"li"},"Code Style")," and set ",(0,i.kt)("inlineCode",{parentName:"li"},"Scheme")," option to ",(0,i.kt)("inlineCode",{parentName:"li"},"LINE OSS"),"."),(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("inlineCode",{parentName:"li"},"Preferences")," > ",(0,i.kt)("inlineCode",{parentName:"li"},"Editors")," > ",(0,i.kt)("inlineCode",{parentName:"li"},"Inspections")," and set ",(0,i.kt)("inlineCode",{parentName:"li"},"Profile")," option to ",(0,i.kt)("inlineCode",{parentName:"li"},"LINE OSS"),"."))))),(0,i.kt)(u,{tab:"Eclipse",key:"eclipse",mdxType:"TabPane"},(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/raw/main/settings/eclipse/formatter.xml"},(0,i.kt)("inlineCode",{parentName:"a"},"formatter.xml"))," -\nSee ",(0,i.kt)("a",{parentName:"li",href:"https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Fcodestyle%2Fref-preferences-formatter.htm"},"Code Formatter Preferences"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/raw/main/settings/eclipse/formatter.importorder"},(0,i.kt)("inlineCode",{parentName:"a"},"formatter.importorder"))," -\nSee ",(0,i.kt)("a",{parentName:"li",href:"https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Fcodestyle%2Fref-preferences-organize-imports.htm"},"Organize Imports Preferences"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/raw/main/settings/eclipse/cleanup.xml"},(0,i.kt)("inlineCode",{parentName:"a"},"cleanup.xml"))," -\nSee ",(0,i.kt)("a",{parentName:"li",href:"https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Fcodestyle%2Fref-preferences-cleanup.htm"},"Clean Up Preferences"),"."),(0,i.kt)("li",{parentName:"ul"},"Configure ",(0,i.kt)("a",{parentName:"li",href:"https://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fpreferences%2Fjava%2Feditor%2Fref-preferences-save-actions.htm"},"Java Save Actions Preferences"),".",(0,i.kt)("details",{parentName:"li"},(0,i.kt)("summary",{parentName:"details"},"Click here to see the screenshot."),"\n  ",(0,i.kt)("img",{parentName:"details",src:"https://github.com/line/armeria/raw/main/settings/eclipse/save_actions.png"})))))),(0,i.kt)("h2",{id:"configure--parameters-javac-option",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#configure--parameters-javac-option","aria-label":"configure  parameters javac option permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Configure ",(0,i.kt)("inlineCode",{parentName:"h2"},"-parameters")," javac option"),(0,i.kt)("p",null,"You can configure your build tool and IDE to add ",(0,i.kt)("inlineCode",{parentName:"p"},"-parameters")," javac option.\nPlease refer to ",(0,i.kt)("a",{parentName:"p",href:"https://armeria.dev/docs/setup#configure--parameters-javac-option"},"Configure ",(0,i.kt)("inlineCode",{parentName:"a"},"-parameters")," javac option")," for more information."),(0,i.kt)("h2",{id:"always-make-the-build-pass",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#always-make-the-build-pass","aria-label":"always make the build pass permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Always make the build pass"),(0,i.kt)("p",null,"Make sure your change does not break the build."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Run ",(0,i.kt)("inlineCode",{parentName:"li"},"./gradlew --parallel build")," locally."),(0,i.kt)("li",{parentName:"ul"},"It is likely that you'll encounter some Checkstyle or Javadoc errors.\nPlease fix them because otherwise the build will be broken.")),(0,i.kt)("h2",{id:"add-copyright-header",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#add-copyright-header","aria-label":"add copyright header permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Add copyright header"),(0,i.kt)("p",null,"All source files must begin with the following copyright header:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'Copyright $today.year LINE Corporation\n\nLINE Corporation licenses this file to you under the Apache License,\nversion 2.0 (the "License"); you may not use this file except in compliance\nwith the License. You may obtain a copy of the License at:\n\n  https://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an "AS IS" BASIS, WITHOUT\nWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\nLicense for the specific language governing permissions and limitations\nunder the License.\n')),(0,i.kt)("h2",{id:"add-javadoc",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#add-javadoc","aria-label":"add javadoc permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Add Javadoc"),(0,i.kt)("p",null,"All public classes and public or protected methods must have Javadoc,\nexcept the classes under ",(0,i.kt)("inlineCode",{parentName:"p"},"com.linecorp.armeria.internal"),". Referring to\nan internal API from a public API will trigger build failures."),(0,i.kt)("h2",{id:"check-the-warnings-from-the-inspection-profile",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#check-the-warnings-from-the-inspection-profile","aria-label":"check the warnings from the inspection profile permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Check the warnings from the inspection profile"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Make sure you are using 'LINE OSS' code style and inspection profile."),(0,i.kt)("li",{parentName:"ul"},"Evaluate all warnings emitted by the 'LINE OSS' inspection profile.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Try to fix them all and use the ",(0,i.kt)("inlineCode",{parentName:"li"},"@SuppressWarnings")," annotation if it's a false positive.")))),(0,i.kt)("h2",{id:"avoid-redundancy",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#avoid-redundancy","aria-label":"avoid redundancy permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Avoid redundancy"),(0,i.kt)("p",null,"Avoid using redundant keywords. To list a few:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"final")," method modifier in a ",(0,i.kt)("inlineCode",{parentName:"li"},"final")," class"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"static")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"public")," modifier in an ",(0,i.kt)("inlineCode",{parentName:"li"},"interface")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"public")," method modifier in a package-local or private class"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"private")," constructor modifier in an ",(0,i.kt)("inlineCode",{parentName:"li"},"enum")),(0,i.kt)("li",{parentName:"ul"},"field access prefixed with ",(0,i.kt)("inlineCode",{parentName:"li"},"this.")," where unnecessary")),(0,i.kt)("h2",{id:"use-public-only-when-necessary",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#use-public-only-when-necessary","aria-label":"use public only when necessary permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Use ",(0,i.kt)("inlineCode",{parentName:"h2"},"public")," only when necessary"),(0,i.kt)("p",null,"The classes, methods and fields that are not meant to be used by a user should not be\npublic. Use the most restrictive modifier wherever possible, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"private"),",\npackage-local and ",(0,i.kt)("inlineCode",{parentName:"p"},"protected"),", so that static analysis tools can find dead code easily."),(0,i.kt)("h2",{id:"organize",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#organize","aria-label":"organize permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Organize"),(0,i.kt)("p",null,"Organize class members carefully for readability, using ",(0,i.kt)("strong",{parentName:"p"},"top-down")," approach.\nAlthough there's no absolute rule of thumb, it's usually like:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"static")," fields"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"static")," methods"),(0,i.kt)("li",{parentName:"ul"},"member fields"),(0,i.kt)("li",{parentName:"ul"},"constructors"),(0,i.kt)("li",{parentName:"ul"},"member methods"),(0,i.kt)("li",{parentName:"ul"},"utility methods (both ",(0,i.kt)("inlineCode",{parentName:"li"},"static")," and member)"),(0,i.kt)("li",{parentName:"ul"},"inner classes")),(0,i.kt)("h2",{id:"check-null",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#check-null","aria-label":"check null permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Check ",(0,i.kt)("inlineCode",{parentName:"h2"},"null")),(0,i.kt)("p",null,"Do explicit ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"-check on the parameters of user-facing public methods.\nAlways use ",(0,i.kt)("inlineCode",{parentName:"p"},"Objects.requireNonNull(Object, String)")," to do a ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"-check."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'import static java.util.Objects.requireNonNull;\n\npublic void setProperty(String name, String value) {\n    // Great\n    this.name = requireNonNull(name, "name");\n    // Not great - we may not know which parameter is null exactly. \n    this.name = requireNonNull(name);\n    // Not great - too verbose. NPE implies something\'s null already.\n    this.name = requireNonNull(name, "name is null");\n    // Not OK\n    this.name = name\n}\n')),(0,i.kt)("p",null,"If you are using IntelliJ IDEA and you imported the ",(0,i.kt)("inlineCode",{parentName:"p"},"settings.jar")," as explained\nabove, try the live template ",(0,i.kt)("inlineCode",{parentName:"p"},"rnn")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"rnna")," which will save a lot of time."),(0,i.kt)("h3",{id:"use-nullable",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#use-nullable","aria-label":"use nullable permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Use ",(0,i.kt)("inlineCode",{parentName:"h3"},"@Nullable")),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"@Nullable")," annotation for nullable parameters and return types.\nDo not use ",(0,i.kt)("inlineCode",{parentName:"p"},"@Nonnull")," annotation since we assume everything is non-null otherwise."),(0,i.kt)("h3",{id:"avoid-redundant-null-checks",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#avoid-redundant-null-checks","aria-label":"avoid redundant null checks permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Avoid redundant null checks"),(0,i.kt)("p",null,"Avoid unnecessary ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"-checks, including the hidden checks in ",(0,i.kt)("inlineCode",{parentName:"p"},"Objects.hashCode()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Objects.equals()"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"public final class MyClass {\n    private final String name;\n\n    public MyClass(String name) {\n        // We are sure 'name' is always non-null.\n        this.name = requireNonNull(name, \"name\");\n    }\n\n    @Override\n    public int hashCode() {\n        // OK\n        return name.hashCode();\n        // Not OK\n        return Objects.hash(name);\n    }\n\n    @Override\n    public boolean equals(@Nullable Object obj) {\n        ... usual type check ...\n        // OK\n        return name.equals(((MyClass) obj).name);\n        // Not OK\n        return Objects.equals(name, ((MyClass) obj).name);\n    }\n}\n")),(0,i.kt)("h2",{id:"use-meaningful-exception-messages",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#use-meaningful-exception-messages","aria-label":"use meaningful exception messages permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Use meaningful exception messages"),(0,i.kt)("p",null,"When raising an exception, specify meaningful message which gives an explicit clue\nabout what went wrong."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'switch (fileType) {\n    case TXT: ... break;\n    case XML: ... break;\n    default:\n        // Note that the exception message contains the offending value\n        // as well as the expected values.\n        throw new IllegalStateException(\n                "unsupported file type: " + fileType +\n                 " (expected: " + FileType.TXT + " or " + FileType.XML + \')\');\n}\n')),(0,i.kt)("h2",{id:"validate",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#validate","aria-label":"validate permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Validate"),(0,i.kt)("p",null,"Do explicit validation on the parameters of user-facing public methods.\nWhen raising an exception, always specify the detailed message in the following format:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public void setValue(int value) {\n    if (value < 0) {\n        // Note that the exception message contains the offending value\n        // as well as the expected value.\n        throw new IllegalArgumentException("value: " + value + " (expected: >= 0)");\n    }\n}\n')),(0,i.kt)("h3",{id:"use-guavas-preconditions-if-possible",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#use-guavas-preconditions-if-possible","aria-label":"use guavas preconditions if possible permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Use Guava's ",(0,i.kt)("inlineCode",{parentName:"h3"},"Preconditions")," if possible"),(0,i.kt)("p",null,"Guava's ",(0,i.kt)("inlineCode",{parentName:"p"},"Preconditions")," provides ",(0,i.kt)("inlineCode",{parentName:"p"},"checkArgument()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"checkState()")," which can simplify argument or state validation logic:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'private boolean someState;\nvoid doSomething(int value) {\n    checkArgument(value > 0, "value: %s (expected: > 0)", value);\n    checkState(someState, "Cannot be called when ...");\n    ...\n}\n')),(0,i.kt)("p",null,"However, you should use a good old ",(0,i.kt)("inlineCode",{parentName:"p"},"if")," block if it takes an extra job to create an exception message:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'if (value <= 0) {\n    throw new IllegalArgumentException(\n        "value: " + toHumanReadable(value) + " (expected: ...)");\n}\n')),(0,i.kt)("h2",{id:"prefer-jdk-api",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#prefer-jdk-api","aria-label":"prefer jdk api permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Prefer JDK API"),(0,i.kt)("p",null,"Prefer using plain JDK API when the same behavior can be achieved with the same\namount of code."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// Prefer A (JDK) - less indirection\nMap<String, String> map = new HashMap<>();   // A (JDK)\nMap<String, String> map = Maps.newHashMap(); // B (Guava)\n\n// Prefer B (Guava) - simpler yet more efficient\nList<String> list = Collections.unmodifiableList(  // A (JDK)\n        otherList.stream().filter(...).collect(Collectors.toList()));\nList<String> list = otherList.stream().filter(...) // B (Guava)\n        .collect(toImmutableList());\n")),(0,i.kt)("h2",{id:"prefer-early-return-style",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#prefer-early-return-style","aria-label":"prefer early return style permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Prefer early-return style"),(0,i.kt)("p",null,"Prefer 'early return' code style for readability."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// Great\npublic void doSomething(String value) {\n    if (value == null) {\n        return;\n    }\n\n    // Do the actual job\n}\n\n// Not great\npublic void doSomething(String value) {\n    if (value != null) {\n        // Do the actual job\n    }\n}\n")),(0,i.kt)("p",null,"However, when the 'normal' execution path is very simple, this may also look beautiful:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"@Nullable\npublic String doSomething(String value) {\n    if (value != null) {\n        return value.trim();\n    } else {\n        return null;\n    }\n}\n")),(0,i.kt)("h2",{id:"prefer-moreobjectstostringhelper",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#prefer-moreobjectstostringhelper","aria-label":"prefer moreobjectstostringhelper permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Prefer ",(0,i.kt)("inlineCode",{parentName:"h2"},"MoreObjects.toStringHelper()")),(0,i.kt)("p",null,"Prefer ",(0,i.kt)("inlineCode",{parentName:"p"},"MoreObjects.toStringHelper()")," to hand-written ",(0,i.kt)("inlineCode",{parentName:"p"},"toString()")," implementation.\nHowever, consider writing hand-written or caching ",(0,i.kt)("inlineCode",{parentName:"p"},"toString()")," implementation\nin performance-sensitive places.  "),(0,i.kt)("h2",{id:"think-aesthetics",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#think-aesthetics","aria-label":"think aesthetics permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Think aesthetics"),(0,i.kt)("p",null,"Do not insert an empty line that hurts code aesthetics."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// OK\nif (...) {\n    doSomething();\n}\n\n// Not OK\nif (...) {\n    doSomething();\n                        // <-- Remove this extra line.\n}\n")),(0,i.kt)("p",null,"Similarly, do not use two or more consecutive empty lines."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// OK\npublic void a() { ... }\n\npublic void b() { ... }\n\n// Not OK\npublic void a() { ... }\n\n                        // <-- Remove this extra line.\npublic void b() { ... }\n")),(0,i.kt)("h2",{id:"use-junit-5-instead-of-junit-4-for-testing",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#use-junit-5-instead-of-junit-4-for-testing","aria-label":"use junit 5 instead of junit 4 for testing permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Use JUnit 5 instead of JUnit 4 for testing"),(0,i.kt)("p",null,"We support both ",(0,i.kt)("a",{parentName:"p",href:"https://junit.org/junit4/"},"JUnit 4")," and ",(0,i.kt)("a",{parentName:"p",href:"https://junit.org/junit5/"},"JUnit 5")," for testing, but we recommend to use JUnit 5."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"// Imports of JUnit5, Good\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n...\n\n// Imports of JUnit4, Not Good\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n...\n")),(0,i.kt)("h2",{id:"use-assertj-instead-of-junits-assertion-api",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#use-assertj-instead-of-junits-assertion-api","aria-label":"use assertj instead of junits assertion api permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Use AssertJ instead of JUnit's assertion API"),(0,i.kt)("p",null,"We prefer ",(0,i.kt)("a",{parentName:"p",href:"https://joel-costigliola.github.io/assertj/"},"AssertJ")," when writing assertions for test cases."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// Good\nassertThat(actualValue).isEqualTo(expectedValue);\nassertThatThrownBy(() -> badMethod()).isInstanceOf(IllegalArgumentException.class)\n                                     .hasMessageContaining("bad method");\n// Not Good\nassertEquals(expectedValue, actualValue);\ntry {\n    badMethod();\n} catch (IllegalArgumentException e) {\n    assertTrue(e.getMessage().contains("bad method"));\n}\n')),(0,i.kt)("h2",{id:"how-to-write-pull-request-description",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#how-to-write-pull-request-description","aria-label":"how to write pull request description permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"How to write pull request description"),(0,i.kt)("p",null,"Writing a good pull request description is important to both contributors and reviewers because:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"it enables a contributor to communicate the intention and context of a pull request more clearly with reviewers."),(0,i.kt)("li",{parentName:"ul"},"it helps the developers write good ",(0,i.kt)("a",{parentName:"li",href:"/release-notes/"},"release notes"),".")),(0,i.kt)("p",null,"How much detail should a pull request description have? The general rule of thumb is\nto put all ",(0,i.kt)("em",{parentName:"p"},"notable")," changes in detail. It doesn't have to contain every single tiny\ndetail of the changes.\nUsually, you need to fill the following 3 sections: Motivation, Modifications and Result."),(0,i.kt)("h3",{id:"motivation",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#motivation","aria-label":"motivation permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Motivation"),(0,i.kt)("p",null,"Explain why you're sending the pull request and what problem you're trying to solve.\nYou do not have to include all the detail but please include as much as the reviewers can get the background\nof this change.\nIf there are related GitHub issues, please leave links to them.\nIf you referred other resources (e.g. RFCs) for making this change, please leave links to them as well."),(0,i.kt)("p",null,"These are good examples:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/pull/3479#issue-621862219"},"#3479 (comment)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/line/armeria/pull/3331#issue-567485208"},"#3331 (comment)"))),(0,i.kt)("h3",{id:"modifications",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#modifications","aria-label":"modifications permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Modifications"),(0,i.kt)("p",null,"List the modifications you've made in detail.\nAgain, you do not have to include all the modifications you made but ",(0,i.kt)("em",{parentName:"p"},"notable")," changes that you wish the\nreaders know.\nIf the pull request has a deprecation or breaking change, you need to describe it here. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"- (Deprecated) Foo.bar() is deprecated.\n  - Use Baz.bar() instead.\n")),(0,i.kt)("h3",{id:"result",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h3",href:"#result","aria-label":"result permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Result"),(0,i.kt)("p",null,"Specify ",(0,i.kt)("inlineCode",{parentName:"p"},"- Closes #<GitHub issue number>")," if this resolves the issue.\nDescribe the consequences that a user will face after this pull request is merged."),(0,i.kt)("p",null,"For example, if the pull request fixes a bug, you can write: ",(0,i.kt)("inlineCode",{parentName:"p"},"You no longer see a Foo exception when using Bar."),"\nIf you introduce a new feature, you can write: ",(0,i.kt)("inlineCode",{parentName:"p"},"You can now do A using B."),"\nThese are examples:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You no longer see a ",(0,i.kt)("inlineCode",{parentName:"li"},"NullPointerException")," when a request times out."),(0,i.kt)("li",{parentName:"ul"},"You can now monitor the state of all live threads and heap using ",(0,i.kt)("inlineCode",{parentName:"li"},"ManagementService"),".")),(0,i.kt)("p",null,"Add an example snippet if this pull request introduces a new feature, so we can use it in\nour ",(0,i.kt)("a",{parentName:"p",href:"https://armeria.dev/release-notes/"},"release notes"),", e.g."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Server.builder()\n      .serviceUnder("/internal/management/", ManagementService.of());\n')),(0,i.kt)("h2",{id:"integrating-with-gradle-enterprise",style:{position:"relative"}},(0,i.kt)("a",{parentName:"h2",href:"#integrating-with-gradle-enterprise","aria-label":"integrating with gradle enterprise permalink",className:"anchor before"},(0,i.kt)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Integrating with Gradle Enterprise"),(0,i.kt)("p",null,"You may want to integrate your local development environment with ",(0,i.kt)("a",{parentName:"p",href:"https://gradle.com/"},"Gradle Enterprise"),".\nBy doing so, you may:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Visualize and troubleshoot build issues more easily."),(0,i.kt)("li",{parentName:"ol"},"Experience faster builds due to build caches.")),(0,i.kt)("p",null,"Let us know at the ",(0,i.kt)("a",{parentName:"p",href:"/s/discord"},"Armeria Discord")," channel, and we'll create an account\nfor you. Afterwards, you may integrate your local environment with the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"./gradlew provisionGradleEnterpriseAccessKey\n")))}k.isMDXComponent=!0},64326:function(e,a,t){t.d(a,{Z:function(){return o}});var n=t(25444),i=t(67294),r=JSON.parse('{"root":["index"],"Pages":["articles","developer-guide","code-of-conduct","design-resources"],"See also":{"Tutorials":"/tutorials","User manual":"/docs","LINE Engineering":"https://engineering.linecorp.com/en/"}}'),l=t(46731),o=function(e){var a=(0,n.useStaticQuery)("1102418264").allMdx.nodes;return i.createElement(l.Z,Object.assign({},e,{candidateMdxNodes:a,index:r,prefix:"community",pageTitleSuffix:"Armeria community"}))}}}]);
//# sourceMappingURL=component---src-pages-community-developer-guide-mdx-e96ab970c0dbb7167888.js.map