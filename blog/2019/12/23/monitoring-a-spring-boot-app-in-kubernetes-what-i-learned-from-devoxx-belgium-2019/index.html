<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-blog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019 | Armeria</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://armeria.dev/img/og-image.png"><meta data-rh="true" name="twitter:image" content="https://armeria.dev/img/og-image.png"><meta data-rh="true" property="og:url" content="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="og:site_name" content="Armeria - Your go-to microservice framework"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:image:width" content="1280"><meta data-rh="true" name="og:image:height" content="640"><meta data-rh="true" name="twitter:site" content="@armeria_project"><meta data-rh="true" name="twitter:creator" content="@armeria_project"><meta data-rh="true" property="og:title" content="Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019 | Armeria"><meta data-rh="true" name="description" content="This November, accompanied by 3 other members of the Shop team, I attended Devoxx Belgium 2019, held in Antwerp, Belgium - the birthplace of Devoxx and most populous city of Belgium."><meta data-rh="true" property="og:description" content="This November, accompanied by 3 other members of the Shop team, I attended Devoxx Belgium 2019, held in Antwerp, Belgium - the birthplace of Devoxx and most populous city of Belgium."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2019-12-23T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019"><link data-rh="true" rel="alternate" href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019" hreflang="en"><link data-rh="true" rel="alternate" href="https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019","mainEntityOfPage":"https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019","url":"https://armeria.dev/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019","headline":"Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019","name":"Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019","description":"This November, accompanied by 3 other members of the Shop team, I attended Devoxx Belgium 2019, held in Antwerp, Belgium - the birthplace of Devoxx and most populous city of Belgium.","datePublished":"2019-12-23T00:00:00.000Z","author":{"@type":"Person","name":"Teo","description":"Teodor is a server-side engineer at LINE.","image":"/img/author-teo.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://armeria.dev/blog","name":"Armeria Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Armeria Newsletter RSS Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CY9YHLJ0K6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CY9YHLJ0K6",{anonymize_ip:!0})</script>





<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Armeria Blog RSS Feed">
<link rel="alternate" type="application/rss+xml" href="/blog/ja/rss.xml" title="Armeria Blog - Japanese RSS Feed">
<link rel="alternate" type="application/rss+xml" href="/blog/ko/rss.xml" title="Armeria Blog - Korean RSS Feed">

<link rel="manifest" href="/manifest.json">


<link rel="alternate" type="application/rss+xml" href="/release-notes/rss.xml" title="Armeria Release Notes RSS Feed">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Armeria RSS Feed"><link rel="stylesheet" href="/assets/css/styles.4999cde9.css">
<script src="/assets/js/runtime~main.22ee5cc3.js" defer="defer"></script>
<script src="/assets/js/main.0451dd42.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/armeria_logo_horiz.svg"><link rel="preload" as="image" href="/img/author-teo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/armeria_logo_horiz.svg" alt="Armeria Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/armeria_logo_horiz.svg" alt="Armeria Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">News</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/news/20231208-newsletter-6">Newsletter</a></li><li><a class="dropdown__link" href="/release-notes/1.34.1">Release notes</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/community/">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a class="navbar__item navbar__link header-discord-link" aria-label="Discord" href="/s/discord"></a><a href="https://x.com/armeria_project" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-x-link" aria-label="X"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md"> </div><button type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-btn-lg ant-dropdown-trigger blogLanguageSelector__AnM"><a href="/blog">English</a><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button><div role="group"><h3 class="yearGroupHeading_rMGB">2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/04/customizing-armeria-metrics">Customizing Armeria metrics</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/07/09/monitoring-prometheus-metrics-from-armeria">Monitoring Prometheus metrics from Armeria</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2020</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/07/08/circuit-breakers-armeria">Using Circuit Breakers with Armeria</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/07/03/reactive-streams-armeria-2">Let&#x27;s Play with Reactive Streams on Armeria - Part 2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/05/06/reactive-streams-armeria-1">Let&#x27;s Play with Reactive Streams on Armeria - Part 1</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2019</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2019/12/23/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019">Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/05/14/armeria-sprint-1">Make your GitHub contributions calendar greener (featuring Armeria Sprint)!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/04/16/thank-you-for-contributing-to-armeria">Thank you for contributing to Armeria!</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2018</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/09/13/making-a-basic-server-with-java-armeria">Making a basic server with Java &amp; Armeria</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2016</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/04/applying-circuitbreaker-to-channel-gateway">Applying CircuitBreaker to Channel Gateway</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/24/circuit-breakers-for-distributed-services">Circuit breakers for distributed services</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/13/open-sourcing-armeria">Open-sourcing Armeria</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><div><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This post is also available in<!-- --> <a href="/blog/ja/2020/01/14/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019">Japanese</a>.</p></div></div></div><h1 class="title_f1Hy">Monitoring a Spring Boot app in Kubernetes - What I learned from Devoxx Belgium 2019</h1><div class="container_mt6G margin-vert--md"><time datetime="2019-12-23T00:00:00.000Z">December 23, 2019</time> · <!-- -->14 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><img class="avatar__photo authorImage_XqGP" src="/img/author-teo.png" alt="Teo"><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><span class="authorName_yefp" translate="no">Teo</span></div><small class="authorTitle_nd0D" title="Teodor is a server-side engineer at LINE.">Teodor is a server-side engineer at LINE.</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>This November, accompanied by 3 other members of the Shop team, I attended Devoxx Belgium 2019, held in Antwerp, Belgium - the birthplace of Devoxx and most populous city of Belgium.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-1-8e22983a2492a8731c34a80e445decc8.jpg" width="1024" height="682" class="img_ev3q"></p>
<!-- -->
<p><a href="https://en.wikipedia.org/wiki/Devoxx" target="_blank" rel="noopener noreferrer" class="">Devoxx</a> is a developer community conference series started in 2001 which quickly grew to become one of the largest vendor-independent Java conferences in the world.
Today, Devoxx conferences are also held in France, Poland, Ukraine, Morocco, and the UK.</p>
<p>Devoxx Belgium took place in &quot;Kinepolis,&quot; one of the largest cinemas in Europe.
The speakers&#x27; video and slides were projected on the huge cinema screens in 4K using the available THX audio setup.
The view was great!</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-2-4530f6955b4607b56de009631379926e.jpg" width="1024" height="768" class="img_ev3q"> <img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-3-cebba6c5f750b3fb1e59c6d953ef9de0.jpg" width="1024" height="768" class="img_ev3q"> <img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-4-a9a269fb31331861032e096fc80bd0b2.jpg" width="768" height="1024" class="img_ev3q"></p>
<p>In this blog post, I&#x27;d like to present a small hands-on example on monitoring a Spring Boot application in Kubernetes using what I learned at Devoxx.
In particular, I&#x27;d like to talk about:</p>
<ul>
<li class="">Preparing a Spring Boot application</li>
<li class="">Installing Docker and Kubernetes</li>
<li class="">Building a Docker image</li>
<li class="">Deploying to Kubernetes</li>
<li class="">Monitoring our application inside Kubernetes</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitoring-example---spring-boot-application-in-kubernetes">Monitoring Example - Spring Boot application in Kubernetes<a href="#monitoring-example---spring-boot-application-in-kubernetes" class="hash-link" aria-label="Direct link to Monitoring Example - Spring Boot application in Kubernetes" title="Direct link to Monitoring Example - Spring Boot application in Kubernetes" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-preparing-a-spring-boot-application">1. Preparing a Spring Boot application<a href="#1-preparing-a-spring-boot-application" class="hash-link" aria-label="Direct link to 1. Preparing a Spring Boot application" title="Direct link to 1. Preparing a Spring Boot application" translate="no">​</a></h3>
<p>For this example, I&#x27;m going to use a sample &quot;Hello World&quot; Spring Boot application that uses <a href="https://line.github.io/armeria/" target="_blank" rel="noopener noreferrer" class="">Armeria</a>.
On the Shop team we use Armeria to develop high-performance asynchronous microservices that use HTTP/2 as a session layer protocol.
I want to use Armeria in this example to show how you can expose a custom metrics endpoint and have Prometheus pull metrics from it.
Examples on how to get started with Armeria are available on <a href="https://github.com/line/armeria-examples" target="_blank" rel="noopener noreferrer" class="">Armeria&#x27;s GitHub repo</a>.
The source code for this example is on <a href="https://github.com/nirvanarsc/k8s-monitoring-sample" target="_blank" rel="noopener noreferrer" class="">GitHub</a>.
I&#x27;ve only tested the code on macOS.</p>
<p>I have set up a <a href="https://github.com/nirvanarsc/k8s-monitoring-sample/blob/master/src/main/java/com/github/nirvanarsc/k8s/monitoring/sample/service/GreetingService.java#L17" target="_blank" rel="noopener noreferrer" class="">gRPC Service</a> and an <a href="https://github.com/nirvanarsc/k8s-monitoring-sample/blob/master/src/main/java/com/github/nirvanarsc/k8s/monitoring/sample/service/SampleService.java#L11" target="_blank" rel="noopener noreferrer" class="">HTTP Service</a> which we can call by navigating to <code>/internal/docs</code>.
DocService is a single-page web application that comes out of the box with Armeria listing all of our services and allowing us to call test them.
More about it can be found on <a href="https://line.github.io/armeria/server-docservice.html" target="_blank" rel="noopener noreferrer" class="">Armeria&#x27;s official documentation</a>.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-5-72863d1657c6923548295bdf10de5dba.png" width="1024" height="753" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-installing-docker--kubernetes">2. Installing Docker &amp; Kubernetes<a href="#2-installing-docker--kubernetes" class="hash-link" aria-label="Direct link to 2. Installing Docker &amp; Kubernetes" title="Direct link to 2. Installing Docker &amp; Kubernetes" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker">Docker<a href="#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker" translate="no">​</a></h4>
<p>Before we get started with Kubernetes, we need to install <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer" class="">Docker</a>.
If you are just getting started with Docker, I found the official <a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener noreferrer" class="">quickstart guide</a> useful.
We&#x27;re going to use a public registry to push our application image to, so please <a href="https://hub.docker.com/signup" target="_blank" rel="noopener noreferrer" class="">register</a> and login to Docker through the GUI or by running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker login</span><br></span></code></pre></div></div>
<p>There seems to be some confusion online regarding the user name you should use when prompted to login.
Do not use your email!
Use the Docker ID you chose when signing up.
You can find your Docker ID in the upper right corner after logging in to <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="">Docker Hub</a>.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-6-0e05f0c7e2d267e4fa64b2789b2d3ca9.png" width="1024" height="458" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubernetes">Kubernetes<a href="#kubernetes" class="hash-link" aria-label="Direct link to Kubernetes" title="Direct link to Kubernetes" translate="no">​</a></h4>
<p>Okay now let&#x27;s install Kubernetes.
For this example, we&#x27;re just going to enable Kubernetes inside Docker.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-7-1a01abcfce3208d0c00906f8e1305be5.png" width="1024" height="845" class="img_ev3q"></p>
<p>Alternatives to docker-desktop for running a local Kubernetes cluster include:</p>
<ul>
<li class=""><a href="https://github.com/kubernetes/minikube" target="_blank" rel="noopener noreferrer" class="">minikube</a></li>
<li class=""><a href="https://github.com/kubernetes-sigs/kind" target="_blank" rel="noopener noreferrer" class="">kind</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-building-an-image">3. Building an Image<a href="#3-building-an-image" class="hash-link" aria-label="Direct link to 3. Building an Image" title="Direct link to 3. Building an Image" translate="no">​</a></h3>
<p>If you&#x27;ve got this far you should be able to run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl cluster-info</span><br></span></code></pre></div></div>
<p>and see something similar to the following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes master is running at https://kubernetes.docker.internal:6443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KubeDNS is running at https://kubernetes.docker.internal:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.</span><br></span></code></pre></div></div>
<p>So far so good.
Now let&#x27;s build a docker image for our Spring Boot app.
All we need to do is write a Docker file and run a Docker daemon, while watching out for the best-practices for Docker.
Perhaps following the first part of this <a href="https://spring.io/guides/topicals/spring-boot-docker/" target="_blank" rel="noopener noreferrer" class="">guide</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="jib">Jib<a href="#jib" class="hash-link" aria-label="Direct link to Jib" title="Direct link to Jib" translate="no">​</a></h4>
<p>Or we can just jib it. <a href="https://github.com/GoogleContainerTools/jib" target="_blank" rel="noopener noreferrer" class="">Jib</a> is a tool developed by Google that helps you build Docker images for your Java applications without a Docker daemon - and without deep mastery of Docker best-practices.
All we need to do is to add the following to our build.gradle file.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugins {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id &#x27;com.google.cloud.tools.jib&#x27; version &#x27;1.8.0&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jib.to.image = &#x27;docker_id/image_name&#x27;</span><br></span></code></pre></div></div>
<p>In this example we&#x27;re using a public docker registry but jib can be configured to upload images to a private registry.
More on that in <a href="https://github.com/GoogleContainerTools/jib/tree/master/jib-gradle-plugin#authentication-methods" target="_blank" rel="noopener noreferrer" class="">Jib&#x27;s official documentation</a>.</p>
<p>After we have configured the jib plugin, building our Docker image is as simple as running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./gradlew jib</span><br></span></code></pre></div></div>
<p>If all is well after logging in to <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer" class="">Docker Hub</a> you should see your image on top.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-8-df9a37f4de7dd4d36a83f18a48efe014.png" width="1024" height="522" class="img_ev3q"></p>
<p>The url for your image should be of the form <code>docker.io/docker_id/image_name</code></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-deploying-to-kubernetes">4. Deploying to Kubernetes<a href="#4-deploying-to-kubernetes" class="hash-link" aria-label="Direct link to 4. Deploying to Kubernetes" title="Direct link to 4. Deploying to Kubernetes" translate="no">​</a></h3>
<p>Next, let&#x27;s deploy our image to Kubernetes.
To do this, we need to write YAML configuration files, and as you can see in these tutorials from <a href="https://developer.ibm.com/tutorials/yaml-basics-and-usage-in-kubernetes/" target="_blank" rel="noopener noreferrer" class="">IBM</a> and <a href="https://www.mirantis.com/blog/introduction-to-yaml-creating-a-kubernetes-deployment/" target="_blank" rel="noopener noreferrer" class="">Mirantis</a>, writing even a basic .yaml file correctly can be a daunting task.
However, there is a very easy way to get started, which I found out at Ray Tsang&#x27;s session <a href="https://www.youtube.com/watch?v=c16oOeTfFXM" target="_blank" rel="noopener noreferrer" class="">&quot;Best Practices to Spring to Kubernetes Easier and Faster&quot;</a> at Devoxx.
Instead of doing something like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-app --image docker.io/nirvanarsc/my-app</span><br></span></code></pre></div></div>
<p>We should add the <code>--dry-run</code> option like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-app --image docker.io/nirvanarsc/my-app --dry-run -oyaml</span><br></span></code></pre></div></div>
<p>Which will print the YAML configuration necessary for a Deployment with the specified image as follows.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - image: docker.io/nirvanarsc/my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: {}</span><br></span></code></pre></div></div>
<p>The only thing I will modify here is to increase the replicas from 1 to 3. (Set the number of instances of our app to 3)<br>
<!-- -->In the exact same way, we can get an initial configuration for our service.
Running the following for example,</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create service clusterip my-app --tcp=8080:8080 --dry-run -oyaml</span><br></span></code></pre></div></div>
<p>prints this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: 8080-8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    port: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    targetPort: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type: ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loadBalancer: {}</span><br></span></code></pre></div></div>
<p>Let&#x27;s save both of these configuration to their own files.
Create a folder named &quot;k8s&quot; and execute:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-app --image docker.io/nirvanarsc/my-app --dry-run -oyaml &gt; k8s/deployment.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create service clusterip my-app --tcp=8080:8080 --dry-run -oyaml &gt; k8s/service.yaml</span><br></span></code></pre></div></div>
<p>Now deploying our app is as simple as running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f k8s</span><br></span></code></pre></div></div>
<p>To access our application we will need to allow external traffic into our Kubernetes cluster.</p>
<p>This article will not be addressing Ingress/LoadBalancer/NodePort.
Perhaps <a href="https://medium.com/google-cloud/kubernetes-nodeport-vs-loadbalancer-vs-ingress-when-should-i-use-what-922f010849e0" target="_blank" rel="noopener noreferrer" class="">this article on Medium</a> is a good overview on that subject.</p>
<p>Instead, we will just forward a local port to a port on the cluster like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward svc/my-app 8080:8080</span><br></span></code></pre></div></div>
<p>Now we can access our <code>internal/docs</code> endpoint and our <code>internal/metrics</code> endpoint at <code>http://localhost:8080</code>.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-9-72863d1657c6923548295bdf10de5dba.png" width="1024" height="753" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-10-8c715e5f0e93caec07cf919acc75c4a1.png" width="1024" height="522" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-monitoring-our-application-inside-kubernetes">5. Monitoring our application inside Kubernetes<a href="#5-monitoring-our-application-inside-kubernetes" class="hash-link" aria-label="Direct link to 5. Monitoring our application inside Kubernetes" title="Direct link to 5. Monitoring our application inside Kubernetes" translate="no">​</a></h3>
<p>Finally, we can talk about monitoring.
First a few words about Prometheus and Grafana.</p>
<p>Prometheus is a monitoring and alerting system.
It was originally built by SoundCloud in 2012, but has since been open sourced and now is part of the CNCF.
It is inspired by Google&#x27;s BorgMon - one of Google&#x27;s internal monitoring technologies used to monitor services running on Borg.
Borg is Google&#x27;s internal cluster scheduler, which in turn inspired Kubernetes.
So Prometheus and Kubernetes have both been inspired by complementary technologies inside Google.</p>
<p>Grafana is an open source analytics and monitoring system.
Prometheus and Grafana have become basically the de facto monitoring solution.
Grafana should not be confused with Kibana, which runs on top of Elasticsearch and is used to analyze log messages.
On the Shop team we also use Prometheus with Grafana as our monitoring solution.</p>
<p>It is possible to have an external instance of Prometheus discover and pull metrics from our Application inside Kubernetes, but for this example I&#x27;m going to install an instance of Prometheus and Grafana inside the cluster and have Prometheus discover our Application and scrape metrics from it.</p>
<p>To install Prometheus and Grafana in our cluster we&#x27;re going to use <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer" class="">Helm</a>.
Helm is a package manager for Kubernetes.
Think of it like npm/apt for Kubernetes.
Check out the <a href="https://helm.sh/docs/intro/quickstart/" target="_blank" rel="noopener noreferrer" class="">official documentation on getting started</a> if you have the time, but for this example, all the configuration we&#x27;re going to need is:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ brew install helm</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo add stable https://kubernetes-charts.storage.googleapis.com/</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-prometheus">Installing Prometheus<a href="#installing-prometheus" class="hash-link" aria-label="Direct link to Installing Prometheus" title="Direct link to Installing Prometheus" translate="no">​</a></h4>
<p>We can install Prometheus in our cluster by running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm install my-prometheus stable/prometheus</span><br></span></code></pre></div></div>
<p>Which should output something like:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: my-prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Thu Dec  5 15:29:58 2019</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST SUITE: None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Prometheus server can be accessed via port 80 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-prometheus-server.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get the Prometheus server URL by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export POD_NAME=$(kubectl get pods --namespace default -l &quot;app=prometheus,component=server&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9090</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Prometheus alertmanager can be accessed via port 80 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-prometheus-alertmanager.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get the Alertmanager URL by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export POD_NAME=$(kubectl get pods --namespace default -l &quot;app=prometheus,component=alertmanager&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9093</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The Prometheus PushGateway can be accessed via port 9091 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-prometheus-pushgateway.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get the PushGateway URL by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export POD_NAME=$(kubectl get pods --namespace default -l &quot;app=prometheus,component=pushgateway&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9091</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For more information on running Prometheus, visit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://prometheus.io/</span><br></span></code></pre></div></div>
<p>Now if we also run:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ export POD_NAME=$(kubectl get pods --namespace default -l &quot;app=prometheus,component=server&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kubectl --namespace default port-forward $POD_NAME 9090</span><br></span></code></pre></div></div>
<p>We should be able to access the Prometheus server at <code>localhost:9090</code></p>
<p>But if we navigate to status/targets, we will see that Prometheus fails to discover our application.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-11-3177aada7f7d631978ce2302a70b6277.png" width="1024" height="646" class="img_ev3q"></p>
<p>There&#x27;s two ways to fix this.
First we can use an <a href="https://github.com/helm/charts/blob/master/stable/prometheus/values.yaml#L1316" target="_blank" rel="noopener noreferrer" class="">additional argument</a> when installing the Prometheus chart through Helm -<br>
<!-- -->We can create a file <code>extraScrapeConfigs.yaml</code> with the following settings</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">extraScrapeConfigs: |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;armeria-metrics&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scrape_interval: 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics_path: /internal/metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes_sd_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - role: endpoints</span><br></span></code></pre></div></div>
<p>And then we need to update our Prometheus chart config by running:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade --install my-prometheus --set-file extraScrapeConfigs=prometheus/extraScrapeConfigs.yaml stable/prometheus</span><br></span></code></pre></div></div>
<p>However I suggest we modify our <code>deployment.yaml</code> file by adding the following config allowing Prometheus to pull metrics from our app:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spec.template.metadata.annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus.io/scrape: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus.io/port: &quot;8080&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus.io/path: /internal/metrics</span><br></span></code></pre></div></div>
<p>So our <code>deployment.yaml</code> file should look like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  strategy: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      annotations:                               ### here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prometheus.io/scrape: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prometheus.io/port: &quot;8080&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prometheus.io/path: /internal/metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - image: docker.io/nirvanarsc/my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name: my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status: {}</span><br></span></code></pre></div></div>
<p>And we need to re-deploy our app with the updated configuration:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete deploy/my-app svc/my-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply -f k8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl port-forward svc/my-app 8080:8080</span><br></span></code></pre></div></div>
<p>If we navigate to status/targets now, we should see the 3 pods of our application.
We should also be able to query our metrics.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-12-a952350f9bf8708b17939060074def86.png" width="1024" height="665" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-13-382dd088b3f97b0c8f38724aa7d7c150.png" width="1024" height="396" class="img_ev3q"></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-grafana">Installing Grafana<a href="#installing-grafana" class="hash-link" aria-label="Direct link to Installing Grafana" title="Direct link to Installing Grafana" translate="no">​</a></h4>
<p>Lastly, we can install Grafana and visualize our metrics.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm install my-grafana stable/grafana</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME: my-grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LAST DEPLOYED: Thu Dec  5 16:03:33 2019</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTES:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Get your &#x27;admin&#x27; user password by running:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   kubectl get secret --namespace default my-grafana -o jsonpath=&quot;{.data.admin-password}&quot; | base64 --decode ; echo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   my-grafana.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Get the Grafana URL to visit by running these commands in the same shell:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     export POD_NAME=$(kubectl get pods --namespace default -l &quot;app=grafana,release=my-grafana&quot; -o jsonpath=&quot;{.items[0].metadata.name}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     kubectl --namespace default port-forward $POD_NAME 3000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Login with the password from step 1 and the username: admin</span><br></span></code></pre></div></div>
<p>Following the instructions above we should be able to log in to Grafana at <code>localhost:3000</code>.
Then we can add Prometheus as a data source and create a dashboard with our applications metrics.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-14-20c6d4e2bf109eed0aeac970ff02e6f7.png" width="1024" height="723" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019-15-aeb013ee4a1911f79afdcc680a01e887.png" width="1024" height="317" class="img_ev3q"></p>
<p>And that&#x27;s it!
We have successfully used Prometheus and Grafana to build a dashboard visualizing our app&#x27;s metrics.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>Getting started with Kubernetes can be quite challenging.
I think there are 3 main reasons for that:</p>
<ul>
<li class="">Writing a good YAML file is difficult</li>
<li class="">Knowledge of networking is required</li>
<li class="">There are a lot of small interconnected components such as Docker, Pods, Services, and ReplicaSets</li>
</ul>
<p>I hope this blog post will make it a little easier for you to begin development on Kubernetes.</p>
<p>Happy coding!</p>
<hr>
<p>A list of the Devoxx sessions about Kubernetes I found most useful:</p>
<ul>
<li class=""><a href="https://www.youtube.com/watch?v=c16oOeTfFXM" target="_blank" rel="noopener noreferrer" class="">Best Practices to Spring to Kubernetes Easier and Faster by Ray Tsang - YouTube</a></li>
<li class=""><a href="https://www.youtube.com/watch?v=YYJ4RZFw4j8" target="_blank" rel="noopener noreferrer" class="">Develop and Deploy to Kubernetes like a Googler by David Gageot - YouTube</a></li>
<li class=""><a href="https://www.youtube.com/watch?v=YiXf4Pqyl0A" target="_blank" rel="noopener noreferrer" class="">Helm your way with Kubernetes by Ana Maria Mihalceanu - YouTube</a></li>
<li class=""><a href="https://www.youtube.com/watch?v=dId543PzSsU" target="_blank" rel="noopener noreferrer" class="">Crash course in Kubernetes monitoring by Robert Munteanu - YouTube</a></li>
</ul></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/line/armeria/edit/main/site/src/content/blog/en/2019-12-23-monitoring-a-spring-boot-app-in-kubernetes-what-i-learned-from-devoxx-belgium-2019.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2020/05/06/reactive-streams-armeria-1"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Let&#x27;s Play with Reactive Streams on Armeria - Part 1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2019/05/14/armeria-sprint-1"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Make your GitHub contributions calendar greener (featuring Armeria Sprint)!</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#monitoring-example---spring-boot-application-in-kubernetes" class="table-of-contents__link toc-highlight">Monitoring Example - Spring Boot application in Kubernetes</a><ul><li><a href="#1-preparing-a-spring-boot-application" class="table-of-contents__link toc-highlight">1. Preparing a Spring Boot application</a></li><li><a href="#2-installing-docker--kubernetes" class="table-of-contents__link toc-highlight">2. Installing Docker &amp; Kubernetes</a></li><li><a href="#3-building-an-image" class="table-of-contents__link toc-highlight">3. Building an Image</a></li><li><a href="#4-deploying-to-kubernetes" class="table-of-contents__link toc-highlight">4. Deploying to Kubernetes</a></li><li><a href="#5-monitoring-our-application-inside-kubernetes" class="table-of-contents__link toc-highlight">5. Monitoring our application inside Kubernetes</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container--fluid"><div class="row"><div class="newsletterForm_kJQ8 col"><p>Sign up for our newsletters:</p><span class="ant-input-group-wrapper ant-input-group-wrapper-outlined css-198drv2 ant-input-search ant-input-search-with-button signUpForm_fXdf"><span class="ant-input-wrapper ant-input-group css-198drv2"><span class="ant-input-affix-wrapper css-198drv2 ant-input-outlined"><span class="ant-input-prefix"><span role="img" aria-label="mail" class="anticon anticon-mail"><svg viewBox="64 64 896 896" focusable="false" data-icon="mail" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"></path></svg></span></span><input type="search" placeholder="Your e-mail" required="" aria-required="true" class="ant-input css-198drv2" value=""></span><span class="ant-input-group-addon"><button title="Sign up for our newsletters" type="button" class="ant-btn css-198drv2 ant-btn-default ant-btn-color-default ant-btn-variant-outlined ant-input-search-button"><span>Subscribe</span></button></span></span></span></div><div class="copyright_C6JK col"><div>© 2015-<!-- -->2025<!-- -->, LY Corporation<br><br><a href="https://terms.line.me/line_rules?lang=en" target="_blank" rel="noopener noreferrer">Privacy policy</a></div><div><span role="img" aria-label="Armeria project logo" aria-hidden="false"><svg class="" style="width:4rem;overflow:hidden;vertical-align:middle" viewBox="20 70 70 70" version="1.1"><title>Armeria project logo</title><g id="layer1" transform="translate(0,-87)"><g id="g4208" transform="matrix(1.3217499,0,0,1.3217499,-49.437761,-33.946772)"><g transform="matrix(0.35277777,0,0,-0.35277777,80.962517,162.47851)" id="g46"><path id="path48" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 -20.785,-12 V -36 L 0,-48 20.785,-36 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,162.47851)" id="g50"><path id="path52" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 V 24 L -20.785,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,170.94517)" id="g54"><path id="path56" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 V 24 L -20.784,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,192.11184)" id="g58"><path id="path60" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="M 0,0 V 24 L -20.785,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,154.01184)" id="g62"><path id="path64" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="m 0,0 v -24 l 20.785,12 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,162.47851)" id="g66"><path id="path68" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="m 0,0 v -24 l 20.785,12 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,73.630137,183.64517)" id="g70"><path id="path72" class="secondary_XIgw" style="fill:rgba(255, 255, 255, 0.55)" d="m 0,0 v -24 l 20.785,12 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,73.630137,149.77851)" id="g74"><path id="path76" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 -20.785,-12 0,-24 20.785,-12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,154.01184)" id="g78"><path id="path80" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 -20.785,12 -41.569,0 -20.785,-12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,166.71184)" id="g82"><path id="path84" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="m 0,0 v 0 -24 l 20.785,12 V 12 L 0,24 -20.785,12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,73.630137,166.71184)" id="g86"><path id="path88" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 20.785,12 0,24 -20.785,12 V -12 L 0,-24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,192.11184)" id="g90"><path id="path92" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 20.785,12 V 36 L 0,24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,170.94517)" id="g94"><path id="path96" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="m 0,0 v -24 l 20.785,12 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,187.8785)" id="g98"><path id="path100" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 20.785,-12 V 12 L 0,24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,58.965587,166.71184)" id="g102"><path id="path104" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="m 0,0 v -24 l 20.784,-12 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,80.962517,179.41184)" id="g106"><path id="path108" class="primary_UCAP" style="fill:rgba(255, 255, 255, 1.0)" d="M 0,0 -20.785,12 V -12 L 0,-24 20.785,-12 v 24 z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,88.294897,158.24517)" id="g110"><path id="path112" class="tertiary_B5zC" style="fill:transparent" d="M 0,0 -20.785,12 -41.569,0 -20.785,-12 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,95.627238,170.94517)" id="g114"><path id="path116" class="tertiary_B5zC" style="fill:transparent" d="M 0,0 -20.785,-12 V -36 L 0,-24 Z"></path></g><g transform="matrix(0.35277777,0,0,-0.35277777,66.297787,170.94517)" id="g118"><path id="path120" class="tertiary_B5zC" style="fill:transparent" d="M 0,0 20.785,-12 V -36 L 0,-24 Z"></path></g></g></g></svg></span></div></div></div></div></footer><div id="starBegging_pb0B" class="off_vUOf"><p>Like Armeria?<br>Star us ⭐️</p><span role="button" tabindex="0" class="close_CaW0">×</span> <iframe id="starFrame" class="githubStar" title="github-stars" src="https://ghbtns.com/github-btn.html?user=line&amp;repo=armeria&amp;type=star&amp;count=true&amp;size=large" width="150px" height="30px"></iframe></div></div>
</body>
</html>