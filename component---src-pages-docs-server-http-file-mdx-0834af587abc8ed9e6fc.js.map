{"version":3,"file":"component---src-pages-docs-server-http-file-mdx-0834af587abc8ed9e6fc.js","mappings":"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","sources":["webpack://armeria-site/./src/pages/docs/server-http-file.mdx","webpack://armeria-site/./src/layouts/docs.tsx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/armeria/armeria/site/src/layouts/docs.tsx\";\nexport const pageTitle = \"Serving static files\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst Tip = makeShortcode(\"Tip\");\nconst layoutProps = {\n  pageTitle,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"serving-static-files\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#serving-static-files\",\n        \"aria-label\": \"serving static files permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Serving static files`}</h1>\n    <h6 {...{\n      \"className\": \"inlinePageToc\",\n      \"role\": \"navigation\"\n    }}>{`Table of contents`}</h6>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#auto-generating-directory-listings\"\n        }}>{`Auto-generating directory listings`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#specifying-additional-response-headers\"\n        }}>{`Specifying additional response headers`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#adjusting-static-file-cache\"\n        }}>{`Adjusting static file cache`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#serving-pre-compressed-files\"\n        }}>{`Serving pre-compressed files`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#serving-an-individual-file\"\n        }}>{`Serving an individual file`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#configuring-httpfile\"\n        }}>{`Configuring HttpFile`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#caching-httpfile\"\n        }}>{`Caching HttpFile`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#aggregating-httpfile\"\n        }}>{`Aggregating HttpFile`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#building-aggregatedhttpfile-from-httpdata\"\n        }}>{`Building AggregatedHttpFile from HttpData`}</a></li>\n    </ul>\n    <Tip mdxType=\"Tip\">\n      <p>{`Visit `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/line/armeria-examples\"\n        }}>{`armeria-examples`}</a>{` to find a fully working example.`}</p>\n    </Tip>\n    <p>{`Use `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` to serve static files under a certain directory. `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` supports\n`}<inlineCode parentName=\"p\">{`GET`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`HEAD`}</inlineCode>{` HTTP methods and will auto-fill `}<inlineCode parentName=\"p\">{`Date`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`Last-Modified`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`ETag`}</inlineCode>{` and auto-detected\n`}<inlineCode parentName=\"p\">{`Content-Type`}</inlineCode>{` headers for you. It is also capable of sending a `}<inlineCode parentName=\"p\">{`304 Not Modified`}</inlineCode>{` response based on\n`}<inlineCode parentName=\"p\">{`If-None-Match`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`If-Modified-Since`}</inlineCode>{` header values.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.server.ServerBuilder;\nimport com.linecorp.armeria.server.file.FileService;\n\nServerBuilder sb = Server.builder();\nsb.serviceUnder(\"/images/\",\n                FileService.of(Paths.get(\"/var/lib/www/images\"));\n\n// You can also serve the resources in the class path.\nsb.serviceUnder(\"/resources\",\n                FileService.of(ClassLoader.getSystemClassLoader(),\n                               \"/com/example/resources\"));\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"auto-generating-directory-listings\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#auto-generating-directory-listings\",\n        \"aria-label\": \"auto generating directory listings permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Auto-generating directory listings`}</h2>\n    <p>{`You can configure `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` to generate the directory listing of the directories without\nan `}<inlineCode parentName=\"p\">{`index.html`}</inlineCode>{` file using the `}<inlineCode parentName=\"p\">{`autoIndex(boolean)`}</inlineCode>{` method in `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileServiceBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileServiceBuilder.html\"\n      }}>{`type://FileServiceBuilder`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.server.file.FileServiceBuilder;\n\nFileServiceBuilder fsb =\n        FileService.builder(Paths.get(\"/var/lib/www/images\"));\n\n// Enable auto-index.\nfsb.autoIndex(true);\nFileService fs = fsb.build();\n`}</code></pre>\n    <Tip mdxType=\"Tip\">\n      <p>{`Be careful when you enable this feature in production environment; consider its security implications.`}</p>\n    </Tip>\n    <h2 {...{\n      \"id\": \"specifying-additional-response-headers\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#specifying-additional-response-headers\",\n        \"aria-label\": \"specifying additional response headers permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Specifying additional response headers`}</h2>\n    <p>{`You can specify additional response headers such as `}<inlineCode parentName=\"p\">{`cache-control`}</inlineCode>{` and other custom headers.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.common.ServerCacheControl;\nimport com.linecorp.armeria.common.ServerCacheControlBuilder;\n\nFileServiceBuilder fsb =\n        FileService.builder(Paths.get(\"/var/lib/www/images\"));\n\n// Specify cache control directives.\nServerCacheControl cc = ServerCacheControl.builder()\n                                          .maxAgeSeconds(86400)\n                                          .cachePublic()\n                                          .build();\nfsb.cacheControl(cc /* \"max-age=86400, public\" */);\n// Specify a custom header.\n\nfsb.setHeader(\"foo\", \"bar\");\nFileService fs = fsb.build();\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"adjusting-static-file-cache\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#adjusting-static-file-cache\",\n        \"aria-label\": \"adjusting static file cache permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Adjusting static file cache`}</h2>\n    <p>{`By default, `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` caches up to 1024 files whose length is less than or equal to\n65,536 bytes. You can customize this behavior using `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileServiceBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileServiceBuilder.html\"\n      }}>{`type://FileServiceBuilder`}</a>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`FileServiceBuilder fsb =\n        FileService.builder(Paths.get(\"/var/lib/www/images\"));\n\n// Cache up to 4096 files.\nfsb.entryCacheSpec(\"maximumSize=4096\");\n// Cache files whose length is less than or equal to 1 MiB.\nfsb.maxCacheEntrySizeBytes(1048576);\n\nFileService fs = fsb.build();\n`}</code></pre>\n    <p>{`The cache can be disabled by specifying `}<inlineCode parentName=\"p\">{`0`}</inlineCode>{` for `}<inlineCode parentName=\"p\">{`maxCacheEntries()`}</inlineCode>{`.\nYou can also specify a custom cache specification using `}<inlineCode parentName=\"p\">{`entryCacheSpec()`}</inlineCode>{`,\nas defined in `}<a parentName=\"p\" {...{\n        \"href\": \"https://static.javadoc.io/com.github.ben-manes.caffeine/caffeine/2.8.0/com/github/benmanes/caffeine/cache/CaffeineSpec.html\"\n      }}>{`Caffeine documentation`}</a>{`.\nOr, you can override the default cache specification of `}<inlineCode parentName=\"p\">{`maximumSize=1024`}</inlineCode>{` using\nthe JVM property `}<inlineCode parentName=\"p\">{`-Dcom.linecorp.armeria.fileServiceCache=<spec>`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"serving-pre-compressed-files\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#serving-pre-compressed-files\",\n        \"aria-label\": \"serving pre compressed files permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Serving pre-compressed files`}</h2>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` can be configured to serve a pre-compressed file based on the value of the\n`}<inlineCode parentName=\"p\">{`Accept-Encoding`}</inlineCode>{` header. For example, if a client sent the following HTTP request:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`GET /index.html HTTP/1.1\nHost: example.com\nAccept-Encoding: gzip, identity\n`}</code></pre>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` could look for `}<inlineCode parentName=\"p\">{`/index.html.gz`}</inlineCode>{` first and send the following response with the\n`}<inlineCode parentName=\"p\">{`Content-Encoding: gzip`}</inlineCode>{` header if it exists:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 200 OK\nHost: example.com\nContent-Encoding: gzip\nContent-Type: text/html\n...\n\n<compressed content>\n`}</code></pre>\n    <p>{`If `}<inlineCode parentName=\"p\">{`/index.html.gz`}</inlineCode>{` does not exist but `}<inlineCode parentName=\"p\">{`/index.html`}</inlineCode>{` does, it would fall back on serving the uncompressed\ncontent:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 200 OK\nHost: example.com\nContent-Type: text/html\n...\n\n<uncompressed content>\n`}</code></pre>\n    <p>{`This behavior is enabled by calling `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileServiceBuilder#serveCompressedFiles(boolean):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileServiceBuilder.html#serveCompressedFiles(boolean)\"\n      }}>{`type://FileServiceBuilder#serveCompressedFiles(boolean)`}</a>{` with `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`.\n`}<inlineCode parentName=\"p\">{`.gz`}</inlineCode>{` (gzip) and `}<inlineCode parentName=\"p\">{`.br`}</inlineCode>{` (Brotli) files are supported currently.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`FileServiceBuilder fsb =\n        FileService.builder(ClassLoader.getSystemClassLoader(),\n                            \"/com/example/resources\");\n\n// Enable serving pre-compressed files.\nfsb.serveCompressedFiles(true);\n\nFileService fs = fsb.build();\n`}</code></pre>\n    <p>{`If you set `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileServiceBuilder#autoDecompress(boolean):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileServiceBuilder.html#autoDecompress(boolean)\"\n      }}>{`type://FileServiceBuilder#autoDecompress(boolean)`}</a>{` to `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`, the `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` automatically\ndecompresses the pre-compressed file when a client does not send an `}<inlineCode parentName=\"p\">{`Accept-Encoding`}</inlineCode>{` header.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`FileServiceBuilder fsb = ...\nfsb.serveCompressedFiles(true);\nfsb.autoDecompress(true);\n\nFileService fs = fsb.build();\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"serving-an-individual-file\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#serving-an-individual-file\",\n        \"aria-label\": \"serving an individual file permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Serving an individual file`}</h2>\n    <p>{`You can also serve an individual file using `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{`. Like `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{` does, `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{`\nsupports `}<inlineCode parentName=\"p\">{`GET`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`HEAD`}</inlineCode>{` HTTP methods and will auto-fill `}<inlineCode parentName=\"p\">{`Date`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`Last-Modified`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`ETag`}</inlineCode>{` and\nauto-detected `}<inlineCode parentName=\"p\">{`Content-Type`}</inlineCode>{` headers for you. It is also capable of sending a `}<inlineCode parentName=\"p\">{`304 Not Modified`}</inlineCode>{` response\nbased on `}<inlineCode parentName=\"p\">{`If-None-Match`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`If-Modified-Since`}</inlineCode>{` header values.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.server.file.HttpFile;\n\nHttpFile favicon = HttpFile.of(Paths.get(\"/var/lib/www/favicon.ico\"));\nServerBuilder sb = Server.builder();\n\n// Serve the favicon.ico file by converting an HttpFile into a service.\nsb.service(\"/favicon.ico\", favicon.asService());\n`}</code></pre>\n    <p>{`For instance, it is possible to serve the same file (e.g. `}<inlineCode parentName=\"p\">{`index.html`}</inlineCode>{`) for all requests under a certain\npath, which is useful when serving a frontend application with client-side routing.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`HttpFile index = HttpFile.of(Paths.get(\"/var/lib/www/index.html\"));\n\nServerBuilder sb = Server.builder();\n// Register the file service for assets.\nsb.serviceUnder(\"/node_modules\",\n                FileService.of(Paths.get(\"/var/lib/www/node_modules\")));\nsb.serviceUnder(\"/static\",\n                FileService.of(Paths.get(\"/var/lib/www/static\")));\n// Register the fallback file service.\nsb.serviceUnder(\"/\", index.asService());\n`}</code></pre>\n    <p>{`You can also achieve the same behavior using `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/server-annotated-service\"\n      }}>{`Annotated services`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`// Register the fallback file service.\nsb.annotatedService(new Object() {\n    final HttpFile index = HttpFile.of(Paths.get(\"/var/lib/www/index.html\"));\n    @Get\n    @Head\n    @Path(\"glob:/**\")\n    public HttpResponse getIndex(ServiceRequestContext ctx, HttpRequest req) {\n        return index.asService().serve(ctx, req);\n    }\n});\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"configuring-httpfile\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#configuring-httpfile\",\n        \"aria-label\": \"configuring httpfile permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Configuring `}<inlineCode parentName=\"h2\">{`HttpFile`}</inlineCode></h2>\n    <p>{`An `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` can be configured to send different headers than the auto-filled ones using\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFileBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFileBuilder.html\"\n      }}>{`type://HttpFileBuilder`}</a>{`. For example, you can:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Disable auto-generation of `}<inlineCode parentName=\"li\">{`Date`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`Last-Modified`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`Content-Type`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`ETag`}</inlineCode>{` header.`}</li>\n      <li parentName=\"ul\">{`Customize how `}<inlineCode parentName=\"li\">{`ETag`}</inlineCode>{` is calculated from metadata.`}</li>\n      <li parentName=\"ul\">{`Add or set additional custom HTTP headers.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import com.linecorp.armeria.server.file.HttpFile;\nimport com.linecorp.armeria.server.file.HttpFileBuilder;\n\nHttpFileBuilder fb = HttpFile.builder(Paths.get(\"/var/lib/www/index.html\"));\n// Disable the 'Date' header.\nfb.date(false);\n// Disable the 'Last-Modified' header.\nfb.lastModified(false);\n// Disable the 'ETag' header.\nfb.entityTag(false);\n// Disable the 'Content-Type' header.\nfb.autoDetectContentType(false);\n// Set the 'Content-Type' header manually.\nfb.contentType(\"text/html; charset=EUC-KR\");\n// Set the 'Cache-Control' header.\nfb.cacheControl(ServerCacheControl.REVALIDATED /* \"no-cache\" */);\n// Set a custom header.\nfb.setHeader(\"x-powered-by\", \"Armeria\");\nHttpFile f = fb.build();\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"caching-httpfile\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#caching-httpfile\",\n        \"aria-label\": \"caching httpfile permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Caching `}<inlineCode parentName=\"h2\">{`HttpFile`}</inlineCode></h2>\n    <p>{`Unlike `}<a parentName=\"p\" {...{\n        \"href\": \"type://FileService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/FileService.html\"\n      }}>{`type://FileService`}</a>{`, `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` does not cache the file content.\nUse `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile#ofCached(HttpFile,int):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html#ofCached(com.linecorp.armeria.server.file.HttpFile,int)\"\n      }}>{`type://HttpFile#ofCached(HttpFile,int)`}</a>{` to enable content caching for an existing `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`HttpFile uncachedFile = HttpFile.of(Paths.get(\"/var/lib/www/index.html\"));\nHttpFile cachedFile = HttpFile.ofCached(uncachedFile, 65536);\n`}</code></pre>\n    <p>{`Note that you need to specify the maximum allowed length of the cached content. In the above example, the file\nwill not be cached if the length of the file exceeds 65,536 bytes.`}</p>\n    <h2 {...{\n      \"id\": \"aggregating-httpfile\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#aggregating-httpfile\",\n        \"aria-label\": \"aggregating httpfile permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Aggregating `}<inlineCode parentName=\"h2\">{`HttpFile`}</inlineCode></h2>\n    <p>{`An `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` usually does not store its content in memory but reads its content on demand, allowing you\nto stream a potentially very large file. If you want to ensure the content of the file is kept in memory so\nthat file I/O does not occur on each retrieval, you can use the `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile#aggregate(Executor):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html#aggregate(java.util.concurrent.Executor)\"\n      }}>{`type://HttpFile#aggregate(Executor)`}</a>{` method:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`// You need to prepare an Executor which will be used for reading the file,\n// because file I/O is often a blocking operation.\nExecutor ioExecutor = ...;\n\nHttpFile file = HttpFile.of(Paths.get(\"/var/lib/www/img/logo.png\");\nCompletableFuture<AggregatedHttpFile> future = file.aggregate(ioExecutor);\nAggregatedHttpFile aggregated = future.join();\n\n// The content of the file can now be retrieved from memory.\nHttpData content = aggregated.content();\n`}</code></pre>\n    <p>{`Note that an aggregated `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` is not linked in any way from the `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` it was aggregated\nfrom, which means the content and attributes of the aggregated `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` does not change when the original\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html\"\n      }}>{`type://HttpFile`}</a>{` changes. Use `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile#ofCached(HttpFile,int):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html#ofCached(com.linecorp.armeria.server.file.HttpFile,int)\"\n      }}>{`type://HttpFile#ofCached(HttpFile,int)`}</a>{` instead if such behavior is necessary.`}</p>\n    <h2 {...{\n      \"id\": \"building-aggregatedhttpfile-from-httpdata\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#building-aggregatedhttpfile-from-httpdata\",\n        \"aria-label\": \"building aggregatedhttpfile from httpdata permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Building `}<inlineCode parentName=\"h2\">{`AggregatedHttpFile`}</inlineCode>{` from `}<inlineCode parentName=\"h2\">{`HttpData`}</inlineCode></h2>\n    <p>{`The content you need to serve is not always from an external resource but sometimes from memory, such as\n`}<inlineCode parentName=\"p\">{`byte[]`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`String`}</inlineCode>{`. Use `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile#of(HttpData):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html#of(com.linecorp.armeria.common.HttpData)\"\n      }}>{`type://HttpFile#of(HttpData)`}</a>{` or `}<a parentName=\"p\" {...{\n        \"href\": \"type://HttpFile#builder(HttpData):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/HttpFile.html#builder(com.linecorp.armeria.common.HttpData)\"\n      }}>{`type://HttpFile#builder(HttpData)`}</a>{` to build an\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://AggregatedHttpFile:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/file/AggregatedHttpFile.html\"\n      }}>{`type://AggregatedHttpFile`}</a>{` from an in-memory resource:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`// Build from a byte array.\nAggregatedHttpFile f1 = AggregatedHttpFile.of(HttpData.of(new byte[] { 1, 2, 3, 4 }));\n\n// Build from a String.\nAggregatedHttpFile f2 = AggregatedHttpFile.of(HttpData.ofUtf8(\"Hello, world!\"));\n\n// Build using a builder.\nAggregatedHttpFile f3 =\n    AggregatedHttpFile.builder(HttpData.ofAscii(\"Armeria\"))\n                      .lastModified(false)\n                      .build();\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { RouteComponentProps } from '@reach/router';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport React from 'react';\n\nimport docsIndex from '../pages/docs/toc.json';\nimport MdxLayout from './mdx';\n\ninterface DocsLayoutProps extends RouteComponentProps {\n  pageContext: any;\n  pageTitle: string;\n}\n\nconst DocsLayout: React.FC<DocsLayoutProps> = (props) => {\n  const {\n    allMdx: { nodes: candidateMdxNodes },\n  } = useStaticQuery(graphql`\n    query {\n      allMdx(filter: { fileAbsolutePath: { glob: \"**/src/pages/docs/**\" } }) {\n        nodes {\n          tableOfContents(maxDepth: 1)\n          excerpt(pruneLength: 256, truncate: true)\n          parent {\n            ... on File {\n              sourceInstanceName\n              name\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <MdxLayout\n      {...props}\n      candidateMdxNodes={candidateMdxNodes}\n      index={docsIndex}\n      prefix=\"docs\"\n      pageTitleSuffix=\"Armeria documentation\"\n    />\n  );\n};\n\nexport default DocsLayout;\n"],"names":["name","pageTitle","_frontmatter","Tip","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent","candidateMdxNodes","useStaticQuery","allMdx","nodes","index","docsIndex","prefix","pageTitleSuffix"],"sourceRoot":""}